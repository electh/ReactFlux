var Wl=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{a as se,g as ql,b as Yl,u as Z,c as Ee,r as S,d as Zn,i as Xl,o as Gl,e as ge,f as Xe,M as K,j as a,h as Kt,k as Xs,l as rn,m as X,A as Ja,I as Ql,T as z,S as Ar,n as Kl,p as Zl,q as Gs,s as Jl,C as Yi,t as ec,B as fe,v as tc,D as nc,w as Or,x as Vn,y as eo,z as rc,E as sc,F as ic,G as Xi,H as to,J as ac,K as oc,L as no,N as lc,O as cc,P as uc,Q as qe,R as Ct,U as Gi,V as pe,W as Un,X as Le,Y as vn,Z as Qi,_ as ro,$ as me,a0 as Es,a1 as so,a2 as dc,a3 as hc,a4 as fn,a5 as fc,a6 as mc,a7 as pc,a8 as gc,a9 as vc,aa as yc,ab as bc,ac as ae,ad as Qs,ae as xc,af as io,ag as ao,ah as Ks,ai as wc,aj as Sc,ak as Ec,al as Cc,am as Tc,an as jc,ao as Pr,ap as Mc,aq as _c,ar as kc,as as Ic,at as Ki,au as oo,av as Ac,aw as Oc,ax as Pc,ay as Rc,az as Zi,aA as Fc,aB as Nc,aC as lo,aD as Dc,aE as Lc,aF as $c,aG as zc,aH as Vc}from"./vendor-BOz7M-eQ.js";var ap=Wl((cp,er)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();const co=(e,t)=>{const r=se((()=>{const s=localStorage.getItem(e);return s!==null?JSON.parse(s):t})());return se(s=>s(r),(s,i,o)=>{const l=typeof o=="function"?o(s(r)):o;i(r,l),localStorage.setItem(e,JSON.stringify(l))})},Zs={articleWidth:90,fontSize:1.05,homePage:"all",layout:"large",markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,removeDuplicates:"none",showAllFeeds:!1,showDetailedRelativeTime:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},ut=e=>(JSON.parse(localStorage.getItem("config"))??{})[e]??Zs[e],xe=co("config",Zs),Cs={Red:{light:"#F53F3F",dark:"#F76965"},Orange:{light:"#F77234",dark:"#F9925A"},Green:{light:"#00B42A",dark:"#27C346"},Blue:{light:"#165DFF",dark:"#3C7EFF"},Purple:{light:"#722ED1",dark:"#8E51DA"},Gold:{light:"#F7BA1E",dark:"#F9CC44"},Cyan:{light:"#14C9C9",dark:"#3FD4CF"},Magenta:{light:"#F5319D",dark:"#F756A9"}},Ts=e=>{const t=Cs[e]||Cs.Blue,n=window.matchMedia("(prefers-color-scheme: dark)").matches,r=ut("theme");return(r==="system"?n:r==="dark")?t.dark:t.light},Js=e=>{ql(Ts(e),{list:!0}).map(Yl).forEach((n,r)=>{document.body.style.setProperty(`--primary-${r+1}`,n)})},ei=co("auth",{server:"",token:"",username:"",password:""}),Br=()=>{const e=Z(xe);return{updateConfig:n=>{e(r=>({...r,...n}))}}},Uc=se(!1),Bc=se(!1),ti=()=>{const[e,t]=Ee(Uc),[n,r]=Ee(Bc);return{addFeedModalVisible:e,setAddFeedModalVisible:t,settingsModalVisible:n,setSettingsModalVisible:r}},Jn=()=>{const[e,t]=S.useState(window.innerWidth),n=e<=768,r=e<=992;return S.useEffect(()=>{const s=()=>t(window.innerWidth);return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]),{screenWidth:e,belowMd:n,belowLg:r}};var uo={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var i="",o=0;o<arguments.length;o++){var l=arguments[o];l&&(i=s(i,r(l)))}return i}function r(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return n.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var l in i)t.call(i,l)&&i[l]&&(o=s(o,l));return o}function s(i,o){return o?i?i+" "+o:i+o:i}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(uo);var Hc=uo.exports;const Hr=Zn(Hc);var ho={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Wc=Symbol((ho?"production":void 0)!=="production"?"RESET":"");function fo(e){const t=Symbol(),n=se(t);(ho?"production":void 0)!=="production"&&(n.debugPrivate=!0);const r=se((s,i)=>{const o=s(n);return o!==t?o:e(s,i)},(s,i,o)=>{if(o===Wc)i(n,t);else if(typeof o=="function"){const l=s(r);i(n,o(l))}else i(n,o)});return r}const qc=Symbol(),Ji=Object.getPrototypeOf,js=new WeakMap,Yc=e=>e&&(js.has(e)?js.get(e):Ji(e)===Object.prototype||Ji(e)===Array.prototype),Xc=e=>Yc(e)&&e[qc]||null,ea=(e,t=!0)=>{js.set(e,t)};var Rr={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const ni=e=>typeof e=="object"&&e!==null,Gc=e=>ni(e)&&!ri.has(e)&&(Array.isArray(e)||!(Symbol.iterator in e))&&!(e instanceof WeakMap)&&!(e instanceof WeakSet)&&!(e instanceof Error)&&!(e instanceof Number)&&!(e instanceof Date)&&!(e instanceof String)&&!(e instanceof RegExp)&&!(e instanceof ArrayBuffer)&&!(e instanceof Promise),Qc=(e,t)=>{const n=ta.get(e);if((n==null?void 0:n[0])===t)return n[1];const r=Array.isArray(e)?[]:Object.create(Object.getPrototypeOf(e));return ea(r,!0),ta.set(e,[t,r]),Reflect.ownKeys(e).forEach(s=>{if(Object.getOwnPropertyDescriptor(r,s))return;const i=Reflect.get(e,s),{enumerable:o}=Reflect.getOwnPropertyDescriptor(e,s),l={value:i,enumerable:o,configurable:!0};if(ri.has(i))ea(i,!1);else if(tn.has(i)){const[c,u]=tn.get(i);l.value=mo(c,u())}Object.defineProperty(r,s,l)}),Object.preventExtensions(r)},Kc=(e,t,n,r)=>({deleteProperty(s,i){const o=Reflect.get(s,i);n(i);const l=Reflect.deleteProperty(s,i);return l&&r(["delete",[i],o]),l},set(s,i,o,l){const c=!e()&&Reflect.has(s,i),u=Reflect.get(s,i,l);if(c&&(na(u,o)||Fr.has(o)&&na(u,Fr.get(o))))return!0;n(i),ni(o)&&(o=Xc(o)||o);const d=!tn.has(o)&&Jc(o)?si(o):o;return t(i,d),Reflect.set(s,i,d,l),r(["set",[i],o,u]),!0}}),tn=new WeakMap,ri=new WeakSet,ta=new WeakMap,hr=[1,1],Fr=new WeakMap;let na=Object.is,Zc=(e,t)=>new Proxy(e,t),Jc=Gc,mo=Qc,eu=Kc;function si(e={}){if(!ni(e))throw new Error("object required");const t=Fr.get(e);if(t)return t;let n=hr[0];const r=new Set,s=(m,x=++hr[0])=>{n!==x&&(n=x,r.forEach(T=>T(m,x)))};let i=hr[1];const o=(m=++hr[1])=>(i!==m&&!r.size&&(i=m,c.forEach(([x])=>{const T=x[1](m);T>n&&(n=T)})),n),l=m=>(x,T)=>{const C=[...x];C[1]=[m,...C[1]],s(C,T)},c=new Map,u=(m,x)=>{const T=!ri.has(x)&&tn.get(x);if(T){if((Rr?"production":void 0)!=="production"&&c.has(m))throw new Error("prop listener already exists");if(r.size){const C=T[2](l(m));c.set(m,[T,C])}else c.set(m,[T])}},d=m=>{var x;const T=c.get(m);T&&(c.delete(m),(x=T[1])==null||x.call(T))},h=m=>(r.add(m),r.size===1&&c.forEach(([T,C],k)=>{if((Rr?"production":void 0)!=="production"&&C)throw new Error("remove already exists");const R=T[2](l(k));c.set(k,[T,R])}),()=>{r.delete(m),r.size===0&&c.forEach(([T,C],k)=>{C&&(C(),c.set(k,[T]))})});let g=!0;const b=eu(()=>g,u,d,s),v=Zc(e,b);Fr.set(e,v);const f=[e,o,h];return tn.set(v,f),Reflect.ownKeys(e).forEach(m=>{const x=Object.getOwnPropertyDescriptor(e,m);"value"in x&&x.writable&&(v[m]=e[m])}),g=!1,v}function tu(e,t,n){const r=tn.get(e);(Rr?"production":void 0)!=="production"&&!r&&console.warn("Please use proxy object");let s;const i=[],o=r[2];let l=!1;const u=o(d=>{if(i.push(d),n){t(i.splice(0));return}s||(s=Promise.resolve().then(()=>{s=void 0,l&&t(i.splice(0))}))});return l=!0,()=>{l=!1,u()}}function ds(e){const t=tn.get(e);(Rr?"production":void 0)!=="production"&&!t&&console.warn("Please use proxy object");const[n,r]=t;return mo(n,r())}const Rn=e=>typeof e=="object"&&e!==null,po=(e,t,n)=>{const r=(i,o)=>{const l=Object.getOwnPropertyDescriptor(e,i);(!l||l.writable)&&(e[i]=o)},s=new Set([...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t),...Object.getOwnPropertyNames(n),...Object.getOwnPropertySymbols(n)]);for(const i of s)i in n?i in t?Object.is(t[i],n[i])||(Rn(e[i])&&Rn(t[i])&&Rn(n[i])?po(e[i],t[i],n[i]):r(i,n[i])):r(i,n[i]):r(i,void 0)},Tt=(e,t)=>{const n=se(ds(e)[t]);return n.onMount=r=>{const s=()=>{r(ds(e)[t])},i=tu(e,s);return s(),i},se(r=>r(n),(r,s,i)=>{const o=ds(e)[t],l=typeof i=="function"?i(o):i;Rn(o)&&Rn(l)?po(e[t],o,l):e[t]=l})},nu=()=>JSON.parse(localStorage.getItem("auth"))??{},ru=e=>{try{const t=new URL(e),{hostname:n,port:r}=t;return!!n&&!!r}catch{return!1}},ii=e=>{const{server:t,token:n,username:r,password:s}=e;return!t||!Xl(t,{require_protocol:!0})&&!ru(t)?!1:n||r&&s},su=()=>Gl.create({retry:3,onRequest({request:e,options:t}){const n=nu();if(!ii(n))throw new Error("Invalid auth");const{server:r,token:s,username:i,password:o}=n;t.baseURL=r,t.headers=s?{"X-Auth-Token":s}:{Authorization:`Basic ${btoa(`${i}:${o}`)}`}},onRequestError({request:e,options:t,error:n}){console.error("Request error: ",n)},async onResponseError({request:e,response:t,options:n}){var i;t.status===401&&(localStorage.removeItem("auth"),await Bl.navigate("/login"));const s=((i=t._data)==null?void 0:i.error_message)??t.statusText;throw console.error("Response error: ",s),new Error(s)}}),ue=su();ue.get=e=>ue(e,{method:"GET"});ue.post=(e,t)=>ue(e,{method:"POST",body:t});ue.put=(e,t)=>ue(e,{method:"PUT",body:t});const iu=async()=>ue.get("/v1/categories"),au=async e=>ue.post("/v1/categories",{title:e}),ou=async e=>ue.raw(`/v1/categories/${e}`,{method:"DELETE"}),lu=async(e,t,n=!1)=>{const r={title:t,hide_globally:n?"on":void 0};return ue.put(`/v1/categories/${e}`,r)},cu=async e=>ue.put(`/v1/categories/${e}/mark-all-as-read`);var go={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n,r,s=1e3,i=6e4,o=36e5,l=864e5,c=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,u=31536e6,d=2628e6,h=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,g={years:u,months:d,days:l,hours:o,minutes:i,seconds:s,milliseconds:1,weeks:6048e5},b=function(O){return O instanceof k},v=function(O,y,E){return new k(O,E,y.$l)},f=function(O){return r.p(O)+"s"},m=function(O){return O<0},x=function(O){return m(O)?Math.ceil(O):Math.floor(O)},T=function(O){return Math.abs(O)},C=function(O,y){return O?m(O)?{negative:!0,format:""+T(O)+y}:{negative:!1,format:""+O+y}:{negative:!1,format:""}},k=function(){function O(E,M,_){var I=this;if(this.$d={},this.$l=_,E===void 0&&(this.$ms=0,this.parseFromMilliseconds()),M)return v(E*g[f(M)],this);if(typeof E=="number")return this.$ms=E,this.parseFromMilliseconds(),this;if(typeof E=="object")return Object.keys(E).forEach(function(J){I.$d[f(J)]=E[J]}),this.calMilliseconds(),this;if(typeof E=="string"){var N=E.match(h);if(N){var q=N.slice(2).map(function(J){return J!=null?Number(J):0});return this.$d.years=q[0],this.$d.months=q[1],this.$d.weeks=q[2],this.$d.days=q[3],this.$d.hours=q[4],this.$d.minutes=q[5],this.$d.seconds=q[6],this.calMilliseconds(),this}}return this}var y=O.prototype;return y.calMilliseconds=function(){var E=this;this.$ms=Object.keys(this.$d).reduce(function(M,_){return M+(E.$d[_]||0)*g[_]},0)},y.parseFromMilliseconds=function(){var E=this.$ms;this.$d.years=x(E/u),E%=u,this.$d.months=x(E/d),E%=d,this.$d.days=x(E/l),E%=l,this.$d.hours=x(E/o),E%=o,this.$d.minutes=x(E/i),E%=i,this.$d.seconds=x(E/s),E%=s,this.$d.milliseconds=E},y.toISOString=function(){var E=C(this.$d.years,"Y"),M=C(this.$d.months,"M"),_=+this.$d.days||0;this.$d.weeks&&(_+=7*this.$d.weeks);var I=C(_,"D"),N=C(this.$d.hours,"H"),q=C(this.$d.minutes,"M"),J=this.$d.seconds||0;this.$d.milliseconds&&(J+=this.$d.milliseconds/1e3,J=Math.round(1e3*J)/1e3);var le=C(J,"S"),de=E.negative||M.negative||I.negative||N.negative||q.negative||le.negative,Pe=N.format||q.format||le.format?"T":"",we=(de?"-":"")+"P"+E.format+M.format+I.format+Pe+N.format+q.format+le.format;return we==="P"||we==="-P"?"P0D":we},y.toJSON=function(){return this.toISOString()},y.format=function(E){var M=E||"YYYY-MM-DDTHH:mm:ss",_={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return M.replace(c,function(I,N){return N||String(_[I])})},y.as=function(E){return this.$ms/g[f(E)]},y.get=function(E){var M=this.$ms,_=f(E);return _==="milliseconds"?M%=1e3:M=_==="weeks"?x(M/g[_]):this.$d[_],M||0},y.add=function(E,M,_){var I;return I=M?E*g[f(M)]:b(E)?E.$ms:v(E,this).$ms,v(this.$ms+I*(_?-1:1),this)},y.subtract=function(E,M){return this.add(E,M,!0)},y.locale=function(E){var M=this.clone();return M.$l=E,M},y.clone=function(){return v(this.$ms,this)},y.humanize=function(E){return n().add(this.$ms,"ms").locale(this.$l).fromNow(!E)},y.valueOf=function(){return this.asMilliseconds()},y.milliseconds=function(){return this.get("milliseconds")},y.asMilliseconds=function(){return this.as("milliseconds")},y.seconds=function(){return this.get("seconds")},y.asSeconds=function(){return this.as("seconds")},y.minutes=function(){return this.get("minutes")},y.asMinutes=function(){return this.as("minutes")},y.hours=function(){return this.get("hours")},y.asHours=function(){return this.as("hours")},y.days=function(){return this.get("days")},y.asDays=function(){return this.as("days")},y.weeks=function(){return this.get("weeks")},y.asWeeks=function(){return this.as("weeks")},y.months=function(){return this.get("months")},y.asMonths=function(){return this.as("months")},y.years=function(){return this.get("years")},y.asYears=function(){return this.as("years")},O}(),R=function(O,y,E){return O.add(y.years()*E,"y").add(y.months()*E,"M").add(y.days()*E,"d").add(y.hours()*E,"h").add(y.minutes()*E,"m").add(y.seconds()*E,"s").add(y.milliseconds()*E,"ms")};return function(O,y,E){n=E,r=E().$utils(),E.duration=function(I,N){var q=E.locale();return v(I,{$l:q},N)},E.isDuration=b;var M=y.prototype.add,_=y.prototype.subtract;y.prototype.add=function(I,N){return b(I)?R(this,I,1):M.bind(this)(I,N)},y.prototype.subtract=function(I,N){return b(I)?R(this,I,-1):_.bind(this)(I,N)}}})})(go);var uu=go.exports;const du=Zn(uu);var vo={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){return function(n,r,s){n=n||{};var i=r.prototype,o={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,d,h,g){return i.fromToBase(u,d,h,g)}s.en.relativeTime=o,i.fromToBase=function(u,d,h,g,b){for(var v,f,m,x=h.$locale().relativeTime||o,T=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],C=T.length,k=0;k<C;k+=1){var R=T[k];R.d&&(v=g?s(u).diff(h,R.d,!0):h.diff(u,R.d,!0));var O=(n.rounding||Math.round)(Math.abs(v));if(m=v>0,O<=R.r||!R.r){O<=1&&k>0&&(R=T[k-1]);var y=x[R.l];b&&(O=b(""+O)),f=typeof y=="string"?y.replace("%d",O):y(O,d,R.l,m);break}}if(d)return f;var E=m?x.future:x.past;return typeof E=="function"?E(f):E.replace("%s",f)},i.to=function(u,d){return l(u,d,this,!0)},i.from=function(u,d){return l(u,d,this)};var c=function(u){return u.$u?s.utc():s()};i.toNow=function(u){return this.to(c(this),u)},i.fromNow=function(u){return this.from(c(this),u)}}})})(vo);var hu=vo.exports;const fu=Zn(hu);var yo={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ge,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(i,o,l){var c=o.prototype;l.utc=function(f){var m={date:f,utc:!0,args:arguments};return new o(m)},c.utc=function(f){var m=l(this.toDate(),{locale:this.$L,utc:!0});return f?m.add(this.utcOffset(),n):m},c.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var u=c.parse;c.parse=function(f){f.utc&&(this.$u=!0),this.$utils().u(f.$offset)||(this.$offset=f.$offset),u.call(this,f)};var d=c.init;c.init=function(){if(this.$u){var f=this.$d;this.$y=f.getUTCFullYear(),this.$M=f.getUTCMonth(),this.$D=f.getUTCDate(),this.$W=f.getUTCDay(),this.$H=f.getUTCHours(),this.$m=f.getUTCMinutes(),this.$s=f.getUTCSeconds(),this.$ms=f.getUTCMilliseconds()}else d.call(this)};var h=c.utcOffset;c.utcOffset=function(f,m){var x=this.$utils().u;if(x(f))return this.$u?0:x(this.$offset)?h.call(this):this.$offset;if(typeof f=="string"&&(f=function(R){R===void 0&&(R="");var O=R.match(r);if(!O)return null;var y=(""+O[0]).match(s)||["-",0,0],E=y[0],M=60*+y[1]+ +y[2];return M===0?0:E==="+"?M:-M}(f),f===null))return this;var T=Math.abs(f)<=16?60*f:f,C=this;if(m)return C.$offset=T,C.$u=f===0,C;if(f!==0){var k=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(T+k,n)).$offset=T,C.$x.$localOffset=k}else C=this.utc();return C};var g=c.format;c.format=function(f){var m=f||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return g.call(this,m)},c.valueOf=function(){var f=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*f},c.isUTC=function(){return!!this.$u},c.toISOString=function(){return this.toDate().toISOString()},c.toString=function(){return this.toDate().toUTCString()};var b=c.toDate;c.toDate=function(f){return f==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():b.call(this)};var v=c.diff;c.diff=function(f,m,x){if(f&&this.$u===f.$u)return v.call(this,f,m,x);var T=this.local(),C=l(f).local();return v.call(T,C,m,x)}}})})(yo);var mu=yo.exports;const pu=Zn(mu);Xe.extend(du);Xe.extend(fu);Xe.extend(pu);const gu=e=>Xe(e).isAfter(Xe().subtract(24,"hour")),vu=()=>Xe().subtract(24,"hour").unix(),bo=e=>{if(!ut("showDetailedRelativeTime")){const b=Xe(e).fromNow();return b==="a few seconds ago"?"just now":b}const n=Xe(),s=Xe(e).diff(n),i=Xe.duration(Math.abs(s)),o=i.years(),l=i.months(),c=i.days(),u=i.hours(),d=i.minutes(),h=[];if(o>0&&h.push(`${o} year${o>1?"s":""}`),l>0&&h.push(`${l} month${l>1?"s":""}`),c>0&&h.push(`${c} day${c>1?"s":""}`),u>0&&h.push(`${u} hour${u>1?"s":""}`),d>0&&h.push(`${d} minute${d>1?"s":""}`),h.length===0)return"just now";const g=h.join(" ");return s>0?`in ${g}`:`${g} ago`},yu=()=>Xe().utc().format("YYYY-MM-DDTHH:mm:ss.SSSSSSZ"),Wr=async(e,t)=>ue.put("/v1/entries",{entry_ids:e,status:t}),bu=async e=>ue.put(`/v1/entries/${e}/bookmark`),xu=async e=>ue.get(`/v1/entries/${e}/fetch-content`),Sn=(e,t={})=>{const{baseUrl:n,orderField:r,offset:s,limit:i,status:o}=e,l=ut("orderDirection"),c=new URLSearchParams({order:r,direction:l,offset:s,limit:i,...t});return o&&c.append("status",o),`${n}?${c}`},wu=async(e=0,t=null)=>{const n=ut("orderBy"),r=ut("pageSize"),s={baseUrl:"/v1/entries",orderField:n,offset:e,limit:r,status:t};return ue.get(Sn(s))},jr=async(e=0,t=null,n=null)=>{const r=ut("orderBy"),s=n??ut("pageSize"),i=vu(),o={baseUrl:"/v1/entries",orderField:r,offset:e,limit:s,status:t},l={published_after:i};return ue.get(Sn(o,l))},xo=async(e=0,t=null)=>{const n=ut("pageSize"),r={baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:n,status:t},s={starred:"true"};return ue.get(Sn(r,s))},wo=async(e=0)=>{const t=ut("pageSize"),n={baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:t,status:"read"};return ue.get(Sn(n))},Su=async()=>ue.get("/v1/feeds"),Eu=async()=>ue.get("/v1/feeds/counters"),Cu=async e=>ue.raw(`/v1/feeds/${e}/refresh`,{method:"PUT"}),Tu=async()=>ue.raw("/v1/feeds/refresh",{method:"PUT"}),ju=async(e,t,n)=>ue.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Mu=async e=>ue.raw(`/v1/feeds/${e}`,{method:"DELETE"}),ra=async(e,t)=>{const{categoryId:n,title:r,siteUrl:s,feedUrl:i,hidden:o,disabled:l,isFullText:c}=t;return ue.put(`/v1/feeds/${e}`,{category_id:n,title:r,site_url:s,feed_url:i,hide_globally:o,disabled:l,crawler:c})},_u=async e=>ue.put(`/v1/feeds/${e}/mark-all-as-read`),ku=async()=>ue.get("/v1/me"),Iu=async()=>{const e=await ku();return ue.put(`/v1/users/${e.data.id}/mark-all-as-read`)};var er={};(function e(t,n,r,s){var i=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),o=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var w=new OffscreenCanvas(1,1),p=w.getContext("2d");p.fillRect(0,0,1,1);var F=w.transferToImageBitmap();try{p.createPattern(F,"no-repeat")}catch{return!1}return!0}();function c(){}function u(w){var p=n.exports.Promise,F=p!==void 0?p:t.Promise;return typeof F=="function"?new F(w):(w(c,c),null)}var d=function(w,p){return{transform:function(F){if(w)return F;if(p.has(F))return p.get(F);var D=new OffscreenCanvas(F.width,F.height),L=D.getContext("2d");return L.drawImage(F,0,0),p.set(F,D),D},clear:function(){p.clear()}}}(l,new Map),h=function(){var w=Math.floor(16.666666666666668),p,F,D={},L=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(p=function(V){var U=Math.random();return D[U]=requestAnimationFrame(function $(W){L===W||L+w-1<W?(L=W,delete D[U],V()):D[U]=requestAnimationFrame($)}),U},F=function(V){D[V]&&cancelAnimationFrame(D[V])}):(p=function(V){return setTimeout(V,w)},F=function(V){return clearTimeout(V)}),{frame:p,cancel:F}}(),g=function(){var w,p,F={};function D(L){function V(U,$){L.postMessage({options:U||{},callback:$})}L.init=function($){var W=$.transferControlToOffscreen();L.postMessage({canvas:W},[W])},L.fire=function($,W,Q){if(p)return V($,null),p;var P=Math.random().toString(36).slice(2);return p=u(function(B){function Y(ie){ie.data.callback===P&&(delete F[P],L.removeEventListener("message",Y),p=null,d.clear(),Q(),B())}L.addEventListener("message",Y),V($,P),F[P]=Y.bind(null,{data:{callback:P}})}),p},L.reset=function(){L.postMessage({reset:!0});for(var $ in F)F[$](),delete F[$]}}return function(){if(w)return w;if(!r&&i){var L=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([L])))}catch(V){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",V),null}D(w)}return w}}(),b={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function v(w,p){return p?p(w):w}function f(w){return w!=null}function m(w,p,F){return v(w&&f(w[p])?w[p]:b[p],F)}function x(w){return w<0?0:Math.floor(w)}function T(w,p){return Math.floor(Math.random()*(p-w))+w}function C(w){return parseInt(w,16)}function k(w){return w.map(R)}function R(w){var p=String(w).replace(/[^0-9a-f]/gi,"");return p.length<6&&(p=p[0]+p[0]+p[1]+p[1]+p[2]+p[2]),{r:C(p.substring(0,2)),g:C(p.substring(2,4)),b:C(p.substring(4,6))}}function O(w){var p=m(w,"origin",Object);return p.x=m(p,"x",Number),p.y=m(p,"y",Number),p}function y(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function E(w){var p=w.getBoundingClientRect();w.width=p.width,w.height=p.height}function M(w){var p=document.createElement("canvas");return p.style.position="fixed",p.style.top="0px",p.style.left="0px",p.style.pointerEvents="none",p.style.zIndex=w,p}function _(w,p,F,D,L,V,U,$,W){w.save(),w.translate(p,F),w.rotate(V),w.scale(D,L),w.arc(0,0,1,U,$,W),w.restore()}function I(w){var p=w.angle*(Math.PI/180),F=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-p+(.5*F-Math.random()*F),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar,flat:w.flat}}function N(w,p){p.x+=Math.cos(p.angle2D)*p.velocity+p.drift,p.y+=Math.sin(p.angle2D)*p.velocity+p.gravity,p.velocity*=p.decay,p.flat?(p.wobble=0,p.wobbleX=p.x+10*p.scalar,p.wobbleY=p.y+10*p.scalar,p.tiltSin=0,p.tiltCos=0,p.random=1):(p.wobble+=p.wobbleSpeed,p.wobbleX=p.x+10*p.scalar*Math.cos(p.wobble),p.wobbleY=p.y+10*p.scalar*Math.sin(p.wobble),p.tiltAngle+=.1,p.tiltSin=Math.sin(p.tiltAngle),p.tiltCos=Math.cos(p.tiltAngle),p.random=Math.random()+2);var F=p.tick++/p.totalTicks,D=p.x+p.random*p.tiltCos,L=p.y+p.random*p.tiltSin,V=p.wobbleX+p.random*p.tiltCos,U=p.wobbleY+p.random*p.tiltSin;if(w.fillStyle="rgba("+p.color.r+", "+p.color.g+", "+p.color.b+", "+(1-F)+")",w.beginPath(),o&&p.shape.type==="path"&&typeof p.shape.path=="string"&&Array.isArray(p.shape.matrix))w.fill(Pe(p.shape.path,p.shape.matrix,p.x,p.y,Math.abs(V-D)*.1,Math.abs(U-L)*.1,Math.PI/10*p.wobble));else if(p.shape.type==="bitmap"){var $=Math.PI/10*p.wobble,W=Math.abs(V-D)*.1,Q=Math.abs(U-L)*.1,P=p.shape.bitmap.width*p.scalar,B=p.shape.bitmap.height*p.scalar,Y=new DOMMatrix([Math.cos($)*W,Math.sin($)*W,-Math.sin($)*Q,Math.cos($)*Q,p.x,p.y]);Y.multiplySelf(new DOMMatrix(p.shape.matrix));var ie=w.createPattern(d.transform(p.shape.bitmap),"no-repeat");ie.setTransform(Y),w.globalAlpha=1-F,w.fillStyle=ie,w.fillRect(p.x-P/2,p.y-B/2,P,B),w.globalAlpha=1}else if(p.shape==="circle")w.ellipse?w.ellipse(p.x,p.y,Math.abs(V-D)*p.ovalScalar,Math.abs(U-L)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI):_(w,p.x,p.y,Math.abs(V-D)*p.ovalScalar,Math.abs(U-L)*p.ovalScalar,Math.PI/10*p.wobble,0,2*Math.PI);else if(p.shape==="star")for(var ee=Math.PI/2*3,te=4*p.scalar,Me=8*p.scalar,ve=p.x,Ce=p.y,ze=5,ye=Math.PI/ze;ze--;)ve=p.x+Math.cos(ee)*Me,Ce=p.y+Math.sin(ee)*Me,w.lineTo(ve,Ce),ee+=ye,ve=p.x+Math.cos(ee)*te,Ce=p.y+Math.sin(ee)*te,w.lineTo(ve,Ce),ee+=ye;else w.moveTo(Math.floor(p.x),Math.floor(p.y)),w.lineTo(Math.floor(p.wobbleX),Math.floor(L)),w.lineTo(Math.floor(V),Math.floor(U)),w.lineTo(Math.floor(D),Math.floor(p.wobbleY));return w.closePath(),w.fill(),p.tick<p.totalTicks}function q(w,p,F,D,L){var V=p.slice(),U=w.getContext("2d"),$,W,Q=u(function(P){function B(){$=W=null,U.clearRect(0,0,D.width,D.height),d.clear(),L(),P()}function Y(){r&&!(D.width===s.width&&D.height===s.height)&&(D.width=w.width=s.width,D.height=w.height=s.height),!D.width&&!D.height&&(F(w),D.width=w.width,D.height=w.height),U.clearRect(0,0,D.width,D.height),V=V.filter(function(ie){return N(U,ie)}),V.length?$=h.frame(Y):B()}$=h.frame(Y),W=B});return{addFettis:function(P){return V=V.concat(P),Q},canvas:w,promise:Q,reset:function(){$&&h.cancel($),W&&W()}}}function J(w,p){var F=!w,D=!!m(p||{},"resize"),L=!1,V=m(p,"disableForReducedMotion",Boolean),U=i&&!!m(p||{},"useWorker"),$=U?g():null,W=F?y:E,Q=w&&$?!!w.__confetti_initialized:!1,P=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,B;function Y(ee,te,Me){for(var ve=m(ee,"particleCount",x),Ce=m(ee,"angle",Number),ze=m(ee,"spread",Number),ye=m(ee,"startVelocity",Number),ht=m(ee,"decay",Number),Vt=m(ee,"gravity",Number),Ge=m(ee,"drift",Number),Ut=m(ee,"colors",k),Bt=m(ee,"ticks",Number),Qe=m(ee,"shapes"),Ve=m(ee,"scalar"),it=!!m(ee,"flat"),_t=O(ee),Ht=ve,kt=[],sn=w.width*_t.x,ke=w.height*_t.y;Ht--;)kt.push(I({x:sn,y:ke,angle:Ce,spread:ze,startVelocity:ye,color:Ut[Ht%Ut.length],shape:Qe[T(0,Qe.length)],ticks:Bt,decay:ht,gravity:Vt,drift:Ge,scalar:Ve,flat:it}));return B?B.addFettis(kt):(B=q(w,kt,W,te,Me),B.promise)}function ie(ee){var te=V||m(ee,"disableForReducedMotion",Boolean),Me=m(ee,"zIndex",Number);if(te&&P)return u(function(ye){ye()});F&&B?w=B.canvas:F&&!w&&(w=M(Me),document.body.appendChild(w)),D&&!Q&&W(w);var ve={width:w.width,height:w.height};$&&!Q&&$.init(w),Q=!0,$&&(w.__confetti_initialized=!0);function Ce(){if($){var ye={getBoundingClientRect:function(){if(!F)return w.getBoundingClientRect()}};W(ye),$.postMessage({resize:{width:ye.width,height:ye.height}});return}ve.width=ve.height=null}function ze(){B=null,D&&(L=!1,t.removeEventListener("resize",Ce)),F&&w&&(document.body.removeChild(w),w=null,Q=!1)}return D&&!L&&(L=!0,t.addEventListener("resize",Ce,!1)),$?$.fire(ee,ve,ze):Y(ee,ve,ze)}return ie.reset=function(){$&&$.reset(),B&&B.reset()},ie}var le;function de(){return le||(le=J(null,{useWorker:!0,resize:!0})),le}function Pe(w,p,F,D,L,V,U){var $=new Path2D(w),W=new Path2D;W.addPath($,new DOMMatrix(p));var Q=new Path2D;return Q.addPath(W,new DOMMatrix([Math.cos(U)*L,Math.sin(U)*L,-Math.sin(U)*V,Math.cos(U)*V,F,D])),Q}function we(w){if(!o)throw new Error("path confetti are not supported in this browser");var p,F;typeof w=="string"?p=w:(p=w.path,F=w.matrix);var D=new Path2D(p),L=document.createElement("canvas"),V=L.getContext("2d");if(!F){for(var U=1e3,$=U,W=U,Q=0,P=0,B,Y,ie=0;ie<U;ie+=2)for(var ee=0;ee<U;ee+=2)V.isPointInPath(D,ie,ee,"nonzero")&&($=Math.min($,ie),W=Math.min(W,ee),Q=Math.max(Q,ie),P=Math.max(P,ee));B=Q-$,Y=P-W;var te=10,Me=Math.min(te/B,te/Y);F=[Me,0,0,Me,-Math.round(B/2+$)*Me,-Math.round(Y/2+W)*Me]}return{type:"path",path:p,matrix:F}}function Mt(w){var p,F=1,D="#000000",L='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof w=="string"?p=w:(p=w.text,F="scalar"in w?w.scalar:F,L="fontFamily"in w?w.fontFamily:L,D="color"in w?w.color:D);var V=10*F,U=""+V+"px "+L,$=new OffscreenCanvas(V,V),W=$.getContext("2d");W.font=U;var Q=W.measureText(p),P=Math.ceil(Q.actualBoundingBoxRight+Q.actualBoundingBoxLeft),B=Math.ceil(Q.actualBoundingBoxAscent+Q.actualBoundingBoxDescent),Y=2,ie=Q.actualBoundingBoxLeft+Y,ee=Q.actualBoundingBoxAscent+Y;P+=Y+Y,B+=Y+Y,$=new OffscreenCanvas(P,B),W=$.getContext("2d"),W.font=U,W.fillStyle=D,W.fillText(p,ie,ee);var te=1/F;return{type:"bitmap",bitmap:$.transferToImageBitmap(),matrix:[te,0,0,te,-P*te/2,-B*te/2]}}n.exports=function(){return de().apply(this,arguments)},n.exports.reset=function(){de().reset()},n.exports.create=J,n.exports.shapeFromPath=we,n.exports.shapeFromText=Mt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),er,!1);const Au=er.exports;er.exports.create;const Et=si({historyCount:0,starredCount:0,unreadInfo:{},unreadTodayCount:0}),ai=se(!1),oi=Tt(Et,"unreadInfo"),So=Tt(Et,"unreadTodayCount"),li=Tt(Et,"starredCount"),Eo=Tt(Et,"historyCount"),tr=se([]),Co=se(e=>{const t=e(oi);return e(tr).map(r=>({...r,unreadCount:t[r.id]}))}),To=se(e=>e(Co).sort((n,r)=>n.title.localeCompare(r.title,"en"))),ci=se([]),Ou=se(e=>{const t=e(Co);return e(ci).map(r=>{const s=t.filter(i=>i.category.id===r.id);return{...r,unreadCount:s.reduce((i,o)=>i+o.unreadCount,0),feedCount:s.length}})}),nr=se(e=>e(Ou).sort((n,r)=>n.title.localeCompare(r.title,"en"))),jo=se(e=>e(nr).filter(n=>n.hide_globally).map(n=>n.id)),Mo=se(e=>{const t=e(jo);return e(To).filter(r=>r.hide_globally||t.includes(r.category.id)).map(r=>r.id)}),_o=se(e=>{const{showAllFeeds:t}=e(xe),n=e(Mo);return e(To).filter(s=>t||!n.includes(s.id))}),ko=se(e=>e(_o).reduce((n,r)=>{const{id:s}=r.category;return n[s]||(n[s]=[]),n[s].push(r),n},{})),Pu=se(e=>{const t=e(oi),n=e(_o);return Object.entries(t).reduce((r,[s,i])=>n.some(o=>o.id===Number(s))?r+i:r,0)}),Nr=(e,t)=>{const n=t.map(r=>r.id);return e.map(r=>n.includes(r.id)&&t.find(i=>i.id===r.id)||r)},Ms=(e,t)=>{const n={};let r=0;const{activeContent:s,entries:i,unreadEntries:o,unreadCount:l,unreadOffset:c}=De,{historyCount:u,unreadInfo:d,unreadTodayCount:h}=Et;t==="read"?(De.unreadCount=Math.max(0,l-e.length),De.unreadOffset=Math.max(0,c-e.length),Et.historyCount+=e.length):(De.unreadCount+=e.length,De.unreadEntries+=e.length,Et.historyCount=Math.max(0,u-e.length));for(const f of e){const m=f.feed.id,x=gu(f.published_at),T=t==="read"?-1:1;n[m]=(n[m]||0)+T,r+=x?T:0}Et.unreadTodayCount=Math.max(0,h+r);const g={...d};for(const[f,m]of Object.entries(n))g[f]=Math.max(0,(g[f]||0)+m);Et.unreadInfo=g;const b=e.map(f=>({...f,status:t})),v=b.find(f=>f.id===(s==null?void 0:s.id));v&&(De.activeContent=v),De.entries=Nr(i,b),De.unreadEntries=Nr(o,b)},ui=()=>{const[e,t]=Ee(jt),n=Z(li),r=Z(rr),s=Z(sr),i=(d,h)=>{Ms([d],h)},o=(d,h)=>{h?(n(b=>b+1),Au({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):n(b=>Math.max(0,b-1));const g={...d,starred:h};e&&t(g),r(b=>Nr(b,[g])),s(b=>Nr(b,[g]))};return{handleEntryStatusUpdate:i,handleFetchContent:async()=>{try{const d=await xu(e.id);K.success("Fetched content successfully"),t({...e,content:d.content})}catch{K.error("Failed to fetch content, please try again later")}},handleToggleStarred:async d=>{const h=!d.starred;o(d,h),bu(d.id).catch(()=>{K.error(`Failed to ${h?"star":"unstar"} entry, please try again later`),o(d,!h)})},handleToggleStatus:async d=>{const h=d.status,g=h==="read"?"unread":"read";i(d,g),Wr([d.id],g).catch(()=>{K.error(`Failed to mark entry as ${g}, please try again later`),i(d,h)})}}},Ru=e=>{const t=new Array(e.length).fill(0);let n=0,r=1;for(;r<e.length;)e[r]===e[n]?(n++,t[r]=n,r++):n!==0?n=t[n-1]:(t[r]=0,r++);return t},fr=(e,t,n=!0)=>{const r=n?e.toLowerCase():e,s=n?t.toLowerCase():t;if(s.length===0)return 0;const i=Ru(s);let o=0,l=0;for(;o<r.length;)if(r[o]===s[l]?(o++,l++):l!==0?l=i[l-1]:o++,l===s.length)return o-l;return-1},Fu=e=>{const t=[],n=[];let r=[];const s=[],i=e.match(/([-+|]?)\s*"([^"]+)"/g);let o=e;i&&(r=i.map(c=>{const u=c.trim()[0],d=c.match(/"([^"]+)"/)[1];switch(u){case"-":n.push(d);break;case"+":t.push(d);break;case"|":s.push([d]);break;default:t.push(d);break}return d}),o=e.replace(/([-+|]?)\s*"([^"]+)"/g,""));const l=o.split(/\s+/);for(const c of l){const u=c.replace(/^-|\+|\|$/,"");if(c.startsWith("-")&&u)n.push(u);else if(c.startsWith("+")&&u)t.push(u);else if(c.includes("|")){const d=c.split("|").filter(h=>h);d.length>0&&s.push(d)}else u&&t.push(u)}return{includeTerms:t,excludeTerms:n,exactPhrases:r,orConditions:s}},Nu=(e,t,n=[],r=!0)=>{const{includeTerms:s,excludeTerms:i,exactPhrases:o,orConditions:l}=Fu(t);return e.filter(c=>n.some(u=>{const d=c[u];if(typeof d!="string")return!1;const h=r?d.toLowerCase():d;if(i.some(v=>fr(h,v,r)!==-1)||o.length>0&&!o.some(v=>fr(h,v,r)!==-1))return!1;const g=s.every(v=>fr(h,v,r)!==-1),b=l.length===0||l.some(v=>v.some(f=>fr(h,f,r)!==-1));return g&&b}))},Du=(e,t,n=[],r=!0)=>{try{if(!Array.isArray(e)||e.length===0)throw new Error("Invalid data input");if(typeof t!="string"||t.trim().length===0)throw new Error("Invalid query input");return Nu(e,t,n,r)}catch(s){return console.error(s.message),[]}},Mr=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Lu=(e,t,n)=>n?Du(e,n,[t]):e,$u=(e,t,n,r)=>{const s=o=>n||!r.includes(o.feed.id);return["all","today","category"].includes(t)?e.filter(s):e},zu=(e,t)=>{if(e.length===0||t==="none")return e;const n=e.map((d,h)=>({id:d.id,index:h})),r=new Set,s=new Set,i=[],o=e.filter(d=>d.status==="unread").map(d=>d.id),l=e.slice().sort((d,h)=>d.id-h.id).filter(d=>{const{title:h,url:g}=d;return t==="title"&&r.has(h)||t==="url"&&s.has(g)?(i.push(d),!1):(r.add(h),s.add(g),!0)}),c=i.filter(d=>o.includes(d.id)),u=c.map(d=>d.id);return c.length>0&&(Ms(c,"read"),Wr(u,"read").catch(()=>{K.error("Failed to mark duplicate entries as read"),Ms(c,"unread")})),l.sort((d,h)=>{const g=n.find(v=>v.id===d.id).index,b=n.find(v=>v.id===h.id).index;return g-b})},De=si({activeContent:null,entries:[],unreadCount:0,unreadEntries:[],unreadOffset:0}),jt=Tt(De,"activeContent"),Io=se(0),di=Tt(De,"unreadCount"),Ao=se(0),Oo=Tt(De,"unreadOffset"),qr=se(!1),Yr=se(!1),rr=Tt(De,"entries"),sr=Tt(De,"unreadEntries"),hi=fo(e=>e(xe).homePage),ir=fo(e=>{const t=e(hi);return["starred","history"].includes(t)?"all":e(xe).showStatus}),Vu=se(e=>{const t=e(ir);return e(t==="all"?rr:sr)}),Xr=se("Title"),Gr=se(""),fi=se(e=>{const t=e(Vu),n=e(Xr),r=e(Gr),s=Lu(t,n,r),i=e(hi),{removeDuplicates:o,showAllFeeds:l}=e(xe),c=e(Mo),u=$u(s,i,l,c);return["starred","history"].includes(i)?u:zu(u,o)}),Po=se(!0),mi=se(!1),sa=e=>{const t=/^(?:http|https):\/\/((?!(\d+\.){3}\d+)([^/]+))/,n=e.match(t);return n?n[1]:null},Ro=({feed:e,className:t="feed-icon"})=>{const r=`https://icons.duckduckgo.com/ip3/${sa(e.site_url)??sa(e.feed_url)}.ico`;return a.jsx("img",{className:t,src:r,alt:"Feed icon"})},Fo=Kt.Item,Uu=({category:e,path:t})=>{var l;const n=rn(),s=(l=X(ko)[e.id])==null?void 0:l.reduce((c,u)=>c+u.unreadCount,0),i=Z(jt),o=()=>{n(`/category/${e.id}`),i(null)};return a.jsxs("div",{className:Hr("category-title",{"active-subMenu":t===`/category/${e.id}`,"inactive-subMenu":t!==`/category/${e.id}`}),onClick:o,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&o()},tabIndex:0,role:"button",style:{cursor:"pointer"},children:[a.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:s?"80%":"100%",fontWeight:500},children:e.title}),s>0&&a.jsx(z.Ellipsis,{className:"unread-count",expandable:!1,style:{fontWeight:500},children:s})]})},Bu=({atom:e})=>{const t=X(e);return a.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:t||""})},mr=({path:e,Icon:t,label:n,countAtom:r})=>{const s=Xs(),i=rn(),o=s.pathname===e,l=Z(jt),c=()=>{i(e),l(null)};return a.jsx(Fo,{onClick:c,className:Hr("arco-menu-item",{"arco-menu-selected":o}),children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs("span",{children:[a.jsx(t,{}),n]}),a.jsx(Bu,{atom:r})]})},e)},No=()=>{const e=Xs(),t=rn(),n=X(nr),r=X(ai),s=X(ko),i=X(jo),o=Z(jt),l=X(xe),{homePage:c,showAllFeeds:u,showFeedIcon:d}=l,[h,g]=S.useState([`/${c}`]),b=e.pathname;return S.useEffect(()=>{g([b])},[b]),a.jsxs(Kt,{autoScrollIntoView:!0,hasCollapseButton:!1,selectedKeys:h,style:{width:"240px",height:"100%"},children:[a.jsxs("div",{className:"menu-header",children:[a.jsx(Ja,{className:"avatar",size:32,children:a.jsx(Ql,{style:{color:"var(--color-bg-1)"}})}),a.jsx(z.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),a.jsx(z.Title,{className:"section-title",heading:6,style:{paddingLeft:"12px"},children:"Articles"}),a.jsx(Ar,{loading:!r,animation:!0,text:{rows:3}}),r&&a.jsxs("div",{children:[a.jsx(mr,{path:"/all",Icon:Kl,label:"All",countAtom:Pu}),a.jsx(mr,{path:"/today",Icon:Zl,label:"Today",countAtom:So}),a.jsx(mr,{path:"/starred",Icon:Gs,label:"Starred",countAtom:li}),a.jsx(mr,{path:"/history",Icon:Jl,label:"History",countAtom:Eo})]}),a.jsx(z.Title,{className:"section-title",heading:6,style:{paddingLeft:"12px"},children:"Feeds"}),a.jsx(Ar,{loading:!r,animation:!0,text:{rows:6}}),r&&a.jsx(Yi,{triggerRegion:"icon",bordered:!1,children:n.filter(v=>u||!i.includes(v.id)).map(v=>{var f;return a.jsx(Yi.Item,{name:`/category/${v.id}`,style:{position:"relative",overflow:"hidden"},header:a.jsx(Uu,{category:v,path:b}),expandIcon:a.jsx(ec,{}),children:(f=s[v.id])==null?void 0:f.map(m=>a.jsx(Fo,{style:{position:"relative",overflow:"hidden"},onClick:x=>{x.stopPropagation(),t(`/feed/${m.id}`),o(null)},children:a.jsxs("div",{className:"custom-menu-item",children:[a.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:m.unreadCount!==0?"80%":"100%",paddingLeft:"20px",boxSizing:"border-box"},children:[d&&a.jsx(Ro,{feed:m,className:"feed-icon-sidebar"}),m.title]}),m.unreadCount!==0&&a.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:m.unreadCount})]})},`/feed/${m.id}`))},v.id)})})]})},Hu=()=>{const e=rn(),t=Xs().pathname,{setAddFeedModalVisible:n,setSettingsModalVisible:r}=ti(),[s,i]=Ee(xe),o=Z(ei),{showAllFeeds:l,theme:c}=s,{updateConfig:u}=Br(),{belowLg:d}=Jn(),[h,g]=S.useState(!1);S.useEffect(()=>{d||g(!1)},[d]),S.useEffect(()=>{t&&g(!1)},[t]);const b=()=>{u({showAllFeeds:!l})},v=()=>{u({theme:c==="light"?"dark":"light"})},f=()=>{o({}),i(Zs),document.body.removeAttribute("arco-theme"),Js("Blue"),e("/login"),K.success("Logout successful")},m=x=>{switch(x){case"dark":return a.jsx(uc,{});case"system":return a.jsx(cc,{});default:return a.jsx(lc,{})}};return a.jsxs("div",{className:"header",children:[a.jsx("div",{className:"brand",children:a.jsx(fe,{className:"trigger",onClick:()=>g(!h),shape:"circle",size:"small",children:a.jsx(tc,{})})}),a.jsx(nc,{className:"sidebar-drawer",visible:h,title:null,footer:null,closable:!1,onCancel:()=>g(!1),placement:"left",width:240,children:a.jsx(No,{})}),a.jsx("div",{className:"button-group",children:a.jsxs(Or,{size:16,children:[a.jsx(Vn,{content:"Add a feed",mini:!0,children:a.jsx(fe,{shape:"circle",size:"small",type:"primary",icon:a.jsx(eo,{}),onClick:()=>n(!0)})}),a.jsx(Vn,{content:l?"Hide some feeds":"Show all feeds",mini:!0,children:a.jsx(fe,{shape:"circle",size:"small",icon:l?a.jsx(rc,{}):a.jsx(sc,{}),onClick:b})}),a.jsx(fe,{shape:"circle",size:"small",icon:a.jsx(ic,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),a.jsx(Xi,{droplist:a.jsx(Kt,{defaultSelectedKeys:[c],className:"theme-menu",children:["light","dark","system"].map(x=>a.jsxs(Kt.Item,{className:"theme-menu-item",onClick:()=>u({theme:x}),children:[x.charAt(0).toUpperCase()+x.slice(1),c===x&&a.jsx(to,{style:{marginLeft:8}})]},x))}),trigger:"hover",position:"bottom",children:a.jsx(fe,{icon:m(c),shape:"circle",size:"small",onClick:v})}),a.jsx(Xi,{droplist:a.jsxs(Kt,{children:[a.jsxs(Kt.Item,{onClick:()=>r(!0),children:[a.jsx(ac,{className:"icon-right"}),"Settings"]},"0"),a.jsxs(Kt.Item,{onClick:f,children:[a.jsx(oc,{className:"icon-right"}),"Logout"]},"1")]}),trigger:"click",position:"br",children:a.jsx(Ja,{size:28,style:{cursor:"pointer"},children:a.jsx(no,{})})})]})})]})},pi=()=>{const e=Z(ai),t=Z(oi),n=Z(So),r=Z(li),s=Z(Eo),i=Z(tr),o=Z(ci);return{fetchData:async()=>{e(!1);try{const[c,u,d,h,g,b]=await Promise.all([Eu(),jr(0,"unread"),xo(),wo(),Su(),iu()]),v=g.reduce((f,m)=>(f[m.id]=c.unreads[m.id]??0,f),{});t(v),n(u.total??0),r(d.total??0),s(h.total??0),i(g),o(b)}catch(c){console.error("Failed to fetch data:",c)}finally{e(!0)}}}},Wu=()=>{const{updateConfig:e}=Br(),{articleWidth:t,fontSize:n,layout:r,showDetailedRelativeTime:s,showFeedIcon:i,themeColor:o}=X(xe),l=c=>{e(c),c.themeColor&&Js(c.themeColor)};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),a.jsx(z.Text,{type:"secondary",children:"Choose your accent color"})]}),a.jsx("div",{style:{display:"flex"},children:Object.keys(Cs).map(c=>a.jsx(Vn,{content:c,children:a.jsx("div",{style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:Ts(c),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:c===o?`1px solid ${Ts(c)}`:"none"},onClick:()=>l({themeColor:c}),onKeyDown:u=>{(u.key==="Enter"||u.key===" ")&&l({themeColor:c})},"aria-label":`Change theme color to ${c}`})},c))})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),a.jsx(z.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),a.jsx("div",{children:a.jsx(Ct,{checked:r==="small",onChange:c=>l({layout:c?"small":"large"})})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Show detailed relative time"}),a.jsx(z.Text,{type:"secondary",children:"Show detailed relative time in article list"})]}),a.jsx("div",{children:a.jsx(Ct,{checked:s,onChange:c=>l({showDetailedRelativeTime:c})})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),a.jsx(z.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),a.jsx("div",{children:a.jsx(Ct,{checked:i,onChange:c=>l({showFeedIcon:c})})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Font size"}),a.jsx(z.Text,{type:"secondary",children:"Adjust article text size"})]}),a.jsx("div",{children:a.jsxs(Or,{children:[a.jsx(z.Text,{style:{fontSize:"0.75rem"},children:"A"}),a.jsx(Gi,{formatTooltip:c=>`${c}rem`,max:1.25,min:.75,showTicks:!0,step:.05,style:{width:200},value:n,onChange:c=>l({fontSize:c})}),a.jsx(z.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Article width"}),a.jsx(z.Text,{type:"secondary",children:"Adjust article width"})]}),a.jsx("div",{children:a.jsxs(Or,{children:[a.jsx(z.Text,{children:"60%"}),a.jsx(Gi,{formatTooltip:c=>`${c}%`,max:90,min:60,showTicks:!0,step:10,style:{width:160},value:t,onChange:c=>l({articleWidth:c})}),a.jsx(z.Text,{children:"90%"})]})})]})]})},qu=()=>{const[e]=pe.useForm(),[t,n]=S.useState(!1),[r,s]=S.useState(""),[i,o]=S.useState({}),[l,c]=S.useState(!1),u=X(nr),d=Z(ci),h=Z(tr),g=async()=>{if(r.trim()){try{const f=await au(r);d(m=>[...m,{...f}]),K.success("Category added successfully")}catch(f){console.error("Failed to add category: ",f),K.error("Failed to add category")}s(""),c(!1)}},b=async(f,m,x)=>{try{const T=await lu(f,m,x);h(C=>C.map(k=>k.category.id===f?{...k,category:{...k.category,title:m,hide_globally:x}}:k)),d(C=>C.map(k=>k.id===f?{...k,...T}:k)),K.success("Category updated successfully")}catch{K.error("Failed to update category")}n(!1),e.resetFields()},v=async f=>{try{(await ou(f.id)).status===204?(d(x=>x.filter(T=>T.id!==f.id)),K.success(`Deleted category: ${f.title}`)):K.error(`Failed to delete category: ${f.title}`)}catch(m){console.error(`Failed to delete category: ${f.title}`,m),K.error(`Failed to delete category: ${f.title}`)}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{children:[u.map(f=>a.jsx(Un,{className:"tag-style",closable:f.feedCount===0,size:"medium",onClick:()=>{o(f),n(!0),e.setFieldsValue({title:f.title})},onClose:async m=>{m.stopPropagation(),await v(f)},children:f.title},f.id)),l?a.jsx(Le,{autoFocus:!0,className:"input-style",onBlur:g,onChange:s,onPressEnter:g,size:"small",value:r}):a.jsx(Un,{className:"add-category-tag",icon:a.jsx(eo,{}),onClick:()=>c(!0),size:"medium",tabIndex:0,children:"Add"})]}),i&&a.jsx(vn,{className:"modal-style",onOk:e.submit,title:"Edit Category",unmountOnExit:!0,visible:t,onCancel:()=>{n(!1),e.resetFields()},children:a.jsxs(pe,{form:e,layout:"vertical",onSubmit:f=>b(i.id,f.title,f.hidden),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:[a.jsx(pe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(Le,{placeholder:"Please input category title"})}),a.jsx(pe.Item,{label:"Hidden",field:"hidden",initialValue:i.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Ct,{})})]})})]})},Yu=e=>new Promise(t=>setTimeout(t,e)),{Paragraph:Xu}=z,Do=se(""),Lo=se(e=>{const t=e(tr),n=e(Do);return[...t].sort((r,s)=>r.disabled&&!s.disabled?1:!r.disabled&&s.disabled?-1:0).sort((r,s)=>s.parsing_error_count-r.parsing_error_count).filter(r=>Mr(r.title,n)||Mr(r.site_url,n)||Mr(r.feed_url,n))}),Gu=se(e=>e(Lo).map(n=>({category:n.category,checked_at:n.checked_at,crawler:n.crawler,disabled:n.disabled,feed_url:n.feed_url,hidden:n.hide_globally,key:n.id,parsing_error_count:n.parsing_error_count,site_url:n.site_url,title:n.title}))),ia=(e,t,n=null)=>n===null||n===e.id?{...e,parsing_error_count:t?0:e.parsing_error_count+1,checked_at:yu()}:e,Qu=()=>{const[e,t]=S.useState(!1),[n]=pe.useForm(),[r,s]=S.useState(!1),[i,o]=S.useState(""),[l,c]=S.useState({}),u=X(nr),d=X(Lo),h=Z(tr),g=Z(Do),b=X(Gu),{belowMd:v}=Jn();S.useEffect(()=>{g("")},[g]);const f=y=>{c(y),s(!0),n.setFieldsValue({category:y.category.id,title:y.title,siteUrl:y.site_url,feedUrl:y.feed_url,hidden:y.hidden,disabled:y.disabled,crawler:y.crawler})},m=async(y,E,M=!0)=>{try{const I=(await y()).status===204,N=I?"Refreshed":"Failed to refresh";return M&&(I?K.success(N):K.error(N)),h(q=>q.map(J=>E(J,I))),I}catch{return M&&K.error("Failed to refresh"),h(I=>I.map(N=>E(N,!1))),!1}},x=async(y,E=!0)=>{const M=y.id||y.key;return await m(()=>Cu(M),(_,I)=>ia(_,I,M),E)},T=async()=>{try{for(const y of d){const E=new URL(y.feed_url).hostname,M=y.feed_url.replace(E,i),_=await ra(y.id,{feedUrl:M});h(I=>I.map(N=>N.id===y.id?{...N,..._}:N))}K.success("Bulk update successfully"),t(!1)}catch{K.error("Failed to bulk update, please try again")}},C=()=>{const[y,E]=S.useState(!1),M=async()=>{E(!1),await m(Tu,ia)},_=async()=>{E(!1);const q=d.filter(de=>de.parsing_error_count>0);K.success("Starting refresh of error feeds, please wait");let J=0,le=0;for(const de of q)await x(de,!1)?J++:le++,await Yu(500);K.success(`Feeds refreshed. Success: ${J}, Failure: ${le}`)},I=()=>E(!1),N=()=>E(!0);return a.jsxs(a.Fragment,{children:[a.jsx(fe,{icon:a.jsx(Es,{}),shape:"circle",onClick:N}),a.jsx(vn,{className:"edit-modal",onCancel:I,title:"Refresh Feeds",visible:y,footer:[a.jsx(fe,{onClick:I,children:"Cancel"},"cancel"),a.jsx(fe,{onClick:_,type:"outline",children:"Error Feeds"},"error"),a.jsx(fe,{onClick:M,type:"primary",children:"All Feeds"},"all")],children:a.jsx("p",{children:"Do you want to refresh all feeds or just the ones with errors?"})})]})},k=async y=>{try{(await Mu(y.key)).status===204?(h(M=>M.filter(_=>_.id!==y.key)),K.success(`Unfollowed feed: ${y.title}`)):K.error(`Failed to unfollow feed: ${y.title}`)}catch(E){console.error(`Failed to unfollow feed: ${y.title}`,E),K.error(`Failed to unfollow feed: ${y.title}`)}},R=[{title:"Title",dataIndex:"title",sorter:(y,E)=>y.title.localeCompare(E.title,"en"),render:(y,E)=>{const M=E.parsing_error_count;let _=y;E.disabled?_=`ðŸš« ${y}`:M>0&&(_=`âš ï¸ ${y}`);const I=a.jsxs("div",{children:[y,M>0&&a.jsxs(a.Fragment,{children:[a.jsx("br",{}),"âš ï¸ Parsing error count: ",M]})]});return a.jsx(z.Ellipsis,{expandable:!1,children:a.jsx(Vn,{mini:!0,content:I,children:_})})}},!v&&{title:"Feed URL",dataIndex:"feed_url",sorter:(y,E)=>y.feed_url.localeCompare(E.feed_url,"en"),render:y=>a.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:y})},{title:"Category",dataIndex:"category.title",sorter:(y,E)=>y.category.title.localeCompare(E.category.title,"en"),render:y=>a.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:a.jsx(Un,{children:y})})},!v&&{title:"Checked at",dataIndex:"checked_at",sorter:(y,E)=>y.checked_at.localeCompare(E.checked_at,"en"),render:y=>a.jsx(z.Ellipsis,{expandable:!1,children:bo(y)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(y,E)=>a.jsxs(Or,{children:[a.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>f(E),type:"button",children:a.jsx(Qi,{})}),a.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>x(E),type:"button",children:a.jsx(Es,{})}),a.jsx(so,{focusLock:!0,position:"left",title:"Unfollowï¼Ÿ",onOk:()=>k(E),children:a.jsx("span",{className:"list-item-action",children:a.jsx(dc,{})})})]})}].filter(Boolean),O=async(y,E)=>{try{const M=await ra(y,E);h(_=>_.map(I=>I.id===y?{...I,...M}:I)),K.success("Feed updated successfully"),s(!1),n.resetFields()}catch{K.error("Failed to update feed")}};return a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:{alignItems:"center",display:"flex",width:"100%"},children:[a.jsx("div",{style:{display:"flex",flex:1,justifyContent:"center",minWidth:0},children:a.jsx(Le.Search,{className:"search-input",placeholder:"Search title or site URL or feed URL",searchButton:!0,onChange:g})}),a.jsxs("div",{style:{display:"flex",gap:16,paddingBottom:16,paddingLeft:16},children:[a.jsx(fe,{icon:a.jsx(Qi,{}),onClick:()=>t(!0),shape:"circle"}),a.jsxs(vn,{className:"edit-modal",onOk:T,title:"Bulk Update Hosts",visible:e,onCancel:()=>{t(!1),o("")},children:[a.jsxs(Xu,{children:["This will bulk update filtered feeds' hosts.",a.jsx("br",{}),"Only recommended for RssHub."]}),a.jsx(Le,{placeholder:"rsshub.app",value:i,onChange:y=>o(y)})]}),a.jsx(C,{})]})]}),a.jsx(ro,{borderCell:!0,className:"feed-table",columns:R,data:b,pagePosition:"bottomCenter",scroll:{x:!0},size:"small"}),l&&a.jsx(vn,{className:"edit-modal",onOk:n.submit,title:"Edit Feed",unmountOnExit:!0,visible:r,onCancel:()=>{s(!1),n.resetFields()},children:a.jsxs(pe,{form:n,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async y=>{const E={categoryId:y.category,title:y.title,siteUrl:y.siteUrl.trim(),feedUrl:y.feedUrl.trim(),hidden:y.hidden,disabled:y.disabled,isFullText:y.crawler};E.feedUrl?await O(l.key,E):K.error("Feed URL cannot be empty")},children:[a.jsx(pe.Item,{label:"Category",required:!0,field:"category",rules:[{required:!0}],children:a.jsx(me,{placeholder:"Please select",children:u.map(y=>a.jsx(me.Option,{value:y.id,children:y.title},y.id))})}),a.jsx(pe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:a.jsx(Le,{placeholder:"Please input feed title"})}),a.jsx(pe.Item,{label:"Site URL",field:"siteUrl",rules:[{required:!0}],children:a.jsx(Le,{placeholder:"Please input site URL"})}),a.jsx(pe.Item,{label:"Feed URL",field:"feedUrl",rules:[{required:!0}],children:a.jsx(Le,{placeholder:"Please input feed URL"})}),a.jsx(pe.Item,{label:"Hidden",field:"hidden",initialValue:l.hidden,triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Ct,{})}),a.jsx(pe.Item,{label:"Disabled",field:"disabled",initialValue:l.disabled,triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Ct,{})}),a.jsx(pe.Item,{label:"Fetch original content",field:"crawler",tooltip:a.jsx("div",{children:"Only affects newly retrieved articles"}),triggerPropName:"checked",rules:[{type:"boolean"}],children:a.jsx(Ct,{})})]})})]})},Ku=()=>{const{updateConfig:e}=Br(),{homePage:t,markReadOnScroll:n,orderBy:r,pageSize:s,removeDuplicates:i,showStatus:o}=X(xe);return a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),a.jsx(z.Text,{type:"secondary",children:"Which status to show by default:"})]}),a.jsx("div",{children:a.jsxs(me,{className:"input-select",placeholder:"Select status",value:o,onChange:l=>e({showStatus:l}),children:[a.jsx(me.Option,{value:"all",children:"All"}),a.jsx(me.Option,{value:"unread",children:"Unread"})]})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),a.jsx(z.Text,{type:"secondary",children:"Which page to show by default:"})]}),a.jsx("div",{children:a.jsxs(me,{className:"input-select",onChange:l=>e({homePage:l}),placeholder:"Select page",value:t,children:[a.jsx(me.Option,{value:"all",children:"All"}),a.jsx(me.Option,{value:"today",children:"Today"}),a.jsx(me.Option,{value:"starred",children:"Starred"}),a.jsx(me.Option,{value:"history",children:"History"})]})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),a.jsx(z.Text,{type:"secondary",children:"What order to show entries:"})]}),a.jsx("div",{children:a.jsxs(me,{className:"input-select",onChange:l=>e({orderBy:l}),placeholder:"Select order",value:r,children:[a.jsx(me.Option,{value:"published_at",children:"Published at"}),a.jsx(me.Option,{value:"created_at",children:"Created at"})]})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),a.jsx(z.Text,{type:"secondary",children:"Show how many entries per page:"})]}),a.jsx("div",{children:a.jsx(hc,{className:"input-select",defaultValue:s,min:1,mode:"button",onChange:l=>e({pageSize:l}),size:"small"})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Remove duplicate articles"}),a.jsx(z.Text,{type:"secondary",children:"Automatically remove duplicate articles based on:"})]}),a.jsx("div",{children:a.jsxs(me,{className:"input-select",onChange:l=>e({removeDuplicates:l}),placeholder:"Select option",value:i,children:[a.jsx(me.Option,{value:"none",children:"None"}),a.jsx(me.Option,{value:"title",children:"Title"}),a.jsx(me.Option,{value:"url",children:"URL"})]})})]}),a.jsx(qe,{}),a.jsxs("div",{className:"setting-row",children:[a.jsxs("div",{children:[a.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Mark articles as read when scrolled off screen"}),a.jsx(z.Text,{type:"secondary",children:"Automatically mark articles as read when they are scrolled out of the visible screen area"})]}),a.jsx("div",{children:a.jsx(Ct,{checked:n,onChange:l=>e({markReadOnScroll:l})})})]})]})},Zu=[{title:"Key",dataIndex:"keyName",render:e=>a.jsx(Un,{children:e})},{title:"Function",dataIndex:"description"}],Ju=[{key:"1",keyName:"Esc",description:"Exit the article view and return to the list."},{key:"2",keyName:"â†",description:"Navigate to the previous article in the list."},{key:"3",keyName:"Ctrl + â†",description:"Navigate to the previous unread article in the list."},{key:"4",keyName:"â†’",description:"Navigate to the next article in the list."},{key:"5",keyName:"Ctrl + â†’",description:"Navigate to the next unread article in the list."},{key:"6",keyName:"B",description:"Open the current article's link in a new browser tab."},{key:"7",keyName:"D",description:"Fetch and display the original content of the current article."},{key:"8",keyName:"M",description:"Toggle the read status of the current article."},{key:"9",keyName:"S",description:"Toggle the star status (bookmark) of the current article."},{key:"10",keyName:"V",description:"Open the photo slider for viewing all images in the current article."}],ed=()=>a.jsx(ro,{borderCell:!0,columns:Zu,data:Ju,pagination:!1,size:"small",style:{margin:"0 auto",width:"90%"}}),td=()=>{const e=(t,n)=>a.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"},children:[t,a.jsx("div",{style:{fontSize:"12px"},children:n})]});return a.jsxs(fn,{className:"custom-tabs",defaultActiveTab:"1",tabPosition:"top",animation:!0,children:[a.jsx(fn.TabPane,{title:e(a.jsx(fc,{style:{fontSize:"20px"}}),"Feeds"),children:a.jsx(Qu,{})},"1"),a.jsx(fn.TabPane,{title:e(a.jsx(mc,{style:{fontSize:"20px"}}),"Categories"),children:a.jsx(qu,{})},"2"),a.jsx(fn.TabPane,{title:e(a.jsx(pc,{style:{fontSize:"20px"}}),"General"),children:a.jsx(Ku,{})},"3"),a.jsx(fn.TabPane,{title:e(a.jsx(gc,{style:{fontSize:"20px"}}),"Appearance"),children:a.jsx(Wu,{})},"4"),a.jsx(fn.TabPane,{title:e(a.jsx(vc,{style:{fontSize:"20px"}}),"Hotkeys"),children:a.jsx(ed,{})},"5")]})},nd=[{required:!0}],rd=[{required:!0}],sd=[{type:"boolean"}],id=()=>{const{setSettingsModalVisible:e,settingsModalVisible:t}=ti();return a.jsx(vn,{alignCenter:!1,autoFocus:!1,className:"settings-modal",focusLock:!0,footer:null,onCancel:()=>e(!1),title:null,unmountOnExit:!0,visible:t,children:a.jsx(td,{})})},ad=()=>{const e=X(nr),{addFeedModalVisible:t,setAddFeedModalVisible:n}=ti(),[r,s]=S.useState(!1),[i]=pe.useForm(),{fetchData:o}=pi(),l=async(c,u,d)=>{s(!0);try{await ju(c,u,d),await o(),K.success("Added a feed successfully"),n(!1),i.resetFields()}catch{K.error("Failed to add a feed")}finally{s(!1)}};return a.jsx(vn,{title:"Add Feed",visible:t,unmountOnExit:!0,style:{width:"400px"},onOk:i.submit,confirmLoading:r,onCancel:()=>{n(!1),i.resetFields()},children:a.jsxs(pe,{form:i,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:async c=>{const u=c.url.trim();u?await l(u,c.category,c.crawler):K.error("Feed URL cannot be empty")},children:[a.jsx(pe.Item,{label:"Feed URL",field:"url",rules:nd,children:a.jsx(Le,{placeholder:"Please input a feed URL"})}),a.jsx(pe.Item,{field:"category",label:"Category",required:!0,rules:rd,children:a.jsx(me,{placeholder:"Please select a category",showSearch:!0,filterOption:(c,u)=>Mr(u.props.children,c),children:e.map(c=>a.jsx(me.Option,{value:c.id,children:c.title},c.id))})}),a.jsx(pe.Item,{field:"crawler",initialValue:!1,label:"Fetch original content",rules:sd,style:{marginBottom:0},triggerPropName:"checked",children:a.jsx(Ct,{})})]})})},od=()=>a.jsxs("div",{className:"main",children:[a.jsx(yc,{}),a.jsx(id,{}),a.jsx(ad,{})]}),ld=()=>{const{theme:e,themeColor:t}=X(xe),[n,r]=S.useState(window.matchMedia("(prefers-color-scheme: dark)").matches),{belowLg:s}=Jn();return S.useEffect(()=>{const i=l=>{r(l.matches)},o=window.matchMedia("(prefers-color-scheme: dark)");return o.addEventListener("change",i),()=>o.removeEventListener("change",i)},[]),S.useEffect(()=>{Js(t);const i=o=>{const l=o?"dark":"light";document.body.setAttribute("arco-theme",l),document.body.style.colorScheme=l};i(e==="system"?n:e==="dark")},[n,e,t]),a.jsxs("div",{className:"app",children:[s?null:a.jsx(bc.Sider,{breakpoint:"lg",className:"sidebar",collapsible:!1,trigger:null,width:240,children:a.jsx(No,{})}),a.jsx(Hu,{}),a.jsx(od,{})]})},$o=e=>{const n=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(n).map(r=>r.getAttribute("src"))},_s=e=>{var s;const r=(s=new DOMParser().parseFromString(e.content,"text/html").querySelector("img"))==null?void 0:s.getAttribute("src");return{...e,imgSrc:r}},cd=se(!1),zo=()=>{const{pageSize:e}=X(xe),[t,n]=Ee(rr),[r,s]=Ee(Ao),[i,o]=Ee(sr),[l,c]=Ee(Oo),u=X(ir),d=Z(Yr),h=Z(qr),g=X(Io),b=X(di),[v,f]=Ee(cd),m=T=>{const C=(k,R)=>R.filter(O=>!k.some(y=>y.id===O.id));u==="all"?(n(k=>[...k,...C(k,T)]),h(t.length<g),s(k=>k+e)):(o(k=>[...k,...C(k,T)]),d(i.length<b),c(k=>k+e))};return{handleLoadMore:async T=>{f(!0);try{let C;if(u==="all"?C=await T(r+e):C=await T(l,u),C!=null&&C.entries){const k=C.entries.map(_s);m(k)}}catch(C){console.error("Error fetching more articles: ",C)}finally{f(!1)}},loadingMore:v}},ud=se(!1),dd=se(0),Vo=()=>{const[e,t]=Ee(ud),[n,r]=Ee(dd);return{isPhotoSliderVisible:e,setIsPhotoSliderVisible:t,selectedIndex:n,setSelectedIndex:r}},Uo=e=>{const t=X(fi),n=X(ir),r=X(Yr),s=X(qr),i=Z(mi),[o,l]=Ee(jt),{isPhotoSliderVisible:c,setIsPhotoSliderVisible:u,setSelectedIndex:d}=Vo(),{loadingMore:h}=zo(),[g,b]=S.useState(!1),[v,f]=S.useState(!1),[m,x]=S.useState(!1);S.useEffect(()=>{v&&!h&&(b(!1),f(!1),k())},[v,h]),S.useEffect(()=>{if(m){const _=document.querySelector(".card-custom-selected-style");_&&_.scrollIntoView({behavior:"smooth",block:"nearest"}),x(!1)}},[m]);const T=(_,I)=>{o&&(l(null),_.current&&(_.current.setAttribute("tabIndex","-1"),_.current.focus()),I.current&&I.current.scrollTo(0,0))},C=(_=!1)=>{const I=t.findIndex(N=>N.id===(o==null?void 0:o.id));if(I>0){let N;_?N=t.slice(0,I).toReversed().find(q=>q.status==="unread"):N=t[I-1],N&&e(N).then(()=>{x(!0)})}},k=(_=!1)=>{if(g)return;const I=t.findIndex(q=>q.id===(o==null?void 0:o.id));if(I===t.length-1&&(n==="all"&&s||r)){b(!0),f(!0);return}if(I===-1){const q=document.querySelector(".entry-list");q&&q.scrollTo(0,0)}if(I<t.length-1){let q;_?q=t.slice(I+1).find(J=>J.status==="unread"):q=t[I+1],q&&(e(q).then(()=>{x(!0)}),f(!1))}};return{exitDetailView:T,fetchOriginalArticle:_=>{o&&_()},navigateToNextArticle:k,navigateToPreviousArticle:C,openLinkExternally:()=>{o&&window.open(o.url,"_blank")},openPhotoSlider:()=>{if(o){if($o(o.content).length===0)return;c||(d(0),u(!0),i(!1))}},toggleReadStatus:_=>{o&&_()},toggleStarStatus:_=>{o&&_()}}};var Bo={},gi={},vi={};Object.defineProperty(vi,"__esModule",{value:!0});var aa="html",oa="head",pr="body",hd=/<([a-zA-Z]+[0-9]?)/,la=/<head[^]*>/i,ca=/<body[^]*>/i,Dr=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},ks=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},ua=typeof window=="object"&&window.DOMParser;if(typeof ua=="function"){var fd=new ua,md="text/html";ks=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),fd.parseFromString(e,md)},Dr=ks}if(typeof document=="object"&&document.implementation){var gr=document.implementation.createHTMLDocument();Dr=function(e,t){if(t){var n=gr.documentElement.querySelector(t);return n&&(n.innerHTML=e),gr}return gr.documentElement.innerHTML=e,gr}}var vr=typeof document=="object"&&document.createElement("template"),Is;vr&&vr.content&&(Is=function(e){return vr.innerHTML=e,vr.content.childNodes});function pd(e){var t,n,r=e.match(hd),s=r&&r[1]?r[1].toLowerCase():"";switch(s){case aa:{var i=ks(e);if(!la.test(e)){var o=i.querySelector(oa);(t=o==null?void 0:o.parentNode)===null||t===void 0||t.removeChild(o)}if(!ca.test(e)){var o=i.querySelector(pr);(n=o==null?void 0:o.parentNode)===null||n===void 0||n.removeChild(o)}return i.querySelectorAll(aa)}case oa:case pr:{var l=Dr(e).querySelectorAll(s);return ca.test(e)&&la.test(e)?l[0].parentNode.childNodes:l}default:{if(Is)return Is(e);var o=Dr(e,pr).querySelector(pr);return o.childNodes}}}vi.default=pd;var xn={},yi={},bi={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(bi);var re={},$t=ge&&ge.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(r[i]=s[i])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=ge&&ge.__assign||function(){return Fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Fn.apply(this,arguments)};Object.defineProperty(re,"__esModule",{value:!0});re.cloneNode=re.hasChildren=re.isDocument=re.isDirective=re.isComment=re.isText=re.isCDATA=re.isTag=re.Element=re.Document=re.CDATA=re.NodeWithChildren=re.ProcessingInstruction=re.Comment=re.Text=re.DataNode=re.Node=void 0;var Fe=bi,xi=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),wi(this,t)},e}();re.Node=xi;var Qr=function(e){$t(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(xi);re.DataNode=Qr;var Ho=function(e){$t(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Qr);re.Text=Ho;var Wo=function(e){$t(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Qr);re.Comment=Wo;var qo=function(e){$t(t,e);function t(n,r){var s=e.call(this,r)||this;return s.name=n,s.type=Fe.ElementType.Directive,s}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Qr);re.ProcessingInstruction=qo;var Kr=function(e){$t(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(xi);re.NodeWithChildren=Kr;var Yo=function(e){$t(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Kr);re.CDATA=Yo;var Xo=function(e){$t(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Fe.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Kr);re.Document=Xo;var Go=function(e){$t(t,e);function t(n,r,s,i){s===void 0&&(s=[]),i===void 0&&(i=n==="script"?Fe.ElementType.Script:n==="style"?Fe.ElementType.Style:Fe.ElementType.Tag);var o=e.call(this,s)||this;return o.name=n,o.attribs=r,o.type=i,o}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var s,i;return{name:r,value:n.attribs[r],namespace:(s=n["x-attribsNamespace"])===null||s===void 0?void 0:s[r],prefix:(i=n["x-attribsPrefix"])===null||i===void 0?void 0:i[r]}})},enumerable:!1,configurable:!0}),t}(Kr);re.Element=Go;function Qo(e){return(0,Fe.isTag)(e)}re.isTag=Qo;function Ko(e){return e.type===Fe.ElementType.CDATA}re.isCDATA=Ko;function Zo(e){return e.type===Fe.ElementType.Text}re.isText=Zo;function Jo(e){return e.type===Fe.ElementType.Comment}re.isComment=Jo;function el(e){return e.type===Fe.ElementType.Directive}re.isDirective=el;function tl(e){return e.type===Fe.ElementType.Root}re.isDocument=tl;function gd(e){return Object.prototype.hasOwnProperty.call(e,"children")}re.hasChildren=gd;function wi(e,t){t===void 0&&(t=!1);var n;if(Zo(e))n=new Ho(e.data);else if(Jo(e))n=new Wo(e.data);else if(Qo(e)){var r=t?hs(e.children):[],s=new Go(e.name,Fn({},e.attribs),r);r.forEach(function(c){return c.parent=s}),e.namespace!=null&&(s.namespace=e.namespace),e["x-attribsNamespace"]&&(s["x-attribsNamespace"]=Fn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(s["x-attribsPrefix"]=Fn({},e["x-attribsPrefix"])),n=s}else if(Ko(e)){var r=t?hs(e.children):[],i=new Yo(r);r.forEach(function(u){return u.parent=i}),n=i}else if(tl(e)){var r=t?hs(e.children):[],o=new Xo(r);r.forEach(function(u){return u.parent=o}),e["x-mode"]&&(o["x-mode"]=e["x-mode"]),n=o}else if(el(e)){var l=new qo(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}re.cloneNode=wi;function hs(e){for(var t=e.map(function(r){return wi(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ge&&ge.__createBinding||(Object.create?function(l,c,u,d){d===void 0&&(d=u);var h=Object.getOwnPropertyDescriptor(c,u);(!h||("get"in h?!c.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,d,h)}:function(l,c,u,d){d===void 0&&(d=u),l[d]=c[u]}),n=ge&&ge.__exportStar||function(l,c){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(c,u)&&t(c,l,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=bi,s=re;n(re,e);var i={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},o=function(){function l(c,u,d){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=i),typeof c=="object"&&(u=c,c=void 0),this.callback=c??null,this.options=u??i,this.elementCB=d??null}return l.prototype.onparserinit=function(c){this.parser=c},l.prototype.onreset=function(){this.dom=[],this.root=new s.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(c){this.handleCallback(c)},l.prototype.onclosetag=function(){this.lastNode=null;var c=this.tagStack.pop();this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(c)},l.prototype.onopentag=function(c,u){var d=this.options.xmlMode?r.ElementType.Tag:void 0,h=new s.Element(c,u,void 0,d);this.addNode(h),this.tagStack.push(h)},l.prototype.ontext=function(c){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=c,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new s.Text(c);this.addNode(d),this.lastNode=d}},l.prototype.oncomment=function(c){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=c;return}var u=new s.Comment(c);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var c=new s.Text(""),u=new s.CDATA([c]);this.addNode(u),c.parent=u,this.lastNode=c},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(c,u){var d=new s.ProcessingInstruction(c,u);this.addNode(d)},l.prototype.handleCallback=function(c){if(typeof this.callback=="function")this.callback(c,this.dom);else if(c)throw c},l.prototype.addNode=function(c){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(c.startIndex=this.parser.startIndex),this.options.withEndIndices&&(c.endIndex=this.parser.endIndex),u.children.push(c),d&&(c.prev=d,d.next=c),c.parent=u,this.lastNode=null},l}();e.DomHandler=o,e.default=o})(yi);var nl={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(nl);Object.defineProperty(xn,"__esModule",{value:!0});xn.formatDOM=xn.formatAttributes=void 0;var yr=yi,vd=nl;function yd(e){return vd.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function rl(e){for(var t={},n=0,r=e.length;n<r;n++){var s=e[n];t[s.name]=s.value}return t}xn.formatAttributes=rl;function bd(e){e=e.toLowerCase();var t=yd(e);return t||e}function sl(e,t,n){t===void 0&&(t=null);for(var r=[],s,i=0,o=e.length;i<o;i++){var l=e[i];switch(l.nodeType){case 1:{var c=bd(l.nodeName);s=new yr.Element(c,rl(l.attributes)),s.children=sl(c==="template"?l.content.childNodes:l.childNodes,s);break}case 3:s=new yr.Text(l.nodeValue);break;case 8:s=new yr.Comment(l.nodeValue);break;default:continue}var u=r[i-1]||null;u&&(u.next=s),s.parent=t,s.prev=u,s.next=null,r.push(s)}return n&&(s=new yr.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),s.next=r[0]||null,s.parent=t,r.unshift(s),r[1]&&(r[1].prev=r[0])),r}xn.formatDOM=sl;var xd=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gi,"__esModule",{value:!0});var wd=xd(vi),Sd=xn,Ed=/<(![a-zA-Z\s]+)>/;function Cd(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Ed),n=t?t[1]:void 0;return(0,Sd.formatDOM)((0,wd.default)(e),null,n)}gi.default=Cd;var Zr={},st={},Jr={},Td=0;Jr.SAME=Td;var jd=1;Jr.CAMELCASE=jd;Jr.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const il=0,zt=1,es=2,ts=3,Si=4,al=5,ol=6;function Md(e){return je.hasOwnProperty(e)?je[e]:null}function Oe(e,t,n,r,s,i,o){this.acceptsBooleans=t===es||t===ts||t===Si,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}const je={},_d=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];_d.forEach(e=>{je[e]=new Oe(e,il,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{je[e]=new Oe(e,zt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{je[e]=new Oe(e,es,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{je[e]=new Oe(e,es,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{je[e]=new Oe(e,ts,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{je[e]=new Oe(e,ts,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{je[e]=new Oe(e,Si,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{je[e]=new Oe(e,ol,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{je[e]=new Oe(e,al,!1,e.toLowerCase(),null,!1,!1)});const Ei=/[\-\:]([a-z])/g,Ci=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(Ei,Ci);je[t]=new Oe(t,zt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(Ei,Ci);je[t]=new Oe(t,zt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(Ei,Ci);je[t]=new Oe(t,zt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{je[e]=new Oe(e,zt,!1,e.toLowerCase(),null,!1,!1)});const kd="xlinkHref";je[kd]=new Oe("xlinkHref",zt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{je[e]=new Oe(e,zt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:Id,SAME:Ad,possibleStandardNames:da}=Jr,Od=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Pd=Od+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Rd=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+Pd+"]*$")),Fd=Object.keys(da).reduce((e,t)=>{const n=da[t];return n===Ad?e[t]=t:n===Id?e[t.toLowerCase()]=t:e[t]=n,e},{});st.BOOLEAN=ts;st.BOOLEANISH_STRING=es;st.NUMERIC=al;st.OVERLOADED_BOOLEAN=Si;st.POSITIVE_NUMERIC=ol;st.RESERVED=il;st.STRING=zt;st.getPropertyInfo=Md;st.isCustomAttribute=Rd;st.possibleStandardNames=Fd;var Ti={},ji={},ha=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Nd=/\n/g,Dd=/^\s*/,Ld=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,$d=/^:\s*/,zd=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Vd=/^[;\s]*/,Ud=/^\s+|\s+$/g,Bd=`
`,fa="/",ma="*",Zt="",Hd="comment",Wd="declaration",qd=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(v){var f=v.match(Nd);f&&(n+=f.length);var m=v.lastIndexOf(Bd);r=~m?v.length-m:r+v.length}function i(){var v={line:n,column:r};return function(f){return f.position=new o(v),u(),f}}function o(v){this.start=v,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function l(v){var f=new Error(t.source+":"+n+":"+r+": "+v);if(f.reason=v,f.filename=t.source,f.line=n,f.column=r,f.source=e,!t.silent)throw f}function c(v){var f=v.exec(e);if(f){var m=f[0];return s(m),e=e.slice(m.length),f}}function u(){c(Dd)}function d(v){var f;for(v=v||[];f=h();)f!==!1&&v.push(f);return v}function h(){var v=i();if(!(fa!=e.charAt(0)||ma!=e.charAt(1))){for(var f=2;Zt!=e.charAt(f)&&(ma!=e.charAt(f)||fa!=e.charAt(f+1));)++f;if(f+=2,Zt===e.charAt(f-1))return l("End of comment missing");var m=e.slice(2,f-2);return r+=2,s(m),e=e.slice(f),r+=2,v({type:Hd,comment:m})}}function g(){var v=i(),f=c(Ld);if(f){if(h(),!c($d))return l("property missing ':'");var m=c(zd),x=v({type:Wd,property:pa(f[0].replace(ha,Zt)),value:m?pa(m[0].replace(ha,Zt)):Zt});return c(Vd),x}}function b(){var v=[];d(v);for(var f;f=g();)f!==!1&&(v.push(f),d(v));return v}return u(),b()};function pa(e){return e?e.replace(Ud,Zt):Zt}var Yd=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ji,"__esModule",{value:!0});var Xd=Yd(qd);function Gd(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Xd.default)(e),s=typeof t=="function";return r.forEach(function(i){if(i.type==="declaration"){var o=i.property,l=i.value;s?t(o,l,i):l&&(n=n||{},n[o]=l)}}),n}ji.default=Gd;var ns={};Object.defineProperty(ns,"__esModule",{value:!0});ns.camelCase=void 0;var Qd=/^--[a-zA-Z0-9-]+$/,Kd=/-([a-z])/g,Zd=/^[^-]+$/,Jd=/^-(webkit|moz|ms|o|khtml)-/,eh=/^-(ms)-/,th=function(e){return!e||Zd.test(e)||Qd.test(e)},nh=function(e,t){return t.toUpperCase()},ga=function(e,t){return"".concat(t,"-")},rh=function(e,t){return t===void 0&&(t={}),th(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(eh,ga):e=e.replace(Jd,ga),e.replace(Kd,nh))};ns.camelCase=rh;var sh=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},ih=sh(ji),ah=ns;function As(e,t){var n={};return!e||typeof e!="string"||(0,ih.default)(e,function(r,s){r&&s&&(n[(0,ah.camelCase)(r,t)]=s)}),n}As.default=As;var oh=As;(function(e){var t=ge&&ge.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=S,r=t(oh),s=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function i(d,h){return d.includes("-")?!s.has(d):!!(h&&typeof h.is=="string")}e.isCustomComponent=i;var o={reactCompat:!0};function l(d,h){if(typeof d=="string"){if(!d.trim()){h.style={};return}try{h.style=(0,r.default)(d,o)}catch{h.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var c=function(d){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(d.name)};e.canTextBeChildOfNode=c;var u=function(d){return d};e.returnFirstArg=u})(Ti);Object.defineProperty(Zr,"__esModule",{value:!0});var On=st,va=Ti,lh=["checked","value"],ch=["input","select","textarea"],uh={reset:!0,submit:!0};function dh(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&uh[e.type]);for(var s in e){var i=e[s];if((0,On.isCustomAttribute)(s)){n[s]=i;continue}var o=s.toLowerCase(),l=ya(o);if(l){var c=(0,On.getPropertyInfo)(l);switch(lh.includes(l)&&ch.includes(t)&&!r&&(l=ya("default"+o)),n[l]=i,c&&c.type){case On.BOOLEAN:n[l]=!0;break;case On.OVERLOADED_BOOLEAN:i===""&&(n[l]=!0);break}continue}va.PRESERVE_CUSTOM_ATTRIBUTES&&(n[s]=i)}return(0,va.setStyleProp)(e.style,n),n}Zr.default=dh;function ya(e){return On.possibleStandardNames[e]}var Mi={},hh=ge&&ge.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Mi,"__esModule",{value:!0});var fs=S,fh=hh(Zr),Nn=Ti,mh={cloneElement:fs.cloneElement,createElement:fs.createElement,isValidElement:fs.isValidElement};function ll(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",s=t.transform||Nn.returnFirstArg,i=t.library||mh,o=i.cloneElement,l=i.createElement,c=i.isValidElement,u=e.length,d=0;d<u;d++){var h=e[d];if(r){var g=t.replace(h,d);if(c(g)){u>1&&(g=o(g,{key:g.key||d})),n.push(s(g,h,d));continue}}if(h.type==="text"){var b=!h.data.trim().length;if(b&&h.parent&&!(0,Nn.canTextBeChildOfNode)(h.parent)||t.trim&&b)continue;n.push(s(h.data,h,d));continue}var v=h,f={};ph(v)?((0,Nn.setStyleProp)(v.attribs.style,v.attribs),f=v.attribs):v.attribs&&(f=(0,fh.default)(v.attribs,v.name));var m=void 0;switch(h.type){case"script":case"style":h.children[0]&&(f.dangerouslySetInnerHTML={__html:h.children[0].data});break;case"tag":h.name==="textarea"&&h.children[0]?f.defaultValue=h.children[0].data:h.children&&h.children.length&&(m=ll(h.children,t));break;default:continue}u>1&&(f.key=d),n.push(s(l(h.name,f,m),h,d))}return n.length===1?n[0]:n}Mi.default=ll;function ph(e){return Nn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,Nn.isCustomComponent)(e.name,e.attribs)}(function(e){var t=ge&&ge.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(gi);e.htmlToDOM=n.default;var r=t(Zr);e.attributesToProps=r.default;var s=t(Mi);e.domToReact=s.default;var i=yi;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return i.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return i.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return i.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return i.Text}});var o={lowerCaseAttributeNames:!1};function l(c,u){if(typeof c!="string")throw new TypeError("First argument must be a string");return c?(0,s.default)((0,n.default)(c,(u==null?void 0:u.htmlparser2)||o),u):[]}e.default=l})(Bo);const ba=Zn(Bo),gh=ba.default||ba;function _e(){return _e=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_e.apply(this,arguments)}function _i(e,t){if(e==null)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)t.indexOf(n=i[r])>=0||(s[n]=e[n]);return s}function _r(e){var t=S.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(r){n[r]=function(){var s;return(s=t.fn[r]).call.apply(s,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function Os(e){return S.useReducer(function(t,n){return _e({},t,typeof n=="function"?n(t):n)},e)}S.createContext(void 0);var wt=typeof window<"u"&&"ontouchstart"in window,Ps=function(e,t,n){return Math.max(Math.min(e,n),t)},br=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),Ps(e,1*(1-n),Math.max(6,t)*(1+n))},Rs=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?S.useEffect:S.useLayoutEffect;function pn(e,t,n){var r=S.useRef(t);r.current=t,S.useEffect(function(){function s(i){r.current(i)}return e&&window.addEventListener(e,s,n),function(){e&&window.removeEventListener(e,s)}},[e])}var vh=["container"];function yh(e){var t=e.container,n=t===void 0?document.body:t,r=_i(e,vh);return Qs.createPortal(ae.createElement("div",_e({},r)),n)}function bh(e){return ae.createElement("svg",_e({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function xh(e){return ae.createElement("svg",_e({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function wh(e){return ae.createElement("svg",_e({width:"44",height:"44",viewBox:"0 0 768 768"},e),ae.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Sh(){return S.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function xa(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var s=e.touches[1],i=s.clientX,o=s.clientY;return[(n+i)/2,(r+o)/2,Math.sqrt(Math.pow(i-n,2)+Math.pow(o-r,2))]}return[n,r,0]}var Ft=function(e,t,n,r){var s=n*t,i=(s-r)/2,o=void 0,l=e;return s<=r?(o=1,l=0):e>0&&i-e<=0?(o=2,l=i):e<0&&i+e<=0&&(o=3,l=-i),[o,l]};function ms(e,t,n,r,s,i,o,l,c,u){o===void 0&&(o=innerWidth/2),l===void 0&&(l=innerHeight/2),c===void 0&&(c=0),u===void 0&&(u=0);var d=Ft(e,i,n,innerWidth)[0],h=Ft(t,i,r,innerHeight),g=innerWidth/2,b=innerHeight/2;return{x:o-i/s*(o-(g+e))-g+(r/n>=3&&n*i===innerWidth?0:d?c/2:c),y:l-i/s*(l-(b+t))-b+(h[0]?u/2:u),lastCX:o,lastCY:l}}function Fs(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function ps(e,t,n){var r=Fs(n,innerWidth,innerHeight),s=r[0],i=r[1],o=0,l=s,c=i,u=e/t*i,d=t/e*s;return e<s&&t<i?(l=e,c=t):e<s&&t>=i?l=u:e>=s&&t<i||e/t>s/i?c=d:t/e>=3&&!r[2]?o=((c=d)-i)/2:l=u,{width:l,height:c,x:0,y:o,pause:!0}}function xr(e,t){var n=t.leading,r=n!==void 0&&n,s=t.maxWait,i=t.wait,o=i===void 0?s||0:i,l=S.useRef(e);l.current=e;var c=S.useRef(0),u=S.useRef(),d=function(){return u.current&&clearTimeout(u.current)},h=S.useCallback(function(){var g=[].slice.call(arguments),b=Date.now();function v(){c.current=b,d(),l.current.apply(null,g)}var f=c.current,m=b-f;if(f===0&&(r&&v(),c.current=b),s!==void 0){if(m>s)return void v()}else m<o&&(c.current=b);d(),u.current=setTimeout(function(){v(),c.current=0},o)},[o,s,r]);return h.cancel=d,h}var wa=function(e,t,n){return Jt(e,t,n,100,function(r){return r},function(){return Jt(t,e,n)})},Eh=function(e){return 1-Math.pow(1-e,4)};function Jt(e,t,n,r,s,i){r===void 0&&(r=400),s===void 0&&(s=Eh);var o=t-e;if(o!==0){var l=Date.now(),c=0,u=function(){var h=Math.min(1,(Date.now()-l)/r);n(e+s(h)*o)&&h<1?d():(cancelAnimationFrame(c),h>=1&&i&&i())};d()}function d(){c=requestAnimationFrame(u)}}var Ch={T:0,L:0,W:0,H:0,FIT:void 0},cl=function(){var e=S.useRef(!1);return S.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Th=["className"];function jh(e){var t=e.className,n=_i(e,Th);return ae.createElement("div",_e({className:"PhotoView__Spinner "+t},n),ae.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},ae.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),ae.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var Mh=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function _h(e){var t=e.src,n=e.loaded,r=e.broken,s=e.className,i=e.onPhotoLoad,o=e.loadingElement,l=e.brokenElement,c=_i(e,Mh),u=cl();return t&&!r?ae.createElement(ae.Fragment,null,ae.createElement("img",_e({className:"PhotoView__Photo"+(s?" "+s:""),src:t,onLoad:function(d){var h=d.target;u.current&&i({loaded:!0,naturalWidth:h.naturalWidth,naturalHeight:h.naturalHeight})},onError:function(){u.current&&i({broken:!0})},alt:""},c)),!n&&(ae.createElement("span",{className:"PhotoView__icon"},o)||ae.createElement(jh,{className:"PhotoView__icon"}))):l?ae.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var kh={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Ih(e){var t=e.item,n=t.src,r=t.render,s=t.width,i=s===void 0?0:s,o=t.height,l=o===void 0?0:o,c=t.originRef,u=e.visible,d=e.speed,h=e.easing,g=e.wrapClassName,b=e.className,v=e.style,f=e.loadingElement,m=e.brokenElement,x=e.onPhotoTap,T=e.onMaskTap,C=e.onReachMove,k=e.onReachUp,R=e.onPhotoResize,O=e.isActive,y=e.expose,E=Os(kh),M=E[0],_=E[1],I=S.useRef(0),N=cl(),q=M.naturalWidth,J=q===void 0?i:q,le=M.naturalHeight,de=le===void 0?l:le,Pe=M.width,we=Pe===void 0?i:Pe,Mt=M.height,w=Mt===void 0?l:Mt,p=M.loaded,F=p===void 0?!n:p,D=M.broken,L=M.x,V=M.y,U=M.touched,$=M.stopRaf,W=M.maskTouched,Q=M.rotate,P=M.scale,B=M.CX,Y=M.CY,ie=M.lastX,ee=M.lastY,te=M.lastCX,Me=M.lastCY,ve=M.lastScale,Ce=M.touchTime,ze=M.touchLength,ye=M.pause,ht=M.reach,Vt=_r({onScale:function(j){return Ge(br(j))},onRotate:function(j){Q!==j&&(y({rotate:j}),_(_e({rotate:j},ps(J,de,j))))}});function Ge(j,H,ce){P!==j&&(y({scale:j}),_(_e({scale:j},ms(L,V,we,w,P,j,H,ce),j<=1&&{x:0,y:0})))}var Ut=xr(function(j,H,ce){if(ce===void 0&&(ce=0),(U||W)&&O){var Wt=Fs(Q,we,w),ft=Wt[0],Ke=Wt[1];if(ce===0&&I.current===0){var Te=Math.abs(j-B)<=20,Ne=Math.abs(H-Y)<=20;if(Te&&Ne)return void _({lastCX:j,lastCY:H});I.current=Te?H>Y?3:2:1}var qt=j-te,Yt=H-Me,Ze=void 0;if(ce===0){var Xt=Ft(qt+ie,P,ft,innerWidth)[0],ln=Ft(Yt+ee,P,Ke,innerHeight);Ze=function(It,pt,gt,ot){return pt&&It===1||ot==="x"?"x":gt&&It>1||ot==="y"?"y":void 0}(I.current,Xt,ln[0],ht),Ze!==void 0&&C(Ze,j,H,P)}if(Ze==="x"||W)return void _({reach:"x"});var mt=br(P+(ce-ze)/100/2*P,J/we,.2);y({scale:mt}),_(_e({touchLength:ce,reach:Ze,scale:mt},ms(L,V,we,w,P,mt,j,H,qt,Yt)))}},{maxWait:8});function Bt(j){return!$&&!U&&(N.current&&_(_e({},j,{pause:u})),N.current)}var Qe,Ve,it,_t,Ht,kt,sn,ke,cr=(Ht=function(j){return Bt({x:j})},kt=function(j){return Bt({y:j})},sn=function(j){return N.current&&(y({scale:j}),_({scale:j})),!U&&N.current},ke=_r({X:function(j){return Ht(j)},Y:function(j){return kt(j)},S:function(j){return sn(j)}}),function(j,H,ce,Wt,ft,Ke,Te,Ne,qt,Yt,Ze){var Xt=Fs(Yt,ft,Ke),ln=Xt[0],mt=Xt[1],It=Ft(j,Ne,ln,innerWidth),pt=It[0],gt=It[1],ot=Ft(H,Ne,mt,innerHeight),cn=ot[0],dr=ot[1],un=Date.now()-Ze;if(un>=200||Ne!=Te||Math.abs(qt-Te)>1){var At=ms(j,H,ft,Ke,Te,Ne),vt=At.x,Gt=At.y,Ue=pt?gt:vt!==j?vt:null,dn=cn?dr:Gt!==H?Gt:null;return Ue!==null&&Jt(j,Ue,ke.X),dn!==null&&Jt(H,dn,ke.Y),void(Ne!=Te&&Jt(Te,Ne,ke.S))}var Qt=(j-ce)/un,Ot=(H-Wt)/un,Pt=Math.sqrt(Math.pow(Qt,2)+Math.pow(Ot,2)),yt=!1,bt=!1;(function(Je,Ie){var Ae=Je,xt=0,et=void 0,Be=0,hn=function(jn){et||(et=jn);var Mn=jn-et,Hi=Math.sign(Je),Wi=-.001*Hi,qi=Math.sign(-Ae)*Math.pow(Ae,2)*2e-4,Hl=Ae*Mn+(Wi+qi)*Math.pow(Mn,2)/2;xt+=Hl,et=jn,Hi*(Ae+=(Wi+qi)*Mn)<=0?He():Ie(xt)?lt():He()};function lt(){Be=requestAnimationFrame(hn)}function He(){cancelAnimationFrame(Be)}lt()})(Pt,function(Je){var Ie=j+Je*(Qt/Pt),Ae=H+Je*(Ot/Pt),xt=Ft(Ie,Te,ln,innerWidth),et=xt[0],Be=xt[1],hn=Ft(Ae,Te,mt,innerHeight),lt=hn[0],He=hn[1];if(et&&!yt&&(yt=!0,pt?Jt(Ie,Be,ke.X):wa(Be,Ie+(Ie-Be),ke.X)),lt&&!bt&&(bt=!0,cn?Jt(Ae,He,ke.Y):wa(He,Ae+(Ae-He),ke.Y)),yt&&bt)return!1;var jn=yt||ke.X(Be),Mn=bt||ke.Y(He);return jn&&Mn})}),an=(Qe=x,Ve=function(j,H){ht||Ge(P!==1?1:Math.max(2,J/we),j,H)},it=S.useRef(0),_t=xr(function(){it.current=0,Qe.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var j=[].slice.call(arguments);it.current+=1,_t.apply(void 0,j),it.current>=2&&(_t.cancel(),it.current=0,Ve.apply(void 0,j))});function on(j,H){if(I.current=0,(U||W)&&O){_({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var ce=br(P,J/we);if(cr(L,V,ie,ee,we,w,P,ce,ve,Q,Ce),k(j,H),B===j&&Y===H){if(U)return void an(j,H);W&&T(j,H)}}}function Tn(j,H,ce){ce===void 0&&(ce=0),_({touched:!0,CX:j,CY:H,lastCX:j,lastCY:H,lastX:L,lastY:V,lastScale:P,touchLength:ce,touchTime:Date.now()})}function ur(j){_({maskTouched:!0,CX:j.clientX,CY:j.clientY,lastX:L,lastY:V})}pn(wt?void 0:"mousemove",function(j){j.preventDefault(),Ut(j.clientX,j.clientY)}),pn(wt?void 0:"mouseup",function(j){on(j.clientX,j.clientY)}),pn(wt?"touchmove":void 0,function(j){j.preventDefault();var H=xa(j);Ut.apply(void 0,H)},{passive:!1}),pn(wt?"touchend":void 0,function(j){var H=j.changedTouches[0];on(H.clientX,H.clientY)},{passive:!1}),pn("resize",xr(function(){F&&!U&&(_(ps(J,de,Q)),R())},{maxWait:8})),Rs(function(){O&&y(_e({scale:P,rotate:Q},Vt))},[O]);var at=function(j,H,ce,Wt,ft,Ke,Te,Ne,qt,Yt){var Ze=function(vt,Gt,Ue,dn,Qt){var Ot=S.useRef(!1),Pt=Os({lead:!0,scale:Ue}),yt=Pt[0],bt=yt.lead,Je=yt.scale,Ie=Pt[1],Ae=xr(function(xt){try{return Qt(!0),Ie({lead:!1,scale:xt}),Promise.resolve()}catch(et){return Promise.reject(et)}},{wait:dn});return Rs(function(){Ot.current?(Qt(!1),Ie({lead:!0}),Ae(Ue)):Ot.current=!0},[Ue]),bt?[vt*Je,Gt*Je,Ue/Je]:[vt*Ue,Gt*Ue,1]}(Ke,Te,Ne,qt,Yt),Xt=Ze[0],ln=Ze[1],mt=Ze[2],It=function(vt,Gt,Ue,dn,Qt){var Ot=S.useState(Ch),Pt=Ot[0],yt=Ot[1],bt=S.useState(0),Je=bt[0],Ie=bt[1],Ae=S.useRef(),xt=_r({OK:function(){return vt&&Ie(4)}});function et(Be){Qt(!1),Ie(Be)}return S.useEffect(function(){if(Ae.current||(Ae.current=Date.now()),Ue){if(function(Be,hn){var lt=Be&&Be.current;if(lt&&lt.nodeType===1){var He=lt.getBoundingClientRect();hn({T:He.top,L:He.left,W:He.width,H:He.height,FIT:lt.tagName==="IMG"?getComputedStyle(lt).objectFit:void 0})}}(Gt,yt),vt)return Date.now()-Ae.current<250?(Ie(1),requestAnimationFrame(function(){Ie(2),requestAnimationFrame(function(){return et(3)})}),void setTimeout(xt.OK,dn)):void Ie(4);et(5)}},[vt,Ue]),[Je,Pt]}(j,H,ce,qt,Yt),pt=It[0],gt=It[1],ot=gt.W,cn=gt.FIT,dr=innerWidth/2,un=innerHeight/2,At=pt<3||pt>4;return[At?ot?gt.L:dr:Wt+(dr-Ke*Ne/2),At?ot?gt.T:un:ft+(un-Te*Ne/2),Xt,At&&cn?Xt*(gt.H/ot):ln,pt===0?mt:At?ot/(Ke*Ne)||.01:mt,At?cn?1:0:1,pt,cn]}(u,c,F,L,V,we,w,P,d,function(j){return _({pause:j})}),ne=at[4],he=at[6],Se="transform "+d+"ms "+h,be={className:b,onMouseDown:wt?void 0:function(j){j.stopPropagation(),j.button===0&&Tn(j.clientX,j.clientY,0)},onTouchStart:wt?function(j){j.stopPropagation(),Tn.apply(void 0,xa(j))}:void 0,onWheel:function(j){if(!ht){var H=br(P-j.deltaY/100/2,J/we);_({stopRaf:!0}),Ge(H,j.clientX,j.clientY)}},style:{width:at[2],height:at[3],opacity:at[5],objectFit:he===4?void 0:at[7],transform:Q?"rotate("+Q+"deg)":void 0,transition:he>2?Se+", opacity "+d+"ms ease, height "+(he<4?d/2:he>4?d:0)+"ms "+h:void 0}};return ae.createElement("div",{className:"PhotoView__PhotoWrap"+(g?" "+g:""),style:v,onMouseDown:!wt&&O?ur:void 0,onTouchStart:wt&&O?function(j){return ur(j.touches[0])}:void 0},ae.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+ne+", 0, 0, "+ne+", "+at[0]+", "+at[1]+")",transition:U||ye?void 0:Se,willChange:O?"transform":void 0}},n?ae.createElement(_h,_e({src:n,loaded:F,broken:D},be,{onPhotoLoad:function(j){_(_e({},j,j.loaded&&ps(j.naturalWidth||0,j.naturalHeight||0,Q)))},loadingElement:f,brokenElement:m})):r&&r({attrs:be,scale:ne,rotate:Q})))}var Sa={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Ah(e){var t=e.loop,n=t===void 0?3:t,r=e.speed,s=e.easing,i=e.photoClosable,o=e.maskClosable,l=o===void 0||o,c=e.maskOpacity,u=c===void 0?1:c,d=e.pullClosable,h=d===void 0||d,g=e.bannerVisible,b=g===void 0||g,v=e.overlayRender,f=e.toolbarRender,m=e.className,x=e.maskClassName,T=e.photoClassName,C=e.photoWrapClassName,k=e.loadingElement,R=e.brokenElement,O=e.images,y=e.index,E=y===void 0?0:y,M=e.onIndexChange,_=e.visible,I=e.onClose,N=e.afterClose,q=e.portalContainer,J=Os(Sa),le=J[0],de=J[1],Pe=S.useState(0),we=Pe[0],Mt=Pe[1],w=le.x,p=le.touched,F=le.pause,D=le.lastCX,L=le.lastCY,V=le.bg,U=V===void 0?u:V,$=le.lastBg,W=le.overlay,Q=le.minimal,P=le.scale,B=le.rotate,Y=le.onScale,ie=le.onRotate,ee=e.hasOwnProperty("index"),te=ee?E:we,Me=ee?M:Mt,ve=S.useRef(te),Ce=O.length,ze=O[te],ye=typeof n=="boolean"?n:Ce>n,ht=function(ne,he){var Se=S.useReducer(function(ce){return!ce},!1)[1],be=S.useRef(0),j=function(ce,Wt){var ft=S.useRef(ce);function Ke(Te){ft.current=Te}return S.useMemo(function(){(function(Te){ne?(Te(ne),be.current=1):be.current=2})(Ke)},[ce]),[ft.current,Ke]}(ne),H=j[1];return[j[0],be.current,function(){Se(),be.current===2&&(H(!1),he&&he()),be.current=0}]}(_,N),Vt=ht[0],Ge=ht[1],Ut=ht[2];Rs(function(){if(Vt)return de({pause:!0,x:te*-(innerWidth+20)}),void(ve.current=te);de(Sa)},[Vt]);var Bt=_r({close:function(ne){ie&&ie(0),de({overlay:!0,lastBg:U}),I(ne)},changeIndex:function(ne,he){he===void 0&&(he=!1);var Se=ye?ve.current+(ne-te):ne,be=Ce-1,j=Ps(Se,0,be),H=ye?Se:j,ce=innerWidth+20;de({touched:!1,lastCX:void 0,lastCY:void 0,x:-ce*H,pause:he}),ve.current=H,Me&&Me(ye?ne<0?be:ne>be?0:ne:j)}}),Qe=Bt.close,Ve=Bt.changeIndex;function it(ne){return ne?Qe():de({overlay:!W})}function _t(){de({x:-(innerWidth+20)*te,lastCX:void 0,lastCY:void 0,pause:!0}),ve.current=te}function Ht(ne,he,Se,be){ne==="x"?function(j){if(D!==void 0){var H=j-D,ce=H;!ye&&(te===0&&H>0||te===Ce-1&&H<0)&&(ce=H/2),de({touched:!0,lastCX:D,x:-(innerWidth+20)*ve.current+ce,pause:!1})}else de({touched:!0,lastCX:j,x:w,pause:!1})}(he):ne==="y"&&function(j,H){if(L!==void 0){var ce=u===null?null:Ps(u,.01,u-Math.abs(j-L)/100/4);de({touched:!0,lastCY:L,bg:H===1?ce:u,minimal:H===1})}else de({touched:!0,lastCY:j,bg:U,minimal:!0})}(Se,be)}function kt(ne,he){var Se=ne-(D??ne),be=he-(L??he),j=!1;if(Se<-40)Ve(te+1);else if(Se>40)Ve(te-1);else{var H=-(innerWidth+20)*ve.current;Math.abs(be)>100&&Q&&h&&(j=!0,Qe()),de({touched:!1,x:H,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!j||W})}}pn("keydown",function(ne){if(_)switch(ne.key){case"ArrowLeft":Ve(te-1,!0);break;case"ArrowRight":Ve(te+1,!0);break;case"Escape":Qe()}});var sn=function(ne,he,Se){return S.useMemo(function(){var be=ne.length;return Se?ne.concat(ne).concat(ne).slice(be+he-1,be+he+2):ne.slice(Math.max(he-1,0),Math.min(he+2,be+1))},[ne,he,Se])}(O,te,ye);if(!Vt)return null;var ke=W&&!Ge,cr=_?U:$,an=Y&&ie&&{images:O,index:te,visible:_,onClose:Qe,onIndexChange:Ve,overlayVisible:ke,overlay:ze&&ze.overlay,scale:P,rotate:B,onScale:Y,onRotate:ie},on=r?r(Ge):400,Tn=s?s(Ge):"cubic-bezier(0.25, 0.8, 0.25, 1)",ur=r?r(3):600,at=s?s(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return ae.createElement(yh,{className:"PhotoView-Portal"+(ke?"":" PhotoView-Slider__clean")+(_?"":" PhotoView-Slider__willClose")+(m?" "+m:""),role:"dialog",onClick:function(ne){return ne.stopPropagation()},container:q},_&&ae.createElement(Sh,null),ae.createElement("div",{className:"PhotoView-Slider__Backdrop"+(x?" "+x:"")+(Ge===1?" PhotoView-Slider__fadeIn":Ge===2?" PhotoView-Slider__fadeOut":""),style:{background:cr?"rgba(0, 0, 0, "+cr+")":void 0,transitionTimingFunction:Tn,transitionDuration:(p?0:on)+"ms",animationDuration:on+"ms"},onAnimationEnd:Ut}),b&&ae.createElement("div",{className:"PhotoView-Slider__BannerWrap"},ae.createElement("div",{className:"PhotoView-Slider__Counter"},te+1," / ",Ce),ae.createElement("div",{className:"PhotoView-Slider__BannerRight"},f&&an&&f(an),ae.createElement(bh,{className:"PhotoView-Slider__toolbarIcon",onClick:Qe}))),sn.map(function(ne,he){var Se=ye||te!==0?ve.current-1+he:te+he;return ae.createElement(Ih,{key:ye?ne.key+"/"+ne.src+"/"+Se:ne.key,item:ne,speed:on,easing:Tn,visible:_,onReachMove:Ht,onReachUp:kt,onPhotoTap:function(){return it(i)},onMaskTap:function(){return it(l)},wrapClassName:C,className:T,style:{left:(innerWidth+20)*Se+"px",transform:"translate3d("+w+"px, 0px, 0)",transition:p||F?void 0:"transform "+ur+"ms "+at},loadingElement:k,brokenElement:R,onPhotoResize:_t,isActive:ve.current===Se,expose:de})}),!wt&&b&&ae.createElement(ae.Fragment,null,(ye||te!==0)&&ae.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return Ve(te-1,!0)}},ae.createElement(xh,null)),(ye||te+1<Ce)&&ae.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return Ve(te+1,!0)}},ae.createElement(wh,null))),v&&an&&ae.createElement("div",{className:"PhotoView-Slider__Overlay"},v(an)))}const Oh=({handleEntryClick:e,entryListRef:t,entryDetailRef:n})=>{const r=X(jt),{handleFetchContent:s,handleToggleStarred:i,handleToggleStatus:o}=ui(),{exitDetailView:l,navigateToNextArticle:c,navigateToPreviousArticle:u}=Uo(e);if(!r)return null;const d=r.status==="unread",h=r.starred;return a.jsxs(fe.Group,{className:"action-buttons",children:[a.jsx(fe,{icon:a.jsx(xc,{}),onClick:()=>l(t,n),shape:"round",type:"primary"}),a.jsx(fe,{icon:d?a.jsx(io,{}):a.jsx(ao,{}),onClick:()=>o(r),type:"primary"}),a.jsx(fe,{icon:h?a.jsx(Ks,{style:{color:"#ffcd00"}}):a.jsx(Gs,{}),onClick:()=>i(r),type:"primary"}),a.jsx(fe,{icon:a.jsx(wc,{}),onClick:u,type:"primary"}),a.jsx(fe,{icon:a.jsx(Sc,{}),onClick:c,type:"primary"}),a.jsx(fe,{icon:a.jsx(Ec,{}),onClick:s,shape:"round",type:"primary"})]})},Ph=({url:e,text:t})=>{const[n,r]=S.useState(!1),s=()=>r(!n);return a.jsx(Tc,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:s,onMouseLeave:s,children:t})},Ea=({node:e,index:t,togglePhotoSlider:n,isLinkWrapper:r=!1})=>{var f;const s=X(xe),{fontSize:i}=s,[o,l]=S.useState(!1),[c,u]=S.useState(!1),{belowMd:d}=Jn();S.useEffect(()=>{const m=r?e.children[0].attribs.src:e.attribs.src,x=new Image;x.src=m,x.onload=()=>u(x.width<=64&&x.height<=64)},[e,r]);const h=r?e.children[0]:e,g=()=>a.jsx("img",{...h.attribs,alt:h.attribs.alt,style:c?{display:"inline-block",width:"auto",height:`${i}rem`,margin:0}:{}});if(c)return r?a.jsxs("a",{...e.attribs,children:[g(),(f=e.children[1])==null?void 0:f.data]}):g();const b=()=>l(!0),v=()=>l(!1);return a.jsx("div",{style:{textAlign:"center",position:"relative"},children:a.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:b,onMouseLeave:v,children:[r?a.jsx("a",{...e.attribs,children:g()}):g(),a.jsx(fe,{icon:a.jsx(jc,{}),shape:"circle",style:{position:"absolute",top:30,right:10,color:"white",backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:d||o?1:0,transition:"opacity 0.3s"},onClick:m=>{m.preventDefault(),n(t)}})]})})},Rh=(e,t)=>({replace:n=>{if(n.type==="tag"&&n.name==="a"){if(n.children.length>0&&n.children[0].type==="tag"&&n.children[0].name==="img"){const r=e.findIndex(s=>s===n.children[0].attribs.src);return a.jsx(Ea,{node:n,index:r,togglePhotoSlider:t,isLinkWrapper:!0})}}else if(n.type==="tag"&&n.name==="img"){const r=e.findIndex(s=>s===n.attribs.src);return a.jsx(Ea,{node:n,index:r,togglePhotoSlider:t})}return n}}),Fh=S.forwardRef(({handleEntryClick:e,entryListRef:t},n)=>{const r=rn(),s=X(jt),{isPhotoSliderVisible:i,setIsPhotoSliderVisible:o,selectedIndex:l,setSelectedIndex:c}=Vo(),u=X(xe),{articleWidth:d,fontSize:h}=u,g=Z(mi),b=Z(Gr),v=Z(Xr),f=()=>{v("author"),b(s.author)},m=O=>{c(O),o(y=>!y),g(y=>!y)};if(S.useEffect(()=>{var y;const O=(y=n.current)==null?void 0:y.querySelector(".scroll-container");O&&(O.scrollTo(0,0),O.setAttribute("tabIndex","-1"),setTimeout(()=>{O.focus()},200))},[s==null?void 0:s.id]),!s)return a.jsxs("div",{ref:n,className:"content-empty",children:[a.jsx(Cc,{style:{fontSize:"64px"}}),a.jsx(z.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const x=$o(s.content),T=Rh(x,m),C=gh(s.content,T),k=s.feed.category.id,R=s.feed.category.title;return a.jsxs("div",{className:"article-content",onBlur:()=>g(!1),onFocus:()=>g(!0),ref:n,children:[a.jsxs("div",{className:"scroll-container",children:[a.jsxs("div",{className:"article-header",style:{width:`${d}%`},children:[a.jsx(z.Title,{className:"article-title",heading:3,children:a.jsx("a",{href:s.url,target:"_blank",rel:"noopener noreferrer",children:s.title})}),a.jsxs("div",{className:"article-meta",children:[a.jsx(z.Text,{children:a.jsx(Ph,{url:`/feed/${s.feed.id}`,text:s.feed.title})}),a.jsx(z.Text,{onClick:f,style:{cursor:"pointer"},children:` - ${s.author}`}),a.jsx(z.Text,{children:a.jsx(Un,{size:"small",onClick:()=>{r(`/category/${k}`)},style:{marginLeft:"10px",cursor:"pointer"},children:R})})]}),a.jsx(z.Text,{className:"article-date",children:Xe(s.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),a.jsx(qe,{})]}),a.jsxs("div",{className:"article-body",style:{fontSize:`${h}rem`,width:`${d}%`},children:[C,a.jsx(Ah,{images:x.map(O=>({src:O,key:O})),loop:!1,visible:i,onClose:()=>{o(!1),g(!0)},index:l,onIndexChange:c})]},s.id)]}),a.jsx(Oh,{handleEntryClick:e,entryListRef:t,entryDetailRef:n})]})});function _n(e,t,n){let r=n.initialDeps??[],s;return()=>{var i,o,l,c;let u;n.key&&((i=n.debug)!=null&&i.call(n))&&(u=Date.now());const d=e();if(!(d.length!==r.length||d.some((b,v)=>r[v]!==b)))return s;r=d;let g;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(g=Date.now()),s=t(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const b=Math.round((Date.now()-u)*100)/100,v=Math.round((Date.now()-g)*100)/100,f=v/16,m=(x,T)=>{for(x=String(x);x.length<T;)x=" "+x;return x};console.info(`%câ± ${m(v,5)} /${m(b,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*f,120))}deg 100% 31%);`,n==null?void 0:n.key)}return(c=n==null?void 0:n.onChange)==null||c.call(n,s),s}}function gs(e,t){if(e===void 0)throw new Error(`Unexpected undefined${t?`: ${t}`:""}`);return e}const Nh=(e,t)=>Math.abs(e-t)<1,Dh=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>e.apply(this,r),t)}},Lh=e=>e,$h=e=>{const t=Math.max(e.startIndex-e.overscan,0),n=Math.min(e.endIndex+e.overscan,e.count-1),r=[];for(let s=t;s<=n;s++)r.push(s);return r},zh=(e,t)=>{const n=e.scrollElement;if(!n)return;const r=i=>{const{width:o,height:l}=i;t({width:Math.round(o),height:Math.round(l)})};if(r(n.getBoundingClientRect()),typeof ResizeObserver>"u")return()=>{};const s=new ResizeObserver(i=>{const o=i[0];if(o!=null&&o.borderBoxSize){const l=o.borderBoxSize[0];if(l){r({width:l.inlineSize,height:l.blockSize});return}}r(n.getBoundingClientRect())});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Ca={passive:!0},Vh=typeof window>"u"?!0:"onscrollend"in window,Uh=(e,t)=>{const n=e.scrollElement;if(!n)return;let r=0;const s=Vh?()=>{}:Dh(()=>{t(r,!1)},e.options.isScrollingResetDelay),i=c=>()=>{r=n[e.options.horizontal?"scrollLeft":"scrollTop"],s(),t(r,c)},o=i(!0),l=i(!1);return l(),n.addEventListener("scroll",o,Ca),n.addEventListener("scrollend",l,Ca),()=>{n.removeEventListener("scroll",o),n.removeEventListener("scrollend",l)}},Bh=(e,t,n)=>{if(t!=null&&t.borderBoxSize){const r=t.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return Math.round(e.getBoundingClientRect()[n.options.horizontal?"width":"height"])},Hh=(e,{adjustments:t=0,behavior:n},r)=>{var s,i;const o=e+t;(i=(s=r.scrollElement)==null?void 0:s.scrollTo)==null||i.call(s,{[r.options.horizontal?"left":"top"]:o,behavior:n})};class Wh{constructor(t){this.unsubs=[],this.scrollElement=null,this.isScrolling=!1,this.scrollToIndexTimeoutId=null,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollDirection=null,this.scrollAdjustments=0,this.measureElementCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(typeof ResizeObserver<"u"?n=new ResizeObserver(s=>{s.forEach(i=>{this._measureElement(i.target,i)})}):null);return{disconnect:()=>{var s;return(s=r())==null?void 0:s.disconnect()},observe:s=>{var i;return(i=r())==null?void 0:i.observe(s,{box:"border-box"})},unobserve:s=>{var i;return(i=r())==null?void 0:i.unobserve(s)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,s])=>{typeof s>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Lh,rangeExtractor:$h,onChange:()=>{},measureElement:Bh,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,...n}},this.notify=(n,r)=>{var s,i;const{startIndex:o,endIndex:l}=this.range??{startIndex:void 0,endIndex:void 0},c=this.calculateRange();(n||o!==(c==null?void 0:c.startIndex)||l!==(c==null?void 0:c.endIndex))&&((i=(s=this.options).onChange)==null||i.call(s,this,r))},this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.scrollElement=null},this._didMount=()=>(this.measureElementCache.forEach(this.observer.observe),()=>{this.observer.disconnect(),this.cleanup()}),this._willUpdate=()=>{const n=this.options.getScrollElement();this.scrollElement!==n&&(this.cleanup(),this.scrollElement=n,this._scrollToOffset(this.scrollOffset,{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,r=>{this.scrollRect=r,this.notify(!1,!1)})),this.unsubs.push(this.options.observeElementOffset(this,(r,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.scrollOffset<r?"forward":"backward":null,this.scrollOffset=r;const i=this.isScrolling;this.isScrolling=s,this.notify(i!==s,s)})))},this.getSize=()=>this.scrollRect[this.options.horizontal?"width":"height"],this.getMeasurementOptions=_n(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey],(n,r,s,i)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:s,getItemKey:i}),{key:!1}),this.getFurthestMeasurement=(n,r)=>{const s=new Map,i=new Map;for(let o=r-1;o>=0;o--){const l=n[o];if(s.has(l.lane))continue;const c=i.get(l.lane);if(c==null||l.end>c.end?i.set(l.lane,l):l.end<c.end&&s.set(l.lane,!0),s.size===this.options.lanes)break}return i.size===this.options.lanes?Array.from(i.values()).sort((o,l)=>o.end===l.end?o.index-l.index:o.end-l.end)[0]:void 0},this.getMeasurements=_n(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:s,getItemKey:i},o)=>{const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const d=i(u),h=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),g=h?h.end+this.options.gap:r+s,b=o.get(d),v=typeof b=="number"?b:this.options.estimateSize(u),f=g+v,m=h?h.lane:u%this.options.lanes;c[u]={index:u,start:g,size:v,end:f,key:d,lane:m}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=_n(()=>[this.getMeasurements(),this.getSize(),this.scrollOffset],(n,r,s)=>this.range=n.length>0&&r>0?qh({measurements:n,outerSize:r,scrollOffset:s}):null,{key:!1,debug:()=>this.options.debug}),this.getIndexes=_n(()=>[this.options.rangeExtractor,this.calculateRange(),this.options.overscan,this.options.count],(n,r,s,i)=>r===null?[]:n({startIndex:r.startIndex,endIndex:r.endIndex,overscan:s,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,s=n.getAttribute(r);return s?parseInt(s,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const s=this.measurementsCache[this.indexFromElement(n)];if(!s||!n.isConnected){this.measureElementCache.forEach((l,c)=>{l===n&&(this.observer.unobserve(n),this.measureElementCache.delete(c))});return}const i=this.measureElementCache.get(s.key);i!==n&&(i&&this.observer.unobserve(i),this.observer.observe(n),this.measureElementCache.set(s.key,n));const o=this.options.measureElement(n,r,this);this.resizeItem(s,o)},this.resizeItem=(n,r)=>{const s=this.itemSizeCache.get(n.key)??n.size,i=r-s;i!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(n,i,this):n.start<this.scrollOffset+this.scrollAdjustments)&&this._scrollToOffset(this.scrollOffset,{adjustments:this.scrollAdjustments+=i,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(n.index),this.itemSizeCache=new Map(this.itemSizeCache.set(n.key,r)),this.notify(!0,!1))},this.measureElement=n=>{n&&this._measureElement(n,void 0)},this.getVirtualItems=_n(()=>[this.getIndexes(),this.getMeasurements()],(n,r)=>{const s=[];for(let i=0,o=n.length;i<o;i++){const l=n[i],c=r[l];s.push(c)}return s},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();return gs(r[ul(0,r.length-1,s=>gs(r[s]).start,n)])},this.getOffsetForAlignment=(n,r)=>{const s=this.getSize();r==="auto"&&(n<=this.scrollOffset?r="start":n>=this.scrollOffset+s?r="end":r="start"),r==="start"?n=n:r==="end"?n=n-s:r==="center"&&(n=n-s/2);const i=this.options.horizontal?"scrollWidth":"scrollHeight",l=(this.scrollElement?"document"in this.scrollElement?this.scrollElement.document.documentElement[i]:this.scrollElement[i]:0)-this.getSize();return Math.max(Math.min(l,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const s=gs(this.getMeasurements()[n]);if(r==="auto")if(s.end>=this.scrollOffset+this.getSize()-this.options.scrollPaddingEnd)r="end";else if(s.start<=this.scrollOffset+this.options.scrollPaddingStart)r="start";else return[this.scrollOffset,r];const i=r==="end"?s.end+this.options.scrollPaddingEnd:s.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(i,r),r]},this.isDynamicMode=()=>this.measureElementCache.size>0,this.cancelScrollToIndex=()=>{this.scrollToIndexTimeoutId!==null&&(clearTimeout(this.scrollToIndexTimeoutId),this.scrollToIndexTimeoutId=null)},this.scrollToOffset=(n,{align:r="start",behavior:s}={})=>{this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:s})},this.scrollToIndex=(n,{align:r="auto",behavior:s}={})=>{n=Math.max(0,Math.min(n,this.options.count-1)),this.cancelScrollToIndex(),s==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size.");const[i,o]=this.getOffsetForIndex(n,r);this._scrollToOffset(i,{adjustments:void 0,behavior:s}),s!=="smooth"&&this.isDynamicMode()&&(this.scrollToIndexTimeoutId=setTimeout(()=>{if(this.scrollToIndexTimeoutId=null,this.measureElementCache.has(this.options.getItemKey(n))){const[c]=this.getOffsetForIndex(n,o);Nh(c,this.scrollOffset)||this.scrollToIndex(n,{align:o,behavior:s})}else this.scrollToIndex(n,{align:o,behavior:s})}))},this.scrollBy=(n,{behavior:r}={})=>{this.cancelScrollToIndex(),r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.scrollOffset+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let s;return r.length===0?s=this.options.paddingStart:s=this.options.lanes===1?((n=r[r.length-1])==null?void 0:n.end)??0:Math.max(...r.slice(-this.options.lanes).map(i=>i.end)),s-this.options.scrollMargin+this.options.paddingEnd},this._scrollToOffset=(n,{adjustments:r,behavior:s})=>{this.options.scrollToFn(n,{behavior:s,adjustments:r},this)},this.measure=()=>{var n,r;this.itemSizeCache=new Map,(r=(n=this.options).onChange)==null||r.call(n,this,!1)},this.setOptions(t),this.scrollRect=this.options.initialRect,this.scrollOffset=typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset,this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(n=>{this.itemSizeCache.set(n.key,n.size)}),this.notify(!1,!1)}}const ul=(e,t,n,r)=>{for(;e<=t;){const s=(e+t)/2|0,i=n(s);if(i<r)e=s+1;else if(i>r)t=s-1;else return s}return e>0?e-1:0};function qh({measurements:e,outerSize:t,scrollOffset:n}){const r=e.length-1,i=ul(0,r,l=>e[l].start,n);let o=i;for(;o<r&&e[o].end<n+t;)o++;return{startIndex:i,endIndex:o}}const Yh=typeof document<"u"?S.useLayoutEffect:S.useEffect;function Xh(e){const t=S.useReducer(()=>({}),{})[1],n={...e,onChange:(s,i)=>{var o;i?Qs.flushSync(t):t(),(o=e.onChange)==null||o.call(e,s,i)}},[r]=S.useState(()=>new Wh(n));return r.setOptions(n),S.useEffect(()=>r._didMount(),[]),Yh(()=>r._willUpdate()),r}function Gh(e){return Xh({observeElementRect:zh,observeElementOffset:Uh,scrollToFn:Hh,...e})}var Qh=Object.defineProperty,Kh=(e,t)=>{for(var n in t)Qh(e,n,{get:t[n],enumerable:!0})},rt={};Kh(rt,{assign:()=>ef,colors:()=>Lt,createStringInterpolator:()=>Fi,skipAnimation:()=>vl,to:()=>gl,willAdvance:()=>Ni});var ki=or(),G=e=>ar(e,ki),Ii=or();G.write=e=>ar(e,Ii);var rs=or();G.onStart=e=>ar(e,rs);var Ai=or();G.onFrame=e=>ar(e,Ai);var Oi=or();G.onFinish=e=>ar(e,Oi);var yn=[];G.setTimeout=(e,t)=>{const n=G.now()+t,r=()=>{const i=yn.findIndex(o=>o.cancel==r);~i&&yn.splice(i,1),Dt-=~i?1:0},s={time:n,handler:e,cancel:r};return yn.splice(dl(n),0,s),Dt+=1,hl(),s};var dl=e=>~(~yn.findIndex(t=>t.time>e)||~yn.length);G.cancel=e=>{rs.delete(e),Ai.delete(e),Oi.delete(e),ki.delete(e),Ii.delete(e)};G.sync=e=>{Ns=!0,G.batchedUpdates(e),Ns=!1};G.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...s){t=s,G.onStart(n)}return r.handler=e,r.cancel=()=>{rs.delete(n),t=null},r};var Pi=typeof window<"u"?window.requestAnimationFrame:()=>{};G.use=e=>Pi=e;G.now=typeof performance<"u"?()=>performance.now():Date.now;G.batchedUpdates=e=>e();G.catch=console.error;G.frameLoop="always";G.advance=()=>{G.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):ml()};var Nt=-1,Dt=0,Ns=!1;function ar(e,t){Ns?(t.delete(e),e(0)):(t.add(e),hl())}function hl(){Nt<0&&(Nt=0,G.frameLoop!=="demand"&&Pi(fl))}function Zh(){Nt=-1}function fl(){~Nt&&(Pi(fl),G.batchedUpdates(ml))}function ml(){const e=Nt;Nt=G.now();const t=dl(Nt);if(t&&(pl(yn.splice(0,t),n=>n.handler()),Dt-=t),!Dt){Zh();return}rs.flush(),ki.flush(e?Math.min(64,Nt-e):16.667),Ai.flush(),Ii.flush(),Oi.flush()}function or(){let e=new Set,t=e;return{add(n){Dt+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Dt-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Dt-=t.size,pl(t,r=>r(n)&&e.add(r)),Dt+=e.size,t=e)}}}function pl(e,t){e.forEach(n=>{try{t(n)}catch(r){G.catch(r)}})}function Ds(){}var Jh=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),A={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function St(e,t){if(A.arr(e)){if(!A.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var oe=(e,t)=>e.forEach(t);function dt(e,t,n){if(A.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var $e=e=>A.und(e)?[]:A.arr(e)?e:[e];function Dn(e,t){if(e.size){const n=Array.from(e);e.clear(),oe(n,t)}}var Pn=(e,...t)=>Dn(e,n=>n(...t)),Ri=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),Fi,gl,Lt=null,vl=!1,Ni=Ds,ef=e=>{e.to&&(gl=e.to),e.now&&(G.now=e.now),e.colors!==void 0&&(Lt=e.colors),e.skipAnimation!=null&&(vl=e.skipAnimation),e.createStringInterpolator&&(Fi=e.createStringInterpolator),e.requestAnimationFrame&&G.use(e.requestAnimationFrame),e.batchedUpdates&&(G.batchedUpdates=e.batchedUpdates),e.willAdvance&&(Ni=e.willAdvance),e.frameLoop&&(G.frameLoop=e.frameLoop)},Ln=new Set,Ye=[],vs=[],Lr=0,ss={get idle(){return!Ln.size&&!Ye.length},start(e){Lr>e.priority?(Ln.add(e),G.onStart(tf)):(yl(e),G(Ls))},advance:Ls,sort(e){if(Lr)G.onFrame(()=>ss.sort(e));else{const t=Ye.indexOf(e);~t&&(Ye.splice(t,1),bl(e))}},clear(){Ye=[],Ln.clear()}};function tf(){Ln.forEach(yl),Ln.clear(),G(Ls)}function yl(e){Ye.includes(e)||bl(e)}function bl(e){Ye.splice(nf(Ye,t=>t.priority>e.priority),0,e)}function Ls(e){const t=vs;for(let n=0;n<Ye.length;n++){const r=Ye[n];Lr=r.priority,r.idle||(Ni(r),r.advance(e),r.idle||t.push(r))}return Lr=0,vs=Ye,vs.length=0,Ye=t,Ye.length>0}function nf(e,t){const n=e.findIndex(t);return n<0?e.length:n}var rf=(e,t,n)=>Math.min(Math.max(n,e),t),sf={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},nt="[-+]?\\d*\\.?\\d+",$r=nt+"%";function is(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var af=new RegExp("rgb"+is(nt,nt,nt)),of=new RegExp("rgba"+is(nt,nt,nt,nt)),lf=new RegExp("hsl"+is(nt,$r,$r)),cf=new RegExp("hsla"+is(nt,$r,$r,nt)),uf=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,df=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hf=/^#([0-9a-fA-F]{6})$/,ff=/^#([0-9a-fA-F]{8})$/;function mf(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=hf.exec(e))?parseInt(t[1]+"ff",16)>>>0:Lt&&Lt[e]!==void 0?Lt[e]:(t=af.exec(e))?(mn(t[1])<<24|mn(t[2])<<16|mn(t[3])<<8|255)>>>0:(t=of.exec(e))?(mn(t[1])<<24|mn(t[2])<<16|mn(t[3])<<8|Ma(t[4]))>>>0:(t=uf.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=ff.exec(e))?parseInt(t[1],16)>>>0:(t=df.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=lf.exec(e))?(Ta(ja(t[1]),wr(t[2]),wr(t[3]))|255)>>>0:(t=cf.exec(e))?(Ta(ja(t[1]),wr(t[2]),wr(t[3]))|Ma(t[4]))>>>0:null}function ys(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ta(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,s=2*n-r,i=ys(s,r,e+1/3),o=ys(s,r,e),l=ys(s,r,e-1/3);return Math.round(i*255)<<24|Math.round(o*255)<<16|Math.round(l*255)<<8}function mn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function ja(e){return(parseFloat(e)%360+360)%360/360}function Ma(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function wr(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function _a(e){let t=mf(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,s=(t&65280)>>>8,i=(t&255)/255;return`rgba(${n}, ${r}, ${s}, ${i})`}var Bn=(e,t,n)=>{if(A.fun(e))return e;if(A.arr(e))return Bn({range:e,output:t,extrapolate:n});if(A.str(e.output[0]))return Fi(e);const r=e,s=r.output,i=r.range||[0,1],o=r.extrapolateLeft||r.extrapolate||"extend",l=r.extrapolateRight||r.extrapolate||"extend",c=r.easing||(u=>u);return u=>{const d=gf(u,i);return pf(u,i[d],i[d+1],s[d],s[d+1],c,o,l,r.map)}};function pf(e,t,n,r,s,i,o,l,c){let u=c?c(e):e;if(u<t){if(o==="identity")return u;o==="clamp"&&(u=t)}if(u>n){if(l==="identity")return u;l==="clamp"&&(u=n)}return r===s?r:t===n?e<=t?r:s:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=i(u),r===-1/0?u=-u:s===1/0?u=u+r:u=u*(s-r)+r,u)}function gf(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var vf=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,s=t==="end"?Math.floor(r):Math.ceil(r);return rf(0,1,s/e)},zr=1.70158,Sr=zr*1.525,ka=zr+1,Ia=2*Math.PI/3,Aa=2*Math.PI/4.5,Er=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,yf={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ka*e*e*e-zr*e*e,easeOutBack:e=>1+ka*Math.pow(e-1,3)+zr*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((Sr+1)*2*e-Sr)/2:(Math.pow(2*e-2,2)*((Sr+1)*(e*2-2)+Sr)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*Ia),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*Ia)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*Aa))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*Aa)/2+1,easeInBounce:e=>1-Er(1-e),easeOutBounce:Er,easeInOutBounce:e=>e<.5?(1-Er(1-2*e))/2:(1+Er(2*e-1))/2,steps:vf},Hn=Symbol.for("FluidValue.get"),wn=Symbol.for("FluidValue.observers"),We=e=>!!(e&&e[Hn]),Re=e=>e&&e[Hn]?e[Hn]():e,Oa=e=>e[wn]||null;function bf(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Wn(e,t){const n=e[wn];n&&n.forEach(r=>{bf(r,t)})}var xl=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");xf(this,e)}},xf=(e,t)=>wl(e,Hn,t);function En(e,t){if(e[Hn]){let n=e[wn];n||wl(e,wn,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function qn(e,t){const n=e[wn];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[wn]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var wl=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),kr=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,wf=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,Pa=new RegExp(`(${kr.source})(%|[a-z]+)`,"i"),Sf=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,as=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,Sl=e=>{const[t,n]=Ef(e);if(!t||Ri())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const s=window.getComputedStyle(document.documentElement).getPropertyValue(n);return s||e}else{if(n&&as.test(n))return Sl(n);if(n)return n}return e},Ef=e=>{const t=as.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},bs,Cf=(e,t,n,r,s)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${s})`,El=e=>{bs||(bs=Lt?new RegExp(`(${Object.keys(Lt).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(i=>Re(i).replace(as,Sl).replace(wf,_a).replace(bs,_a)),n=t.map(i=>i.match(kr).map(Number)),s=n[0].map((i,o)=>n.map(l=>{if(!(o in l))throw Error('The arity of each "output" value must be equal');return l[o]})).map(i=>Bn({...e,output:i}));return i=>{var c;const o=!Pa.test(t[0])&&((c=t.find(u=>Pa.test(u)))==null?void 0:c.replace(kr,""));let l=0;return t[0].replace(kr,()=>`${s[l++](i)}${o||""}`).replace(Sf,Cf)}},Di="react-spring: ",Cl=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${Di}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},Tf=Cl(console.warn);function jf(){Tf(`${Di}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Mf=Cl(console.warn);function _f(){Mf(`${Di}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function os(e){return A.str(e)&&(e[0]=="#"||/\d/.test(e)||!Ri()&&as.test(e)||e in(Lt||{}))}var Li=Ri()?S.useEffect:S.useLayoutEffect,kf=()=>{const e=S.useRef(!1);return Li(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function Tl(){const e=S.useState()[1],t=kf();return()=>{t.current&&e(Math.random())}}function If(e,t){const[n]=S.useState(()=>({inputs:t,result:e()})),r=S.useRef(),s=r.current;let i=s;return i?t&&i.inputs&&Af(t,i.inputs)||(i={inputs:t,result:e()}):i=n,S.useEffect(()=>{r.current=i,s==n&&(n.inputs=n.result=void 0)},[i]),i.result}function Af(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var jl=e=>S.useEffect(e,Of),Of=[];function Ra(e){const t=S.useRef();return S.useEffect(()=>{t.current=e}),t.current}var Yn=Symbol.for("Animated:node"),Pf=e=>!!e&&e[Yn]===e,ct=e=>e&&e[Yn],$i=(e,t)=>Jh(e,Yn,t),ls=e=>e&&e[Yn]&&e[Yn].getPayload(),Ml=class{constructor(){$i(this,this)}getPayload(){return this.payload||[]}},lr=class extends Ml{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,A.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new lr(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return A.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,A.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Xn=class extends lr{constructor(e){super(0),this._string=null,this._toString=Bn({output:[e,e]})}static create(e){return new Xn(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(A.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=Bn({output:[this.getValue(),e]})),this._value=0,super.reset()}},Vr={dependencies:null},cs=class extends Ml{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return dt(this.source,(n,r)=>{Pf(n)?t[r]=n.getValue(e):We(n)?t[r]=Re(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&oe(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return dt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Vr.dependencies&&We(e)&&Vr.dependencies.add(e);const t=ls(e);t&&oe(t,n=>this.add(n))}},_l=class extends cs{constructor(e){super(e)}static create(e){return new _l(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(Rf)),!0)}};function Rf(e){return(os(e)?Xn:lr).create(e)}function $s(e){const t=ct(e);return t?t.constructor:A.arr(e)?_l:os(e)?Xn:lr}var Fa=(e,t)=>{const n=!A.fun(e)||e.prototype&&e.prototype.isReactComponent;return S.forwardRef((r,s)=>{const i=S.useRef(null),o=n&&S.useCallback(v=>{i.current=Df(s,v)},[s]),[l,c]=Nf(r,t),u=Tl(),d=()=>{const v=i.current;if(n&&!v)return;(v?t.applyAnimatedValues(v,l.getValue(!0)):!1)===!1&&u()},h=new Ff(d,c),g=S.useRef();Li(()=>(g.current=h,oe(c,v=>En(v,h)),()=>{g.current&&(oe(g.current.deps,v=>qn(v,g.current)),G.cancel(g.current.update))})),S.useEffect(d,[]),jl(()=>()=>{const v=g.current;oe(v.deps,f=>qn(f,v))});const b=t.getComponentProps(l.getValue());return S.createElement(e,{...b,ref:o})})},Ff=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&G.write(this.update)}};function Nf(e,t){const n=new Set;return Vr.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new cs(e),Vr.dependencies=null,[e,n]}function Df(e,t){return e&&(A.fun(e)?e(t):e.current=t),t}var Na=Symbol.for("AnimatedComponent"),Lf=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=s=>new cs(s),getComponentProps:r=s=>s}={})=>{const s={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},i=o=>{const l=Da(o)||"Anonymous";return A.str(o)?o=i[o]||(i[o]=Fa(o,s)):o=o[Na]||(o[Na]=Fa(o,s)),o.displayName=`Animated(${l})`,o};return dt(e,(o,l)=>{A.arr(e)&&(l=Da(o)),i[l]=i(o)}),{animated:i}},Da=e=>A.str(e)?e:e&&A.str(e.displayName)?e.displayName:A.fun(e)&&e.name||null;function en(e,...t){return A.fun(e)?e(...t):e}var $n=(e,t)=>e===!0||!!(t&&e&&(A.fun(e)?e(t):$e(e).includes(t))),kl=(e,t)=>A.obj(e)?t&&e[t]:e,Il=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,$f=e=>e,zi=(e,t=$f)=>{let n=zf;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const s of n){const i=t(e[s],s);A.und(i)||(r[s]=i)}return r},zf=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Vf={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Uf(e){const t={};let n=0;if(dt(e,(r,s)=>{Vf[s]||(t[s]=r,n++)}),n)return t}function Al(e){const t=Uf(e);if(t){const n={to:t};return dt(e,(r,s)=>s in t||(n[s]=r)),n}return{...e}}function Gn(e){return e=Re(e),A.arr(e)?e.map(Gn):os(e)?rt.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Bf(e){for(const t in e)return!0;return!1}function zs(e){return A.fun(e)||A.arr(e)&&A.obj(e[0])}function Hf(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function Wf(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var qf={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Vs={...qf.default,mass:1,damping:1,easing:yf.linear,clamp:!1},Yf=class{constructor(){this.velocity=0,Object.assign(this,Vs)}};function Xf(e,t,n){n&&(n={...n},La(n,t),t={...n,...t}),La(e,t),Object.assign(e,t);for(const o in Vs)e[o]==null&&(e[o]=Vs[o]);let{frequency:r,damping:s}=e;const{mass:i}=e;return A.und(r)||(r<.01&&(r=.01),s<0&&(s=0),e.tension=Math.pow(2*Math.PI/r,2)*i,e.friction=4*Math.PI*s*i/r),e}function La(e,t){if(!A.und(t.decay))e.duration=void 0;else{const n=!A.und(t.tension)||!A.und(t.friction);(n||!A.und(t.frequency)||!A.und(t.damping)||!A.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var $a=[],Gf=class{constructor(){this.changed=!1,this.values=$a,this.toValues=null,this.fromValues=$a,this.config=new Yf,this.immediate=!1}};function Ol(e,{key:t,props:n,defaultProps:r,state:s,actions:i}){return new Promise((o,l)=>{let c,u,d=$n(n.cancel??(r==null?void 0:r.cancel),t);if(d)b();else{A.und(n.pause)||(s.paused=$n(n.pause,t));let v=r==null?void 0:r.pause;v!==!0&&(v=s.paused||$n(v,t)),c=en(n.delay||0,t),v?(s.resumeQueue.add(g),i.pause()):(i.resume(),g())}function h(){s.resumeQueue.add(g),s.timeouts.delete(u),u.cancel(),c=u.time-G.now()}function g(){c>0&&!rt.skipAnimation?(s.delayed=!0,u=G.setTimeout(b,c),s.pauseQueue.add(h),s.timeouts.add(u)):b()}function b(){s.delayed&&(s.delayed=!1),s.pauseQueue.delete(h),s.timeouts.delete(u),e<=(s.cancelId||0)&&(d=!0);try{i.start({...n,callId:e,cancel:d},o)}catch(v){l(v)}}})}var Vi=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?bn(e.get()):t.every(n=>n.noop)?Pl(e.get()):tt(e.get(),t.every(n=>n.finished)),Pl=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),tt=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),bn=e=>({value:e,cancelled:!0,finished:!1});function Rl(e,t,n,r){const{callId:s,parentId:i,onRest:o}=t,{asyncTo:l,promise:c}=n;return!i&&e===l&&!t.reset?c:n.promise=(async()=>{n.asyncId=s,n.asyncTo=e;const u=zi(t,(m,x)=>x==="onRest"?void 0:m);let d,h;const g=new Promise((m,x)=>(d=m,h=x)),b=m=>{const x=s<=(n.cancelId||0)&&bn(r)||s!==n.asyncId&&tt(r,!1);if(x)throw m.result=x,h(m),m},v=(m,x)=>{const T=new za,C=new Va;return(async()=>{if(rt.skipAnimation)throw Qn(n),C.result=tt(r,!1),h(C),C;b(T);const k=A.obj(m)?{...m}:{...x,to:m};k.parentId=s,dt(u,(O,y)=>{A.und(k[y])&&(k[y]=O)});const R=await r.start(k);return b(T),n.paused&&await new Promise(O=>{n.resumeQueue.add(O)}),R})()};let f;if(rt.skipAnimation)return Qn(n),tt(r,!1);try{let m;A.arr(e)?m=(async x=>{for(const T of x)await v(T)})(e):m=Promise.resolve(e(v,r.stop.bind(r))),await Promise.all([m.then(d),g]),f=tt(r.get(),!0,!1)}catch(m){if(m instanceof za)f=m.result;else if(m instanceof Va)f=m.result;else throw m}finally{s==n.asyncId&&(n.asyncId=i,n.asyncTo=i?l:void 0,n.promise=i?c:void 0)}return A.fun(o)&&G.batchedUpdates(()=>{o(f,r,r.item)}),f})()}function Qn(e,t){Dn(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var za=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},Va=class extends Error{constructor(){super("SkipAnimationSignal")}},Us=e=>e instanceof Ui,Qf=1,Ui=class extends xl{constructor(){super(...arguments),this.id=Qf++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=ct(this);return e&&e.getValue()}to(...e){return rt.to(this,e)}interpolate(...e){return jf(),rt.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Wn(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||ss.sort(this),Wn(this,{type:"priority",parent:this,priority:e})}},nn=Symbol.for("SpringPhase"),Fl=1,Bs=2,Hs=4,xs=e=>(e[nn]&Fl)>0,Rt=e=>(e[nn]&Bs)>0,kn=e=>(e[nn]&Hs)>0,Ua=(e,t)=>t?e[nn]|=Bs|Fl:e[nn]&=~Bs,Ba=(e,t)=>t?e[nn]|=Hs:e[nn]&=~Hs,Kf=class extends Ui{constructor(e,t){if(super(),this.animation=new Gf,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!A.und(e)||!A.und(t)){const n=A.obj(e)?{...e}:{...t,from:e};A.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Rt(this)||this._state.asyncTo)||kn(this)}get goal(){return Re(this.animation.to)}get velocity(){const e=ct(this);return e instanceof lr?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return xs(this)}get isAnimating(){return Rt(this)}get isPaused(){return kn(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:s}=r;const{config:i}=r,o=ls(r.to);!o&&We(r.to)&&(s=$e(Re(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const h=u.constructor==Xn?1:o?o[d].lastPosition:s[d];let g=r.immediate,b=h;if(!g){if(b=u.lastPosition,i.tension<=0){u.done=!0;return}let v=u.elapsedTime+=e;const f=r.fromValues[d],m=u.v0!=null?u.v0:u.v0=A.arr(i.velocity)?i.velocity[d]:i.velocity;let x;const T=i.precision||(f==h?.005:Math.min(1,Math.abs(h-f)*.001));if(A.und(i.duration))if(i.decay){const C=i.decay===!0?.998:i.decay,k=Math.exp(-(1-C)*v);b=f+m/(1-C)*(1-k),g=Math.abs(u.lastPosition-b)<=T,x=m*k}else{x=u.lastVelocity==null?m:u.lastVelocity;const C=i.restVelocity||T/10,k=i.clamp?0:i.bounce,R=!A.und(k),O=f==h?u.v0>0:f<h;let y,E=!1;const M=1,_=Math.ceil(e/M);for(let I=0;I<_&&(y=Math.abs(x)>C,!(!y&&(g=Math.abs(h-b)<=T,g)));++I){R&&(E=b==h||b>h==O,E&&(x=-x*k,b=h));const N=-i.tension*1e-6*(b-h),q=-i.friction*.001*x,J=(N+q)/i.mass;x=x+J*M,b=b+x*M}}else{let C=1;i.duration>0&&(this._memoizedDuration!==i.duration&&(this._memoizedDuration=i.duration,u.durationProgress>0&&(u.elapsedTime=i.duration*u.durationProgress,v=u.elapsedTime+=e)),C=(i.progress||0)+v/this._memoizedDuration,C=C>1?1:C<0?0:C,u.durationProgress=C),b=f+i.easing(C)*(h-f),x=(b-u.lastPosition)/e,g=C==1}u.lastVelocity=x,Number.isNaN(b)&&(console.warn("Got NaN while animating:",this),g=!0)}o&&!o[d].done&&(g=!1),g?u.done=!0:t=!1,u.setValue(b,i.round)&&(n=!0)});const l=ct(this),c=l.getValue();if(t){const u=Re(r.to);(c!==u||n)&&!i.decay?(l.setValue(u),this._onChange(u)):n&&i.decay&&this._onChange(c),this._stop()}else n&&this._onChange(c)}set(e){return G.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rt(this)){const{to:e,config:t}=this.animation;G.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return A.und(e)?(n=this.queue||[],this.queue=[]):n=[A.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Vi(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Qn(this._state,e&&this._lastCallId),G.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=A.obj(n)?n[t]:n,(n==null||zs(n))&&(n=void 0),r=A.obj(r)?r[t]:r,r==null&&(r=void 0);const s={to:n,from:r};return xs(this)||(e.reverse&&([n,r]=[r,n]),r=Re(r),A.und(r)?ct(this)||this._set(n):this._set(r)),s}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,zi(e,(o,l)=>/^on/.test(l)?kl(o,n):o)),Wa(this,e,"onProps"),An(this,"onProps",e,this);const s=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const i=this._state;return Ol(++this._lastCallId,{key:n,props:e,defaultProps:r,state:i,actions:{pause:()=>{kn(this)||(Ba(this,!0),Pn(i.pauseQueue),An(this,"onPause",tt(this,In(this,this.animation.to)),this))},resume:()=>{kn(this)&&(Ba(this,!1),Rt(this)&&this._resume(),Pn(i.resumeQueue),An(this,"onResume",tt(this,In(this,this.animation.to)),this))},start:this._merge.bind(this,s)}}).then(o=>{if(e.loop&&o.finished&&!(t&&o.noop)){const l=Nl(e);if(l)return this._update(l,!0)}return o})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(bn(this));const r=!A.und(e.to),s=!A.und(e.from);if(r||s)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(bn(this));const{key:i,defaultProps:o,animation:l}=this,{to:c,from:u}=l;let{to:d=c,from:h=u}=e;s&&!r&&(!t.default||A.und(d))&&(d=h),t.reverse&&([d,h]=[h,d]);const g=!St(h,u);g&&(l.from=h),h=Re(h);const b=!St(d,c);b&&this._focus(d);const v=zs(t.to),{config:f}=l,{decay:m,velocity:x}=f;(r||s)&&(f.velocity=0),t.config&&!v&&Xf(f,en(t.config,i),t.config!==o.config?en(o.config,i):void 0);let T=ct(this);if(!T||A.und(d))return n(tt(this,!0));const C=A.und(t.reset)?s&&!t.default:!A.und(h)&&$n(t.reset,i),k=C?h:this.get(),R=Gn(d),O=A.num(R)||A.arr(R)||os(R),y=!v&&(!O||$n(o.immediate||t.immediate,i));if(b){const I=$s(d);if(I!==T.constructor)if(y)T=this._set(R);else throw Error(`Cannot animate between ${T.constructor.name} and ${I.name}, as the "to" prop suggests`)}const E=T.constructor;let M=We(d),_=!1;if(!M){const I=C||!xs(this)&&g;(b||I)&&(_=St(Gn(k),R),M=!_),(!St(l.immediate,y)&&!y||!St(f.decay,m)||!St(f.velocity,x))&&(M=!0)}if(_&&Rt(this)&&(l.changed&&!C?M=!0:M||this._stop(c)),!v&&((M||We(c))&&(l.values=T.getPayload(),l.toValues=We(d)?null:E==Xn?[1]:$e(R)),l.immediate!=y&&(l.immediate=y,!y&&!C&&this._set(c)),M)){const{onRest:I}=l;oe(Jf,q=>Wa(this,t,q));const N=tt(this,In(this,c));Pn(this._pendingCalls,N),this._pendingCalls.add(n),l.changed&&G.batchedUpdates(()=>{var q;l.changed=!C,I==null||I(N,this),C?en(o.onRest,N):(q=l.onStart)==null||q.call(l,N,this)})}C&&this._set(k),v?n(Rl(t.to,t,this._state,this)):M?this._start():Rt(this)&&!b?this._pendingCalls.add(n):n(Pl(k))}_focus(e){const t=this.animation;e!==t.to&&(Oa(this)&&this._detach(),t.to=e,Oa(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;We(t)&&(En(t,this),Us(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;We(e)&&qn(e,this)}_set(e,t=!0){const n=Re(e);if(!A.und(n)){const r=ct(this);if(!r||!St(n,r.getValue())){const s=$s(n);!r||r.constructor!=s?$i(this,s.create(n)):r.setValue(n),r&&G.batchedUpdates(()=>{this._onChange(n,t)})}}return ct(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,An(this,"onStart",tt(this,In(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),en(this.animation.onChange,e,this)),en(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;ct(this).reset(Re(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Rt(this)||(Ua(this,!0),kn(this)||this._resume())}_resume(){rt.skipAnimation?this.finish():ss.start(this)}_stop(e,t){if(Rt(this)){Ua(this,!1);const n=this.animation;oe(n.values,s=>{s.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Wn(this,{type:"idle",parent:this});const r=t?bn(this.get()):tt(this.get(),In(this,e??n.to));Pn(this._pendingCalls,r),n.changed&&(n.changed=!1,An(this,"onRest",r,this))}}};function In(e,t){const n=Gn(t),r=Gn(e.get());return St(r,n)}function Nl(e,t=e.loop,n=e.to){const r=en(t);if(r){const s=r!==!0&&Al(r),i=(s||e).reverse,o=!s||s.reset;return Kn({...e,loop:t,default:!1,pause:void 0,to:!i||zs(n)?n:void 0,from:o?e.from:void 0,reset:o,...s})}}function Kn(e){const{to:t,from:n}=e=Al(e),r=new Set;return A.obj(t)&&Ha(t,r),A.obj(n)&&Ha(n,r),e.keys=r.size?Array.from(r):null,e}function Zf(e){const t=Kn(e);return A.und(t.default)&&(t.default=zi(t)),t}function Ha(e,t){dt(e,(n,r)=>n!=null&&t.add(r))}var Jf=["onStart","onRest","onChange","onPause","onResume"];function Wa(e,t,n){e.animation[n]=t[n]!==Il(t,n)?kl(t[n],e.key):void 0}function An(e,t,...n){var r,s,i,o;(s=(r=e.animation)[t])==null||s.call(r,...n),(o=(i=e.defaultProps)[t])==null||o.call(i,...n)}var em=["onStart","onChange","onRest"],tm=1,nm=class{constructor(e,t){this.id=tm++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];A.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(Kn(e)),this}start(e){let{queue:t}=this;return e?t=$e(e).map(Kn):this.queue=[],this._flush?this._flush(this,t):(Vl(this,t),Ws(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;oe($e(t),r=>n[r].stop(!!e))}else Qn(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(A.und(e))this.start({pause:!0});else{const t=this.springs;oe($e(e),n=>t[n].pause())}return this}resume(e){if(A.und(e))this.start({pause:!1});else{const t=this.springs;oe($e(e),n=>t[n].resume())}return this}each(e){dt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,s=this._changed.size>0;(r&&!this._started||s&&!this._started)&&(this._started=!0,Dn(e,([l,c])=>{c.value=this.get(),l(c,this,this._item)}));const i=!r&&this._started,o=s||i&&n.size?this.get():null;s&&t.size&&Dn(t,([l,c])=>{c.value=o,l(c,this,this._item)}),i&&(this._started=!1,Dn(n,([l,c])=>{c.value=o,l(c,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;G.onFrame(this._onFrame)}};function Ws(e,t){return Promise.all(t.map(n=>Dl(e,n))).then(n=>Vi(e,n))}async function Dl(e,t,n){const{keys:r,to:s,from:i,loop:o,onRest:l,onResolve:c}=t,u=A.obj(t.default)&&t.default;o&&(t.loop=!1),s===!1&&(t.to=null),i===!1&&(t.from=null);const d=A.arr(s)||A.fun(s)?s:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):oe(em,f=>{const m=t[f];if(A.fun(m)){const x=e._events[f];t[f]=({finished:T,cancelled:C})=>{const k=x.get(m);k?(T||(k.finished=!1),C&&(k.cancelled=!0)):x.set(m,{value:null,finished:T||!1,cancelled:C||!1})},u&&(u[f]=t[f])}});const h=e._state;t.pause===!h.paused?(h.paused=t.pause,Pn(t.pause?h.pauseQueue:h.resumeQueue)):h.paused&&(t.pause=!0);const g=(r||Object.keys(e.springs)).map(f=>e.springs[f].start(t)),b=t.cancel===!0||Il(t,"cancel")===!0;(d||b&&h.asyncId)&&g.push(Ol(++e._lastAsyncId,{props:t,state:h,actions:{pause:Ds,resume:Ds,start(f,m){b?(Qn(h,e._lastAsyncId),m(bn(e))):(f.onRest=l,m(Rl(d,f,h,e)))}}})),h.paused&&await new Promise(f=>{h.resumeQueue.add(f)});const v=Vi(e,await Promise.all(g));if(o&&v.finished&&!(n&&v.noop)){const f=Nl(t,o,s);if(f)return Vl(e,[f]),Dl(e,f,!0)}return c&&G.batchedUpdates(()=>c(v,e,e.item)),v}function qa(e,t){const n={...e.springs};return t&&oe($e(t),r=>{A.und(r.keys)&&(r=Kn(r)),A.obj(r.to)||(r={...r,to:void 0}),zl(n,r,s=>$l(s))}),Ll(e,n),n}function Ll(e,t){dt(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,En(n,e))})}function $l(e,t){const n=new Kf;return n.key=e,t&&En(n,t),n}function zl(e,t,n){t.keys&&oe(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Vl(e,t){oe(t,n=>{zl(e.springs,n,r=>$l(r,e))})}var us=({children:e,...t})=>{const n=S.useContext(Ur),r=t.pause||!!n.pause,s=t.immediate||!!n.immediate;t=If(()=>({pause:r,immediate:s}),[r,s]);const{Provider:i}=Ur;return S.createElement(i,{value:t},e)},Ur=rm(us,{});us.Provider=Ur.Provider;us.Consumer=Ur.Consumer;function rm(e,t){return Object.assign(e,S.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var sm=()=>{const e=[],t=function(r){_f();const s=[];return oe(e,(i,o)=>{if(A.und(r))s.push(i.start());else{const l=n(r,i,o);l&&s.push(i.start(l))}}),s};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const s=e.indexOf(r);~s&&e.splice(s,1)},t.pause=function(){return oe(e,r=>r.pause(...arguments)),this},t.resume=function(){return oe(e,r=>r.resume(...arguments)),this},t.set=function(r){oe(e,(s,i)=>{const o=A.fun(r)?r(i,s):r;o&&s.set(o)})},t.start=function(r){const s=[];return oe(e,(i,o)=>{if(A.und(r))s.push(i.start());else{const l=this._getProps(r,i,o);l&&s.push(i.start(l))}}),s},t.stop=function(){return oe(e,r=>r.stop(...arguments)),this},t.update=function(r){return oe(e,(s,i)=>s.update(this._getProps(r,s,i))),this};const n=function(r,s,i){return A.fun(r)?r(i,s):r};return t._getProps=n,t};function im(e,t,n){const r=A.fun(t)&&t;r&&!n&&(n=[]);const s=S.useMemo(()=>r||arguments.length==3?sm():void 0,[]),i=S.useRef(0),o=Tl(),l=S.useMemo(()=>({ctrls:[],queue:[],flush(x,T){const C=qa(x,T);return i.current>0&&!l.queue.length&&!Object.keys(C).some(R=>!x.springs[R])?Ws(x,T):new Promise(R=>{Ll(x,C),l.queue.push(()=>{R(Ws(x,T))}),o()})}}),[]),c=S.useRef([...l.ctrls]),u=[],d=Ra(e)||0;S.useMemo(()=>{oe(c.current.slice(e,d),x=>{Hf(x,s),x.stop(!0)}),c.current.length=e,h(d,e)},[e]),S.useMemo(()=>{h(0,Math.min(d,e))},n);function h(x,T){for(let C=x;C<T;C++){const k=c.current[C]||(c.current[C]=new nm(null,l.flush)),R=r?r(C,k):t[C];R&&(u[C]=Zf(R))}}const g=c.current.map((x,T)=>qa(x,u[T])),b=S.useContext(us),v=Ra(b),f=b!==v&&Bf(b);Li(()=>{i.current++,l.ctrls=c.current;const{queue:x}=l;x.length&&(l.queue=[],oe(x,T=>T())),oe(c.current,(T,C)=>{s==null||s.add(T),f&&T.start({default:b});const k=u[C];k&&(Wf(T,k.ref),T.ref?T.queue.push(k):T.start(k))})}),jl(()=>()=>{oe(l.ctrls,x=>x.stop(!0))});const m=g.map(x=>({...x}));return s?[m,s]:m}function am(e,t){const n=A.fun(e),[[r],s]=im(1,n?e:[e],n?t||[]:t);return n||arguments.length==2?[r,s]:r}var om=class extends Ui{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=Bn(...t);const n=this._get(),r=$s(n);$i(this,r.create(n))}advance(e){const t=this._get(),n=this.get();St(t,n)||(ct(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&Ya(this._active)&&ws(this)}_get(){const e=A.arr(this.source)?this.source.map(Re):$e(Re(this.source));return this.calc(...e)}_start(){this.idle&&!Ya(this._active)&&(this.idle=!1,oe(ls(this),e=>{e.done=!1}),rt.skipAnimation?(G.batchedUpdates(()=>this.advance()),ws(this)):ss.start(this))}_attach(){let e=1;oe($e(this.source),t=>{We(t)&&En(t,this),Us(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){oe($e(this.source),e=>{We(e)&&qn(e,this)}),this._active.clear(),ws(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=$e(this.source).reduce((t,n)=>Math.max(t,(Us(n)?n.priority:0)+1),0))}};function lm(e){return e.idle!==!1}function Ya(e){return!e.size||Array.from(e).every(lm)}function ws(e){e.idle||(e.idle=!0,oe(ls(e),t=>{t.done=!0}),Wn(e,{type:"idle",parent:e}))}rt.assign({createStringInterpolator:El,to:(e,t)=>new om(e,t)});var Ul=/^--/;function cm(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Ul.test(e)&&!(zn.hasOwnProperty(e)&&zn[e])?t+"px":(""+t).trim()}var Xa={};function um(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:s,scrollTop:i,scrollLeft:o,viewBox:l,...c}=t,u=Object.values(c),d=Object.keys(c).map(h=>n||e.hasAttribute(h)?h:Xa[h]||(Xa[h]=h.replace(/([A-Z])/g,g=>"-"+g.toLowerCase())));s!==void 0&&(e.textContent=s);for(const h in r)if(r.hasOwnProperty(h)){const g=cm(h,r[h]);Ul.test(h)?e.style.setProperty(h,g):e.style[h]=g}d.forEach((h,g)=>{e.setAttribute(h,u[g])}),i!==void 0&&(e.scrollTop=i),o!==void 0&&(e.scrollLeft=o),l!==void 0&&e.setAttribute("viewBox",l)}var zn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},dm=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),hm=["Webkit","Ms","Moz","O"];zn=Object.keys(zn).reduce((e,t)=>(hm.forEach(n=>e[dm(n,t)]=e[t]),e),zn);var fm=/^(matrix|translate|scale|rotate|skew)/,mm=/^(translate)/,pm=/^(rotate|skew)/,Ss=(e,t)=>A.num(e)&&e!==0?e+t:e,Ir=(e,t)=>A.arr(e)?e.every(n=>Ir(n,t)):A.num(e)?e===t:parseFloat(e)===t,gm=class extends cs{constructor({x:e,y:t,z:n,...r}){const s=[],i=[];(e||t||n)&&(s.push([e||0,t||0,n||0]),i.push(o=>[`translate3d(${o.map(l=>Ss(l,"px")).join(",")})`,Ir(o,0)])),dt(r,(o,l)=>{if(l==="transform")s.push([o||""]),i.push(c=>[c,c===""]);else if(fm.test(l)){if(delete r[l],A.und(o))return;const c=mm.test(l)?"px":pm.test(l)?"deg":"";s.push($e(o)),i.push(l==="rotate3d"?([u,d,h,g])=>[`rotate3d(${u},${d},${h},${Ss(g,c)})`,Ir(g,0)]:u=>[`${l}(${u.map(d=>Ss(d,c)).join(",")})`,Ir(u,l.startsWith("scale")?1:0)])}}),s.length&&(r.transform=new vm(s,i)),super(r)}},vm=class extends xl{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return oe(this.inputs,(n,r)=>{const s=Re(n[0]),[i,o]=this.transforms[r](A.arr(s)?s:n.map(Re));e+=" "+i,t=t&&o}),t?"none":e}observerAdded(e){e==1&&oe(this.inputs,t=>oe(t,n=>We(n)&&En(n,this)))}observerRemoved(e){e==0&&oe(this.inputs,t=>oe(t,n=>We(n)&&qn(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Wn(this,e)}},ym=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];rt.assign({batchedUpdates:Qs.unstable_batchedUpdates,createStringInterpolator:El,colors:sf});var bm=Lf(ym,{applyAnimatedValues:um,createAnimatedStyle:e=>new gm(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),xm=bm.animated,qs=new Map,Cr=new WeakMap,Ga=0,wm=void 0;function Sm(e){return e?(Cr.has(e)||(Ga+=1,Cr.set(e,Ga.toString())),Cr.get(e)):"0"}function Em(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?Sm(e.root):e[t]}`).toString()}function Cm(e){const t=Em(e);let n=qs.get(t);if(!n){const r=new Map;let s;const i=new IntersectionObserver(o=>{o.forEach(l=>{var c;const u=l.isIntersecting&&s.some(d=>l.intersectionRatio>=d);e.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=u),(c=r.get(l.target))==null||c.forEach(d=>{d(u,l)})})},e);s=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:r},qs.set(t,n)}return n}function Tm(e,t,n={},r=wm){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const c=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:c,intersectionRect:c,rootBounds:c}),()=>{}}const{id:s,observer:i,elements:o}=Cm(n),l=o.get(e)||[];return o.has(e)||o.set(e,l),l.push(t),i.observe(e),function(){l.splice(l.indexOf(t),1),l.length===0&&(o.delete(e),i.unobserve(e)),o.size===0&&(i.disconnect(),qs.delete(s))}}function Bi({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:s,triggerOnce:i,skip:o,initialInView:l,fallbackInView:c,onChange:u}={}){var d;const[h,g]=S.useState(null),b=S.useRef(),[v,f]=S.useState({inView:!!l,entry:void 0});b.current=u,S.useEffect(()=>{if(o||!h)return;let C;return C=Tm(h,(k,R)=>{f({inView:k,entry:R}),b.current&&b.current(k,R),R.isIntersecting&&i&&C&&(C(),C=void 0)},{root:s,rootMargin:r,threshold:e,trackVisibility:n,delay:t},c),()=>{C&&C()}},[Array.isArray(e)?e.toString():e,h,s,r,i,o,n,c,t]);const m=(d=v.entry)==null?void 0:d.target,x=S.useRef();!h&&m&&!i&&!o&&x.current!==m&&(x.current=m,f({inView:!!l,entry:void 0}));const T=[g,v.inView,v.entry];return T.ref=T[0],T.inView=T[1],T.entry=T[2],T}const jm="Left",Mm="Right",_m="Up",km="Down",gn={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Ys={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},Qa="mousemove",Ka="mouseup",Im="touchend",Am="touchmove",Om="touchstart";function Pm(e,t,n,r){return e>t?n>0?Mm:jm:r>0?km:_m}function Za(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),s=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,s]}function Rm(e,t){const n=d=>{const h="touches"in d;h&&d.touches.length>1||e((g,b)=>{b.trackMouse&&!h&&(document.addEventListener(Qa,r),document.addEventListener(Ka,o));const{clientX:v,clientY:f}=h?d.touches[0]:d,m=Za([v,f],b.rotationAngle);return b.onTouchStartOrOnMouseDown&&b.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},g),Ys),{initial:m.slice(),xy:m,start:d.timeStamp||0})})},r=d=>{e((h,g)=>{const b="touches"in d;if(b&&d.touches.length>1)return h;if(d.timeStamp-h.start>g.swipeDuration)return h.swiping?Object.assign(Object.assign({},h),{swiping:!1}):h;const{clientX:v,clientY:f}=b?d.touches[0]:d,[m,x]=Za([v,f],g.rotationAngle),T=m-h.xy[0],C=x-h.xy[1],k=Math.abs(T),R=Math.abs(C),O=(d.timeStamp||0)-h.start,y=Math.sqrt(k*k+R*R)/(O||1),E=[T/(O||1),C/(O||1)],M=Pm(k,R,T,C),_=typeof g.delta=="number"?g.delta:g.delta[M.toLowerCase()]||gn.delta;if(k<_&&R<_&&!h.swiping)return h;const I={absX:k,absY:R,deltaX:T,deltaY:C,dir:M,event:d,first:h.first,initial:h.initial,velocity:y,vxvy:E};I.first&&g.onSwipeStart&&g.onSwipeStart(I),g.onSwiping&&g.onSwiping(I);let N=!1;return(g.onSwiping||g.onSwiped||g[`onSwiped${M}`])&&(N=!0),N&&g.preventScrollOnSwipe&&g.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},h),{first:!1,eventData:I,swiping:!0})})},s=d=>{e((h,g)=>{let b;if(h.swiping&&h.eventData){if(d.timeStamp-h.start<g.swipeDuration){b=Object.assign(Object.assign({},h.eventData),{event:d}),g.onSwiped&&g.onSwiped(b);const v=g[`onSwiped${b.dir}`];v&&v(b)}}else g.onTap&&g.onTap({event:d});return g.onTouchEndOrOnMouseUp&&g.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},h),Ys),{eventData:b})})},i=()=>{document.removeEventListener(Qa,r),document.removeEventListener(Ka,o)},o=d=>{i(),s(d)},l=(d,h)=>{let g=()=>{};if(d&&d.addEventListener){const b=Object.assign(Object.assign({},gn.touchEventOptions),h.touchEventOptions),v=[[Om,n,b],[Am,r,Object.assign(Object.assign({},b),h.preventScrollOnSwipe?{passive:!1}:{})],[Im,s,b]];v.forEach(([f,m,x])=>d.addEventListener(f,m,x)),g=()=>v.forEach(([f,m])=>d.removeEventListener(f,m))}return g},u={ref:d=>{d!==null&&e((h,g)=>{if(h.el===d)return h;const b={};return h.el&&h.el!==d&&h.cleanUpTouch&&(h.cleanUpTouch(),b.cleanUpTouch=void 0),g.trackTouch&&d&&(b.cleanUpTouch=l(d,g)),Object.assign(Object.assign(Object.assign({},h),{el:d}),b)})}};return t.trackMouse&&(u.onMouseDown=n),[u,l]}function Fm(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function Nm(e){const{trackMouse:t}=e,n=S.useRef(Object.assign({},Ys)),r=S.useRef(Object.assign({},gn)),s=S.useRef(Object.assign({},r.current));s.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},gn),e);let i;for(i in gn)r.current[i]===void 0&&(r.current[i]=gn[i]);const[o,l]=S.useMemo(()=>Rm(c=>n.current=c(n.current,r.current),{trackMouse:t}),[t]);return n.current=Fm(n.current,r.current,s.current,l),o}const Dm=({alt:e,borderRadius:t,height:n,src:r,status:s,width:i})=>{const[o,l]=S.useState(!1),{ref:c}=Bi({triggerOnce:!0,onChange:(u,d)=>{if(u&&!o){const h=new Image;h.onload=()=>l(!0),h.onerror=()=>{d.target.style.display="none"},h.src=r}}});return a.jsx("div",{className:"image-container",ref:c,children:a.jsx("div",{className:"img-placeholder",style:{width:"100%",height:"100%",backgroundColor:"var(--color-fill-2)",position:"absolute",left:0,top:0},children:o?a.jsx("img",{className:s==="unread"?"":"read",src:r,alt:e,style:{width:i,height:n,objectFit:"cover",borderRadius:t}}):a.jsx("div",{className:"skeleton-container",children:a.jsx(Ar,{text:{rows:0},image:{style:{width:i,height:n,margin:"0",borderRadius:t}},animation:!0})})})})},Lm=({entry:e,isThumbnail:t})=>{if(!e.imgSrc)return null;const n=t?{width:"80px",height:"80px"}:{width:"100%",height:"160px"};return a.jsx("div",{className:t?"thumbnail":"cover-image",children:a.jsx(Dm,{alt:e.id,borderRadius:t?"2px":void 0,src:e.imgSrc,status:e.status,width:n.width,height:n.height})})},$m=({entry:e,showFeedIcon:t,mini:n,children:r})=>{const s=Hr({"article-card-mini-content":n,"article-card-mini-content-padding":n&&t});return a.jsxs("div",{className:s,style:{width:"100%",boxSizing:"border-box",opacity:e.status==="unread"?1:.5},children:[a.jsx("div",{style:{padding:e.imgSrc?n?"0 10px 0 0":"0 0 10px 0":"0"},children:a.jsx(Lm,{entry:e,isThumbnail:n})}),a.jsxs("div",{className:n?"article-card-mini-content-text":"",children:[a.jsx(z.Text,{className:"article-card-title",children:e.title}),a.jsxs(z.Text,{className:"article-card-info",children:[a.jsx("br",{}),t&&a.jsx(Ro,{feed:e.feed,className:n?"feed-icon-mini":"feed-icon"}),e.feed.title,a.jsx("br",{}),bo(e.published_at)]}),e.starred&&a.jsx(Ks,{className:"icon-starred"})]}),a.jsx("div",{children:r})]})},zm=({entry:e,handleEntryClick:t,mini:n,children:r})=>{const s=X(jt),i=X(xe),{markReadOnScroll:o,showFeedIcon:l}=i,c=s&&e.id===s.id,{handleToggleStarred:u,handleToggleStatus:d}=ui(),[h,g]=S.useState(0),b=100,v=.5,f=e.starred,m=e.status==="unread",x=Nm({preventScrollOnSwipe:!0,delta:b/2,onSwiping:_=>{const I=Math.min(Math.abs(_.deltaX*v),b)*Math.sign(_.deltaX);g(I)},onSwiped:async _=>{try{_.deltaX>b?(await u(e),K.success(f?"Unmarked as starred":"Marked as starred")):_.deltaX<-b&&(await d(e),K.success(m?"Marked as read":"Marked as unread"))}catch{K.error("Failed to update, please try again")}g(0)}}),[T,C]=S.useState(!1),[k,R]=S.useState(!1),O=()=>d(e),y=20,{ref:E}=Bi({skip:k,onChange:async(_,I)=>{if(!(!o||!m)){if(_)C(!0);else if(T){const{top:N}=I.boundingClientRect;N<y&&(await O(),R(!0))}}}}),M=am({x:h});return S.createElement("div",{...x,className:"article-card",key:e.id},a.jsxs("div",{ref:E,children:[a.jsx(xm.div,{className:"swipe-card",style:M,children:a.jsx(Pr,{className:Hr("swipe-content","card-custom-style","card-custom-hover-style",{"card-custom-selected-style":c}),"data-entry-id":e.id,hoverable:!0,onClick:()=>t(e),bordered:!1,children:a.jsx(Pr.Meta,{description:a.jsx($m,{entry:e,showFeedIcon:l,mini:n,children:r})})})}),a.jsxs("div",{className:"swipe-actions",children:[a.jsx("div",{className:"swipe-action left",children:f?a.jsx(Ks,{style:{color:"#ffcd00",fontSize:"24px"}}):a.jsx(Gs,{style:{color:"#ffffff",fontSize:"24px"}})}),a.jsx("div",{className:"swipe-action right",children:m?a.jsx(io,{style:{color:"#ffffff",fontSize:"24px"}}):a.jsx(ao,{style:{color:"#ffffff",fontSize:"24px"}})})]})]}))},Vm=({loading:e})=>{const{layout:t}=X(xe),n=t==="large"?2:4,r=s=>a.jsx(Pr,{className:"card-style",cover:t==="large"?a.jsx("div",{className:"card-cover-style"}):null,children:a.jsx(Pr.Meta,{description:a.jsx(Ar,{loading:e,animation:!0,text:{rows:3,width:150}})})},s);return e?Array.from({length:n},(s,i)=>r(i)):null},Um=()=>{const{belowMd:e}=Jn(),t=X(xe),{updateConfig:n}=Br(),{orderDirection:r}=t,[s,i]=Ee(Gr),[o,l]=Ee(Xr),c=()=>{n({orderDirection:r==="desc"?"asc":"desc"})};return S.useEffect(()=>{l("title"),i("")},[]),a.jsxs("div",{className:"search-and-sort-bar",children:[a.jsx(Le.Search,{allowClear:!0,onChange:i,placeholder:"Search...",style:{width:e?"100%":278,marginLeft:8},value:s,addBefore:a.jsxs(me,{placeholder:"Select type",onChange:l,style:{width:100},value:o,children:[a.jsx(me.Option,{value:"title",children:"Title"}),a.jsx(me.Option,{value:"content",children:"Content"}),a.jsx(me.Option,{value:"author",children:"Author"})]})}),a.jsx(Vn,{mini:!0,content:r==="desc"?"Newest first":"Oldest first",children:a.jsx(fe,{shape:"circle",size:"small",style:{margin:"0 8px",flexShrink:0},icon:r==="desc"?a.jsx(Mc,{}):a.jsx(_c,{}),onClick:c})})]})},Bm=(e,t,n)=>{S.useLayoutEffect(()=>{let r=null;return e>0&&(clearTimeout(r),r=setTimeout(()=>{n(),clearTimeout(r)},t*4)),()=>clearTimeout(r)},[e,t,n])},Hm=({duration:e,color:t})=>{const[n,r]=S.useState([]);Bm(n.length,e,()=>{r([])});const s=i=>{const o=i.currentTarget.getBoundingClientRect(),l=o.width>o.height?o.width:o.height,c=i.pageX-o.x-l/2,u=i.pageY-o.y-l/2,d={x:c,y:u,size:l,id:`${new Date().getTime()}-${c}-${u}`};r([...n,d])};return a.jsx("div",{className:"ripple-container",onMouseDown:s,children:n.length>0&&n.map(i=>a.jsx("span",{className:"ripple-span",style:{top:i.y,left:i.x,width:i.size,height:i.size,backgroundColor:t,animationDuration:`${e}ms`}},i.id))})},Wm=S.forwardRef(({loading:e,getEntries:t,handleEntryClick:n,cardsRef:r},s)=>{const i=X(fi),o=X(ir),l=X(Yr),c=X(qr),{loadingMore:u,handleLoadMore:d}=zo(),{layout:h}=X(xe),g=h==="small",{ref:b,inView:v}=Bi({skip:!c&&!l}),f=Gh({count:i.length,getScrollElement:()=>r.current,estimateSize:()=>g?120:280}),m=f.getVirtualItems();return S.useEffect(()=>{let x;return v&&!e&&!u&&(c||l)&&(x=setTimeout(async()=>{await d(t)},500)),()=>{x&&clearTimeout(x)}},[v,e,u,c,l,d,t]),a.jsxs(a.Fragment,{children:[a.jsx(Um,{}),a.jsxs("div",{className:"entry-list",ref:s,children:[a.jsx(Vm,{loading:e}),!e&&a.jsx("div",{ref:r,children:a.jsx("div",{style:{height:f.getTotalSize(),width:"100%",position:"relative"},children:m.map(x=>a.jsx("div",{"data-index":x.index,ref:f.measureElement,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${x.start}px)`},children:a.jsx(zm,{entry:i[x.index],handleEntryClick:n,mini:g,children:a.jsx(Hm,{color:"var(--color-text-4)",duration:1e3})})},x.key))})}),!e&&(o==="all"?c:l)&&a.jsxs("div",{className:"load-more-container",ref:b,children:[a.jsx(kc,{loading:u,style:{paddingRight:"10px"}}),"Loading more ..."]})]})]})}),qm=S.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},r)=>{const s=X(Po),i=Z(rr),o=Z(sr),l=Z(Gr),c=Z(Xr),u=Z(di),[d,h]=Ee(ir),{fetchData:g}=pi(),b=async()=>{try{await n(),await g(),i(f=>f.map(m=>({...m,status:"read"}))),o(f=>f.map(m=>({...m,status:"read"}))),u(0),K.success("Marked all as read successfully")}catch{K.error("Failed to mark all as read")}},v=f=>{r.current&&r.current.scrollTo(0,0),h(f)};return S.useEffect(()=>{c("title"),l("")},[d]),a.jsxs("div",{className:"entry-panel",children:[!["starred","history"].includes(e.from)&&a.jsx(so,{focusLock:!0,title:"Mark All As Read?",onOk:b,children:a.jsx(fe,{icon:a.jsx(to,{}),shape:"circle"})}),a.jsx(Ic.Group,{disabled:e.from==="history",onChange:f=>v(f),options:[{label:"ALL",value:"all"},{label:"UNREAD",value:"unread"}],type:"button",value:d}),a.jsx(fe,{icon:a.jsx(Es,{}),loading:s,shape:"circle",onClick:t})]})}),Cn=({info:e,getEntries:t,markAllAsRead:n})=>{const[r,s]=Ee(jt),i=X(ai),{fetchData:o}=pi(),l=X(xe),{orderBy:c,orderDirection:u}=l,[d,h]=Ee(mi),[g,b]=Ee(Po),v=Z(rr),f=Z(Yr),m=Z(qr),x=Z(Ao),T=Z(Io),C=Z(di),k=Z(sr),R=Z(Oo),O=X(fi),y=Z(hi),{handleFetchContent:E,handleToggleStarred:M,handleToggleStatus:_,handleEntryStatusUpdate:I}=ui(),[N,q]=S.useState(!1),J=S.useRef(null),le=S.useRef(null),de=S.useRef(null);S.useEffect(()=>{!N||e.from==="history"||Q()},[c]),S.useEffect(()=>{y(e.from),Q()},[e,u]);const Pe=P=>new Promise((B,Y)=>{if(s(null),P.status!=="unread"){setTimeout(()=>{s({...P,status:"read"}),B()},200);return}setTimeout(()=>{s({...P,status:"read"}),I(P,"read"),Wr([P.id],"read").then(B).catch(ie=>{K.error("Failed to mark entry as read, please try again later"),I(P,"unread"),Y(ie)})},200)}),{exitDetailView:we,fetchOriginalArticle:Mt,navigateToNextArticle:w,navigateToPreviousArticle:p,openLinkExternally:F,openPhotoSlider:D,toggleReadStatus:L,toggleStarStatus:V}=Uo(Pe);S.useEffect(()=>{const P={ArrowLeft:()=>p(),ArrowRight:()=>w(),Escape:()=>we(J,de),b:()=>F(),d:()=>Mt(E),m:()=>L(()=>_(r)),s:()=>V(()=>M(r)),v:()=>D()},B=Y=>{const ie=P[Y.key];ie&&(Y.key==="ArrowLeft"?p(Y.ctrlKey):Y.key==="ArrowRight"?w(Y.ctrlKey):ie())};return d?document.addEventListener("keydown",B):document.removeEventListener("keydown",B),()=>{document.removeEventListener("keydown",B)}},[r,O,d]);const U=(P,B,Y,ie)=>{v(P),k(B),T(Y.total),m(P.length<Y.total),C(ie.total),f(B.length<ie.total)},$=(P,B)=>{if(P!=null&&P.entries&&(B==null?void 0:B.total)>=0){const Y=P.entries.map(_s),ie=B.entries.map(_s);U(Y,ie,P,B)}},W=async()=>{b(!0);let P,B;try{e.from==="history"?P=B=await t():[P,B]=await Promise.all([t(),t(0,"unread")]),$(P,B)}catch(Y){console.error("Error fetching articles: ",Y)}finally{b(!1)}},Q=async()=>{if(J.current&&J.current.scrollTo(0,0),x(0),R(0),!i){await o();return}await W()};return S.useEffect(()=>{r&&s(null)},[]),S.useEffect(()=>{if(!i)try{W(),q(!0),h(!0)}catch{K.error("Failed to fetch articles, please try again later")}},[i]),a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"entry-col",children:[a.jsx(Ki,{in:!g,timeout:200,nodeRef:le,classNames:"fade",children:a.jsx(Wm,{cardsRef:le,loading:g,getEntries:t,handleEntryClick:Pe,ref:J})}),a.jsx(qm,{info:e,refreshArticleList:Q,markAllAsRead:n,ref:J})]}),a.jsx(Ki,{in:r!==null,timeout:200,nodeRef:de,classNames:"fade",unmountOnExit:!0,children:a.jsx(Fh,{handleEntryClick:Pe,entryListRef:J,ref:de})})]})},Ym=()=>a.jsx(Cn,{info:{from:"all",id:""},getEntries:wu,markAllAsRead:Iu}),Xm=()=>{const{id:e}=oo(),{orderBy:t,pageSize:n}=X(xe),r=async(s=0,i=null)=>{const o={baseUrl:`/v1/categories/${e}/entries`,orderField:t,offset:s,limit:n,status:i};return ue.get(Sn(o))};return a.jsx(Cn,{info:{from:"category",id:e},getEntries:r,markAllAsRead:()=>cu(e)})},Gm=()=>{const e=rn(),t=Ac();return console.error(t),a.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:a.jsx(Oc,{status:"404",subTitle:t.statusText||t.message,extra:[a.jsx(fe,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})},Qm=()=>{const{id:e}=oo(),{orderBy:t,pageSize:n}=X(xe),r=async(s=0,i=null)=>{const o={baseUrl:`/v1/feeds/${e}/entries`,orderField:t,offset:s,limit:n,status:i};return ue.get(Sn(o))};return a.jsx(Cn,{info:{from:"feed",id:e},getEntries:r,markAllAsRead:()=>_u(e)})},Km=()=>a.jsx(Cn,{info:{from:"history",id:""},getEntries:wo}),Zm="/assets/background-CYt9APEB.jpg",Jm=e=>{const t=e.getFieldsValue();let n=!0;for(const[r,s]of Object.entries(t))if(r!=="password"){const i=s==null?void 0:s.trim();e.setFieldValue(r,i),i||(n=!1)}else s||(n=!1);return n},Tr=(e,t)=>{e.key==="Enter"&&t.submit()},ep=()=>{const[e]=Pc(),[t,n]=S.useState(!1),[r,s]=S.useState("token"),i=Z(ei),o=rn(),l=async()=>{n(!0);const{server:u,token:d,username:h,password:g}=e.getFieldsValue();try{(await Nc("v1/me",{baseURL:u,headers:d?{"X-Auth-Token":d}:{Authorization:`Basic ${btoa(`${h}:${g}`)}`}})).status===200&&(K.success("Success"),i({server:u,token:d,username:h,password:g}),o("/"))}catch(b){console.error(b),K.error(b.message)}n(!1)},c=async()=>{const u=e.getFieldsValue();if(!ii(u)){K.error("Please check your server address and credentials");return}await l()};return a.jsxs("div",{className:"page-layout",style:{height:"100%",display:"flex"},children:[a.jsx("div",{className:"form-panel",style:{backgroundColor:"var(--color-bg-1)",width:"50%",height:"100%",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",overflowY:"auto",zIndex:2},children:a.jsxs("div",{className:"login-form",style:{width:"340px"},children:[a.jsx(z.Title,{heading:3,children:"Connect to your server"}),a.jsxs(pe,{autoComplete:"off",form:e,layout:"vertical",onSubmit:async()=>{Jm(e)?await c():K.error("Please fill in all required fields")},children:[a.jsx(pe.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:u=>{Tr(u,e)},children:a.jsx(Le,{disabled:t,placeholder:"Please input server address",prefix:a.jsx(Rc,{})})}),r==="token"&&a.jsx(pe.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:u=>{Tr(u,e)},children:a.jsx(Le,{disabled:t,placeholder:"Please input api token",prefix:a.jsx(Zi,{})})}),r==="user"&&a.jsxs(a.Fragment,{children:[a.jsx(pe.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:u=>{Tr(u,e)},children:a.jsx(Le,{disabled:t,prefix:a.jsx(no,{}),placeholder:"Please input username"})}),a.jsx(pe.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:u=>{Tr(u,e)},children:a.jsx(Le.Password,{disabled:t,prefix:a.jsx(Zi,{}),placeholder:"Please input password"})})]})]}),a.jsx(fe,{loading:t,type:"primary",long:!0,onClick:()=>e.submit(),style:{marginTop:"20px"},children:"Connect"}),a.jsx(qe,{orientation:"center",children:"Or connect with"}),a.jsx(fe,{type:"secondary",long:!0,onClick:()=>s(r==="token"?"user":"token"),style:{marginTop:"20px"},children:r==="token"?"Username and password":"API Token"}),a.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[a.jsx(z.Text,{disabled:!0,children:"Need more info?"}),a.jsx(Fc,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})}),a.jsx("div",{className:"background",style:{backgroundImage:`url(${Zm})`,backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",width:"50%",height:"100%"}})]})},tp=({children:e})=>{const t=X(ei);return ii(t)?a.jsx(a.Fragment,{children:e}):a.jsx(lo,{to:"/login"})},np=()=>a.jsx(Cn,{info:{from:"starred",id:""},getEntries:xo}),rp=()=>{const e=async()=>{const t=await jr(0,"unread"),n=t.total;let r=t.entries;n>r.length&&(r=jr(0,"unread",n).then(i=>i.entries));const s=r.map(i=>i.id);return Wr(s,"read")};return a.jsx(Cn,{info:{from:"today",id:""},getEntries:jr,markAllAsRead:e})},sp=ut("homePage"),ip=[{path:"/all",element:a.jsx(Ym,{})},{path:"/today",element:a.jsx(rp,{})},{path:"/starred",element:a.jsx(np,{})},{path:"/history",element:a.jsx(Km,{})},{path:"/category/:id",element:a.jsx(Xm,{})},{path:"/feed/:id",element:a.jsx(Qm,{})}],Bl=Dc([{path:"/",element:a.jsx(tp,{children:a.jsx(ld,{})}),errorElement:a.jsx(Gm,{}),children:[...ip,{index:!0,element:a.jsx(lo,{to:`/${sp}`,replace:!0})}]},{path:"/login",element:a.jsx(ep,{})}]);Lc.createRoot(document.getElementById("root")).render(a.jsx($c,{locale:zc,children:a.jsx(Vc,{router:Bl})}))});export default ap();

var ki=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as g,g as Pn,e as q,c as ne,d as qt,a as oa,M as te,b as Ii,f as Mi,u as fn,j as r,B as ue,I as Ai,S as Fn,T as ft,h as sa,i as Pi,D as Ar,k as Ct,l as la,m as Fi,n as Ni,A as ca,o as da,p as Oi,q as Ri,s as Di,t as L,R as on,v as $e,w as dn,x as Li,F as be,y as qe,z as ua,C as Nn,E as he,G as un,H as zi,J as fa,P as ha,K as Bi,L as Ui,N as Gt,O as Vi,Q as $i,U as Hi,V as Wi,W as Gi,X as Xi,Y as qi,Z as pa,_ as _n,$ as Yi,a0 as Ki,a1 as cr,a2 as Zi,a3 as Ji,a4 as Qi,a5 as eo,a6 as ma,a7 as ga,a8 as On,a9 as va,aa as ya,ab as xa,ac as to,ad as no,ae as ro,af as ao,ag as Dt,ah as io,ai as Pr,aj as oo,ak as so,al as ba,am as lo,an as co,ao as Fr,ap as uo,aq as wa,ar as fo,as as ho,at as po,au as mo,av as go}from"./vendor-D4JvI6rQ.js";var Vc=ki((Wc,hn)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();var vo={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Nr=e=>{let t;const n=new Set,a=(c,m)=>{const j=typeof c=="function"?c(t):c;if(!Object.is(j,t)){const E=t;t=m??(typeof j!="object"||j===null)?j:Object.assign({},t,j),n.forEach(x=>x(t,E))}},i=()=>t,s={setState:a,getState:i,getInitialState:()=>u,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{(vo?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(a,i,s);return s},yo=e=>e?Nr(e):Nr;var Ca={exports:{}},ja={},Ea={exports:{}},Sa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yt=g;function xo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var bo=typeof Object.is=="function"?Object.is:xo,wo=Yt.useState,Co=Yt.useEffect,jo=Yt.useLayoutEffect,Eo=Yt.useDebugValue;function So(e,t){var n=t(),a=wo({inst:{value:n,getSnapshot:t}}),i=a[0].inst,o=a[1];return jo(function(){i.value=n,i.getSnapshot=t,Xn(i)&&o({inst:i})},[e,n,t]),Co(function(){return Xn(i)&&o({inst:i}),e(function(){Xn(i)&&o({inst:i})})},[e]),Eo(n),n}function Xn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!bo(e,n)}catch{return!0}}function To(e,t){return t()}var _o=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?To:So;Sa.useSyncExternalStore=Yt.useSyncExternalStore!==void 0?Yt.useSyncExternalStore:_o;Ea.exports=Sa;var ko=Ea.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rn=g,Io=ko;function Mo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ao=typeof Object.is=="function"?Object.is:Mo,Po=Io.useSyncExternalStore,Fo=Rn.useRef,No=Rn.useEffect,Oo=Rn.useMemo,Ro=Rn.useDebugValue;ja.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var o=Fo(null);if(o.current===null){var d={hasValue:!1,value:null};o.current=d}else d=o.current;o=Oo(function(){function s(E){if(!u){if(u=!0,c=E,E=a(E),i!==void 0&&d.hasValue){var x=d.value;if(i(x,E))return m=x}return m=E}if(x=m,Ao(c,E))return x;var h=a(E);return i!==void 0&&i(x,h)?x:(c=E,m=h)}var u=!1,c,m,j=n===void 0?null:n;return[function(){return s(t())},j===null?void 0:function(){return s(j())}]},[t,n,a,i]);var l=Po(e,o[0],o[1]);return No(function(){d.hasValue=!0,d.value=l},[l]),Ro(l),l};Ca.exports=ja;var Do=Ca.exports;const Lo=Pn(Do);var Ta={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:zo}=q,{useSyncExternalStoreWithSelector:Bo}=Lo;let Or=!1;const Uo=e=>e;function Vo(e,t=Uo,n){(Ta?"production":void 0)!=="production"&&n&&!Or&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Or=!0);const a=Bo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return zo(a),a}const Rr=e=>{(Ta?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?yo(e):e,n=(a,i)=>Vo(t,a,i);return Object.assign(n,t),n},$o=e=>e?Rr(e):Rr,Dr={fontSize:1.05,homePage:"all",layout:"large",orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},ce=e=>{const t=JSON.parse(localStorage.getItem("config"))||{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(Dr,e)?Dr[e]:null},Ve=(e,t)=>{const n=JSON.parse(localStorage.getItem("config"))||{};n[e]=t,localStorage.setItem("config",JSON.stringify(n))};var _a={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(ne,function(){return function(n,a,i){n=n||{};var o=a.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function l(u,c,m,j){return o.fromToBase(u,c,m,j)}i.en.relativeTime=d,o.fromToBase=function(u,c,m,j,E){for(var x,h,y,P=m.$locale().relativeTime||d,S=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=S.length,I=0;I<v;I+=1){var _=S[I];_.d&&(x=j?i(u).diff(m,_.d,!0):m.diff(u,_.d,!0));var C=(n.rounding||Math.round)(Math.abs(x));if(y=x>0,C<=_.r||!_.r){C<=1&&I>0&&(_=S[I-1]);var O=P[_.l];E&&(C=E(""+C)),h=typeof O=="string"?O.replace("%d",C):O(C,c,_.l,y);break}}if(c)return h;var k=y?P.future:P.past;return typeof k=="function"?k(h):k.replace("%s",h)},o.to=function(u,c){return l(u,c,this,!0)},o.from=function(u,c){return l(u,c,this)};var s=function(u){return u.$u?i.utc():i()};o.toNow=function(u){return this.to(s(this),u)},o.fromNow=function(u){return this.from(s(this),u)}}})})(_a);var Ho=_a.exports;const Wo=Pn(Ho);qt.extend(Wo);const Go=e=>{const t=qt(e),n=qt();return t.isAfter(n.subtract(24,"hour"))},Xo=()=>qt().subtract(24,"hour").unix(),dr=e=>qt(e).fromNow(),kn=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},qo=(e,t)=>{const n={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(n))},oe=oa.create({timeout:5e3});oe.interceptors.request.use(e=>{const t=kn(),{server:n,token:a,username:i,password:o}=(t==null?void 0:t.secret)||{};return e.baseURL=n,a&&(e.headers["X-Auth-Token"]=a),i&&o&&(e.auth={username:i,password:o}),e},e=>Promise.reject(e));oe.interceptors.response.use(e=>e,e=>{var n,a,i;console.error(e);const t=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.error_message)||e.message;return te.error(t),((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("auth"),Ti.navigate("/login")),Promise.reject(e)});const ka=async(e,t)=>oe.put("/v1/entries",{entry_ids:e,status:t}),Ia=async(e,t)=>ka([e],t),Yo=async e=>oe.put(`/v1/entries/${e}/bookmark`),Ko=async e=>oe.get(`/v1/entries/${e}/fetch-content`),Zo=async()=>oe.get("/v1/me"),Jo=async()=>oe.get("/v1/feeds/counters"),Qo=async()=>oe.get("/v1/feeds"),es=async()=>oe.get("/v1/categories"),ts=async e=>oe.delete(`/v1/categories/${e}`),ns=async e=>oe.post("/v1/categories",{title:e}),rs=async(e,t)=>oe.put(`/v1/categories/${e}`,{title:t}),as=async(e,t,n,a,i)=>oe.put(`/v1/feeds/${e}`,{feed_url:t,title:n,category_id:a,crawler:i}),is=async e=>oe.put(`/v1/feeds/${e}/refresh`),os=async e=>oe.delete(`/v1/feeds/${e}`),ss=async(e,t,n)=>oe.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Zt=(e,t={})=>{const{baseUrl:n,orderField:a,direction:i,offset:o,limit:d,status:l}=e,s=new URLSearchParams({...t,order:a,direction:i,offset:o,limit:d});return l&&s.append("status",l),`${n}?${s.toString()}`},ls=async(e=0,t=null)=>{const n=ce("orderBy"),a=ce("orderDirection"),i=ce("pageSize"),d=Zt({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t});return oe.get(d)},Ma=async(e=0)=>{const t=ce("orderDirection"),n=ce("pageSize"),i=Zt({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:n,status:"read"});return oe.get(i)},Aa=async(e=0,t=null)=>{const n=ce("orderDirection"),a=ce("pageSize"),d=Zt({baseUrl:"/v1/entries",orderField:"changed_at",direction:n,offset:e,limit:a,status:t},{starred:"true"});return oe.get(d)},Sn=async(e=0,t=null,n=null)=>{const a=ce("orderBy"),i=ce("orderDirection"),o=n||ce("pageSize"),d=Xo(),u=Zt({baseUrl:"/v1/entries",orderField:a,direction:i,offset:e,limit:o,status:t},{published_after:d});return oe.get(u)},cs=(e,t)=>t==="read"?Math.max(0,e-1):e+1,Lr=(e,t,n)=>e.map(a=>{if(a.id===t){let i;return typeof n=="string"?i=cs(a.unreadCount,n):i=n,{...a,unreadCount:i}}return a}),b=$o((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],showStatus:ce("showStatus"),homePage:ce("homePage"),orderBy:ce("orderBy"),orderDirection:ce("orderDirection"),pageSize:ce("pageSize"),showAllFeeds:ce("showAllFeeds"),loading:!0,visible:{settings:!1,addFeed:!1},theme:ce("theme"),layout:ce("layout"),fontSize:ce("fontSize"),showFeedIcon:ce("showFeedIcon"),collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,themeColor:ce("themeColor"),isInitCompleted:!1,setFeeds:n=>e({feeds:n}),setGroups:n=>e({groups:n}),setUnreadTotal:n=>e(a=>({unreadTotal:n(a.unreadTotal)})),setUnreadToday:n=>e(a=>({unreadToday:n(a.unreadToday)})),setStarredCount:n=>e(a=>({starredCount:n(a.starredCount)})),setReadCount:n=>e(a=>({readCount:n(a.readCount)})),setShowStatus:n=>e({showStatus:n}),setHomePage:n=>e({homePage:n}),setOrderBy:n=>e({orderBy:n}),setOrderDirection:n=>e({orderDirection:n}),setPageSize:n=>e({pageSize:n}),toggleShowAllFeeds:()=>e(n=>({showAllFeeds:!n.showAllFeeds})),setActiveContent:n=>{e({activeContent:n})},setIsSysDarkMode:n=>e({isSysDarkMode:n}),setThemeColor:n=>{e({themeColor:n})},setTheme:n=>{e({theme:n})},initData:async()=>{e({loading:!0});const[n,a,i,o,d,l]=await Promise.all([Qo(),es(),Ma(),Aa(),Sn(0,"unread"),Jo()]);if(n&&a&&i&&o&&d&&l){const s=n.data.filter(x=>x.hide_globally||x.category.hide_globally).map(x=>x.id),u=a.data.filter(x=>x.hide_globally).map(x=>x.id);e({hiddenFeedIds:s}),e({hiddenGroupIds:u});const c=l.data.unreads,m=Object.keys(c).reduce((x,h)=>t().showAllFeeds||!s.includes(Number.parseInt(h))?x+c[h]:x,0);e({unreadTotal:m});const j=n.data.map(x=>({...x,unreadCount:c[x.id]||0}));e({feeds:j.sort((x,h)=>x.title.localeCompare(h.title,"en"))});const E=a.data.map(x=>{let h=0,y=0;for(const P of j)P.category.id===x.id&&(h+=P.unreadCount,y+=1);return{...x,unreadCount:h,feedCount:y}});e({groups:E.sort((x,h)=>x.title.localeCompare(h.title,"en"))}),e({readCount:i.data.total}),e({starredCount:o.data.total}),e({unreadToday:d.data.total}),e({isInitCompleted:!0}),e({loading:!1})}},updateFeedUnreadCount:(n,a)=>{e(i=>({feeds:Lr(i.feeds,n,a)}))},updateGroupUnreadCount:(n,a)=>{e(i=>({groups:Lr(i.groups,n,a)}))},toggleLayout:()=>{const n=t().layout==="large"?"small":"large";e({layout:n})},setFontSize:n=>e({fontSize:n}),toggleShowFeedIcon:()=>e(n=>({showFeedIcon:!n.showFeedIcon})),setVisible:(n,a)=>{e(i=>({visible:{...i.visible,[n]:a}}))},toggleCollapsed:()=>e(n=>({collapsed:!n.collapsed}))})),Pa=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],er=e=>{const t=Pa.find(o=>o.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,a=ce("theme"),i=a==="system"?n:a==="dark";return t?i?t.valueDark:t.valueLight:"#165DFF"},ur=e=>{Ii(er(e),{list:!0}).map(n=>Mi(n)).forEach((n,a)=>{document.body.style.setProperty(`--primary-${a+1}`,n)})},ds=()=>{const e=fn(),t=b(l=>l.setVisible),n=b(l=>l.theme),a=b(l=>l.setTheme),i=b(l=>l.toggleCollapsed),o=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),ur("Blue"),e("/login"),te.success("logout")};let d;switch(n){case"dark":d=r.jsx(Di,{});break;case"system":d=r.jsx(Ri,{});break;default:d=r.jsx(Oi,{})}return g.useEffect(()=>{Ve("theme",n)},[n]),r.jsxs("div",{className:"header",children:[r.jsx("div",{className:"brand",style:{marginLeft:"10px",display:"flex",alignItems:"center"},children:r.jsx(ue,{shape:"circle",size:"small",className:"trigger",style:{marginRight:"5px",display:"none"},onClick:i,children:r.jsx(Ai,{})})}),r.jsx("div",{className:"button-group",style:{marginRight:"10px"},children:r.jsxs(Fn,{size:16,children:[r.jsx(ft,{content:"Add a feed",mini:!0,children:r.jsx(ue,{shape:"circle",size:"small",type:"primary",icon:r.jsx(sa,{}),onClick:()=>t("addFeed",!0)})}),r.jsx(ue,{shape:"circle",size:"small",icon:r.jsx(Pi,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),r.jsx(Ar,{droplist:r.jsx(Ct,{defaultSelectedKeys:[n],className:"theme-menu",children:["light","dark","system"].map(l=>r.jsxs(Ct.Item,{className:n===l?"selected-menu":"",onClick:()=>a(l),style:{display:"flex",width:100,justifyContent:"space-between",alignItems:"center"},children:[l.charAt(0).toUpperCase()+l.slice(1),n===l&&r.jsx(la,{style:{marginLeft:8}})]},l))}),trigger:"hover",position:"bottom",children:r.jsx(ue,{icon:d,shape:"circle",size:"small",onClick:()=>{switch(n){case"light":a("dark");break;case"dark":a("light");break}}})}),r.jsx(Ar,{droplist:r.jsxs(Ct,{children:[r.jsxs(Ct.Item,{onClick:()=>t("settings",!0),children:[r.jsx(Fi,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Settings"]},"0"),r.jsxs(Ct.Item,{onClick:o,children:[r.jsx(Ni,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Logout"]},"1")]}),trigger:"click",position:"br",children:r.jsx(ca,{size:28,style:{cursor:"pointer"},children:r.jsx(da,{})})})]})})]})},Ot=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Fa=(e,t,n,a)=>t==="0"?n==="all"?e.filter(i=>Ot(i.title,a)):e.filter(i=>Ot(i.title,a)&&i.status===n):n==="all"?e.filter(i=>Ot(i.content,a)):e.filter(i=>Ot(i.content,a)&&i.status===n),tr=(e,t,n,a)=>t.from==="all"||t.from==="today"?e.filter(i=>n||!a.includes(i.feed.id)):e,nr=(e=768)=>window.innerWidth<=e,Na="/assets/dark-E0XitTFg.png",Oa="/assets/light-CsqESGYr.png",Ra="/assets/system-BwMbv8Ny.png",us=()=>{const e=b(c=>c.theme),t=b(c=>c.setTheme),n=b(c=>c.toggleLayout),a=b(c=>c.layout),i=b(c=>c.fontSize),o=b(c=>c.setFontSize),d=b(c=>c.showFeedIcon),l=b(c=>c.toggleShowFeedIcon),s=b(c=>c.themeColor),u=b(c=>c.setThemeColor);return g.useEffect(()=>{Ve("fontSize",i)},[i]),g.useEffect(()=>{Ve("layout",a)},[a]),g.useEffect(()=>{Ve("showFeedIcon",d)},[d]),g.useEffect(()=>{Ve("theme",e)},[e]),g.useEffect(()=>{Ve("themeColor",s),ur(s)},[s]),r.jsxs(r.Fragment,{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Theme"}),r.jsx(L.Text,{type:"secondary",children:"Customize your UI theme"}),r.jsx("div",{children:r.jsx(on.Group,{name:"card-radio-group",style:{marginTop:"16px"},defaultValue:e,onChange:t,children:["light","dark","system"].map(c=>r.jsx(ft,{content:c.charAt(0).toUpperCase()+c.slice(1),children:r.jsx(on,{value:c,children:({checked:m})=>{const j={light:Oa,dark:Na,system:Ra}[c];return r.jsx("div",{className:`custom-radio-card ${m?"custom-radio-card-checked":""}`,children:r.jsx("img",{className:"theme-preview",src:j,alt:c})})}})},c))})}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),r.jsx(L.Text,{type:"secondary",children:"Choose your accent color"})]}),r.jsx("div",{style:{display:"flex"},children:Pa.map(c=>r.jsx(ft,{content:c.name,children:r.jsx("button",{type:"button",style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:er(c.name),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:c.name===s?`1px solid ${er(c.name)}`:"none"},onClick:()=>u(c.name),onKeyDown:m=>{(m.key==="Enter"||m.key===" ")&&u(c.name)}})},c.name))})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),r.jsx(L.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),r.jsx("div",{children:r.jsx(dn,{checked:a==="small",onChange:n})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),r.jsx(L.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),r.jsx("div",{children:r.jsx(dn,{checked:d,onChange:l})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Font size"}),r.jsx(L.Text,{type:"secondary",children:"Adjust article text size"})]}),r.jsx("div",{children:r.jsxs(Fn,{children:[r.jsx(L.Text,{style:{fontSize:"0.75rem"},children:"A"}),r.jsx(Li,{value:i,showTicks:!0,min:.75,max:1.25,step:.05,formatTooltip:c=>`${c}rem`,onChange:o,style:{width:200}}),r.jsx(L.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]})]})},qn=e=>e.slice().sort((t,n)=>t.parsing_error_count>0&&n.parsing_error_count===0?-1:t.parsing_error_count===0&&n.parsing_error_count>0?1:0),fs=()=>{const[e,t]=g.useState(!1),[n]=be.useForm(),[a,i]=g.useState(null),[o,d]=g.useState(window.innerWidth),l=b(v=>v.feeds),s=b(v=>v.setFeeds),[u,c]=g.useState(qn(l)),m=b(v=>v.groups),j=u.map(v=>({category:v.category,checked_at:v.checked_at,crawler:v.crawler,feed_url:v.feed_url,key:v.id,parsing_error_count:v.parsing_error_count,title:v.title}));g.useEffect(()=>{const v=()=>d(window.innerWidth);return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),g.useEffect(()=>{c(qn(l))},[l]);const E=v=>{i(v.key),t(!0),n.setFieldsValue({crawler:v.crawler,group:v.category.id,title:v.title,url:v.feed_url})},x=async v=>{is(v.key).then(()=>{te.success("Refreshed"),v.parsing_error_count=0}).catch(()=>{te.error("Failed to refresh"),v.parsing_error_count++}).finally(()=>{s(l.map(I=>I.id===v.key?{...I,parsing_error_count:v.parsing_error_count}:I))})},h=async v=>{os(v.key).then(()=>{te.success("Unfollowed"),s(l.filter(I=>I.id!==v.key))}).catch(()=>{te.error("Failed to unfollow")})},y=o<=768,P=[{title:"Title",dataIndex:"title",sorter:(v,I)=>v.title.localeCompare(I.title,"en"),render:(v,I)=>{const _=I.parsing_error_count,C=_?`âš ï¸ ${v}`:v,O=r.jsxs("div",{children:[v,_>0&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"âš ï¸ Parsing error count: ",_]})]});return r.jsx(L.Ellipsis,{expandable:!1,children:r.jsx(ft,{mini:!0,content:O,children:C})})}},!y&&{title:"Url",dataIndex:"feed_url",sorter:(v,I)=>v.feed_url.localeCompare(I.feed_url,"en"),render:v=>r.jsx(L.Ellipsis,{expandable:!1,showTooltip:!0,children:v})},{title:"Group",dataIndex:"category.title",sorter:(v,I)=>v.category.title.localeCompare(I.category.title,"en"),render:v=>r.jsx(L.Ellipsis,{expandable:!1,showTooltip:!0,children:r.jsx(un,{children:v})})},!y&&{title:"Checked at",dataIndex:"checked_at",sorter:(v,I)=>v.checked_at.localeCompare(I.checked_at,"en"),render:v=>r.jsx(L.Ellipsis,{expandable:!1,children:dr(v)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(v,I)=>r.jsxs(Fn,{children:[r.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>E(I),type:"button",children:r.jsx(zi,{})}),r.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>x(I),type:"button",children:r.jsx(fa,{})}),r.jsx(ha,{position:"left",focusLock:!0,title:"Unfollowï¼Ÿ",onOk:async()=>{await h(I)},children:r.jsx("span",{className:"list-item-action",children:r.jsx(Bi,{})})})]})}].filter(Boolean),S=async(v,I,_,C,O)=>{as(v,I,_,C,O).then(k=>{s(l.map($=>$.id===v?{...$,...k.data}:$)),te.success("Feed updated successfully"),t(!1),n.resetFields()}).catch(()=>{te.error("Failed to update feed")})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(qe.Search,{searchButton:!0,placeholder:"Search feed title or url",onChange:v=>c(qn(l).filter(I=>Ot(I.title,v)||Ot(I.feed_url,v))),style:{width:300,marginBottom:"16px"}})}),r.jsx(ua,{columns:P,data:j,scroll:{x:!0},size:"small",style:{width:"100%"},borderCell:!0}),a&&r.jsx(Nn,{title:"Edit Feed",visible:e,unmountOnExit:!0,onOk:n.submit,style:{width:"400px"},onCancel:()=>{t(!1),n.resetFields()},children:r.jsxs(be,{form:n,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:v=>{v.url.trim()?S(a,v.url,v.title,v.group,v.crawler):te.error("Feed URL cannot be empty")},children:[r.jsx(be.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(qe,{placeholder:"Please input feed URL"})}),r.jsx(be.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(qe,{placeholder:"Please input feed title"})}),r.jsx(be.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(he,{placeholder:"Please select",children:m.map(v=>r.jsx(he.Option,{value:v.id,children:v.title},v.id))})}),r.jsx(be.Item,{label:"Fetch original content",field:"crawler",tooltip:r.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(dn,{})})]})})]})},hs=()=>{const e=b(h=>h.showStatus),t=b(h=>h.setShowStatus),n=b(h=>h.homePage),a=b(h=>h.setHomePage),i=b(h=>h.orderBy),o=b(h=>h.orderDirection),d=b(h=>h.pageSize),l=b(h=>h.showAllFeeds),s=b(h=>h.setOrderBy),u=b(h=>h.setOrderDirection),c=b(h=>h.setPageSize),m=b(h=>h.toggleShowAllFeeds),j=b(h=>h.feeds),E=b(h=>h.hiddenFeedIds),x=b(h=>h.setUnreadTotal);return g.useEffect(()=>{if(Ve("showAllFeeds",l),!l&&E){const h=j.filter(y=>!E.includes(y.id)).reduce((y,P)=>y+P.unreadCount,0);x(()=>h)}else x(()=>j.reduce((h,y)=>h+y.unreadCount,0))},[l]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),r.jsx(L.Text,{type:"secondary",children:"Which status to show by default:"})]}),r.jsx("div",{children:r.jsxs(he,{onChange:h=>{t(h),Ve("showStatus",h)},placeholder:"Select status",style:{width:128,marginLeft:16},value:e,children:[r.jsx(he.Option,{value:"all",children:"All"}),r.jsx(he.Option,{value:"unread",children:"Unread"})]})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),r.jsx(L.Text,{type:"secondary",children:"Which page to show by default:"})]}),r.jsx("div",{children:r.jsxs(he,{onChange:h=>{a(h),Ve("homePage",h)},placeholder:"Select page",style:{width:128,marginLeft:16},value:n,children:[r.jsx(he.Option,{value:"all",children:"All"}),r.jsx(he.Option,{value:"today",children:"Today"}),r.jsx(he.Option,{value:"starred",children:"Starred"}),r.jsx(he.Option,{value:"history",children:"History"})]})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),r.jsx(L.Text,{type:"secondary",children:"What order to show entries:"})]}),r.jsx("div",{children:r.jsxs(he,{onChange:h=>{s(h),Ve("orderBy",h)},placeholder:"Select order",style:{width:128,marginLeft:16},value:i,children:[r.jsx(he.Option,{value:"published_at",children:"Published at"}),r.jsx(he.Option,{value:"created_at",children:"Created at"})]})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Entries order direction"}),r.jsx(L.Text,{type:"secondary",children:"What order direction to show entries:"})]}),r.jsx("div",{children:r.jsxs(he,{onChange:h=>{u(h),Ve("orderDirection",h)},placeholder:"Select order",style:{width:128,marginLeft:16},value:o,children:[r.jsx(he.Option,{value:"asc",children:"Oldest first"}),r.jsx(he.Option,{value:"desc",children:"Newest first"})]})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),r.jsx(L.Text,{type:"secondary",children:"Show how many entries per page:"})]}),r.jsx("div",{children:r.jsx(Ui,{defaultValue:d,min:1,mode:"button",onChange:h=>{c(h),Ve("pageSize",h)},size:"small",style:{width:128,marginLeft:16}})})]}),r.jsx($e,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(L.Title,{heading:6,style:{marginTop:0},children:"Show all entries"}),r.jsx(L.Text,{type:"secondary",children:"Whether to show all entries of all feeds (including hidden)"})]}),r.jsx("div",{children:r.jsx(dn,{checked:l,onChange:m})})]})]})},ps=()=>{const e=b(y=>y.feeds),t=b(y=>y.setFeeds),n=b(y=>y.groups),a=b(y=>y.setGroups),[i,o]=g.useState(!1),[d,l]=g.useState(""),[s,u]=g.useState(!1),[c]=be.useForm(),[m,j]=g.useState({}),E=async()=>{d&&ns(d).then(y=>{a(P=>[...P,{...y.data,feedCount:0}]),l(""),te.success("Group added successfully")}).catch(()=>{te.error("Failed to add group")}),l(""),o(!1)},x=async(y,P)=>{rs(y,P).then(S=>{t(e.map(v=>v.category.id===y?{...v,category:{...v.category,title:P}}:v)),a(n.map(v=>v.id===y?S.data:v)),te.success("Group updated successfully"),u(!1),c.resetFields()}).catch(()=>{te.error("Failed to update group")})},h=async y=>{ts(y).then(P=>{P.status===204?(a(n.filter(S=>S.id!==y)),te.success("Group deleted successfully")):te.error("Failed to delete group")}).catch(()=>{te.error("Failed to delete group")})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[n.map(y=>r.jsx(un,{size:"medium",closable:y.feedCount===0,onClick:()=>{j(y),u(!0),c.setFieldsValue({title:y.title})},onClose:async P=>{P.stopPropagation(),await h(y.id)},style:{marginRight:"10px",marginBottom:"10px",cursor:"pointer"},children:y.title},y.id)),i?r.jsx(qe,{autoFocus:!0,size:"small",value:d,style:{width:84},onPressEnter:E,onBlur:E,onChange:l}):r.jsx(un,{icon:r.jsx(sa,{}),style:{width:84,backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},size:"medium",className:"add-group",tabIndex:0,onClick:()=>o(!0),children:"Add"})]}),m&&r.jsx(Nn,{title:"Edit Group",visible:s,unmountOnExit:!0,style:{width:"400px"},onOk:c.submit,onCancel:()=>{u(!1),c.resetFields()},children:r.jsx(be,{form:c,layout:"vertical",onSubmit:y=>x(m.id,y.title),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:r.jsx(be.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(qe,{placeholder:"Please input group title"})})})})]})},ms=[{title:"Key",dataIndex:"keyName",render:e=>r.jsx(un,{children:e})},{title:"Function",dataIndex:"description"}],gs=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"â†",description:"Previous article"},{key:"3",keyName:"â†’",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],vs=()=>r.jsx(ua,{columns:ms,data:gs,pagination:!1,size:"small"}),ys=()=>{const e=()=>{const t=[Na,Oa,Ra];for(const n of t){const a=new Image;a.src=n}};return g.useEffect(()=>{e()},[]),r.jsxs(Gt,{defaultActiveTab:"1",tabPosition:"top",children:[r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Vi,{style:{marginRight:6}}),"Feeds"]}),children:r.jsx(fs,{})},"1"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx($i,{style:{marginRight:6}}),"Groups"]}),children:r.jsx(ps,{})},"2"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Hi,{style:{marginRight:6}}),"General"]}),children:r.jsx(hs,{})},"3"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Wi,{style:{marginRight:6}}),"Appearance"]}),children:r.jsx(us,{})},"4"),r.jsx(Gt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Gi,{style:{marginRight:6}}),"Hotkeys"]}),children:r.jsx(vs,{})},"5")]})},xs=[{required:!0}],bs=[{required:!0}],ws=[{type:"boolean"}],Cs=()=>{const e=b(s=>s.activeContent),t=b(s=>s.setActiveContent),n=b(s=>s.setVisible),a=b(s=>s.visible),[i,o]=g.useState("720px"),[d,l]=g.useState("10%");return g.useEffect(()=>{const s=()=>{const u=nr()?"100%":"720px",c=nr()?"5%":"10%";o(u),l(c)};return window.addEventListener("resize",s),s(),()=>{window.removeEventListener("resize",s)}},[]),r.jsx(Nn,{visible:a.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,style:{width:i,top:d},onFocus:()=>{e&&t(null)},onCancel:()=>n("settings",!1),autoFocus:!1,focusLock:!0,children:r.jsx(ys,{})})},js=()=>{const e=b(c=>c.activeContent),t=b(c=>c.groups),n=b(c=>c.initData),a=b(c=>c.setActiveContent),i=b(c=>c.setVisible),o=b(c=>c.visible),[d,l]=g.useState(!1),[s]=be.useForm(),u=async(c,m,j)=>{l(!0),ss(c,m,j).then(()=>{n(),te.success("Added a feed successfully"),i("addFeed",!1),s.resetFields()}).catch(()=>{te.error("Failed to add a feed")}),l(!1)};return r.jsx(Nn,{title:"Add Feed",visible:o.addFeed,unmountOnExit:!0,style:{width:"400px"},onFocus:()=>{e&&a(null)},onOk:s.submit,confirmLoading:d,onCancel:()=>{i("addFeed",!1),s.resetFields()},children:r.jsxs(be,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:c=>{c.url.trim()?u(c.url.trim(),c.group,c.crawler):te.error("Feed URL cannot be empty")},children:[r.jsx(be.Item,{label:"Feed URL",field:"url",rules:xs,children:r.jsx(qe,{placeholder:"Please input a feed URL"})}),r.jsx(be.Item,{label:"Group",required:!0,field:"group",rules:bs,children:r.jsx(he,{placeholder:"Please select a category",showSearch:!0,filterOption:(c,m)=>Ot(m.props.children,c),children:t.map(c=>r.jsx(he.Option,{value:c.id,children:c.title},c.id))})}),r.jsx(be.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:ws,children:r.jsx(dn,{})})]})})},Es=()=>{const[e,t]=g.useState(0);return g.useEffect(()=>{const n=()=>{const a=document.querySelector(".entry-panel"),i=a?a.offsetHeight:49,o=window.innerHeight;t(o-i)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),r.jsxs("div",{className:"main",style:{height:`${e}px`},children:[r.jsx(Xi,{}),r.jsx(Cs,{}),r.jsx(js,{})]})};function Tn(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Tn=function(n){return typeof n}:Tn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Tn(e)}function fr(e){var t=typeof e=="string"||e instanceof String;if(!t){var n=Tn(e);throw e===null?n="null":n==="object"&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}function Da(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e}var Ss={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function Ts(e,t){fr(e),t=Da(t,Ss),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var n=e.split("."),a=n[n.length-1];return t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/\s/.test(a))||!t.allow_numeric_tld&&/^\d+$/.test(a)?!1:n.every(function(i){return!(i.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!t.allow_underscores&&/_/.test(i))})}var zr="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",bt="(".concat(zr,"[.]){3}").concat(zr),_s=new RegExp("^".concat(bt,"$")),me="(?:[0-9a-fA-F]{1,4})",ks=new RegExp("^("+"(?:".concat(me,":){7}(?:").concat(me,"|:)|")+"(?:".concat(me,":){6}(?:").concat(bt,"|:").concat(me,"|:)|")+"(?:".concat(me,":){5}(?::").concat(bt,"|(:").concat(me,"){1,2}|:)|")+"(?:".concat(me,":){4}(?:(:").concat(me,"){0,1}:").concat(bt,"|(:").concat(me,"){1,3}|:)|")+"(?:".concat(me,":){3}(?:(:").concat(me,"){0,2}:").concat(bt,"|(:").concat(me,"){1,4}|:)|")+"(?:".concat(me,":){2}(?:(:").concat(me,"){0,3}:").concat(bt,"|(:").concat(me,"){1,5}|:)|")+"(?:".concat(me,":){1}(?:(:").concat(me,"){0,4}:").concat(bt,"|(:").concat(me,"){1,6}|:)|")+"(?::((?::".concat(me,"){0,5}:").concat(bt,"|(?::").concat(me,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function In(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return fr(e),t=String(t),t?t==="4"?_s.test(e):t==="6"?ks.test(e):!1:In(e,4)||In(e,6)}function Is(e,t){return Fs(e)||Ps(e,t)||As(e,t)||Ms()}function Ms(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function As(e,t){if(e){if(typeof e=="string")return Br(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Br(e,t)}}function Br(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ps(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,i=!1,o=void 0;try{for(var d=e[Symbol.iterator](),l;!(a=(l=d.next()).done)&&(n.push(l.value),!(t&&n.length===t));a=!0);}catch(s){i=!0,o=s}finally{try{!a&&d.return!=null&&d.return()}finally{if(i)throw o}}return n}}function Fs(e){if(Array.isArray(e))return e}var Ns={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},Os=/^\[([^\]]+)\](?::([0-9]+))?$/;function Rs(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Ur(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e===a||Rs(a)&&a.test(e))return!0}return!1}function La(e,t){if(fr(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=Da(t,Ns),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var n,a,i,o,d,l,s,u;if(s=e.split("#"),e=s.shift(),s=e.split("?"),e=s.shift(),s=e.split("://"),s.length>1){if(n=s.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(n)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;s[0]=e.slice(2)}}if(e=s.join("://"),e==="")return!1;if(s=e.split("/"),e=s.shift(),e===""&&!t.require_host)return!0;if(s=e.split("@"),s.length>1){if(t.disallow_auth||s[0]===""||(a=s.shift(),a.indexOf(":")>=0&&a.split(":").length>2))return!1;var c=a.split(":"),m=Is(c,2),j=m[0],E=m[1];if(j===""&&E==="")return!1}o=s.join("@"),l=null,u=null;var x=o.match(Os);if(x?(i="",u=x[1],l=x[2]||null):(s=o.split(":"),i=s.shift(),s.length&&(l=s.join(":"))),l!==null&&l.length>0){if(d=parseInt(l,10),!/^[0-9]+$/.test(l)||d<=0||d>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?Ur(i,t.host_whitelist):i===""&&!t.require_host?!0:!(!In(i)&&!Ts(i,t)&&(!u||!In(u,6))||(i=i||u,t.host_blacklist&&Ur(i,t.host_blacklist)))}const za=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},rn=Ct.Item,{Sider:Ds}=Ji,Ls=({group:e,isOpen:t})=>r.jsxs("div",{className:"group-title",children:[r.jsxs(L.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:e.unreadCount?"80%":"100%"},children:[t?r.jsx(Qi,{}):r.jsx(eo,{}),e.title]}),e.unreadCount>0&&r.jsx(L.Ellipsis,{className:"unread-count",expandable:!1,children:e.unreadCount})]}),zs=()=>{const e=qi(),t=fn(),n=b(C=>C.collapsed),a=b(C=>C.feeds),i=b(C=>C.groups),o=b(C=>C.loading),d=b(C=>C.unreadTotal),l=b(C=>C.unreadToday),s=b(C=>C.starredCount),u=b(C=>C.readCount),c=b(C=>C.showFeedIcon),m=b(C=>C.toggleCollapsed),j=b(C=>C.hiddenFeedIds),E=b(C=>C.hiddenGroupIds),x=b(C=>C.showAllFeeds),[h,y]=g.useState([]),[P,S]=g.useState([]),v=e.pathname,I=(C,O)=>{S(O)},_=a.reduce((C,O)=>{if(!x&&j.includes(O.id))return C;La(O.site_url)||(O.site_url=za(O.feed_url));const{id:k}=O.category;return C[k]=C[k]||[],C[k].push(O),C},{});return g.useEffect(()=>{y([v]),n||window.innerWidth<=992&&m(!0)},[v]),g.useEffect(()=>{o||S([])},[o]),r.jsx(Ds,{className:"sidebar",trigger:null,width:240,collapsedWidth:0,breakpoint:"lg",onCollapse:m,collapsed:n,collapsible:!0,style:{height:"100%",borderRight:n?"none":"1px solid var(--color-border-2)",position:"fixed",top:0,zIndex:999},children:r.jsxs(Ct,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[v],hasCollapseButton:!0,onClickSubMenu:I,onCollapseChange:m,selectedKeys:h,style:{width:"240px",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0 28px 0 10px",height:"48px",marginTop:"-4px",visibility:n?"hidden":"visible"},children:[r.jsx(ca,{size:32,style:{marginRight:"10px",backgroundColor:"var(--color-text-1)"},children:r.jsx(pa,{style:{color:"var(--color-bg-1)"}})}),r.jsx(L.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),r.jsx($e,{style:{marginTop:0,marginBottom:"4px"}}),r.jsx(L.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Articles"}),r.jsx(_n,{loading:o,animation:!0,text:{rows:3}}),o?null:r.jsxs("div",{children:[r.jsx(rn,{onClick:()=>t("/all"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Yi,{}),"All"]}),r.jsx(L.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/all"),r.jsx(rn,{onClick:()=>t("/today"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Ki,{}),"Today"]}),r.jsx(L.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/today"),r.jsx(rn,{onClick:()=>t("/starred"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(cr,{}),"Starred"]}),r.jsx(L.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/starred"),r.jsx(rn,{onClick:()=>t("/history"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Zi,{}),"History"]}),r.jsx(L.Ellipsis,{className:"item-count",expandable:!1,children:u||""})]})},"/history")]}),r.jsx(L.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Feeds"}),r.jsx(_n,{loading:o,animation:!0,text:{rows:6}}),o?null:i.filter(C=>x||!E.includes(C.id)).map(C=>{var O;return r.jsx(Ct.SubMenu,{selectable:!0,title:r.jsx(Ls,{group:C,isOpen:P.includes(`/group/${C.id}`)}),onClick:k=>{y([`/group/${C.id}`]),!(k.target.tagName==="svg"||k.target.tagName==="path")&&v!==`/group/${C.id}`&&t(`/group/${C.id}`)},children:(O=_[C.id])==null?void 0:O.map(k=>r.jsx(rn,{onClick:$=>{$.stopPropagation(),y([`/group/${C.id}`]),t(`/feed/${k.id}`)},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(L.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:k.unreadCount!==0?"80%":"100%"},children:[c&&r.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(k.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),k.title]}),k.unreadCount!==0&&r.jsx(L.Ellipsis,{expandable:!1,style:{color:"var(--color-text-4)",display:"flex",justifyContent:"flex-end"},children:k.unreadCount})]})},`/feed/${k.id}`))},`/group/${C.id}`)})]})})},Bs=()=>{const e=b(o=>o.initData),t=b(o=>o.theme),n=b(o=>o.isSysDarkMode),a=b(o=>o.setIsSysDarkMode),i=b(o=>o.themeColor);return g.useEffect(()=>{e();const o=l=>{a(l.matches)},d=window.matchMedia("(prefers-color-scheme: dark)");return d.addEventListener("change",o),()=>{d.removeEventListener("change",o)}},[]),g.useEffect(()=>{(d=>{document.body.setAttribute("arco-theme",d?"dark":"light"),document.body.style.colorScheme=d?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),g.useEffect(()=>{ur(i)},[i]),r.jsxs("div",{className:"app",style:{display:"flex",backgroundColor:"var(--color-bg-1)"},children:[r.jsx(ds,{}),r.jsx(zs,{}),r.jsx(Es,{})]})};var hn={};(function e(t,n,a,i){var o=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",l=function(){if(!t.OffscreenCanvas)return!1;var p=new OffscreenCanvas(1,1),f=p.getContext("2d");f.fillRect(0,0,1,1);var M=p.transferToImageBitmap();try{f.createPattern(M,"no-repeat")}catch{return!1}return!0}();function s(){}function u(p){var f=n.exports.Promise,M=f!==void 0?f:t.Promise;return typeof M=="function"?new M(p):(p(s,s),null)}var c=function(p,f){return{transform:function(M){if(p)return M;if(f.has(M))return f.get(M);var A=new OffscreenCanvas(M.width,M.height),F=A.getContext("2d");return F.drawImage(M,0,0),f.set(M,A),A},clear:function(){f.clear()}}}(l,new Map),m=function(){var p=Math.floor(16.666666666666668),f,M,A={},F=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(D){var R=Math.random();return A[R]=requestAnimationFrame(function N(B){F===B||F+p-1<B?(F=B,delete A[R],D()):A[R]=requestAnimationFrame(N)}),R},M=function(D){A[D]&&cancelAnimationFrame(A[D])}):(f=function(D){return setTimeout(D,p)},M=function(D){return clearTimeout(D)}),{frame:f,cancel:M}}(),j=function(){var p,f,M={};function A(F){function D(R,N){F.postMessage({options:R||{},callback:N})}F.init=function(N){var B=N.transferControlToOffscreen();F.postMessage({canvas:B},[B])},F.fire=function(N,B,V){if(f)return D(N,null),f;var U=Math.random().toString(36).slice(2);return f=u(function(J){function Z(re){re.data.callback===U&&(delete M[U],F.removeEventListener("message",Z),f=null,c.clear(),V(),J())}F.addEventListener("message",Z),D(N,U),M[U]=Z.bind(null,{data:{callback:U}})}),f},F.reset=function(){F.postMessage({reset:!0});for(var N in M)M[N](),delete M[N]}}return function(){if(p)return p;if(!a&&o){var F=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{p=new Worker(URL.createObjectURL(new Blob([F])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",D),null}A(p)}return p}}(),E={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(p,f){return f?f(p):p}function h(p){return p!=null}function y(p,f,M){return x(p&&h(p[f])?p[f]:E[f],M)}function P(p){return p<0?0:Math.floor(p)}function S(p,f){return Math.floor(Math.random()*(f-p))+p}function v(p){return parseInt(p,16)}function I(p){return p.map(_)}function _(p){var f=String(p).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:v(f.substring(0,2)),g:v(f.substring(2,4)),b:v(f.substring(4,6))}}function C(p){var f=y(p,"origin",Object);return f.x=y(f,"x",Number),f.y=y(f,"y",Number),f}function O(p){p.width=document.documentElement.clientWidth,p.height=document.documentElement.clientHeight}function k(p){var f=p.getBoundingClientRect();p.width=f.width,p.height=f.height}function $(p){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=p,f}function G(p,f,M,A,F,D,R,N,B){p.save(),p.translate(f,M),p.rotate(D),p.scale(A,F),p.arc(0,0,1,R,N,B),p.restore()}function Pe(p){var f=p.angle*(Math.PI/180),M=p.spread*(Math.PI/180);return{x:p.x,y:p.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:p.startVelocity*.5+Math.random()*p.startVelocity,angle2D:-f+(.5*M-Math.random()*M),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:p.color,shape:p.shape,tick:0,totalTicks:p.ticks,decay:p.decay,drift:p.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:p.gravity*3,ovalScalar:.6,scalar:p.scalar,flat:p.flat}}function Ce(p,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var M=f.tick++/f.totalTicks,A=f.x+f.random*f.tiltCos,F=f.y+f.random*f.tiltSin,D=f.wobbleX+f.random*f.tiltCos,R=f.wobbleY+f.random*f.tiltSin;if(p.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-M)+")",p.beginPath(),d&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))p.fill(Ze(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(D-A)*.1,Math.abs(R-F)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var N=Math.PI/10*f.wobble,B=Math.abs(D-A)*.1,V=Math.abs(R-F)*.1,U=f.shape.bitmap.width*f.scalar,J=f.shape.bitmap.height*f.scalar,Z=new DOMMatrix([Math.cos(N)*B,Math.sin(N)*B,-Math.sin(N)*V,Math.cos(N)*V,f.x,f.y]);Z.multiplySelf(new DOMMatrix(f.shape.matrix));var re=p.createPattern(c.transform(f.shape.bitmap),"no-repeat");re.setTransform(Z),p.globalAlpha=1-M,p.fillStyle=re,p.fillRect(f.x-U/2,f.y-J/2,U,J),p.globalAlpha=1}else if(f.shape==="circle")p.ellipse?p.ellipse(f.x,f.y,Math.abs(D-A)*f.ovalScalar,Math.abs(R-F)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):G(p,f.x,f.y,Math.abs(D-A)*f.ovalScalar,Math.abs(R-F)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var H=Math.PI/2*3,W=4*f.scalar,we=8*f.scalar,se=f.x,ge=f.y,Fe=5,le=Math.PI/Fe;Fe--;)se=f.x+Math.cos(H)*we,ge=f.y+Math.sin(H)*we,p.lineTo(se,ge),H+=le,se=f.x+Math.cos(H)*W,ge=f.y+Math.sin(H)*W,p.lineTo(se,ge),H+=le;else p.moveTo(Math.floor(f.x),Math.floor(f.y)),p.lineTo(Math.floor(f.wobbleX),Math.floor(F)),p.lineTo(Math.floor(D),Math.floor(R)),p.lineTo(Math.floor(A),Math.floor(f.wobbleY));return p.closePath(),p.fill(),f.tick<f.totalTicks}function Ke(p,f,M,A,F){var D=f.slice(),R=p.getContext("2d"),N,B,V=u(function(U){function J(){N=B=null,R.clearRect(0,0,A.width,A.height),c.clear(),F(),U()}function Z(){a&&!(A.width===i.width&&A.height===i.height)&&(A.width=p.width=i.width,A.height=p.height=i.height),!A.width&&!A.height&&(M(p),A.width=p.width,A.height=p.height),R.clearRect(0,0,A.width,A.height),D=D.filter(function(re){return Ce(R,re)}),D.length?N=m.frame(Z):J()}N=m.frame(Z),B=J});return{addFettis:function(U){return D=D.concat(U),V},canvas:p,promise:V,reset:function(){N&&m.cancel(N),B&&B()}}}function Se(p,f){var M=!p,A=!!y(f||{},"resize"),F=!1,D=y(f,"disableForReducedMotion",Boolean),R=o&&!!y(f||{},"useWorker"),N=R?j():null,B=M?O:k,V=p&&N?!!p.__confetti_initialized:!1,U=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,J;function Z(H,W,we){for(var se=y(H,"particleCount",P),ge=y(H,"angle",Number),Fe=y(H,"spread",Number),le=y(H,"startVelocity",Number),De=y(H,"decay",Number),Je=y(H,"gravity",Number),_e=y(H,"drift",Number),T=y(H,"colors",I),de=y(H,"ticks",Number),ve=y(H,"shapes"),fe=y(H,"scalar"),Le=!!y(H,"flat"),Qe=C(H),Tt=se,mt=[],Lt=p.width*Qe.x,ke=p.height*Qe.y;Tt--;)mt.push(Pe({x:Lt,y:ke,angle:ge,spread:Fe,startVelocity:le,color:T[Tt%T.length],shape:ve[S(0,ve.length)],ticks:de,decay:De,gravity:Je,drift:_e,scalar:fe,flat:Le}));return J?J.addFettis(mt):(J=Ke(p,mt,B,W,we),J.promise)}function re(H){var W=D||y(H,"disableForReducedMotion",Boolean),we=y(H,"zIndex",Number);if(W&&U)return u(function(le){le()});M&&J?p=J.canvas:M&&!p&&(p=$(we),document.body.appendChild(p)),A&&!V&&B(p);var se={width:p.width,height:p.height};N&&!V&&N.init(p),V=!0,N&&(p.__confetti_initialized=!0);function ge(){if(N){var le={getBoundingClientRect:function(){if(!M)return p.getBoundingClientRect()}};B(le),N.postMessage({resize:{width:le.width,height:le.height}});return}se.width=se.height=null}function Fe(){J=null,A&&(F=!1,t.removeEventListener("resize",ge)),M&&p&&(document.body.removeChild(p),p=null,V=!1)}return A&&!F&&(F=!0,t.addEventListener("resize",ge,!1)),N?N.fire(H,se,Fe):Z(H,se,Fe)}return re.reset=function(){N&&N.reset(),J&&J.reset()},re}var Q;function ae(){return Q||(Q=Se(null,{useWorker:!0,resize:!0})),Q}function Ze(p,f,M,A,F,D,R){var N=new Path2D(p),B=new Path2D;B.addPath(N,new DOMMatrix(f));var V=new Path2D;return V.addPath(B,new DOMMatrix([Math.cos(R)*F,Math.sin(R)*F,-Math.sin(R)*D,Math.cos(R)*D,M,A])),V}function Te(p){if(!d)throw new Error("path confetti are not supported in this browser");var f,M;typeof p=="string"?f=p:(f=p.path,M=p.matrix);var A=new Path2D(f),F=document.createElement("canvas"),D=F.getContext("2d");if(!M){for(var R=1e3,N=R,B=R,V=0,U=0,J,Z,re=0;re<R;re+=2)for(var H=0;H<R;H+=2)D.isPointInPath(A,re,H,"nonzero")&&(N=Math.min(N,re),B=Math.min(B,H),V=Math.max(V,re),U=Math.max(U,H));J=V-N,Z=U-B;var W=10,we=Math.min(W/J,W/Z);M=[we,0,0,we,-Math.round(J/2+N)*we,-Math.round(Z/2+B)*we]}return{type:"path",path:f,matrix:M}}function pt(p){var f,M=1,A="#000000",F='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof p=="string"?f=p:(f=p.text,M="scalar"in p?p.scalar:M,F="fontFamily"in p?p.fontFamily:F,A="color"in p?p.color:A);var D=10*M,R=""+D+"px "+F,N=new OffscreenCanvas(D,D),B=N.getContext("2d");B.font=R;var V=B.measureText(f),U=Math.ceil(V.actualBoundingBoxRight+V.actualBoundingBoxLeft),J=Math.ceil(V.actualBoundingBoxAscent+V.actualBoundingBoxDescent),Z=2,re=V.actualBoundingBoxLeft+Z,H=V.actualBoundingBoxAscent+Z;U+=Z+Z,J+=Z+Z,N=new OffscreenCanvas(U,J),B=N.getContext("2d"),B.font=R,B.fillStyle=A,B.fillText(f,re,H);var W=1/M;return{type:"bitmap",bitmap:N.transferToImageBitmap(),matrix:[W,0,0,W,-U*W/2,-J*W/2]}}n.exports=function(){return ae().apply(this,arguments)},n.exports.reset=function(){ae().reset()},n.exports.create=Se,n.exports.shapeFromPath=Te,n.exports.shapeFromText=pt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),hn,!1);const Us=hn.exports;hn.exports.create;const ht=g.createContext(null),Jt=({children:e})=>{const[t,n]=g.useState(0),[a,i]=g.useState(0),[o,d]=g.useState(0),[l,s]=g.useState(0),[u,c]=g.useState(!1),[m,j]=g.useState(!1),[E,x]=g.useState([]),[h,y]=g.useState([]),[P,S]=g.useState([]),[v,I]=g.useState(ce("showStatus")),[_,C]=g.useState("0"),[O,k]=g.useState(""),[$,G]=g.useState(!0),Pe={entries:E,filteredEntries:P,filterStatus:v,filterString:O,filterType:_,loading:$,loadMoreUnreadVisible:m,loadMoreVisible:u,offset:o,setEntries:x,setFilteredEntries:S,setFilterStatus:I,setFilterString:k,setFilterType:C,setLoading:G,setLoadMoreUnreadVisible:j,setLoadMoreVisible:c,setOffset:d,setTotal:n,setUnreadCount:i,setUnreadEntries:y,setUnreadOffset:s,total:t,unreadCount:a,unreadEntries:h,unreadOffset:l};return r.jsx(ht.Provider,{value:Pe,children:e})},hr=()=>{const e=b(S=>S.setUnreadTotal),t=b(S=>S.setUnreadToday),n=b(S=>S.setReadCount),a=b(S=>S.setStarredCount),i=b(S=>S.activeContent),o=b(S=>S.setActiveContent),d=b(S=>S.updateFeedUnreadCount),l=b(S=>S.updateGroupUnreadCount),{setEntries:s,setFilteredEntries:u,setUnreadCount:c,setUnreadEntries:m}=g.useContext(ht),j=(S,v)=>S.map(I=>I.id===v.id?v:I),E=(S,v)=>{const{id:I,category:{id:_}}=S.feed,C=Go(S.published_at);d(I,v),l(_,v),v==="read"?(e(k=>Math.max(0,k-1)),c(k=>Math.max(0,k-1)),n(k=>k+1),C&&t(k=>Math.max(0,k-1))):(e(k=>k+1),c(k=>k+1),n(k=>Math.max(0,k-1)),C&&t(k=>k+1));const O={...S,status:v};o(O),s(k=>j(k,O)),m(k=>j(k,O)),u(k=>j(k,O))},x=(S,v)=>{v?(a(_=>_+1),Us({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):a(_=>Math.max(0,_-1));const I={...S,starred:v};o(I),s(_=>j(_,I)),m(_=>j(_,I)),u(_=>j(_,I))};return{handleEntryStatusUpdate:E,handleFetchContent:async()=>{Ko(i.id).then(S=>{te.success("Fetched content successfully"),o({...i,content:S.data.content})}).catch(()=>{te.error("Failed to fetch content, please try again later")})},handleToggleStarred:async()=>{const{id:S}=i,v=!i.starred;x(i,v),Yo(S).catch(()=>{te.error(`Failed to ${v?"star":"unstar"} entry, please try again later`),x(i,!v)})},handleToggleStatus:async()=>{const S=i.status,v=S==="read"?"unread":"read";E(i,v),Ia(i.id,v).catch(()=>{te.error(`Failed to mark entry as ${v}, please try again later`),E(i,S)})}}},Vr=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},pr=()=>{const e=b(O=>O.pageSize),t=b(O=>O.showAllFeeds),n=b(O=>O.hiddenFeedIds),{entries:a,filterStatus:i,filterString:o,filterType:d,offset:l,setEntries:s,setFilteredEntries:u,setLoadMoreUnreadVisible:c,setLoadMoreVisible:m,setOffset:j,setUnreadEntries:E,setUnreadOffset:x,total:h,unreadCount:y,unreadEntries:P,unreadOffset:S}=g.useContext(ht),[v,I]=g.useState(!1),_=O=>{const G=new DOMParser().parseFromString(O.content,"text/html").querySelector("img");return G&&(O.imgSrc=G.getAttribute("src")),O};return{getFirstImage:_,handleLoadMore:async(O,k)=>{var $;I(!0);try{let G;if(i==="all"?G=await k(l+e):G=await k(S+e,i),($=G==null?void 0:G.data)!=null&&$.entries){i==="all"?j(Q=>Q+e):x(Q=>Q+e);const Pe=G.data.entries.map(_),Ce=[...new Map([...i==="all"?a:P,...Pe].map(Q=>[Q.id,Q])).values()];i==="all"?s(Ce):E(Ce);const Ke=o?Fa(Ce,d,i,o):Ce,Se=tr(Ke,O,t,n);u(Se),i==="all"?m(Ce.length<h):c(Ce.length<y)}}catch(G){console.error("Error fetching more articles:",G)}I(!1)},loadingMore:v}},mr=(e,t,n)=>{const{filteredEntries:a,filterStatus:i,loadMoreUnreadVisible:o,loadMoreVisible:d}=g.useContext(ht),l=b(_=>_.activeContent),s=b(_=>_.setActiveContent),{handleLoadMore:u}=pr(),[c,m]=g.useState(!1),[j,E]=g.useState(!1);g.useEffect(()=>{const _=document.querySelector(".entry-list");!_||!nr()||(l?_.style.visibility="hidden":_.style.visibility="visible")},[l]),g.useEffect(()=>{j&&!c&&(y(e),E(!1))},[c,j]);const x=_=>{l&&(s(null),_.current&&(_.current.setAttribute("tabIndex","-1"),_.current.focus()))},h=()=>{const _=a.findIndex(C=>C.id===(l==null?void 0:l.id));if(_>0){const C=a[_-1];t(C),Vr(".card-custom-selected-style","end")}},y=_=>{if(c)return;const C=a.findIndex(k=>k.id===(l==null?void 0:l.id));if(C===a.length-1&&(i==="all"&&d||o)){m(!0),u(_,n).then(()=>E(!0)).finally(()=>m(!1));return}if(C===-1){const k=document.querySelector(".entry-list");k&&k.scrollTo(0,0)}if(C<a.length-1){const k=a[C+1];t(k),E(!1),Vr(".card-custom-selected-style")}};return{handleEscapeKey:x,handleLeftKey:h,handleRightKey:y,handleBKey:()=>{l&&window.open(l.url,"_blank")},handleDKey:_=>{l&&_()},handleMKey:_=>{l&&_()},handleSKey:_=>{l&&_()}}},Vs=({info:e,handleEntryClick:t,getEntries:n})=>{const a=b(m=>m.activeContent),{handleFetchContent:i,handleToggleStarred:o,handleToggleStatus:d}=hr(),{handleLeftKey:l,handleRightKey:s}=mr(e,t,n);if(!a)return null;const u=a.status==="unread",c=a.starred;return r.jsx("div",{className:"action-buttons",style:{position:"fixed",bottom:"20px",right:"10px",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:r.jsxs(Fn,{size:0,direction:"vertical",children:[r.jsx(ft,{mini:!0,position:"left",content:u?"Mark as read":"Mark as unread",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderBottom:"1px solid rgb(var(--primary-5))",borderRadius:"50% 50% 0 0"},onClick:d,icon:u?r.jsx(ma,{}):r.jsx(ga,{})})}),r.jsx(ft,{mini:!0,position:"left",content:c?"Unstar":"Star",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderRadius:"0"},onClick:o,icon:c?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(cr,{})})}),r.jsx(ft,{mini:!0,position:"left",content:"Fetch original article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:i,icon:r.jsx(va,{})})}),r.jsx(ft,{mini:!0,position:"left",content:"Previous article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:l,icon:r.jsx(ya,{})})}),r.jsx(ft,{mini:!0,position:"left",content:"Next article",children:r.jsx(ue,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0 0 50% 50%"},onClick:s,icon:r.jsx(xa,{})})})]})})},$s=({info:e,handleEntryClick:t,getEntries:n})=>{const a=b(j=>j.activeContent),{handleFetchContent:i,handleToggleStarred:o,handleToggleStatus:d}=hr(),{handleLeftKey:l,handleRightKey:s,handleEscapeKey:u}=mr(e,t,n);if(!a)return null;const c=a.status==="unread",m=a.starred;return r.jsxs(ue.Group,{className:"action-buttons-mobile",style:{display:"none",justifyContent:"center",position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:[r.jsx(ue,{type:"primary",shape:"round",onClick:u,icon:r.jsx(to,{})}),r.jsx(ue,{type:"primary",onClick:d,icon:c?r.jsx(ma,{}):r.jsx(ga,{})}),r.jsx(ue,{type:"primary",onClick:o,icon:m?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(cr,{})}),r.jsx(ue,{type:"primary",onClick:()=>i(),icon:r.jsx(va,{})}),r.jsx(ue,{type:"primary",onClick:l,icon:r.jsx(ya,{})}),r.jsx(ue,{type:"primary",shape:"round",onClick:s,icon:r.jsx(xa,{})})]})};var Ba={},gr={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});var $r="html",Hr="head",yn="body",Hs=/<([a-zA-Z]+[0-9]?)/,Wr=/<head[^]*>/i,Gr=/<body[^]*>/i,Mn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},rr=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Xr=typeof window=="object"&&window.DOMParser;if(typeof Xr=="function"){var Ws=new Xr,Gs="text/html";rr=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Ws.parseFromString(e,Gs)},Mn=rr}if(typeof document=="object"&&document.implementation){var xn=document.implementation.createHTMLDocument();Mn=function(e,t){if(t){var n=xn.documentElement.querySelector(t);return n&&(n.innerHTML=e),xn}return xn.documentElement.innerHTML=e,xn}}var bn=typeof document=="object"&&document.createElement("template"),ar;bn&&bn.content&&(ar=function(e){return bn.innerHTML=e,bn.content.childNodes});function Xs(e){var t,n,a=e.match(Hs),i=a&&a[1]?a[1].toLowerCase():"";switch(i){case $r:{var o=rr(e);if(!Wr.test(e)){var d=o.querySelector(Hr);(t=d==null?void 0:d.parentNode)===null||t===void 0||t.removeChild(d)}if(!Gr.test(e)){var d=o.querySelector(yn);(n=d==null?void 0:d.parentNode)===null||n===void 0||n.removeChild(d)}return o.querySelectorAll($r)}case Hr:case yn:{var l=Mn(e).querySelectorAll(i);return Gr.test(e)&&Wr.test(e)?l[0].parentNode.childNodes:l}default:{if(ar)return ar(e);var d=Mn(e,yn).querySelector(yn);return d.childNodes}}}vr.default=Xs;var Kt={},Ua={},pn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(a){return a.type===t.Tag||a.type===t.Script||a.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(pn);var Y={},jt=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),sn=ne&&ne.__assign||function(){return sn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},sn.apply(this,arguments)};Object.defineProperty(Y,"__esModule",{value:!0});Y.cloneNode=Y.hasChildren=Y.isDocument=Y.isDirective=Y.isComment=Y.isText=Y.isCDATA=Y.isTag=Y.Element=Y.Document=Y.CDATA=Y.NodeWithChildren=Y.ProcessingInstruction=Y.Comment=Y.Text=Y.DataNode=Y.Node=void 0;var Ne=pn,yr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),xr(this,t)},e}();Y.Node=yr;var Dn=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(yr);Y.DataNode=Dn;var Va=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ne.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Dn);Y.Text=Va;var $a=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ne.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Dn);Y.Comment=$a;var Ha=function(e){jt(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Ne.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Dn);Y.ProcessingInstruction=Ha;var Ln=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(yr);Y.NodeWithChildren=Ln;var Wa=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ne.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Ln);Y.CDATA=Wa;var Ga=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ne.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Ln);Y.Document=Ga;var Xa=function(e){jt(t,e);function t(n,a,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?Ne.ElementType.Script:n==="style"?Ne.ElementType.Style:Ne.ElementType.Tag);var d=e.call(this,i)||this;return d.name=n,d.attribs=a,d.type=o,d}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,o;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[a]}})},enumerable:!1,configurable:!0}),t}(Ln);Y.Element=Xa;function qa(e){return(0,Ne.isTag)(e)}Y.isTag=qa;function Ya(e){return e.type===Ne.ElementType.CDATA}Y.isCDATA=Ya;function Ka(e){return e.type===Ne.ElementType.Text}Y.isText=Ka;function Za(e){return e.type===Ne.ElementType.Comment}Y.isComment=Za;function Ja(e){return e.type===Ne.ElementType.Directive}Y.isDirective=Ja;function Qa(e){return e.type===Ne.ElementType.Root}Y.isDocument=Qa;function qs(e){return Object.prototype.hasOwnProperty.call(e,"children")}Y.hasChildren=qs;function xr(e,t){t===void 0&&(t=!1);var n;if(Ka(e))n=new Va(e.data);else if(Za(e))n=new $a(e.data);else if(qa(e)){var a=t?Yn(e.children):[],i=new Xa(e.name,sn({},e.attribs),a);a.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=sn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=sn({},e["x-attribsPrefix"])),n=i}else if(Ya(e)){var a=t?Yn(e.children):[],o=new Wa(a);a.forEach(function(u){return u.parent=o}),n=o}else if(Qa(e)){var a=t?Yn(e.children):[],d=new Ga(a);a.forEach(function(u){return u.parent=d}),e["x-mode"]&&(d["x-mode"]=e["x-mode"]),n=d}else if(Ja(e)){var l=new Ha(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Y.cloneNode=xr;function Yn(e){for(var t=e.map(function(a){return xr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(l,s,u,c){c===void 0&&(c=u);var m=Object.getOwnPropertyDescriptor(s,u);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(l,c,m)}:function(l,s,u,c){c===void 0&&(c=u),l[c]=s[u]}),n=ne&&ne.__exportStar||function(l,s){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&t(s,l,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=pn,i=Y;n(Y,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},d=function(){function l(s,u,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(c=u,u=o),typeof s=="object"&&(u=s,s=void 0),this.callback=s??null,this.options=u??o,this.elementCB=c??null}return l.prototype.onparserinit=function(s){this.parser=s},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(s){this.handleCallback(s)},l.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},l.prototype.onopentag=function(s,u){var c=this.options.xmlMode?a.ElementType.Tag:void 0,m=new i.Element(s,u,void 0,c);this.addNode(m),this.tagStack.push(m)},l.prototype.ontext=function(s){var u=this.lastNode;if(u&&u.type===a.ElementType.Text)u.data+=s,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var c=new i.Text(s);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=s;return}var u=new i.Comment(s);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var s=new i.Text(""),u=new i.CDATA([s]);this.addNode(u),s.parent=u,this.lastNode=s},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(s,u){var c=new i.ProcessingInstruction(s,u);this.addNode(c)},l.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},l.prototype.addNode=function(s){var u=this.tagStack[this.tagStack.length-1],c=u.children[u.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),u.children.push(s),c&&(s.prev=c,c.next=s),s.parent=u,this.lastNode=null},l}();e.DomHandler=d,e.default=d})(Ua);var ei={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(ei);Object.defineProperty(Kt,"__esModule",{value:!0});Kt.formatDOM=Kt.formatAttributes=void 0;var wn=Ua,Ys=ei;function Ks(e){return Ys.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function ti(e){for(var t={},n=0,a=e.length;n<a;n++){var i=e[n];t[i.name]=i.value}return t}Kt.formatAttributes=ti;function Zs(e){e=e.toLowerCase();var t=Ks(e);return t||e}function ni(e,t,n){t===void 0&&(t=null);for(var a=[],i,o=0,d=e.length;o<d;o++){var l=e[o];switch(l.nodeType){case 1:{var s=Zs(l.nodeName);i=new wn.Element(s,ti(l.attributes)),i.children=ni(s==="template"?l.content.childNodes:l.childNodes,i);break}case 3:i=new wn.Text(l.nodeValue);break;case 8:i=new wn.Comment(l.nodeValue);break;default:continue}var u=a[o-1]||null;u&&(u.next=i),i.parent=t,i.prev=u,i.next=null,a.push(i)}return n&&(i=new wn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=a[0]||null,i.parent=t,a.unshift(i),a[1]&&(a[1].prev=a[0])),a}Kt.formatDOM=ni;var Js=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gr,"__esModule",{value:!0});var Qs=Js(vr),el=Kt,tl=/<(![a-zA-Z\s]+)>/;function nl(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(tl),n=t?t[1]:void 0;return(0,el.formatDOM)((0,Qs.default)(e),null,n)}gr.default=nl;var zn={},Ye={},Bn={},rl=0;Bn.SAME=rl;var al=1;Bn.CAMELCASE=al;Bn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ri=0,Et=1,Un=2,Vn=3,br=4,ai=5,ii=6;function il(e){return Ee.hasOwnProperty(e)?Ee[e]:null}function Ae(e,t,n,a,i,o,d){this.acceptsBooleans=t===Un||t===Vn||t===br,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=d}const Ee={},ol=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];ol.forEach(e=>{Ee[e]=new Ae(e,ri,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Ee[e]=new Ae(e,Et,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Ee[e]=new Ae(e,Un,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Ee[e]=new Ae(e,Un,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Ee[e]=new Ae(e,Vn,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Ee[e]=new Ae(e,Vn,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Ee[e]=new Ae(e,br,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Ee[e]=new Ae(e,ii,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Ee[e]=new Ae(e,ai,!1,e.toLowerCase(),null,!1,!1)});const wr=/[\-\:]([a-z])/g,Cr=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(wr,Cr);Ee[t]=new Ae(t,Et,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(wr,Cr);Ee[t]=new Ae(t,Et,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(wr,Cr);Ee[t]=new Ae(t,Et,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Ee[e]=new Ae(e,Et,!1,e.toLowerCase(),null,!1,!1)});const sl="xlinkHref";Ee[sl]=new Ae("xlinkHref",Et,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Ee[e]=new Ae(e,Et,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:ll,SAME:cl,possibleStandardNames:qr}=Bn,dl=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",ul=dl+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",fl=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+ul+"]*$")),hl=Object.keys(qr).reduce((e,t)=>{const n=qr[t];return n===cl?e[t]=t:n===ll?e[t.toLowerCase()]=t:e[t]=n,e},{});Ye.BOOLEAN=Vn;Ye.BOOLEANISH_STRING=Un;Ye.NUMERIC=ai;Ye.OVERLOADED_BOOLEAN=br;Ye.POSITIVE_NUMERIC=ii;Ye.RESERVED=ri;Ye.STRING=Et;Ye.getPropertyInfo=il;Ye.isCustomAttribute=fl;Ye.possibleStandardNames=hl;var jr={},Er={},Yr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,pl=/\n/g,ml=/^\s*/,gl=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,vl=/^:\s*/,yl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,xl=/^[;\s]*/,bl=/^\s+|\s+$/g,wl=`
`,Kr="/",Zr="*",Ft="",Cl="comment",jl="declaration",El=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,a=1;function i(x){var h=x.match(pl);h&&(n+=h.length);var y=x.lastIndexOf(wl);a=~y?x.length-y:a+x.length}function o(){var x={line:n,column:a};return function(h){return h.position=new d(x),u(),h}}function d(x){this.start=x,this.end={line:n,column:a},this.source=t.source}d.prototype.content=e;function l(x){var h=new Error(t.source+":"+n+":"+a+": "+x);if(h.reason=x,h.filename=t.source,h.line=n,h.column=a,h.source=e,!t.silent)throw h}function s(x){var h=x.exec(e);if(h){var y=h[0];return i(y),e=e.slice(y.length),h}}function u(){s(ml)}function c(x){var h;for(x=x||[];h=m();)h!==!1&&x.push(h);return x}function m(){var x=o();if(!(Kr!=e.charAt(0)||Zr!=e.charAt(1))){for(var h=2;Ft!=e.charAt(h)&&(Zr!=e.charAt(h)||Kr!=e.charAt(h+1));)++h;if(h+=2,Ft===e.charAt(h-1))return l("End of comment missing");var y=e.slice(2,h-2);return a+=2,i(y),e=e.slice(h),a+=2,x({type:Cl,comment:y})}}function j(){var x=o(),h=s(gl);if(h){if(m(),!s(vl))return l("property missing ':'");var y=s(yl),P=x({type:jl,property:Jr(h[0].replace(Yr,Ft)),value:y?Jr(y[0].replace(Yr,Ft)):Ft});return s(xl),P}}function E(){var x=[];c(x);for(var h;h=j();)h!==!1&&(x.push(h),c(x));return x}return u(),E()};function Jr(e){return e?e.replace(bl,Ft):Ft}var Sl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});var Tl=Sl(El);function _l(e,t){var n=null;if(!e||typeof e!="string")return n;var a=(0,Tl.default)(e),i=typeof t=="function";return a.forEach(function(o){if(o.type==="declaration"){var d=o.property,l=o.value;i?t(d,l,o):l&&(n=n||{},n[d]=l)}}),n}Er.default=_l;var $n={};Object.defineProperty($n,"__esModule",{value:!0});$n.camelCase=void 0;var kl=/^--[a-zA-Z0-9-]+$/,Il=/-([a-z])/g,Ml=/^[^-]+$/,Al=/^-(webkit|moz|ms|o|khtml)-/,Pl=/^-(ms)-/,Fl=function(e){return!e||Ml.test(e)||kl.test(e)},Nl=function(e,t){return t.toUpperCase()},Qr=function(e,t){return"".concat(t,"-")},Ol=function(e,t){return t===void 0&&(t={}),Fl(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Pl,Qr):e=e.replace(Al,Qr),e.replace(Il,Nl))};$n.camelCase=Ol;var Rl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Dl=Rl(Er),Ll=$n;function ir(e,t){var n={};return!e||typeof e!="string"||(0,Dl.default)(e,function(a,i){a&&i&&(n[(0,Ll.camelCase)(a,t)]=i)}),n}ir.default=ir;var zl=ir;(function(e){var t=ne&&ne.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=g,a=t(zl),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function o(c,m){return c.includes("-")?!i.has(c):!!(m&&typeof m.is=="string")}e.isCustomComponent=o;var d={reactCompat:!0};function l(c,m){if(typeof c=="string"){if(!c.trim()){m.style={};return}try{m.style=(0,a.default)(c,d)}catch{m.style={}}}}e.setStyleProp=l,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var s=function(c){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(c.name)};e.canTextBeChildOfNode=s;var u=function(c){return c};e.returnFirstArg=u})(jr);Object.defineProperty(zn,"__esModule",{value:!0});var an=Ye,ea=jr,Bl=["checked","value"],Ul=["input","select","textarea"],Vl={reset:!0,submit:!0};function $l(e,t){e===void 0&&(e={});var n={},a=!!(e.type&&Vl[e.type]);for(var i in e){var o=e[i];if((0,an.isCustomAttribute)(i)){n[i]=o;continue}var d=i.toLowerCase(),l=ta(d);if(l){var s=(0,an.getPropertyInfo)(l);switch(Bl.includes(l)&&Ul.includes(t)&&!a&&(l=ta("default"+d)),n[l]=o,s&&s.type){case an.BOOLEAN:n[l]=!0;break;case an.OVERLOADED_BOOLEAN:o===""&&(n[l]=!0);break}continue}ea.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=o)}return(0,ea.setStyleProp)(e.style,n),n}zn.default=$l;function ta(e){return an.possibleStandardNames[e]}var Sr={},Hl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sr,"__esModule",{value:!0});var Kn=g,Wl=Hl(zn),ln=jr,Gl={cloneElement:Kn.cloneElement,createElement:Kn.createElement,isValidElement:Kn.isValidElement};function oi(e,t){t===void 0&&(t={});for(var n=[],a=typeof t.replace=="function",i=t.transform||ln.returnFirstArg,o=t.library||Gl,d=o.cloneElement,l=o.createElement,s=o.isValidElement,u=e.length,c=0;c<u;c++){var m=e[c];if(a){var j=t.replace(m,c);if(s(j)){u>1&&(j=d(j,{key:j.key||c})),n.push(i(j,m,c));continue}}if(m.type==="text"){var E=!m.data.trim().length;if(E&&m.parent&&!(0,ln.canTextBeChildOfNode)(m.parent)||t.trim&&E)continue;n.push(i(m.data,m,c));continue}var x=m,h={};Xl(x)?((0,ln.setStyleProp)(x.attribs.style,x.attribs),h=x.attribs):x.attribs&&(h=(0,Wl.default)(x.attribs,x.name));var y=void 0;switch(m.type){case"script":case"style":m.children[0]&&(h.dangerouslySetInnerHTML={__html:m.children[0].data});break;case"tag":m.name==="textarea"&&m.children[0]?h.defaultValue=m.children[0].data:m.children&&m.children.length&&(y=oi(m.children,t));break;default:continue}u>1&&(h.key=c),n.push(i(l(m.name,h,y),m,c))}return n.length===1?n[0]:n}Sr.default=oi;function Xl(e){return ln.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,ln.isCustomComponent)(e.name,e.attribs)}var si={},K={},St=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(a[o]=i[o])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),cn=ne&&ne.__assign||function(){return cn=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},cn.apply(this,arguments)};Object.defineProperty(K,"__esModule",{value:!0});K.cloneNode=K.hasChildren=K.isDocument=K.isDirective=K.isComment=K.isText=K.isCDATA=K.isTag=K.Element=K.Document=K.CDATA=K.NodeWithChildren=K.ProcessingInstruction=K.Comment=K.Text=K.DataNode=K.Node=void 0;var Oe=pn,Tr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),_r(this,t)},e}();K.Node=Tr;var Hn=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Tr);K.DataNode=Hn;var li=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Oe.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Hn);K.Text=li;var ci=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Oe.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Hn);K.Comment=ci;var di=function(e){St(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Oe.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Hn);K.ProcessingInstruction=di;var Wn=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Tr);K.NodeWithChildren=Wn;var ui=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Oe.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Wn);K.CDATA=ui;var fi=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Oe.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Wn);K.Document=fi;var hi=function(e){St(t,e);function t(n,a,i,o){i===void 0&&(i=[]),o===void 0&&(o=n==="script"?Oe.ElementType.Script:n==="style"?Oe.ElementType.Style:Oe.ElementType.Tag);var d=e.call(this,i)||this;return d.name=n,d.attribs=a,d.type=o,d}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,o;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(o=n["x-attribsPrefix"])===null||o===void 0?void 0:o[a]}})},enumerable:!1,configurable:!0}),t}(Wn);K.Element=hi;function pi(e){return(0,Oe.isTag)(e)}K.isTag=pi;function mi(e){return e.type===Oe.ElementType.CDATA}K.isCDATA=mi;function gi(e){return e.type===Oe.ElementType.Text}K.isText=gi;function vi(e){return e.type===Oe.ElementType.Comment}K.isComment=vi;function yi(e){return e.type===Oe.ElementType.Directive}K.isDirective=yi;function xi(e){return e.type===Oe.ElementType.Root}K.isDocument=xi;function ql(e){return Object.prototype.hasOwnProperty.call(e,"children")}K.hasChildren=ql;function _r(e,t){t===void 0&&(t=!1);var n;if(gi(e))n=new li(e.data);else if(vi(e))n=new ci(e.data);else if(pi(e)){var a=t?Zn(e.children):[],i=new hi(e.name,cn({},e.attribs),a);a.forEach(function(s){return s.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=cn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=cn({},e["x-attribsPrefix"])),n=i}else if(mi(e)){var a=t?Zn(e.children):[],o=new ui(a);a.forEach(function(u){return u.parent=o}),n=o}else if(xi(e)){var a=t?Zn(e.children):[],d=new fi(a);a.forEach(function(u){return u.parent=d}),e["x-mode"]&&(d["x-mode"]=e["x-mode"]),n=d}else if(yi(e)){var l=new di(e.name,e.data);e["x-name"]!=null&&(l["x-name"]=e["x-name"],l["x-publicId"]=e["x-publicId"],l["x-systemId"]=e["x-systemId"]),n=l}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}K.cloneNode=_r;function Zn(e){for(var t=e.map(function(a){return _r(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(l,s,u,c){c===void 0&&(c=u);var m=Object.getOwnPropertyDescriptor(s,u);(!m||("get"in m?!s.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return s[u]}}),Object.defineProperty(l,c,m)}:function(l,s,u,c){c===void 0&&(c=u),l[c]=s[u]}),n=ne&&ne.__exportStar||function(l,s){for(var u in l)u!=="default"&&!Object.prototype.hasOwnProperty.call(s,u)&&t(s,l,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=pn,i=K;n(K,e);var o={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},d=function(){function l(s,u,c){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(c=u,u=o),typeof s=="object"&&(u=s,s=void 0),this.callback=s??null,this.options=u??o,this.elementCB=c??null}return l.prototype.onparserinit=function(s){this.parser=s},l.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},l.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},l.prototype.onerror=function(s){this.handleCallback(s)},l.prototype.onclosetag=function(){this.lastNode=null;var s=this.tagStack.pop();this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(s)},l.prototype.onopentag=function(s,u){var c=this.options.xmlMode?a.ElementType.Tag:void 0,m=new i.Element(s,u,void 0,c);this.addNode(m),this.tagStack.push(m)},l.prototype.ontext=function(s){var u=this.lastNode;if(u&&u.type===a.ElementType.Text)u.data+=s,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var c=new i.Text(s);this.addNode(c),this.lastNode=c}},l.prototype.oncomment=function(s){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=s;return}var u=new i.Comment(s);this.addNode(u),this.lastNode=u},l.prototype.oncommentend=function(){this.lastNode=null},l.prototype.oncdatastart=function(){var s=new i.Text(""),u=new i.CDATA([s]);this.addNode(u),s.parent=u,this.lastNode=s},l.prototype.oncdataend=function(){this.lastNode=null},l.prototype.onprocessinginstruction=function(s,u){var c=new i.ProcessingInstruction(s,u);this.addNode(c)},l.prototype.handleCallback=function(s){if(typeof this.callback=="function")this.callback(s,this.dom);else if(s)throw s},l.prototype.addNode=function(s){var u=this.tagStack[this.tagStack.length-1],c=u.children[u.children.length-1];this.options.withStartIndices&&(s.startIndex=this.parser.startIndex),this.options.withEndIndices&&(s.endIndex=this.parser.endIndex),u.children.push(s),c&&(s.prev=c,c.next=s),s.parent=u,this.lastNode=null},l}();e.DomHandler=d,e.default=d})(si);(function(e){var t=ne&&ne.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(gr);e.htmlToDOM=n.default;var a=t(zn);e.attributesToProps=a.default;var i=t(Sr);e.domToReact=i.default;var o=si;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return o.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return o.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return o.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return o.Text}});var d={lowerCaseAttributeNames:!1};function l(s,u){if(typeof s!="string")throw new TypeError("First argument must be a string");return s?(0,i.default)((0,n.default)(s,(u==null?void 0:u.htmlparser2)||d),u):[]}e.default=l})(Ba);const na=Pn(Ba),Yl=na.default||na;function xe(){return xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},xe.apply(this,arguments)}function Gn(e,t){if(e==null)return{};var n,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t.indexOf(n=o[a])>=0||(i[n]=e[n]);return i}function Rt(e){var t=g.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(a){n[a]=function(){var i;return(i=t.fn[a]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function An(e){return g.useReducer(function(t,n){return xe({},t,typeof n=="function"?n(t):n)},e)}var bi=g.createContext(void 0),ut=typeof window<"u"&&"ontouchstart"in window,or=function(e,t,n){return Math.max(Math.min(e,n),t)},Cn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),or(e,1*(1-n),Math.max(6,t)*(1+n))},sr=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?g.useEffect:g.useLayoutEffect;function Xt(e,t,n){var a=g.useRef(t);a.current=t,g.useEffect(function(){function i(o){a.current(o)}return e&&window.addEventListener(e,i,n),function(){e&&window.removeEventListener(e,i)}},[e])}var Kl=["container"];function Zl(e){var t=e.container,n=t===void 0?document.body:t,a=Gn(e,Kl);return no.createPortal(q.createElement("div",xe({},a)),n)}function Jl(e){return q.createElement("svg",xe({width:"44",height:"44",viewBox:"0 0 768 768"},e),q.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function Ql(e){return q.createElement("svg",xe({width:"44",height:"44",viewBox:"0 0 768 768"},e),q.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function ec(e){return q.createElement("svg",xe({width:"44",height:"44",viewBox:"0 0 768 768"},e),q.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function tc(){return g.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function ra(e){var t=e.touches[0],n=t.clientX,a=t.clientY;if(e.touches.length>=2){var i=e.touches[1],o=i.clientX,d=i.clientY;return[(n+o)/2,(a+d)/2,Math.sqrt(Math.pow(o-n,2)+Math.pow(d-a,2))]}return[n,a,0]}var wt=function(e,t,n,a){var i=n*t,o=(i-a)/2,d=void 0,l=e;return i<=a?(d=1,l=0):e>0&&o-e<=0?(d=2,l=o):e<0&&o+e<=0&&(d=3,l=-o),[d,l]};function Jn(e,t,n,a,i,o,d,l,s,u){d===void 0&&(d=innerWidth/2),l===void 0&&(l=innerHeight/2),s===void 0&&(s=0),u===void 0&&(u=0);var c=wt(e,o,n,innerWidth)[0],m=wt(t,o,a,innerHeight),j=innerWidth/2,E=innerHeight/2;return{x:d-o/i*(d-(j+e))-j+(a/n>=3&&n*o===innerWidth?0:c?s/2:s),y:l-o/i*(l-(E+t))-E+(m[0]?u/2:u),lastCX:d,lastCY:l}}function lr(e,t,n){var a=e%180!=0;return a?[n,t,a]:[t,n,a]}function Qn(e,t,n){var a=lr(n,innerWidth,innerHeight),i=a[0],o=a[1],d=0,l=i,s=o,u=e/t*o,c=t/e*i;return e<i&&t<o?(l=e,s=t):e<i&&t>=o?l=u:e>=i&&t<o||e/t>i/o?s=c:t/e>=3&&!a[2]?d=((s=c)-o)/2:l=u,{width:l,height:s,x:0,y:d,pause:!0}}function jn(e,t){var n=t.leading,a=n!==void 0&&n,i=t.maxWait,o=t.wait,d=o===void 0?i||0:o,l=g.useRef(e);l.current=e;var s=g.useRef(0),u=g.useRef(),c=function(){return u.current&&clearTimeout(u.current)},m=g.useCallback(function(){var j=[].slice.call(arguments),E=Date.now();function x(){s.current=E,c(),l.current.apply(null,j)}var h=s.current,y=E-h;if(h===0&&(a&&x(),s.current=E),i!==void 0){if(y>i)return void x()}else y<d&&(s.current=E);c(),u.current=setTimeout(function(){x(),s.current=0},d)},[d,i,a]);return m.cancel=c,m}var aa=function(e,t,n){return Nt(e,t,n,100,function(a){return a},function(){return Nt(t,e,n)})},nc=function(e){return 1-Math.pow(1-e,4)};function Nt(e,t,n,a,i,o){a===void 0&&(a=400),i===void 0&&(i=nc);var d=t-e;if(d!==0){var l=Date.now(),s=0,u=function(){var m=Math.min(1,(Date.now()-l)/a);n(e+i(m)*d)&&m<1?c():(cancelAnimationFrame(s),m>=1&&o&&o())};c()}function c(){s=requestAnimationFrame(u)}}var rc={T:0,L:0,W:0,H:0,FIT:void 0},wi=function(){var e=g.useRef(!1);return g.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},ac=["className"];function ic(e){var t=e.className,n=Gn(e,ac);return q.createElement("div",xe({className:"PhotoView__Spinner "+t},n),q.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},q.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),q.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var oc=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function sc(e){var t=e.src,n=e.loaded,a=e.broken,i=e.className,o=e.onPhotoLoad,d=e.loadingElement,l=e.brokenElement,s=Gn(e,oc),u=wi();return t&&!a?q.createElement(q.Fragment,null,q.createElement("img",xe({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(c){var m=c.target;u.current&&o({loaded:!0,naturalWidth:m.naturalWidth,naturalHeight:m.naturalHeight})},onError:function(){u.current&&o({broken:!0})},alt:""},s)),!n&&(q.createElement("span",{className:"PhotoView__icon"},d)||q.createElement(ic,{className:"PhotoView__icon"}))):l?q.createElement("span",{className:"PhotoView__icon"},typeof l=="function"?l({src:t}):l):null}var lc={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function cc(e){var t=e.item,n=t.src,a=t.render,i=t.width,o=i===void 0?0:i,d=t.height,l=d===void 0?0:d,s=t.originRef,u=e.visible,c=e.speed,m=e.easing,j=e.wrapClassName,E=e.className,x=e.style,h=e.loadingElement,y=e.brokenElement,P=e.onPhotoTap,S=e.onMaskTap,v=e.onReachMove,I=e.onReachUp,_=e.onPhotoResize,C=e.isActive,O=e.expose,k=An(lc),$=k[0],G=k[1],Pe=g.useRef(0),Ce=wi(),Ke=$.naturalWidth,Se=Ke===void 0?o:Ke,Q=$.naturalHeight,ae=Q===void 0?l:Q,Ze=$.width,Te=Ze===void 0?o:Ze,pt=$.height,p=pt===void 0?l:pt,f=$.loaded,M=f===void 0?!n:f,A=$.broken,F=$.x,D=$.y,R=$.touched,N=$.stopRaf,B=$.maskTouched,V=$.rotate,U=$.scale,J=$.CX,Z=$.CY,re=$.lastX,H=$.lastY,W=$.lastCX,we=$.lastCY,se=$.lastScale,ge=$.touchTime,Fe=$.touchLength,le=$.pause,De=$.reach,Je=Rt({onScale:function(w){return _e(Cn(w))},onRotate:function(w){V!==w&&(O({rotate:w}),G(xe({rotate:w},Qn(Se,ae,w))))}});function _e(w,z,ee){U!==w&&(O({scale:w}),G(xe({scale:w},Jn(F,D,Te,p,U,w,z,ee),w<=1&&{x:0,y:0})))}var T=jn(function(w,z,ee){if(ee===void 0&&(ee=0),(R||B)&&C){var _t=lr(V,Te,p),rt=_t[0],He=_t[1];if(ee===0&&Pe.current===0){var je=Math.abs(w-J)<=20,Re=Math.abs(z-Z)<=20;if(je&&Re)return void G({lastCX:w,lastCY:z});Pe.current=je?z>Z?3:2:1}var kt=w-W,It=z-we,We=void 0;if(ee===0){var Mt=wt(kt+re,U,rt,innerWidth)[0],Ut=wt(It+H,U,He,innerHeight);We=function(gt,it,ot,tt){return it&&gt===1||tt==="x"?"x":ot&&gt>1||tt==="y"?"y":void 0}(Pe.current,Mt,Ut[0],De),We!==void 0&&v(We,w,z,U)}if(We==="x"||B)return void G({reach:"x"});var at=Cn(U+(ee-Fe)/100/2*U,Se/Te,.2);O({scale:at}),G(xe({touchLength:ee,reach:We,scale:at},Jn(F,D,Te,p,U,at,w,z,kt,It)))}},{maxWait:8});function de(w){return!N&&!R&&(Ce.current&&G(xe({},w,{pause:u})),Ce.current)}var ve,fe,Le,Qe,Tt,mt,Lt,ke,mn=(Tt=function(w){return de({x:w})},mt=function(w){return de({y:w})},Lt=function(w){return Ce.current&&(O({scale:w}),G({scale:w})),!R&&Ce.current},ke=Rt({X:function(w){return Tt(w)},Y:function(w){return mt(w)},S:function(w){return Lt(w)}}),function(w,z,ee,_t,rt,He,je,Re,kt,It,We){var Mt=lr(It,rt,He),Ut=Mt[0],at=Mt[1],gt=wt(w,Re,Ut,innerWidth),it=gt[0],ot=gt[1],tt=wt(z,Re,at,innerHeight),Vt=tt[0],vn=tt[1],$t=Date.now()-We;if($t>=200||Re!=je||Math.abs(kt-je)>1){var vt=Jn(w,z,rt,He,je,Re),st=vt.x,At=vt.y,ze=it?ot:st!==w?st:null,Ht=Vt?vn:At!==z?At:null;return ze!==null&&Nt(w,ze,ke.X),Ht!==null&&Nt(z,Ht,ke.Y),void(Re!=je&&Nt(je,Re,ke.S))}var Pt=(w-ee)/$t,yt=(z-_t)/$t,xt=Math.sqrt(Math.pow(Pt,2)+Math.pow(yt,2)),lt=!1,ct=!1;(function(Ge,Ie){var Me=Ge,dt=0,Xe=void 0,Be=0,Wt=function(tn){Xe||(Xe=tn);var nn=tn-Xe,kr=Math.sign(Ge),Ir=-.001*kr,Mr=Math.sign(-Me)*Math.pow(Me,2)*2e-4,_i=Me*nn+(Ir+Mr)*Math.pow(nn,2)/2;dt+=_i,Xe=tn,kr*(Me+=(Ir+Mr)*nn)<=0?Ue():Ie(dt)?nt():Ue()};function nt(){Be=requestAnimationFrame(Wt)}function Ue(){cancelAnimationFrame(Be)}nt()})(xt,function(Ge){var Ie=w+Ge*(Pt/xt),Me=z+Ge*(yt/xt),dt=wt(Ie,je,Ut,innerWidth),Xe=dt[0],Be=dt[1],Wt=wt(Me,je,at,innerHeight),nt=Wt[0],Ue=Wt[1];if(Xe&&!lt&&(lt=!0,it?Nt(Ie,Be,ke.X):aa(Be,Ie+(Ie-Be),ke.X)),nt&&!ct&&(ct=!0,Vt?Nt(Me,Ue,ke.Y):aa(Ue,Me+(Me-Ue),ke.Y)),lt&&ct)return!1;var tn=lt||ke.X(Be),nn=ct||ke.Y(Ue);return tn&&nn})}),zt=(ve=P,fe=function(w,z){De||_e(U!==1?1:Math.max(2,Se/Te),w,z)},Le=g.useRef(0),Qe=jn(function(){Le.current=0,ve.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var w=[].slice.call(arguments);Le.current+=1,Qe.apply(void 0,w),Le.current>=2&&(Qe.cancel(),Le.current=0,fe.apply(void 0,w))});function Bt(w,z){if(Pe.current=0,(R||B)&&C){G({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var ee=Cn(U,Se/Te);if(mn(F,D,re,H,Te,p,U,ee,se,V,ge),I(w,z),J===w&&Z===z){if(R)return void zt(w,z);B&&S(w,z)}}}function en(w,z,ee){ee===void 0&&(ee=0),G({touched:!0,CX:w,CY:z,lastCX:w,lastCY:z,lastX:F,lastY:D,lastScale:U,touchLength:ee,touchTime:Date.now()})}function gn(w){G({maskTouched:!0,CX:w.clientX,CY:w.clientY,lastX:F,lastY:D})}Xt(ut?void 0:"mousemove",function(w){w.preventDefault(),T(w.clientX,w.clientY)}),Xt(ut?void 0:"mouseup",function(w){Bt(w.clientX,w.clientY)}),Xt(ut?"touchmove":void 0,function(w){w.preventDefault();var z=ra(w);T.apply(void 0,z)},{passive:!1}),Xt(ut?"touchend":void 0,function(w){var z=w.changedTouches[0];Bt(z.clientX,z.clientY)},{passive:!1}),Xt("resize",jn(function(){M&&!R&&(G(Qn(Se,ae,V)),_())},{maxWait:8})),sr(function(){C&&O(xe({scale:U,rotate:V},Je))},[C]);var et=function(w,z,ee,_t,rt,He,je,Re,kt,It){var We=function(st,At,ze,Ht,Pt){var yt=g.useRef(!1),xt=An({lead:!0,scale:ze}),lt=xt[0],ct=lt.lead,Ge=lt.scale,Ie=xt[1],Me=jn(function(dt){try{return Pt(!0),Ie({lead:!1,scale:dt}),Promise.resolve()}catch(Xe){return Promise.reject(Xe)}},{wait:Ht});return sr(function(){yt.current?(Pt(!1),Ie({lead:!0}),Me(ze)):yt.current=!0},[ze]),ct?[st*Ge,At*Ge,ze/Ge]:[st*ze,At*ze,1]}(He,je,Re,kt,It),Mt=We[0],Ut=We[1],at=We[2],gt=function(st,At,ze,Ht,Pt){var yt=g.useState(rc),xt=yt[0],lt=yt[1],ct=g.useState(0),Ge=ct[0],Ie=ct[1],Me=g.useRef(),dt=Rt({OK:function(){return st&&Ie(4)}});function Xe(Be){Pt(!1),Ie(Be)}return g.useEffect(function(){if(Me.current||(Me.current=Date.now()),ze){if(function(Be,Wt){var nt=Be&&Be.current;if(nt&&nt.nodeType===1){var Ue=nt.getBoundingClientRect();Wt({T:Ue.top,L:Ue.left,W:Ue.width,H:Ue.height,FIT:nt.tagName==="IMG"?getComputedStyle(nt).objectFit:void 0})}}(At,lt),st)return Date.now()-Me.current<250?(Ie(1),requestAnimationFrame(function(){Ie(2),requestAnimationFrame(function(){return Xe(3)})}),void setTimeout(dt.OK,Ht)):void Ie(4);Xe(5)}},[st,ze]),[Ge,xt]}(w,z,ee,kt,It),it=gt[0],ot=gt[1],tt=ot.W,Vt=ot.FIT,vn=innerWidth/2,$t=innerHeight/2,vt=it<3||it>4;return[vt?tt?ot.L:vn:_t+(vn-He*Re/2),vt?tt?ot.T:$t:rt+($t-je*Re/2),Mt,vt&&Vt?Mt*(ot.H/tt):Ut,it===0?at:vt?tt/(He*Re)||.01:at,vt?Vt?1:0:1,it,Vt]}(u,s,M,F,D,Te,p,U,c,function(w){return G({pause:w})}),X=et[4],ie=et[6],ye="transform "+c+"ms "+m,pe={className:E,onMouseDown:ut?void 0:function(w){w.stopPropagation(),w.button===0&&en(w.clientX,w.clientY,0)},onTouchStart:ut?function(w){w.stopPropagation(),en.apply(void 0,ra(w))}:void 0,onWheel:function(w){if(!De){var z=Cn(U-w.deltaY/100/2,Se/Te);G({stopRaf:!0}),_e(z,w.clientX,w.clientY)}},style:{width:et[2],height:et[3],opacity:et[5],objectFit:ie===4?void 0:et[7],transform:V?"rotate("+V+"deg)":void 0,transition:ie>2?ye+", opacity "+c+"ms ease, height "+(ie<4?c/2:ie>4?c:0)+"ms "+m:void 0}};return q.createElement("div",{className:"PhotoView__PhotoWrap"+(j?" "+j:""),style:x,onMouseDown:!ut&&C?gn:void 0,onTouchStart:ut&&C?function(w){return gn(w.touches[0])}:void 0},q.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+X+", 0, 0, "+X+", "+et[0]+", "+et[1]+")",transition:R||le?void 0:ye,willChange:C?"transform":void 0}},n?q.createElement(sc,xe({src:n,loaded:M,broken:A},pe,{onPhotoLoad:function(w){G(xe({},w,w.loaded&&Qn(w.naturalWidth||0,w.naturalHeight||0,V)))},loadingElement:h,brokenElement:y})):a&&a({attrs:pe,scale:X,rotate:V})))}var ia={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function dc(e){var t=e.loop,n=t===void 0?3:t,a=e.speed,i=e.easing,o=e.photoClosable,d=e.maskClosable,l=d===void 0||d,s=e.maskOpacity,u=s===void 0?1:s,c=e.pullClosable,m=c===void 0||c,j=e.bannerVisible,E=j===void 0||j,x=e.overlayRender,h=e.toolbarRender,y=e.className,P=e.maskClassName,S=e.photoClassName,v=e.photoWrapClassName,I=e.loadingElement,_=e.brokenElement,C=e.images,O=e.index,k=O===void 0?0:O,$=e.onIndexChange,G=e.visible,Pe=e.onClose,Ce=e.afterClose,Ke=e.portalContainer,Se=An(ia),Q=Se[0],ae=Se[1],Ze=g.useState(0),Te=Ze[0],pt=Ze[1],p=Q.x,f=Q.touched,M=Q.pause,A=Q.lastCX,F=Q.lastCY,D=Q.bg,R=D===void 0?u:D,N=Q.lastBg,B=Q.overlay,V=Q.minimal,U=Q.scale,J=Q.rotate,Z=Q.onScale,re=Q.onRotate,H=e.hasOwnProperty("index"),W=H?k:Te,we=H?$:pt,se=g.useRef(W),ge=C.length,Fe=C[W],le=typeof n=="boolean"?n:ge>n,De=function(X,ie){var ye=g.useReducer(function(ee){return!ee},!1)[1],pe=g.useRef(0),w=function(ee,_t){var rt=g.useRef(ee);function He(je){rt.current=je}return g.useMemo(function(){(function(je){X?(je(X),pe.current=1):pe.current=2})(He)},[ee]),[rt.current,He]}(X),z=w[1];return[w[0],pe.current,function(){ye(),pe.current===2&&(z(!1),ie&&ie()),pe.current=0}]}(G,Ce),Je=De[0],_e=De[1],T=De[2];sr(function(){if(Je)return ae({pause:!0,x:W*-(innerWidth+20)}),void(se.current=W);ae(ia)},[Je]);var de=Rt({close:function(X){re&&re(0),ae({overlay:!0,lastBg:R}),Pe(X)},changeIndex:function(X,ie){ie===void 0&&(ie=!1);var ye=le?se.current+(X-W):X,pe=ge-1,w=or(ye,0,pe),z=le?ye:w,ee=innerWidth+20;ae({touched:!1,lastCX:void 0,lastCY:void 0,x:-ee*z,pause:ie}),se.current=z,we&&we(le?X<0?pe:X>pe?0:X:w)}}),ve=de.close,fe=de.changeIndex;function Le(X){return X?ve():ae({overlay:!B})}function Qe(){ae({x:-(innerWidth+20)*W,lastCX:void 0,lastCY:void 0,pause:!0}),se.current=W}function Tt(X,ie,ye,pe){X==="x"?function(w){if(A!==void 0){var z=w-A,ee=z;!le&&(W===0&&z>0||W===ge-1&&z<0)&&(ee=z/2),ae({touched:!0,lastCX:A,x:-(innerWidth+20)*se.current+ee,pause:!1})}else ae({touched:!0,lastCX:w,x:p,pause:!1})}(ie):X==="y"&&function(w,z){if(F!==void 0){var ee=u===null?null:or(u,.01,u-Math.abs(w-F)/100/4);ae({touched:!0,lastCY:F,bg:z===1?ee:u,minimal:z===1})}else ae({touched:!0,lastCY:w,bg:R,minimal:!0})}(ye,pe)}function mt(X,ie){var ye=X-(A??X),pe=ie-(F??ie),w=!1;if(ye<-40)fe(W+1);else if(ye>40)fe(W-1);else{var z=-(innerWidth+20)*se.current;Math.abs(pe)>100&&V&&m&&(w=!0,ve()),ae({touched:!1,x:z,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!w||B})}}Xt("keydown",function(X){if(G)switch(X.key){case"ArrowLeft":fe(W-1,!0);break;case"ArrowRight":fe(W+1,!0);break;case"Escape":ve()}});var Lt=function(X,ie,ye){return g.useMemo(function(){var pe=X.length;return ye?X.concat(X).concat(X).slice(pe+ie-1,pe+ie+2):X.slice(Math.max(ie-1,0),Math.min(ie+2,pe+1))},[X,ie,ye])}(C,W,le);if(!Je)return null;var ke=B&&!_e,mn=G?R:N,zt=Z&&re&&{images:C,index:W,visible:G,onClose:ve,onIndexChange:fe,overlayVisible:ke,overlay:Fe&&Fe.overlay,scale:U,rotate:J,onScale:Z,onRotate:re},Bt=a?a(_e):400,en=i?i(_e):"cubic-bezier(0.25, 0.8, 0.25, 1)",gn=a?a(3):600,et=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return q.createElement(Zl,{className:"PhotoView-Portal"+(ke?"":" PhotoView-Slider__clean")+(G?"":" PhotoView-Slider__willClose")+(y?" "+y:""),role:"dialog",onClick:function(X){return X.stopPropagation()},container:Ke},G&&q.createElement(tc,null),q.createElement("div",{className:"PhotoView-Slider__Backdrop"+(P?" "+P:"")+(_e===1?" PhotoView-Slider__fadeIn":_e===2?" PhotoView-Slider__fadeOut":""),style:{background:mn?"rgba(0, 0, 0, "+mn+")":void 0,transitionTimingFunction:en,transitionDuration:(f?0:Bt)+"ms",animationDuration:Bt+"ms"},onAnimationEnd:T}),E&&q.createElement("div",{className:"PhotoView-Slider__BannerWrap"},q.createElement("div",{className:"PhotoView-Slider__Counter"},W+1," / ",ge),q.createElement("div",{className:"PhotoView-Slider__BannerRight"},h&&zt&&h(zt),q.createElement(Jl,{className:"PhotoView-Slider__toolbarIcon",onClick:ve}))),Lt.map(function(X,ie){var ye=le||W!==0?se.current-1+ie:W+ie;return q.createElement(cc,{key:le?X.key+"/"+X.src+"/"+ye:X.key,item:X,speed:Bt,easing:en,visible:G,onReachMove:Tt,onReachUp:mt,onPhotoTap:function(){return Le(o)},onMaskTap:function(){return Le(l)},wrapClassName:v,className:S,style:{left:(innerWidth+20)*ye+"px",transform:"translate3d("+p+"px, 0px, 0)",transition:f||M?void 0:"transform "+gn+"ms "+et},loadingElement:I,brokenElement:_,onPhotoResize:Qe,isActive:se.current===ye,expose:ae})}),!ut&&E&&q.createElement(q.Fragment,null,(le||W!==0)&&q.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return fe(W-1,!0)}},q.createElement(Ql,null)),(le||W+1<ge)&&q.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return fe(W+1,!0)}},q.createElement(ec,null))),x&&zt&&q.createElement("div",{className:"PhotoView-Slider__Overlay"},x(zt)))}var uc=["children","onIndexChange","onVisibleChange"],fc={images:[],visible:!1,index:0};function hc(e){var t=e.children,n=e.onIndexChange,a=e.onVisibleChange,i=Gn(e,uc),o=An(fc),d=o[0],l=o[1],s=g.useRef(0),u=d.images,c=d.visible,m=d.index,j=Rt({nextId:function(){return s.current+=1},update:function(h){var y=u.findIndex(function(S){return S.key===h.key});if(y>-1){var P=u.slice();return P.splice(y,1,h),void l({images:P})}l(function(S){return{images:S.images.concat(h)}})},remove:function(h){l(function(y){var P=y.images.filter(function(S){return S.key!==h});return{images:P,index:Math.min(P.length-1,m)}})},show:function(h){var y=u.findIndex(function(P){return P.key===h});l({visible:!0,index:y}),a&&a(!0,y,d)}}),E=Rt({close:function(){l({visible:!1}),a&&a(!1,m,d)},changeIndex:function(h){l({index:h}),n&&n(h,d)}}),x=g.useMemo(function(){return xe({},d,j)},[d,j]);return q.createElement(bi.Provider,{value:x},t,q.createElement(dc,xe({images:u,visible:c,index:m,onIndexChange:E.changeIndex,onClose:E.close},i)))}var pc=function(e){var t,n,a=e.src,i=e.render,o=e.overlay,d=e.width,l=e.height,s=e.triggers,u=s===void 0?["onClick"]:s,c=e.children,m=g.useContext(bi),j=(t=function(){return m.nextId()},(n=g.useRef({sign:!1,fn:void 0}).current).sign||(n.sign=!0,n.fn=t()),n.fn),E=g.useRef(null);g.useImperativeHandle(c==null?void 0:c.ref,function(){return E.current}),g.useEffect(function(){return function(){m.remove(j)}},[]);var x=Rt({render:function(y){return i&&i(y)},show:function(y,P){m.show(j),function(S,v){if(c){var I=c.props[S];I&&I(v)}}(y,P)}}),h=g.useMemo(function(){var y={};return u.forEach(function(P){y[P]=x.show.bind(null,P)}),y},[]);return g.useEffect(function(){m.update({key:j,src:a,originRef:E,render:x.render,overlay:o,width:d,height:l})},[a]),c?g.Children.only(g.cloneElement(c,xe({},h,{ref:E}))):null};const mc=({url:e,text:t})=>{const[n,a]=g.useState(!1);return r.jsx(ao,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:t})},gc={replace:e=>{var a,i;const t=e.name==="a"&&((i=(a=e.children)==null?void 0:a[0])==null?void 0:i.name)==="img",n=e.name==="img";if(t||n){const o=t?e.children[0]:e,{src:d,alt:l}=o.attribs;return r.jsx(pc,{src:d,children:r.jsx("img",{src:d,alt:l})})}}},vc=g.forwardRef((e,t)=>{const n=fn(),a=b(s=>s.activeContent),i=b(s=>s.fontSize);if(!a)return r.jsxs("div",{ref:t,className:"content-empty",style:{display:"flex",flexDirection:"column",backgroundColor:"var(--color-fill-1)",color:"var(--color-text-3)",alignItems:"center",justifyContent:"center",flex:"1",padding:"40px 16px"},children:[r.jsx(ro,{style:{fontSize:"64px"}}),r.jsx(L.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const o=Yl(a.content,gc),d=a.feed.category.id,l=a.feed.category.title;return r.jsxs("div",{ref:t,className:"article-content",style:{padding:"40px 5%",flex:"1",overflowY:"auto",overflowX:"hidden"},children:[r.jsxs("div",{className:"article-title",style:{maxWidth:"600px",margin:"0 auto"},children:[r.jsx(L.Title,{heading:3,style:{margin:0},children:r.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.title})}),r.jsx(L.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:r.jsx(mc,{url:`/feed/${a.feed.id}`,text:a.feed.title})}),r.jsx(L.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:` - ${a.author}`}),r.jsx(L.Text,{children:r.jsx(un,{size:"small",onClick:()=>{n(`/group/${d}`)},style:{marginLeft:"10px",cursor:"pointer"},children:l})}),r.jsx("br",{}),r.jsx(L.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:qt(a.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),r.jsx($e,{})]}),r.jsx("div",{className:"article-body",style:{fontSize:`${i}rem`,maxWidth:"600px",margin:"0 auto",overflowWrap:"break-word"},children:r.jsx(hc,{maskOpacity:.7,children:o})},a.id)]})});var Ci={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var o="",d=0;d<arguments.length;d++){var l=arguments[d];l&&(o=i(o,a(l)))}return o}function a(o){if(typeof o=="string"||typeof o=="number")return o;if(typeof o!="object")return"";if(Array.isArray(o))return n.apply(null,o);if(o.toString!==Object.prototype.toString&&!o.toString.toString().includes("[native code]"))return o.toString();var d="";for(var l in o)t.call(o,l)&&o[l]&&(d=i(d,l));return d}function i(o,d){return d?o?o+" "+d:o+d:o}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Ci);var yc=Ci.exports;const ji=Pn(yc),Ei=({src:e,alt:t,width:n,height:a,status:i,borderRadius:o})=>{const[d,l]=g.useState(!1),s=g.useRef(null);return g.useEffect(()=>{const u=new IntersectionObserver(m=>{for(const j of m)if(j.isIntersecting){const E=new Image;E.onload=()=>l(!0),E.onerror=()=>{s.current&&(u.unobserve(s.current),s.current.parentElement.style.display="none")},E.src=e,s.current&&u.unobserve(s.current)}}),c=s.current;return c&&u.observe(c),()=>u.disconnect()},[e]),r.jsxs("div",{className:"image-container",ref:s,children:[!d&&r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:r.jsx(_n,{text:{rows:0},image:{style:{width:n,height:a,margin:"0",borderRadius:o}},animation:!0})}),d&&r.jsx("img",{className:i!=="unread"?"read":"",src:e,alt:t,style:{width:n,height:a,objectFit:"cover",borderRadius:o}})]})},xc=({url:e})=>r.jsx("img",{className:"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),bc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{children:[r.jsx(L.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(L.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(xc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),dr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),wc=({entry:e,handleEntryClick:t})=>{const n=b(l=>l.activeContent),a=b(l=>l.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e),d=e.imgSrc?r.jsx("div",{className:"cover-image",children:r.jsx(Ei,{width:"100%",height:"160px",alt:e.id,src:e.imgSrc,status:e.status})}):null;return r.jsx("div",{className:"article-card",children:r.jsx(Dt,{className:ji("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,cover:d,children:r.jsx(Dt.Meta,{description:r.jsx(bc,{entry:e,showFeedIcon:a})})})},e.id)},Cc=({url:e})=>r.jsx("img",{className:"feed-icon-mini",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),jc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{style:{display:"flex",paddingLeft:t?"22px":"0"},children:[r.jsxs("div",{style:{marginRight:"10px",flex:1},children:[r.jsx(L.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(L.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(Cc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),dr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),e.imgSrc&&r.jsx("div",{className:"thumbnail",children:r.jsx(Ei,{width:"100px",height:"100px",alt:e.id,src:e.imgSrc,status:e.status,borderRadius:"4px"})})]}),Ec=({entry:e,handleEntryClick:t})=>{const n=b(d=>d.activeContent),a=b(d=>d.showFeedIcon),i=n&&e.id===n.id,o=()=>t(e);return r.jsx("div",{className:"article-card",children:r.jsx(Dt,{className:ji("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:o,children:r.jsx(Dt.Meta,{description:r.jsx(jc,{entry:e,showFeedIcon:a})})})},e.id)},Sc=({loading:e})=>{const t=b(i=>i.layout),n=t==="large"?2:4,a=i=>r.jsx(Dt,{style:{width:"100%",marginBottom:"10px"},cover:t==="large"&&r.jsx("div",{style:{width:"100%",aspectRatio:16/9}}),children:r.jsx(Dt.Meta,{description:r.jsx(_n,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,o)=>a(o)):null},Si=()=>{const{entries:e,filterStatus:t,filterString:n,filterType:a,setFilteredEntries:i,setFilterStatus:o,setFilterString:d,setFilterType:l}=g.useContext(ht);return g.useEffect(()=>{i([]);const s=Fa(e,a,t,n);i(s)},[t,n,a]),{setFilterStatus:o,setFilterString:d,setFilterType:l}},Tc=()=>{const{filterString:e,filterType:t}=g.useContext(ht),n=b(d=>d.activeContent),a=b(d=>d.setActiveContent),{setFilterString:i,setFilterType:o}=Si();return r.jsx(qe.Search,{allowClear:!0,placeholder:"Search...",value:e,addBefore:r.jsxs(he,{placeholder:"Select type",onChange:o,style:{width:100},value:t,children:[r.jsx(he.Option,{value:"0",children:"Title"}),r.jsx(he.Option,{value:"1",children:"Content"})]}),onFocus:()=>n&&a(null),onChange:i,style:{marginBottom:"10px",width:"100%"}})},_c=g.forwardRef(({info:e,loading:t,getEntries:n,handleEntryClick:a,cardsRef:i},o)=>{const{filteredEntries:d,filterStatus:l,loadMoreUnreadVisible:s,loadMoreVisible:u}=g.useContext(ht),{loadingMore:c,handleLoadMore:m}=pr(),j=b(E=>E.layout);return r.jsxs("div",{className:"entry-list",ref:o,style:{overflowY:"auto",padding:"10px 10px 0 10px",width:"302px",backgroundColor:"var(--color-fill-1)",flex:"1"},children:[r.jsx(Tc,{}),r.jsx(Sc,{loading:t}),t?null:r.jsx("div",{ref:i,children:d.map(E=>{La(E.feed.site_url)||(E.feed.site_url=za(E.feed.feed_url));const x=j==="small"?Ec:wc;return r.jsx(x,{entry:E,handleEntryClick:a},E.id)})}),!t&&(l==="all"?u:s)&&r.jsxs(ue,{onClick:()=>m(e,n),loading:c,long:!0,style:{margin:"10px auto",display:"block"},children:[!c&&r.jsx(io,{}),"Load more"]})]})}),kc=g.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},a)=>{const{entries:i,filteredEntries:o,filterStatus:d,loading:l,setEntries:s,setFilteredEntries:u,setUnreadCount:c,setUnreadEntries:m,unreadEntries:j}=g.useContext(ht),{setFilterStatus:E}=Si(),x=b(S=>S.initData),h=b(S=>S.showStatus),y=async()=>{n().then(()=>{te.success("Marked all as read successfully"),x(),s(i.map(S=>({...S,status:"read"}))),m([]),u(d==="all"?o.map(S=>({...S,status:"read"})):[]),c(0)}).catch(()=>{te.error("Failed to mark all as read")})};g.useEffect(()=>{u(d==="all"?i:j)},[d]),g.useEffect(()=>{e.from!=="history"&&E(h)},[h]);const P=S=>{a.current&&a.current.scrollTo(0,0),E(S)};return r.jsxs("div",{className:"entry-panel",style:{backgroundColor:"var(--color-bg-2)",bottom:"0",display:"flex",flexDirection:"row",padding:"8px 10px",zIndex:"2",justifyContent:"space-between",borderTop:"1px solid var(--color-border-2)"},children:[e.from!=="starred"&&e.from!=="history"&&r.jsx(ha,{focusLock:!0,title:"Mark All As Read?",onOk:y,children:r.jsx(ue,{icon:r.jsx(la,{}),shape:"circle"})}),r.jsxs(on.Group,{disabled:e.from==="history",name:"lang",onChange:S=>P(S),type:"button",value:e.from==="history"?"all":d,children:[r.jsx(on,{value:"all",children:"ALL"}),r.jsx(on,{value:"unread",children:"UNREAD"})]}),r.jsx(ue,{icon:r.jsx(fa,{}),loading:l,shape:"circle",onClick:t})]})}),Qt=({info:e,getEntries:t,markAllAsRead:n})=>{const a=b(T=>T.activeContent),i=b(T=>T.setActiveContent),o=b(T=>T.setReadCount),d=b(T=>T.setStarredCount),l=b(T=>T.setUnreadToday),s=b(T=>T.setUnreadTotal),u=b(T=>T.updateFeedUnreadCount),c=b(T=>T.updateGroupUnreadCount),m=b(T=>T.showAllFeeds),j=b(T=>T.hiddenFeedIds),E=b(T=>T.orderBy),x=b(T=>T.orderDirection),h=b(T=>T.initData),y=b(T=>T.isInitCompleted),{entries:P,filteredEntries:S,filterStatus:v,loading:I,setEntries:_,setFilteredEntries:C,setLoading:O,setLoadMoreUnreadVisible:k,setLoadMoreVisible:$,setOffset:G,setTotal:Pe,setUnreadCount:Ce,setUnreadEntries:Ke,setUnreadOffset:Se,total:Q,unreadCount:ae,unreadEntries:Ze}=g.useContext(ht),{handleFetchContent:Te,handleToggleStarred:pt,handleToggleStatus:p,handleEntryStatusUpdate:f}=hr(),{getFirstImage:M}=pr(),[A,F]=g.useState(!1),[D,R]=g.useState(!1),[N,B]=g.useState(!1),V=g.useRef(null),U=g.useRef(null),J=g.useRef(null);g.useEffect(()=>{F(a!==null)},[a]),g.useEffect(()=>{!N||e.from==="history"||setTimeout(()=>{_e()},200)},[E]),g.useEffect(()=>{N&&setTimeout(()=>{_e()},200)},[x]),g.useEffect(()=>{["all","today"].includes(e.from)?C(()=>m?v==="all"?P:Ze:P.filter(T=>!j.includes(T.feed.id))):C(()=>v==="all"?P:Ze),R(!0)},[v,j,m]),g.useEffect(()=>{if(!(ae===0||Q===0))switch(e.from){case"all":m&&s(()=>ae);break;case"today":l(()=>ae);break;case"starred":d(()=>Q);break;case"history":o(()=>Q);break;case"feed":{const T=Number.parseInt(e.id);u(T,ae);break}case"group":{const T=Number.parseInt(e.id);c(T,ae);break}}},[Q,ae]);const Z=async T=>{F(!1),setTimeout(()=>{i({...T,status:"read"})},200),T.status==="unread"&&(setTimeout(()=>{f(T,"read")},200),Ia(T.id,"read").catch(()=>{te.error("Failed to mark entry as read, please try again later"),f(T,"unread")})),U.current&&(U.current.setAttribute("tabIndex","-1"),U.current.focus(),U.current.scrollTo(0,0))},{handleBKey:re,handleDKey:H,handleEscapeKey:W,handleLeftKey:we,handleMKey:se,handleRightKey:ge,handleSKey:Fe}=mr(e,Z,t);g.useEffect(()=>{const T={27:()=>W(V),37:()=>we(),39:()=>ge(e),66:()=>re(),68:()=>H(Te),77:()=>se(p),83:()=>Fe(pt)},de=ve=>{const fe=T[ve.keyCode];fe&&fe()};return A?document.addEventListener("keydown",de):document.removeEventListener("keydown",de),()=>{document.removeEventListener("keydown",de)}},[a,S,A]);const le=(T,de,ve,fe)=>{_(T),Ke(de),C(tr(v==="all"?T:de,e,m,j)),Pe(ve.data.total),$(T.length<ve.data.total),Ce(fe.data.total),k(de.length<fe.data.total)},De=(T,de)=>{var ve,fe;if((ve=T==null?void 0:T.data)!=null&&ve.entries&&((fe=de==null?void 0:de.data)==null?void 0:fe.total)>=0){const Le=T.data.entries.map(M),Qe=de.data.entries.map(M);le(Le,Qe,T,de)}},Je=async()=>{O(!0);try{const T=await t();if(e.from==="history")De(T,T);else{const de=await t(0,"unread");De(T,de)}}catch(T){console.error("Error fetching articles:",T)}finally{O(!1)}},_e=async()=>{if(V.current&&V.current.scrollTo(0,0),G(0),Se(0),!y){h();return}await Je()};return g.useEffect(()=>{a&&i(null)},[]),g.useEffect(()=>{y&&Je().then(()=>B(!0))},[y]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid var(--color-border-2)"},className:"entry-col",children:[r.jsx(Pr,{in:!I,timeout:200,nodeRef:J,classNames:"fade",children:r.jsx(_c,{info:e,cardsRef:J,loading:I,getEntries:t,handleEntryClick:Z,ref:V})}),r.jsx(kc,{info:e,refreshArticleList:_e,markAllAsRead:n,ref:V})]}),r.jsx(Pr,{in:A,timeout:200,nodeRef:U,classNames:"fade",unmountOnExit:!0,children:r.jsx(vc,{ref:U})}),r.jsx(Vs,{info:e,handleEntryClick:Z,getEntries:t,isFilteredEntriesUpdated:D,setIsFilteredEntriesUpdated:R}),r.jsx($s,{info:e,handleEntryClick:Z,getEntries:t,isFilteredEntriesUpdated:D,setIsFilteredEntriesUpdated:R})]})},Ic=()=>{const e=async()=>{const t=await Zo();return oe.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"all",id:""},getEntries:ls,markAllAsRead:e})})},Mc=()=>{const e=fn(),t=oo();return console.error(t),r.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:r.jsx("div",{children:r.jsx(so,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[r.jsx(ue,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},Ac=()=>{const{id:e}=ba(),t=b(d=>d.orderBy),n=b(d=>d.orderDirection),a=b(d=>d.pageSize),i=async(d=0,l=null)=>{const s={baseUrl:`/v1/feeds/${e}/entries`,orderField:t,direction:n,offset:d,limit:a,status:l},u=Zt(s);return oe.get(u)},o=async()=>oe.put(`/v1/feeds/${id}/mark-all-as-read`);return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"feed",id:e},getEntries:i,markAllAsRead:o})})},Pc=()=>{const{id:e}=ba(),t=b(d=>d.orderBy),n=b(d=>d.orderDirection),a=b(d=>d.pageSize),i=async(d=0,l=null)=>{const s={baseUrl:`/v1/categories/${e}/entries`,orderField:t,direction:n,offset:d,limit:a,status:l},u=Zt(s);return oe.get(u)},o=async()=>oe.put(`/v1/categories/${e}/mark-all-as-read`);return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"group",id:e},getEntries:i,markAllAsRead:o})})},Fc=()=>r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"history",id:""},getEntries:Ma})}),Nc=e=>{var a;const t=e.getFieldsValue();let n=!0;for(const i of Object.keys(t))if(i!=="password"){const o=(a=t[i])==null?void 0:a.trim();e.setFieldValue(i,o),o||(n=!1)}else t[i]||(n=!1);return n},En=(e,t)=>{e.key==="Enter"&&t.submit()},Oc=()=>{const[e]=lo(),[t,n]=g.useState(!1),[a,i]=g.useState(kn()||"token"),o=fn();g.useEffect(()=>{kn()&&o("/")},[o]);const d=async()=>{n(!0);try{(await oa({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(te.success("Success"),qo(a,e.getFieldsValue()),o("/"))}catch(s){console.error(s),te.error(s.message)}n(!1)},l=()=>{d()};return r.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:r.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[r.jsx(pa,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),r.jsx(L.Title,{heading:3,children:"Connect to your server"}),r.jsxs(Dt,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[r.jsxs(be,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Nc(e)?l():te.error("Please fill in all required fields")},children:[r.jsx(be.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:s=>{En(s,e)},children:r.jsx(qe,{disabled:t,placeholder:"Please input server address",prefix:r.jsx(co,{})})}),a==="token"&&r.jsx(be.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:s=>{En(s,e)},children:r.jsx(qe,{disabled:t,placeholder:"Please input api token",prefix:r.jsx(Fr,{})})}),a==="user"&&r.jsxs(r.Fragment,{children:[r.jsx(be.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:s=>{En(s,e)},children:r.jsx(qe,{disabled:t,prefix:r.jsx(da,{}),placeholder:"Please input username"})}),r.jsx(be.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:s=>{En(s,e)},children:r.jsx(qe.Password,{disabled:t,prefix:r.jsx(Fr,{}),placeholder:"Please input password"})})]})]}),r.jsx(ue,{loading:t,type:"primary",long:!0,onClick:l,style:{marginTop:"20px"},children:"Connect"}),r.jsx($e,{orientation:"center",children:"Or connect with"}),r.jsx(ue,{type:"secondary",long:!0,onClick:()=>i(a==="token"?"user":"token"),style:{marginTop:"20px"},children:a==="token"?"Username and password":"API Token"})]}),r.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[r.jsx(L.Text,{disabled:!0,children:"Need more information?"}),r.jsx(uo,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Rc=({children:e})=>kn()?r.jsx(r.Fragment,{children:e}):r.jsx(wa,{to:"/login"}),Dc=()=>r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"starred",id:""},getEntries:Aa})}),Lc=()=>{const e=async()=>{const t=await Sn(0,"unread"),n=t.data.entries.map(a=>a.id);if(t.data.total>n.length){const a=t.data.total-n.length,i=Math.ceil(a/100)*100,o=await Sn(n.length,"unread",i);n.push(...o.data.entries.map(d=>d.id))}return ka(n,"read")};return r.jsx(Jt,{children:r.jsx(Qt,{info:{from:"today",id:""},getEntries:Sn,markAllAsRead:e})})},zc=ce("homePage"),Bc=[{path:"/all",element:r.jsx(Ic,{})},{path:"/today",element:r.jsx(Lc,{})},{path:"/starred",element:r.jsx(Dc,{})},{path:"/history",element:r.jsx(Fc,{})},{path:"/group/:id",element:r.jsx(Pc,{})},{path:"/feed/:id",element:r.jsx(Ac,{})}],Uc=fo([{path:"/",element:r.jsx(Rc,{children:r.jsx(Bs,{})}),errorElement:r.jsx(Mc,{}),children:[...Bc,{index:!0,element:r.jsx(wa,{to:`/${zc}`,replace:!0})}]},{path:"/login",element:r.jsx(Oc,{})}]),Ti=Uc;ho.createRoot(document.getElementById("root")).render(r.jsx(po,{locale:mo,children:r.jsx(go,{router:Ti})}))});export default Vc();

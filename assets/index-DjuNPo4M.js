var Il=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{c as Ml,a as ve,g as Pl,b as Ol,u as ht,d as tr,e as en,j as i,B as Se,I as Rl,S as Tr,T as $n,f as ji,h as Nl,i as Fl,k as Dl,D as ks,M as Ft,l as Ei,m as Ll,n as Vl,A as Ti,o as _i,p as se,q as Ul,r as Bl,s as zl,t as ce,v as Fa,w as yn,x as ki,y as Ai,z as b,C as ne,E as F,F as at,G as tn,H as As,J as xe,K as Hn,L as st,N as Nr,O as Ii,P as ke,Q as $l,R as Mi,U as Pi,V as Hl,W as Wl,X as fn,Y as ql,Z as Xl,_ as Gl,$ as Yl,a0 as Kl,a1 as Ql,a2 as Zl,a3 as Jl,a4 as ec,a5 as Oi,a6 as _r,a7 as tc,a8 as nc,a9 as Da,aa as rc,ab as ac,ac as J,ad as Ri,ae as sc,af as Ni,ag as Fi,ah as La,ai as ic,aj as oc,ak as lc,al as cc,am as uc,an as dc,ao as Wn,ap as fc,aq as hc,ar as mc,as as ra,at as Is,au as Di,av as pc,aw as gc,ax as vc,ay as Ms,az as yc,aA as Li,aB as bc,aC as xc,aD as wc,aE as Sc,aF as Cc}from"./vendor-DOc24mur.js";var tm=Il((am,rr)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))r(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(a){if(a.ep)return;a.ep=!0;const s=n(a);fetch(a.href,s)}})();const Te=Ml(e=>({visible:{settings:!1,addFeed:!1},collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,setActiveContent:t=>{e({activeContent:t})},setIsSysDarkMode:t=>e({isSysDarkMode:t}),setVisible:(t,n)=>{e(r=>({visible:{...r.visible,[t]:n}}))},toggleCollapsed:()=>e(t=>({collapsed:!t.collapsed}))})),Vi=(e,t)=>{const r=ve((()=>{const a=localStorage.getItem(e);return a!==null?JSON.parse(a):t})());return ve(a=>a(r),(a,s,c)=>{const o=typeof c=="function"?c(a(r)):c;s(r,o),localStorage.setItem(e,JSON.stringify(o))})},wn=(e,t)=>{const n=ve({refresh:null,value:null});return ve(r=>{const{refresh:a,value:s}=r(n),c=r(e);return s!==null&&a===c?s:t(r)},(r,a,s)=>{let c;const{refresh:o,value:l}=r(n),u=r(e);typeof s=="function"?c=s(l!==null&&o===u?l:t(r)):c=s,a(n,{refresh:u,value:c})})},kr={articleWidth:90,fontSize:1.05,homePage:"all",layout:"large",markReadOnScroll:!1,orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},mt=e=>{const t=JSON.parse(localStorage.getItem("config"))??{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(kr,e)?kr[e]:null},Ae=Vi("config",kr),Ui=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],ga=e=>{const t=Ui.find(s=>s.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,r=mt("theme"),a=r==="system"?n:r==="dark";return t?a?t.valueDark:t.valueLight:"#165DFF"},Bi=e=>{Pl(ga(e),{list:!0}).map(n=>Ol(n)).forEach((n,r)=>{document.body.style.setProperty(`--primary-${r+1}`,n)})},Va=Vi("auth",{server:"",token:"",username:"",password:""}),Fr=()=>{const e=ht(Ae);return{updateConfig:n=>{e(r=>({...r,...n}))}}},jc=()=>{const e=tr(),t=Te(x=>x.setVisible),n=Te(x=>x.toggleCollapsed),[r,a]=en(Ae),s=ht(Va),{showAllFeeds:c,theme:o}=r,{updateConfig:l}=Fr(),u=()=>{l({showAllFeeds:!c})},d=()=>{l({theme:o==="light"?"dark":"light"})},f=()=>{s({}),a(kr),document.body.removeAttribute("arco-theme"),Bi("Blue"),e("/login"),se.success("Logout successful")},C=(x=>{switch(x){case"dark":return i.jsx(zl,{});case"system":return i.jsx(Bl,{});default:return i.jsx(Ul,{})}})(o);return i.jsxs("div",{className:"header",children:[i.jsx("div",{className:"brand",children:i.jsx(Se,{className:"trigger",onClick:n,shape:"circle",size:"small",children:i.jsx(Rl,{})})}),i.jsx("div",{className:"button-group",children:i.jsxs(Tr,{size:16,children:[i.jsx($n,{content:"Add a feed",mini:!0,children:i.jsx(Se,{shape:"circle",size:"small",type:"primary",icon:i.jsx(ji,{}),onClick:()=>t("addFeed",!0)})}),i.jsx($n,{content:c?"Hide some feeds":"Show all feeds",mini:!0,children:i.jsx(Se,{shape:"circle",size:"small",icon:c?i.jsx(Nl,{}):i.jsx(Fl,{}),onClick:u})}),i.jsx(Se,{shape:"circle",size:"small",icon:i.jsx(Dl,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),i.jsx(ks,{droplist:i.jsx(Ft,{defaultSelectedKeys:[o],className:"theme-menu",children:["light","dark","system"].map(x=>i.jsxs(Ft.Item,{className:"theme-menu-item",onClick:()=>l({theme:x}),children:[x.charAt(0).toUpperCase()+x.slice(1),o===x&&i.jsx(Ei,{style:{marginLeft:8}})]},x))}),trigger:"hover",position:"bottom",children:i.jsx(Se,{icon:C,shape:"circle",size:"small",onClick:d})}),i.jsx(ks,{droplist:i.jsxs(Ft,{children:[i.jsxs(Ft.Item,{onClick:()=>t("settings",!0),children:[i.jsx(Ll,{className:"icon-right"}),"Settings"]},"0"),i.jsxs(Ft.Item,{onClick:f,children:[i.jsx(Vl,{className:"icon-right"}),"Logout"]},"1")]}),trigger:"click",position:"br",children:i.jsx(Ti,{size:28,style:{cursor:"pointer"},children:i.jsx(_i,{})})})]})})]})};var zi={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(ce,function(){return function(n,r,a){n=n||{};var s=r.prototype,c={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function o(u,d,f,m){return s.fromToBase(u,d,f,m)}a.en.relativeTime=c,s.fromToBase=function(u,d,f,m,C){for(var x,g,v,p=f.$locale().relativeTime||c,S=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],w=S.length,_=0;_<w;_+=1){var E=S[_];E.d&&(x=m?a(u).diff(f,E.d,!0):f.diff(u,E.d,!0));var P=(n.rounding||Math.round)(Math.abs(x));if(v=x>0,P<=E.r||!E.r){P<=1&&_>0&&(E=S[_-1]);var k=p[E.l];C&&(P=C(""+P)),g=typeof k=="string"?k.replace("%d",P):k(P,d,E.l,v);break}}if(d)return g;var K=v?p.future:p.past;return typeof K=="function"?K(g):K.replace("%s",g)},s.to=function(u,d){return o(u,d,this,!0)},s.from=function(u,d){return o(u,d,this)};var l=function(u){return u.$u?a.utc():a()};s.toNow=function(u){return this.to(l(this),u)},s.fromNow=function(u){return this.from(l(this),u)}}})})(zi);var Ec=zi.exports;const Tc=Fa(Ec);yn.extend(Tc);const _c=e=>{const t=yn(e),n=yn();return t.isAfter(n.subtract(24,"hour"))},kc=()=>yn().subtract(24,"hour").unix(),$i=e=>yn(e).fromNow(),Ac=()=>JSON.parse(localStorage.getItem("auth"))??{},Ua=e=>{const{server:t,token:n,username:r,password:a}=e;return t&&(n||r&&a)},he=ki.create({timeout:3e3,retry:3,retryDelay:1e3});he.interceptors.request.use(e=>{const t=Ac(),{server:n,token:r,username:a,password:s}=t;return Ua(t)?(e.baseURL=n,r?e.headers["X-Auth-Token"]=r:e.auth={username:a,password:s},e):Promise.reject(new Error("Invalid auth"))},e=>Promise.reject(e));const Ic=async e=>{const{config:t}=e;return e.code!=="ECONNABORTED"||!(t!=null&&t.retry)||(t.__retryCount=t.__retryCount??0,t.__retryCount>=t.retry)?Promise.reject(e):(t.__retryCount+=1,await new Promise(r=>{setTimeout(()=>{r()},t.retryDelay??1e3)}),he(t))},Mc=e=>{var n,r,a;const t=((r=(n=e.response)==null?void 0:n.data)==null?void 0:r.error_message)??e.message;return se.error(t),((a=e.response)==null?void 0:a.status)===401&&(localStorage.removeItem("auth"),kl.navigate("/login")),Promise.reject(e)};he.interceptors.response.use(e=>e,async e=>{try{return await Ic(e)}catch(t){return Mc(t)}});const Ba=async(e,t)=>he.put("/v1/entries",{entry_ids:e,status:t}),Pc=async e=>he.put(`/v1/entries/${e}/bookmark`),Oc=async e=>he.get(`/v1/entries/${e}/fetch-content`),Rc=async()=>he.get("/v1/me"),Nc=async()=>he.get("/v1/feeds/counters"),Fc=async()=>he.get("/v1/feeds"),Dc=async()=>he.get("/v1/categories"),Lc=async e=>he.delete(`/v1/categories/${e}`),Vc=async e=>he.post("/v1/categories",{title:e}),Uc=async(e,t,n=!1)=>{const r={title:t,hide_globally:n?"on":void 0};return he.put(`/v1/categories/${e}`,r)},Bc=async(e,t)=>{const{url:n,title:r,categoryId:a,isFullText:s,hidden:c=!1}=t;return he.put(`/v1/feeds/${e}`,{feed_url:n,title:r,category_id:a,crawler:s,hide_globally:c})},zc=async e=>he.put(`/v1/feeds/${e}/refresh`),$c=async e=>he.delete(`/v1/feeds/${e}`),Hc=async(e,t,n)=>he.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Sn=(e,t={})=>{const{baseUrl:n,orderField:r,offset:a,limit:s,status:c}=e,o=mt("orderDirection"),l=new URLSearchParams({order:r,direction:o,offset:a,limit:s,...t});return c&&l.append("status",c),`${n}?${l.toString()}`},Wc=async(e=0,t=null)=>{const n=mt("orderBy"),r=mt("pageSize"),s=Sn({baseUrl:"/v1/entries",orderField:n,offset:e,limit:r,status:t});return he.get(s)},Hi=async(e=0)=>{const t=mt("pageSize"),r=Sn({baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:t,status:"read"});return he.get(r)},Wi=async(e=0,t=null)=>{const n=mt("pageSize"),s=Sn({baseUrl:"/v1/entries",orderField:"changed_at",offset:e,limit:n,status:t},{starred:"true"});return he.get(s)},Sr=async(e=0,t=null,n=null)=>{const r=mt("orderBy"),a=n??mt("pageSize"),s=kc(),l=Sn({baseUrl:"/v1/entries",orderField:r,offset:e,limit:a,status:t},{published_after:s});return he.get(l)},qi=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},za=ve(!1),Xi=ve(0),Gi=ve({}),$a=wn(Xi,e=>e(Gi).unreads??{}),Yi=ve(0),Ha=ve({}),Ki=wn(Yi,e=>e(Ha).total??0),Qi=ve(0),Wa=ve({}),Zi=wn(Qi,e=>e(Wa).total??0),Ji=ve(0),qa=ve({}),eo=wn(Ji,e=>e(qa).total??0),to=ve(0),no=ve([]),Dr=wn(to,e=>{const t=e($a);return e(no).map(r=>({...r,unreadCount:t[r.id]??0}))}),Xa=ve(e=>e(Dr).sort((n,r)=>n.title.localeCompare(r.title,"en"))),ro=ve(0),ao=ve([]),qc=wn(ro,e=>{const t=e(Dr);return e(ao).map(r=>{const a=t.filter(s=>s.category.id===r.id);return{...r,unreadCount:a.reduce((s,c)=>s+c.unreadCount,0),feedCount:a.length}})}),nr=ve(e=>e(qc).sort((n,r)=>n.title.localeCompare(r.title,"en"))),so=ve(e=>e(nr).filter(n=>n.hide_globally).map(n=>n.id)),Lr=ve(e=>{const t=e(so);return e(Xa).filter(r=>r.hide_globally||t.includes(r.category.id)).map(r=>r.id)}),io=ve(e=>{const{showAllFeeds:t}=e(Ae),n=e(Lr);return e(Xa).filter(a=>t||!n.includes(a.id))}),oo=ve(e=>e(io).reduce((n,r)=>{Ai(r.site_url)||(r.site_url=qi(r.feed_url));const{id:a}=r.category;return n[a]||(n[a]=[]),n[a].push(r),n},{})),Xc=ve(e=>{const t=e($a),n=e(io);return Object.entries(t).reduce((r,[a,s])=>n.some(c=>c.id===Number(a))?r+s:r,0)}),Cn=(e,t,n)=>()=>{const[r,a]=b.useState(null),s=ht(e),c=ht(t);return b.useEffect(()=>{(async()=>{const l=await n();a(l.data)})()},[n]),b.useEffect(()=>{r&&(s(r),c(o=>o+1))},[r,s,c]),r},Gc=Cn(Gi,Xi,Nc),Yc=Cn(Ha,Yi,()=>Sr(0,"unread")),Kc=Cn(Wa,Qi,Wi),Qc=Cn(qa,Ji,Hi),Zc=Cn(no,to,Fc),Jc=Cn(ao,ro,Dc),Ga=()=>{const[e,t]=en(za),n=Gc(),r=Yc(),a=Kc(),s=Qc(),c=Zc(),o=Jc();return b.useEffect(()=>{[n,r,a,s,c,o].every(Boolean)&&!e&&t(!0)},[e,t,n,r,a,s,c,o]),{loadData:()=>{t(!1)}}},Jt=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),lo=(e,t,n,r)=>r?t==="0"?n==="all"?e.filter(a=>Jt(a.title,r)):e.filter(a=>Jt(a.title,r)&&a.status===n):n==="all"?e.filter(a=>Jt(a.content,r)):e.filter(a=>Jt(a.content,r)&&a.status===n):e,Ya=(e,t,n,r)=>{const a=s=>n||!r.includes(s.feed.id);return["all","today","category"].includes(t.from)?e.filter(a):e},eu=()=>{const{updateConfig:e}=Fr(),t=ne(Ae),{articleWidth:n,fontSize:r,layout:a,showFeedIcon:s,themeColor:c}=t,o=m=>{e({themeColor:m}),Bi(m)},l=m=>{e({layout:m?"small":"large"})},u=m=>{e({showFeedIcon:m})},d=m=>{e({fontSize:m})},f=m=>{e({articleWidth:m})};return i.jsxs(i.Fragment,{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Theme"}),i.jsx(F.Text,{type:"secondary",children:"Customize your UI theme"}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),i.jsx(F.Text,{type:"secondary",children:"Choose your accent color"})]}),i.jsx("div",{style:{display:"flex"},children:Ui.map(m=>i.jsx($n,{content:m.name,children:i.jsx("button",{type:"button",className:"accent-color-button",style:{backgroundColor:ga(m.name),outline:m.name===c?`1px solid ${ga(m.name)}`:"none"},onClick:()=>o(m.name),onKeyDown:C=>{(C.key==="Enter"||C.key===" ")&&o(m.name)}})},m.name))})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),i.jsx(F.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),i.jsx("div",{children:i.jsx(tn,{checked:a==="small",onChange:m=>l(m)})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),i.jsx(F.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),i.jsx("div",{children:i.jsx(tn,{checked:s,onChange:m=>u(m)})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Font size"}),i.jsx(F.Text,{type:"secondary",children:"Adjust article text size"})]}),i.jsx("div",{children:i.jsxs(Tr,{children:[i.jsx(F.Text,{style:{fontSize:"0.75rem"},children:"A"}),i.jsx(As,{formatTooltip:m=>`${m}rem`,max:1.25,min:.75,showTicks:!0,step:.05,style:{width:200},value:r,onChange:m=>d(m)}),i.jsx(F.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Article width"}),i.jsx(F.Text,{type:"secondary",children:"Adjust article width"})]}),i.jsx("div",{children:i.jsxs(Tr,{children:[i.jsx(F.Text,{children:"60%"}),i.jsx(As,{formatTooltip:m=>`${m}%`,max:90,min:60,showTicks:!0,step:10,style:{width:200},value:n,onChange:m=>f(m)}),i.jsx(F.Text,{children:"90%"})]})})]})]})},tu=()=>{const e=ht(Dr),[t,n]=en(nr),[r,a]=b.useState(!1),[s,c]=b.useState(""),[o,l]=b.useState(!1),[u]=xe.useForm(),[d,f]=b.useState({}),m=async()=>{if(s){try{const{data:g}=await Vc(s);n(v=>[...v,{...g,feedCount:0}]),se.success("Category added successfully")}catch{se.error("Failed to add category")}c(""),a(!1)}},C=async(g,v,p)=>{try{const{data:S}=await Uc(g,v,p);e(w=>w.map(_=>_.category.id===g?{..._,category:{..._.category,title:v}}:_)),n(w=>w.map(_=>_.id===g?{..._,...S}:_)),se.success("Category updated successfully")}catch{se.error("Failed to update category")}l(!1),u.resetFields()},x=async g=>{try{(await Lc(g)).status===204?(n(p=>p.filter(S=>S.id!==g)),se.success("Category deleted successfully")):se.error("Failed to delete category")}catch{se.error("Failed to delete category")}};return i.jsxs(i.Fragment,{children:[i.jsxs("div",{children:[t.map(g=>i.jsx(Hn,{className:"tag-style",closable:g.feedCount===0,size:"medium",onClick:()=>{f(g),l(!0),u.setFieldsValue({title:g.title})},onClose:async v=>{v.stopPropagation(),await x(g.id)},children:g.title},g.id)),r?i.jsx(st,{autoFocus:!0,className:"input-style",onBlur:m,onChange:c,onPressEnter:m,size:"small",value:s}):i.jsx(Hn,{className:"add-category-tag",icon:i.jsx(ji,{}),onClick:()=>a(!0),size:"medium",tabIndex:0,children:"Add"})]}),d&&i.jsx(Nr,{className:"modal-style",onOk:u.submit,title:"Edit Category",unmountOnExit:!0,visible:o,onCancel:()=>{l(!1),u.resetFields()},children:i.jsxs(xe,{form:u,layout:"vertical",onSubmit:g=>C(d.id,g.title,g.hidden),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:[i.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:i.jsx(st,{placeholder:"Please input category title"})}),i.jsx(xe.Item,{label:"Hidden",field:"hidden",initialValue:d.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:i.jsx(tn,{})})]})})]})},Vr=()=>{const[e,t]=b.useState(window.innerWidth),n=e<=768;return b.useEffect(()=>{const r=()=>t(window.innerWidth);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]),{screenWidth:e,isMobileView:n}},aa=e=>e.slice().sort((t,n)=>n.parsing_error_count-t.parsing_error_count),nu=()=>{const[e,t]=b.useState(!1),[n,r]=b.useState({}),[a]=xe.useForm(),s=ne(Xa),c=ht(Dr),[o,l]=b.useState(aa(s)),u=ne(nr),{isMobileView:d}=Vr(),f=o.map(p=>({category:p.category,checked_at:p.checked_at,crawler:p.crawler,feed_url:p.feed_url,key:p.id,parsing_error_count:p.parsing_error_count,title:p.title,hidden:p.hide_globally}));b.useEffect(()=>{l(aa(s))},[s]);const m=p=>{r(p),t(!0),a.setFieldsValue({category:p.category.id,crawler:p.crawler,title:p.title,url:p.feed_url,hidden:p.hidden})},C=async p=>{try{await zc(p.key),se.success("Refreshed"),c(S=>S.map(w=>w.id===p.key?{...w,parsing_error_count:0}:w))}catch{se.error("Failed to refresh"),c(w=>w.map(_=>_.id===p.key?{..._,parsing_error_count:_.parsing_error_count+1}:_))}},x=async p=>{try{await $c(p.key),se.success("Unfollowed"),c(S=>S.filter(w=>w.id!==p.key))}catch{se.error("Failed to unfollow")}},g=[{title:"Title",dataIndex:"title",sorter:(p,S)=>p.title.localeCompare(S.title,"en"),render:(p,S)=>{const w=S.parsing_error_count,_=w?`âš ï¸ ${p}`:p,E=i.jsxs("div",{children:[p,w>0&&i.jsxs(i.Fragment,{children:[i.jsx("br",{}),"âš ï¸ Parsing error count: ",w]})]});return i.jsx(F.Ellipsis,{expandable:!1,children:i.jsx($n,{mini:!0,content:E,children:_})})}},!d&&{title:"Url",dataIndex:"feed_url",sorter:(p,S)=>p.feed_url.localeCompare(S.feed_url,"en"),render:p=>i.jsx(F.Ellipsis,{expandable:!1,showTooltip:!0,children:p})},{title:"Category",dataIndex:"category.title",sorter:(p,S)=>p.category.title.localeCompare(S.category.title,"en"),render:p=>i.jsx(F.Ellipsis,{expandable:!1,showTooltip:!0,children:i.jsx(Hn,{children:p})})},!d&&{title:"Checked at",dataIndex:"checked_at",sorter:(p,S)=>p.checked_at.localeCompare(S.checked_at,"en"),render:p=>i.jsx(F.Ellipsis,{expandable:!1,children:$i(p)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(p,S)=>i.jsxs(Tr,{children:[i.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>m(S),type:"button",children:i.jsx($l,{})}),i.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>C(S),type:"button",children:i.jsx(Mi,{})}),i.jsx(Pi,{position:"left",focusLock:!0,title:"Unfollowï¼Ÿ",onOk:async()=>{await x(S)},children:i.jsx("span",{className:"list-item-action",children:i.jsx(Hl,{})})})]})}].filter(Boolean),v=async(p,S)=>{try{const w=await Bc(p,S);c(_=>_.map(E=>E.id===p?{...E,...w.data}:E)),se.success("Feed updated successfully"),t(!1),a.resetFields()}catch{se.error("Failed to update feed")}};return i.jsxs(i.Fragment,{children:[i.jsx("div",{style:{display:"flex",justifyContent:"center"},children:i.jsx(st.Search,{className:"search-input",placeholder:"Search feed title or url",searchButton:!0,onChange:p=>l(aa(s).filter(S=>Jt(S.title,p)||Jt(S.feed_url,p)))})}),i.jsx(Ii,{borderCell:!0,className:"feed-table",columns:g,data:f,pagePosition:"bottomCenter",scroll:{x:!0},size:"small"}),n&&i.jsx(Nr,{className:"edit-modal",onOk:a.submit,title:"Edit Feed",unmountOnExit:!0,visible:e,onCancel:()=>{t(!1),a.resetFields()},children:i.jsxs(xe,{form:a,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:p=>{const S=p.url.trim(),w={url:p.url,title:p.title,categoryId:p.category,isFullText:p.crawler,hidden:p.hidden};S?v(n.key,w):se.error("Feed URL cannot be empty")},children:[i.jsx(xe.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:i.jsx(st,{placeholder:"Please input feed URL"})}),i.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:i.jsx(st,{placeholder:"Please input feed title"})}),i.jsx(xe.Item,{label:"Category",required:!0,field:"category",rules:[{required:!0}],children:i.jsx(ke,{placeholder:"Please select",children:u.map(p=>i.jsx(ke.Option,{value:p.id,children:p.title},p.id))})}),i.jsx(xe.Item,{label:"Hidden",field:"hidden",initialValue:n.hide_globally,triggerPropName:"checked",rules:[{type:"boolean"}],children:i.jsx(tn,{})}),i.jsx(xe.Item,{label:"Fetch original content",field:"crawler",tooltip:i.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:i.jsx(tn,{})})]})})]})},ru=()=>{const{updateConfig:e}=Fr(),t=ne(Ae),{homePage:n,markReadOnScroll:r,orderBy:a,pageSize:s,showStatus:c}=t;return i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),i.jsx(F.Text,{type:"secondary",children:"Which status to show by default:"})]}),i.jsx("div",{children:i.jsxs(ke,{className:"select-style",placeholder:"Select status",value:c,onChange:o=>e({showStatus:o}),children:[i.jsx(ke.Option,{value:"all",children:"All"}),i.jsx(ke.Option,{value:"unread",children:"Unread"})]})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),i.jsx(F.Text,{type:"secondary",children:"Which page to show by default:"})]}),i.jsx("div",{children:i.jsxs(ke,{onChange:o=>e({homePage:o}),placeholder:"Select page",style:{width:128,marginLeft:16},value:n,children:[i.jsx(ke.Option,{value:"all",children:"All"}),i.jsx(ke.Option,{value:"today",children:"Today"}),i.jsx(ke.Option,{value:"starred",children:"Starred"}),i.jsx(ke.Option,{value:"history",children:"History"})]})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),i.jsx(F.Text,{type:"secondary",children:"What order to show entries:"})]}),i.jsx("div",{children:i.jsxs(ke,{onChange:o=>e({orderBy:o}),placeholder:"Select order",style:{width:128,marginLeft:16},value:a,children:[i.jsx(ke.Option,{value:"published_at",children:"Published at"}),i.jsx(ke.Option,{value:"created_at",children:"Created at"})]})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),i.jsx(F.Text,{type:"secondary",children:"Show how many entries per page:"})]}),i.jsx("div",{children:i.jsx(Wl,{defaultValue:s,min:1,mode:"button",onChange:o=>e({pageSize:o}),size:"small",style:{width:128,marginLeft:16}})})]}),i.jsx(at,{}),i.jsxs("div",{className:"setting-row",children:[i.jsxs("div",{children:[i.jsx(F.Title,{heading:6,style:{marginTop:0},children:"Mark articles as read when scrolled off screen"}),i.jsx(F.Text,{type:"secondary",children:"Automatically mark articles as read when they are scrolled out of the visible screen area"})]}),i.jsx("div",{children:i.jsx(tn,{checked:r,onChange:o=>e({markReadOnScroll:o})})})]})]})},au=[{title:"Key",dataIndex:"keyName",render:e=>i.jsx(Hn,{children:e})},{title:"Function",dataIndex:"description"}],su=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"â†",description:"Previous article"},{key:"3",keyName:"â†’",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],iu=()=>i.jsx(Ii,{borderCell:!0,columns:au,data:su,pagination:!1,size:"small",style:{margin:"0 auto",width:"80%"}}),ou=()=>i.jsxs(fn,{className:"custom-tabs",defaultActiveTab:"1",tabPosition:"top",children:[i.jsx(fn.TabPane,{title:i.jsxs("span",{children:[i.jsx(ql,{style:{marginRight:6}}),"Feeds"]}),children:i.jsx(nu,{})},"1"),i.jsx(fn.TabPane,{title:i.jsxs("span",{children:[i.jsx(Xl,{style:{marginRight:6}}),"Categories"]}),children:i.jsx(tu,{})},"2"),i.jsx(fn.TabPane,{title:i.jsxs("span",{children:[i.jsx(Gl,{style:{marginRight:6}}),"General"]}),children:i.jsx(ru,{})},"3"),i.jsx(fn.TabPane,{title:i.jsxs("span",{children:[i.jsx(Yl,{style:{marginRight:6}}),"Appearance"]}),children:i.jsx(eu,{})},"4"),i.jsx(fn.TabPane,{title:i.jsxs("span",{children:[i.jsx(Kl,{style:{marginRight:6}}),"Hotkeys"]}),children:i.jsx(iu,{})},"5")]}),lu=[{required:!0}],cu=[{required:!0}],uu=[{type:"boolean"}],du=()=>{const e=Te(n=>n.setVisible),t=Te(n=>n.visible);return i.jsx(Nr,{className:"settings-modal",visible:t.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,onCancel:()=>e("settings",!1),autoFocus:!1,focusLock:!0,children:i.jsx(ou,{})})},fu=()=>{const e=ne(nr),t=Te(l=>l.setVisible),n=Te(l=>l.visible),[r,a]=b.useState(!1),[s]=xe.useForm(),{loadData:c}=Ga(),o=async(l,u,d)=>{a(!0),Hc(l,u,d).then(()=>{c(),se.success("Added a feed successfully"),t("addFeed",!1),s.resetFields()}).catch(()=>{se.error("Failed to add a feed")}),a(!1)};return i.jsx(Nr,{title:"Add Feed",visible:n.addFeed,unmountOnExit:!0,style:{width:"400px"},onOk:s.submit,confirmLoading:r,onCancel:()=>{t("addFeed",!1),s.resetFields()},children:i.jsxs(xe,{form:s,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:l=>{l.url.trim()?o(l.url.trim(),l.category,l.crawler):se.error("Feed URL cannot be empty")},children:[i.jsx(xe.Item,{label:"Feed URL",field:"url",rules:lu,children:i.jsx(st,{placeholder:"Please input a feed URL"})}),i.jsx(xe.Item,{label:"Category",required:!0,field:"category",rules:cu,children:i.jsx(ke,{placeholder:"Please select a category",showSearch:!0,filterOption:(l,u)=>Jt(u.props.children,l),children:e.map(l=>i.jsx(ke.Option,{value:l.id,children:l.title},l.id))})}),i.jsx(xe.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:uu,children:i.jsx(tn,{})})]})})},hu=()=>i.jsxs("div",{className:"main",children:[i.jsx(Ql,{}),i.jsx(du,{}),i.jsx(fu,{})]}),In=Ft.Item,{Sider:mu}=ac,pu=b.memo(({category:e,isOpen:t})=>{const r=ne(oo)[e.id].reduce((a,s)=>a+s.unreadCount,0);return i.jsxs("div",{className:"category-title",children:[i.jsxs(F.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:r?"80%":"100%"},children:[t?i.jsx(Zl,{}):i.jsx(Jl,{}),e.title]}),r>0&&i.jsx(F.Ellipsis,{className:"unread-count",expandable:!1,children:r})]})}),gu=()=>{const e=ec(),t=tr(),n=Te(E=>E.collapsed),r=ne(nr),a=ne(za),s=ne(Xc),c=ne(Ki),o=ne(Zi),l=ne(eo),u=ne(oo),d=ne(so),f=Te(E=>E.toggleCollapsed),[m,C]=b.useState([]),[x,g]=b.useState([]),v=ne(Ae),{showAllFeeds:p,showFeedIcon:S}=v,w=e.pathname,_=(E,P)=>{g(P)};return b.useEffect(()=>{C([w]),n||window.innerWidth<=992&&f(!0)},[w]),b.useEffect(()=>{a||g([])},[a]),i.jsx(mu,{breakpoint:"lg",className:"sidebar",collapsed:n,collapsedWidth:0,collapsible:!0,onCollapse:f,trigger:null,width:240,style:{borderRight:n?"none":"1px solid var(--color-border-2)",display:n?"none":"block"},children:i.jsxs(Ft,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[w],hasCollapseButton:!0,onClickSubMenu:_,onCollapseChange:f,selectedKeys:m,style:{width:"240px",height:"100%"},children:[i.jsxs("div",{className:"menu-header",style:{visibility:n?"hidden":"visible"},children:[i.jsx(Ti,{className:"avatar",size:32,children:i.jsx(Oi,{style:{color:"var(--color-bg-1)"}})}),i.jsx(F.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),i.jsx(at,{className:"divider"}),i.jsx(F.Title,{className:"section-title",heading:6,children:"Articles"}),i.jsx(_r,{loading:!a,animation:!0,text:{rows:3}}),a?i.jsxs("div",{children:[i.jsx(In,{onClick:()=>t("/all"),children:i.jsxs("div",{className:"custom-menu-item",children:[i.jsxs("span",{children:[i.jsx(tc,{}),"All"]}),i.jsx(F.Ellipsis,{className:"item-count",expandable:!1,children:s||""})]})},"/all"),i.jsx(In,{onClick:()=>t("/today"),children:i.jsxs("div",{className:"custom-menu-item",children:[i.jsxs("span",{children:[i.jsx(nc,{}),"Today"]}),i.jsx(F.Ellipsis,{className:"item-count",expandable:!1,children:c||""})]})},"/today"),i.jsx(In,{onClick:()=>t("/starred"),children:i.jsxs("div",{className:"custom-menu-item",children:[i.jsxs("span",{children:[i.jsx(Da,{}),"Starred"]}),i.jsx(F.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/starred"),i.jsx(In,{onClick:()=>t("/history"),children:i.jsxs("div",{className:"custom-menu-item",children:[i.jsxs("span",{children:[i.jsx(rc,{}),"History"]}),i.jsx(F.Ellipsis,{className:"item-count",expandable:!1,children:l||""})]})},"/history")]}):null,i.jsx(F.Title,{className:"section-title",heading:6,children:"Feeds"}),i.jsx(_r,{loading:!a,animation:!0,text:{rows:6}}),a?r.filter(E=>p||!d.includes(E.id)).map(E=>{var P;return i.jsx(Ft.SubMenu,{selectable:!0,title:i.jsx(pu,{category:E,isOpen:x.includes(`/category/${E.id}`)}),onClick:k=>{C([`/category/${E.id}`]),!(k.target.tagName==="svg"||k.target.tagName==="path")&&w!==`/category/${E.id}`&&t(`/category/${E.id}`)},children:(P=u[E.id])==null?void 0:P.map(k=>i.jsx(In,{onClick:K=>{K.stopPropagation(),C([`/category/${E.id}`]),t(`/feed/${k.id}`)},children:i.jsxs("div",{className:"custom-menu-item",children:[i.jsxs(F.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:k.unreadCount!==0?"80%":"100%"},children:[S&&i.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(k.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),k.title]}),k.unreadCount!==0&&i.jsx(F.Ellipsis,{className:"item-count",expandable:!1,children:k.unreadCount})]})},`/feed/${k.id}`))},`/category/${E.id}`)}):null]})})},vu=()=>{const e=ne(Ae),{theme:t}=e,n=Te(a=>a.isSysDarkMode),r=Te(a=>a.setIsSysDarkMode);return b.useEffect(()=>{const a=c=>{r(c.matches)},s=window.matchMedia("(prefers-color-scheme: dark)");return s.addEventListener("change",a),()=>{s.removeEventListener("change",a)}},[]),b.useEffect(()=>{(s=>{document.body.setAttribute("arco-theme",s?"dark":"light"),document.body.style.colorScheme=s?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),i.jsxs("div",{className:"app",children:[i.jsx(gu,{}),i.jsx(jc,{}),i.jsx(hu,{})]})};var rr={};(function e(t,n,r,a){var s=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),c=typeof Path2D=="function"&&typeof DOMMatrix=="function",o=function(){if(!t.OffscreenCanvas)return!1;var y=new OffscreenCanvas(1,1),h=y.getContext("2d");h.fillRect(0,0,1,1);var I=y.transferToImageBitmap();try{h.createPattern(I,"no-repeat")}catch{return!1}return!0}();function l(){}function u(y){var h=n.exports.Promise,I=h!==void 0?h:t.Promise;return typeof I=="function"?new I(y):(y(l,l),null)}var d=function(y,h){return{transform:function(I){if(y)return I;if(h.has(I))return h.get(I);var O=new OffscreenCanvas(I.width,I.height),M=O.getContext("2d");return M.drawImage(I,0,0),h.set(I,O),O},clear:function(){h.clear()}}}(o,new Map),f=function(){var y=Math.floor(16.666666666666668),h,I,O={},M=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(h=function(D){var N=Math.random();return O[N]=requestAnimationFrame(function R(B){M===B||M+y-1<B?(M=B,delete O[N],D()):O[N]=requestAnimationFrame(R)}),N},I=function(D){O[D]&&cancelAnimationFrame(O[D])}):(h=function(D){return setTimeout(D,y)},I=function(D){return clearTimeout(D)}),{frame:h,cancel:I}}(),m=function(){var y,h,I={};function O(M){function D(N,R){M.postMessage({options:N||{},callback:R})}M.init=function(R){var B=R.transferControlToOffscreen();M.postMessage({canvas:B},[B])},M.fire=function(R,B,z){if(h)return D(R,null),h;var $=Math.random().toString(36).slice(2);return h=u(function(te){function re(de){de.data.callback===$&&(delete I[$],M.removeEventListener("message",re),h=null,d.clear(),z(),te())}M.addEventListener("message",re),D(R,$),I[$]=re.bind(null,{data:{callback:$}})}),h},M.reset=function(){M.postMessage({reset:!0});for(var R in I)I[R](),delete I[R]}}return function(){if(y)return y;if(!r&&s){var M=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{y=new Worker(URL.createObjectURL(new Blob([M])))}catch(D){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",D),null}O(y)}return y}}(),C={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function x(y,h){return h?h(y):y}function g(y){return y!=null}function v(y,h,I){return x(y&&g(y[h])?y[h]:C[h],I)}function p(y){return y<0?0:Math.floor(y)}function S(y,h){return Math.floor(Math.random()*(h-y))+y}function w(y){return parseInt(y,16)}function _(y){return y.map(E)}function E(y){var h=String(y).replace(/[^0-9a-f]/gi,"");return h.length<6&&(h=h[0]+h[0]+h[1]+h[1]+h[2]+h[2]),{r:w(h.substring(0,2)),g:w(h.substring(2,4)),b:w(h.substring(4,6))}}function P(y){var h=v(y,"origin",Object);return h.x=v(h,"x",Number),h.y=v(h,"y",Number),h}function k(y){y.width=document.documentElement.clientWidth,y.height=document.documentElement.clientHeight}function K(y){var h=y.getBoundingClientRect();y.width=h.width,y.height=h.height}function A(y){var h=document.createElement("canvas");return h.style.position="fixed",h.style.top="0px",h.style.left="0px",h.style.pointerEvents="none",h.style.zIndex=y,h}function L(y,h,I,O,M,D,N,R,B){y.save(),y.translate(h,I),y.rotate(D),y.scale(O,M),y.arc(0,0,1,N,R,B),y.restore()}function U(y){var h=y.angle*(Math.PI/180),I=y.spread*(Math.PI/180);return{x:y.x,y:y.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:y.startVelocity*.5+Math.random()*y.startVelocity,angle2D:-h+(.5*I-Math.random()*I),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:y.color,shape:y.shape,tick:0,totalTicks:y.ticks,decay:y.decay,drift:y.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:y.gravity*3,ovalScalar:.6,scalar:y.scalar,flat:y.flat}}function ie(y,h){h.x+=Math.cos(h.angle2D)*h.velocity+h.drift,h.y+=Math.sin(h.angle2D)*h.velocity+h.gravity,h.velocity*=h.decay,h.flat?(h.wobble=0,h.wobbleX=h.x+10*h.scalar,h.wobbleY=h.y+10*h.scalar,h.tiltSin=0,h.tiltCos=0,h.random=1):(h.wobble+=h.wobbleSpeed,h.wobbleX=h.x+10*h.scalar*Math.cos(h.wobble),h.wobbleY=h.y+10*h.scalar*Math.sin(h.wobble),h.tiltAngle+=.1,h.tiltSin=Math.sin(h.tiltAngle),h.tiltCos=Math.cos(h.tiltAngle),h.random=Math.random()+2);var I=h.tick++/h.totalTicks,O=h.x+h.random*h.tiltCos,M=h.y+h.random*h.tiltSin,D=h.wobbleX+h.random*h.tiltCos,N=h.wobbleY+h.random*h.tiltSin;if(y.fillStyle="rgba("+h.color.r+", "+h.color.g+", "+h.color.b+", "+(1-I)+")",y.beginPath(),c&&h.shape.type==="path"&&typeof h.shape.path=="string"&&Array.isArray(h.shape.matrix))y.fill(Qe(h.shape.path,h.shape.matrix,h.x,h.y,Math.abs(D-O)*.1,Math.abs(N-M)*.1,Math.PI/10*h.wobble));else if(h.shape.type==="bitmap"){var R=Math.PI/10*h.wobble,B=Math.abs(D-O)*.1,z=Math.abs(N-M)*.1,$=h.shape.bitmap.width*h.scalar,te=h.shape.bitmap.height*h.scalar,re=new DOMMatrix([Math.cos(R)*B,Math.sin(R)*B,-Math.sin(R)*z,Math.cos(R)*z,h.x,h.y]);re.multiplySelf(new DOMMatrix(h.shape.matrix));var de=y.createPattern(d.transform(h.shape.bitmap),"no-repeat");de.setTransform(re),y.globalAlpha=1-I,y.fillStyle=de,y.fillRect(h.x-$/2,h.y-te/2,$,te),y.globalAlpha=1}else if(h.shape==="circle")y.ellipse?y.ellipse(h.x,h.y,Math.abs(D-O)*h.ovalScalar,Math.abs(N-M)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI):L(y,h.x,h.y,Math.abs(D-O)*h.ovalScalar,Math.abs(N-M)*h.ovalScalar,Math.PI/10*h.wobble,0,2*Math.PI);else if(h.shape==="star")for(var W=Math.PI/2*3,q=4*h.scalar,_e=8*h.scalar,pe=h.x,Ce=h.y,Ie=5,ge=Math.PI/Ie;Ie--;)pe=h.x+Math.cos(W)*_e,Ce=h.y+Math.sin(W)*_e,y.lineTo(pe,Ce),W+=ge,pe=h.x+Math.cos(W)*q,Ce=h.y+Math.sin(W)*q,y.lineTo(pe,Ce),W+=ge;else y.moveTo(Math.floor(h.x),Math.floor(h.y)),y.lineTo(Math.floor(h.wobbleX),Math.floor(M)),y.lineTo(Math.floor(D),Math.floor(N)),y.lineTo(Math.floor(O),Math.floor(h.wobbleY));return y.closePath(),y.fill(),h.tick<h.totalTicks}function le(y,h,I,O,M){var D=h.slice(),N=y.getContext("2d"),R,B,z=u(function($){function te(){R=B=null,N.clearRect(0,0,O.width,O.height),d.clear(),M(),$()}function re(){r&&!(O.width===a.width&&O.height===a.height)&&(O.width=y.width=a.width,O.height=y.height=a.height),!O.width&&!O.height&&(I(y),O.width=y.width,O.height=y.height),N.clearRect(0,0,O.width,O.height),D=D.filter(function(de){return ie(N,de)}),D.length?R=f.frame(re):te()}R=f.frame(re),B=te});return{addFettis:function($){return D=D.concat($),z},canvas:y,promise:z,reset:function(){R&&f.cancel(R),B&&B()}}}function Z(y,h){var I=!y,O=!!v(h||{},"resize"),M=!1,D=v(h,"disableForReducedMotion",Boolean),N=s&&!!v(h||{},"useWorker"),R=N?m():null,B=I?k:K,z=y&&R?!!y.__confetti_initialized:!1,$=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,te;function re(W,q,_e){for(var pe=v(W,"particleCount",p),Ce=v(W,"angle",Number),Ie=v(W,"spread",Number),ge=v(W,"startVelocity",Number),He=v(W,"decay",Number),Ze=v(W,"gravity",Number),Q=v(W,"drift",Number),ae=v(W,"colors",_),ye=v(W,"ticks",Number),fe=v(W,"shapes"),je=v(W,"scalar"),We=!!v(W,"flat"),kt=P(W),$t=pe,At=[],rn=y.width*kt.x,Ne=y.height*kt.y;$t--;)At.push(U({x:rn,y:Ne,angle:Ce,spread:Ie,startVelocity:ge,color:ae[$t%ae.length],shape:fe[S(0,fe.length)],ticks:ye,decay:He,gravity:Ze,drift:Q,scalar:je,flat:We}));return te?te.addFettis(At):(te=le(y,At,B,q,_e),te.promise)}function de(W){var q=D||v(W,"disableForReducedMotion",Boolean),_e=v(W,"zIndex",Number);if(q&&$)return u(function(ge){ge()});I&&te?y=te.canvas:I&&!y&&(y=A(_e),document.body.appendChild(y)),O&&!z&&B(y);var pe={width:y.width,height:y.height};R&&!z&&R.init(y),z=!0,R&&(y.__confetti_initialized=!0);function Ce(){if(R){var ge={getBoundingClientRect:function(){if(!I)return y.getBoundingClientRect()}};B(ge),R.postMessage({resize:{width:ge.width,height:ge.height}});return}pe.width=pe.height=null}function Ie(){te=null,O&&(M=!1,t.removeEventListener("resize",Ce)),I&&y&&(document.body.removeChild(y),y=null,z=!1)}return O&&!M&&(M=!0,t.addEventListener("resize",Ce,!1)),R?R.fire(W,pe,Ie):re(W,pe,Ie)}return de.reset=function(){R&&R.reset(),te&&te.reset()},de}var ue;function be(){return ue||(ue=Z(null,{useWorker:!0,resize:!0})),ue}function Qe(y,h,I,O,M,D,N){var R=new Path2D(y),B=new Path2D;B.addPath(R,new DOMMatrix(h));var z=new Path2D;return z.addPath(B,new DOMMatrix([Math.cos(N)*M,Math.sin(N)*M,-Math.sin(N)*D,Math.cos(N)*D,I,O])),z}function Re(y){if(!c)throw new Error("path confetti are not supported in this browser");var h,I;typeof y=="string"?h=y:(h=y.path,I=y.matrix);var O=new Path2D(h),M=document.createElement("canvas"),D=M.getContext("2d");if(!I){for(var N=1e3,R=N,B=N,z=0,$=0,te,re,de=0;de<N;de+=2)for(var W=0;W<N;W+=2)D.isPointInPath(O,de,W,"nonzero")&&(R=Math.min(R,de),B=Math.min(B,W),z=Math.max(z,de),$=Math.max($,W));te=z-R,re=$-B;var q=10,_e=Math.min(q/te,q/re);I=[_e,0,0,_e,-Math.round(te/2+R)*_e,-Math.round(re/2+B)*_e]}return{type:"path",path:h,matrix:I}}function vt(y){var h,I=1,O="#000000",M='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof y=="string"?h=y:(h=y.text,I="scalar"in y?y.scalar:I,M="fontFamily"in y?y.fontFamily:M,O="color"in y?y.color:O);var D=10*I,N=""+D+"px "+M,R=new OffscreenCanvas(D,D),B=R.getContext("2d");B.font=N;var z=B.measureText(h),$=Math.ceil(z.actualBoundingBoxRight+z.actualBoundingBoxLeft),te=Math.ceil(z.actualBoundingBoxAscent+z.actualBoundingBoxDescent),re=2,de=z.actualBoundingBoxLeft+re,W=z.actualBoundingBoxAscent+re;$+=re+re,te+=re+re,R=new OffscreenCanvas($,te),B=R.getContext("2d"),B.font=N,B.fillStyle=O,B.fillText(h,de,W);var q=1/I;return{type:"bitmap",bitmap:R.transferToImageBitmap(),matrix:[q,0,0,q,-$*q/2,-te*q/2]}}n.exports=function(){return be().apply(this,arguments)},n.exports.reset=function(){be().reset()},n.exports.create=Z,n.exports.shapeFromPath=Re,n.exports.shapeFromText=vt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),rr,!1);const yu=rr.exports;rr.exports.create;const gt=b.createContext(null),jn=({children:e})=>{const[t,n]=b.useState(0),[r,a]=b.useState(0),[s,c]=b.useState(0),[o,l]=b.useState(0),[u,d]=b.useState(!1),[f,m]=b.useState(!1),[C,x]=b.useState([]),[g,v]=b.useState([]),[p,S]=b.useState([]),[w,_]=b.useState(mt("showStatus")),[E,P]=b.useState("0"),[k,K]=b.useState(""),[A,L]=b.useState(!0),[U,ie]=b.useState(!1),le=b.useRef(null),Z=b.useMemo(()=>({entries:C,entryDetailRef:le,filteredEntries:p,filterStatus:w,filterString:k,filterType:E,isArticleFocused:U,loading:A,loadMoreUnreadVisible:f,loadMoreVisible:u,offset:s,setEntries:x,setFilteredEntries:S,setFilterStatus:_,setFilterString:K,setFilterType:P,setIsArticleFocused:ie,setLoading:L,setLoadMoreUnreadVisible:m,setLoadMoreVisible:d,setOffset:c,setTotal:n,setUnreadCount:a,setUnreadEntries:v,setUnreadOffset:l,total:t,unreadCount:r,unreadEntries:g,unreadOffset:o}),[C,p,w,k,E,U,A,f,u,s,t,r,g,o]);return i.jsx(gt.Provider,{value:Z,children:e})},Ka=()=>{const e=ht($a),t=ht(Ki),n=ht(eo),r=ht(Zi),a=Te(v=>v.activeContent),s=Te(v=>v.setActiveContent),{setEntries:c,setFilteredEntries:o,setUnreadCount:l,setUnreadEntries:u}=b.useContext(gt),d=(v,p)=>v.map(S=>S.id===p.id?p:S),f=(v,p)=>{const S=v.feed.id,w=_c(v.published_at);p==="read"?(e(E=>({...E,[S]:Math.max(0,E[S]-1)})),l(E=>Math.max(0,E-1)),n(E=>E+1),w&&t(E=>Math.max(0,E-1))):(e(E=>({...E,[S]:E[S]+1})),l(E=>E+1),n(E=>Math.max(0,E-1)),w&&t(E=>E+1));const _={...v,status:p};a&&s(_),c(E=>d(E,_)),u(E=>d(E,_)),o(E=>d(E,_))},m=(v,p)=>{p?(r(w=>w+1),yu({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):r(w=>Math.max(0,w-1));const S={...v,starred:p};a&&s(S),c(w=>d(w,S)),u(w=>d(w,S)),o(w=>d(w,S))};return{handleEntryStatusUpdate:f,handleFetchContent:async()=>{Oc(a.id).then(v=>{se.success("Fetched content successfully"),s({...a,content:v.data.content})}).catch(()=>{se.error("Failed to fetch content, please try again later")})},handleToggleStarred:async v=>{const p=!v.starred;m(v,p),Pc(v.id).catch(()=>{se.error(`Failed to ${p?"star":"unstar"} entry, please try again later`),m(v,!p)})},handleToggleStatus:async v=>{const p=v.status,S=p==="read"?"unread":"read";f(v,S),Ba([v.id],S).catch(()=>{se.error(`Failed to mark entry as ${S}, please try again later`),f(v,p)})}}},Ps=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},Qa=()=>{const e=ne(Ae),{pageSize:t,showAllFeeds:n}=e,r=ne(Lr),{entries:a,filterStatus:s,filterString:c,filterType:o,offset:l,setEntries:u,setFilteredEntries:d,setLoadMoreUnreadVisible:f,setLoadMoreVisible:m,setOffset:C,setUnreadEntries:x,setUnreadOffset:g,total:v,unreadCount:p,unreadEntries:S,unreadOffset:w}=b.useContext(gt),[_,E]=b.useState(!1),P=U=>{var ue;const Z=(ue=new DOMParser().parseFromString(U.content,"text/html").querySelector("img"))==null?void 0:ue.getAttribute("src");return{...U,imgSrc:Z}},k=()=>{s==="all"?C(U=>U+t):g(U=>U+t)},K=U=>{const ie=new Map([...(s==="all"?a:S).map(Z=>[Z.id,Z]),...U.map(Z=>[Z.id,Z])]),le=Array.from(ie.values());return s==="all"?(u(le),m(le.length<v)):(x(le),f(le.length<p)),le},A=(U,ie)=>{const le=c?lo(U,o,s,c):U;return Ya(le,ie,n,r)};return{parseFirstImage:P,handleLoadMore:async(U,ie)=>{var le;E(!0);try{let Z;if(s==="all"?Z=await ie(l+t):Z=await ie(w+t,s),(le=Z==null?void 0:Z.data)!=null&&le.entries){k();const ue=Z.data.entries.map(P),be=K(ue),Qe=A(be,U);d(Qe)}}catch(Z){console.error("Error fetching more articles:",Z)}E(!1)},loadingMore:_}},co=(e,t,n)=>{const{entryDetailRef:r,filteredEntries:a,filterStatus:s,loadMoreUnreadVisible:c,loadMoreVisible:o}=b.useContext(gt),l=Te(k=>k.activeContent),u=Te(k=>k.setActiveContent),{handleLoadMore:d}=Qa(),[f,m]=b.useState(!1),[C,x]=b.useState(!1),{isMobileView:g}=Vr();b.useEffect(()=>{const k=document.querySelector(".entry-list");!k||!g||(l?k.style.visibility="hidden":k.style.visibility="visible")},[l,g]),b.useEffect(()=>{C&&!f&&(S(e),x(!1))},[f,C]);const v=k=>{l&&(u(null),k.current&&(k.current.setAttribute("tabIndex","-1"),k.current.focus()),r.current&&r.current.scrollTo(0,0))},p=()=>{const k=a.findIndex(K=>K.id===(l==null?void 0:l.id));if(k>0){const K=a[k-1];t(K),Ps(".card-custom-selected-style","end")}},S=k=>{if(f)return;const K=a.findIndex(L=>L.id===(l==null?void 0:l.id));if(K===a.length-1&&(s==="all"&&o||c)){m(!0),d(k,n).then(()=>x(!0)).finally(()=>m(!1));return}if(K===-1){const L=document.querySelector(".entry-list");L&&L.scrollTo(0,0)}if(K<a.length-1){const L=a[K+1];t(L),x(!1),Ps(".card-custom-selected-style")}};return{handleEscapeKey:v,handleLeftKey:p,handleRightKey:S,handleBKey:()=>{l&&window.open(l.url,"_blank")},handleDKey:k=>{l&&k()},handleMKey:k=>{l&&k()},handleSKey:k=>{l&&k()}}};var uo={},Za={},Ja={};Object.defineProperty(Ja,"__esModule",{value:!0});var Os="html",Rs="head",dr="body",bu=/<([a-zA-Z]+[0-9]?)/,Ns=/<head[^]*>/i,Fs=/<body[^]*>/i,Ar=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},va=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},Ds=typeof window=="object"&&window.DOMParser;if(typeof Ds=="function"){var xu=new Ds,wu="text/html";va=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),xu.parseFromString(e,wu)},Ar=va}if(typeof document=="object"&&document.implementation){var fr=document.implementation.createHTMLDocument();Ar=function(e,t){if(t){var n=fr.documentElement.querySelector(t);return n&&(n.innerHTML=e),fr}return fr.documentElement.innerHTML=e,fr}}var hr=typeof document=="object"&&document.createElement("template"),ya;hr&&hr.content&&(ya=function(e){return hr.innerHTML=e,hr.content.childNodes});function Su(e){var t,n,r=e.match(bu),a=r&&r[1]?r[1].toLowerCase():"";switch(a){case Os:{var s=va(e);if(!Ns.test(e)){var c=s.querySelector(Rs);(t=c==null?void 0:c.parentNode)===null||t===void 0||t.removeChild(c)}if(!Fs.test(e)){var c=s.querySelector(dr);(n=c==null?void 0:c.parentNode)===null||n===void 0||n.removeChild(c)}return s.querySelectorAll(Os)}case Rs:case dr:{var o=Ar(e).querySelectorAll(a);return Fs.test(e)&&Ns.test(e)?o[0].parentNode.childNodes:o}default:{if(ya)return ya(e);var c=Ar(e,dr).querySelector(dr);return c.childNodes}}}Ja.default=Su;var bn={},fo={},ar={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(r){r.Root="root",r.Text="text",r.Directive="directive",r.Comment="comment",r.Script="script",r.Style="style",r.Tag="tag",r.CDATA="cdata",r.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(r){return r.type===t.Tag||r.type===t.Script||r.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(ar);var G={},Ut=ce&&ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fn=ce&&ce.__assign||function(){return Fn=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Fn.apply(this,arguments)};Object.defineProperty(G,"__esModule",{value:!0});G.cloneNode=G.hasChildren=G.isDocument=G.isDirective=G.isComment=G.isText=G.isCDATA=G.isTag=G.Element=G.Document=G.CDATA=G.NodeWithChildren=G.ProcessingInstruction=G.Comment=G.Text=G.DataNode=G.Node=void 0;var Ue=ar,es=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),ts(this,t)},e}();G.Node=es;var Ur=function(e){Ut(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(es);G.DataNode=Ur;var ho=function(e){Ut(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ue.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Ur);G.Text=ho;var mo=function(e){Ut(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ue.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Ur);G.Comment=mo;var po=function(e){Ut(t,e);function t(n,r){var a=e.call(this,r)||this;return a.name=n,a.type=Ue.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Ur);G.ProcessingInstruction=po;var Br=function(e){Ut(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(es);G.NodeWithChildren=Br;var go=function(e){Ut(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ue.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Br);G.CDATA=go;var vo=function(e){Ut(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Ue.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Br);G.Document=vo;var yo=function(e){Ut(t,e);function t(n,r,a,s){a===void 0&&(a=[]),s===void 0&&(s=n==="script"?Ue.ElementType.Script:n==="style"?Ue.ElementType.Style:Ue.ElementType.Tag);var c=e.call(this,a)||this;return c.name=n,c.attribs=r,c.type=s,c}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var a,s;return{name:r,value:n.attribs[r],namespace:(a=n["x-attribsNamespace"])===null||a===void 0?void 0:a[r],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[r]}})},enumerable:!1,configurable:!0}),t}(Br);G.Element=yo;function bo(e){return(0,Ue.isTag)(e)}G.isTag=bo;function xo(e){return e.type===Ue.ElementType.CDATA}G.isCDATA=xo;function wo(e){return e.type===Ue.ElementType.Text}G.isText=wo;function So(e){return e.type===Ue.ElementType.Comment}G.isComment=So;function Co(e){return e.type===Ue.ElementType.Directive}G.isDirective=Co;function jo(e){return e.type===Ue.ElementType.Root}G.isDocument=jo;function Cu(e){return Object.prototype.hasOwnProperty.call(e,"children")}G.hasChildren=Cu;function ts(e,t){t===void 0&&(t=!1);var n;if(wo(e))n=new ho(e.data);else if(So(e))n=new mo(e.data);else if(bo(e)){var r=t?sa(e.children):[],a=new yo(e.name,Fn({},e.attribs),r);r.forEach(function(l){return l.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Fn({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Fn({},e["x-attribsPrefix"])),n=a}else if(xo(e)){var r=t?sa(e.children):[],s=new go(r);r.forEach(function(u){return u.parent=s}),n=s}else if(jo(e)){var r=t?sa(e.children):[],c=new vo(r);r.forEach(function(u){return u.parent=c}),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),n=c}else if(Co(e)){var o=new po(e.name,e.data);e["x-name"]!=null&&(o["x-name"]=e["x-name"],o["x-publicId"]=e["x-publicId"],o["x-systemId"]=e["x-systemId"]),n=o}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}G.cloneNode=ts;function sa(e){for(var t=e.map(function(r){return ts(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ce&&ce.__createBinding||(Object.create?function(o,l,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(l,u);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(o,d,f)}:function(o,l,u,d){d===void 0&&(d=u),o[d]=l[u]}),n=ce&&ce.__exportStar||function(o,l){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&t(l,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=ar,a=G;n(G,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function o(l,u,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=s),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??s,this.elementCB=d??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,u){var d=this.options.xmlMode?r.ElementType.Tag:void 0,f=new a.Element(l,u,void 0,d);this.addNode(f),this.tagStack.push(f)},o.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new a.Text(l);this.addNode(d),this.lastNode=d}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=l;return}var u=new a.Comment(l);this.addNode(u),this.lastNode=u},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new a.Text(""),u=new a.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,u){var d=new a.ProcessingInstruction(l,u);this.addNode(d)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),d&&(l.prev=d,d.next=l),l.parent=u,this.lastNode=null},o}();e.DomHandler=c,e.default=c})(fo);var Eo={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(Eo);Object.defineProperty(bn,"__esModule",{value:!0});bn.formatDOM=bn.formatAttributes=void 0;var mr=fo,ju=Eo;function Eu(e){return ju.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function To(e){for(var t={},n=0,r=e.length;n<r;n++){var a=e[n];t[a.name]=a.value}return t}bn.formatAttributes=To;function Tu(e){e=e.toLowerCase();var t=Eu(e);return t||e}function _o(e,t,n){t===void 0&&(t=null);for(var r=[],a,s=0,c=e.length;s<c;s++){var o=e[s];switch(o.nodeType){case 1:{var l=Tu(o.nodeName);a=new mr.Element(l,To(o.attributes)),a.children=_o(l==="template"?o.content.childNodes:o.childNodes,a);break}case 3:a=new mr.Text(o.nodeValue);break;case 8:a=new mr.Comment(o.nodeValue);break;default:continue}var u=r[s-1]||null;u&&(u.next=a),a.parent=t,a.prev=u,a.next=null,r.push(a)}return n&&(a=new mr.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),a.next=r[0]||null,a.parent=t,r.unshift(a),r[1]&&(r[1].prev=r[0])),r}bn.formatDOM=_o;var _u=ce&&ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Za,"__esModule",{value:!0});var ku=_u(Ja),Au=bn,Iu=/<(![a-zA-Z\s]+)>/;function Mu(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(Iu),n=t?t[1]:void 0;return(0,Au.formatDOM)((0,ku.default)(e),null,n)}Za.default=Mu;var zr={},lt={},$r={},Pu=0;$r.SAME=Pu;var Ou=1;$r.CAMELCASE=Ou;$r.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ko=0,Bt=1,Hr=2,Wr=3,ns=4,Ao=5,Io=6;function Ru(e){return Pe.hasOwnProperty(e)?Pe[e]:null}function Le(e,t,n,r,a,s,c){this.acceptsBooleans=t===Hr||t===Wr||t===ns,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=c}const Pe={},Nu=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];Nu.forEach(e=>{Pe[e]=new Le(e,ko,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{Pe[e]=new Le(e,Bt,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{Pe[e]=new Le(e,Hr,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{Pe[e]=new Le(e,Hr,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{Pe[e]=new Le(e,Wr,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{Pe[e]=new Le(e,Wr,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{Pe[e]=new Le(e,ns,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{Pe[e]=new Le(e,Io,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{Pe[e]=new Le(e,Ao,!1,e.toLowerCase(),null,!1,!1)});const rs=/[\-\:]([a-z])/g,as=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(rs,as);Pe[t]=new Le(t,Bt,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(rs,as);Pe[t]=new Le(t,Bt,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(rs,as);Pe[t]=new Le(t,Bt,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{Pe[e]=new Le(e,Bt,!1,e.toLowerCase(),null,!1,!1)});const Fu="xlinkHref";Pe[Fu]=new Le("xlinkHref",Bt,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{Pe[e]=new Le(e,Bt,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:Du,SAME:Lu,possibleStandardNames:Ls}=$r,Vu=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",Uu=Vu+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",Bu=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+Uu+"]*$")),zu=Object.keys(Ls).reduce((e,t)=>{const n=Ls[t];return n===Lu?e[t]=t:n===Du?e[t.toLowerCase()]=t:e[t]=n,e},{});lt.BOOLEAN=Wr;lt.BOOLEANISH_STRING=Hr;lt.NUMERIC=Ao;lt.OVERLOADED_BOOLEAN=ns;lt.POSITIVE_NUMERIC=Io;lt.RESERVED=ko;lt.STRING=Bt;lt.getPropertyInfo=Ru;lt.isCustomAttribute=Bu;lt.possibleStandardNames=zu;var ss={},is={},Vs=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,$u=/\n/g,Hu=/^\s*/,Wu=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,qu=/^:\s*/,Xu=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Gu=/^[;\s]*/,Yu=/^\s+|\s+$/g,Ku=`
`,Us="/",Bs="*",Kt="",Qu="comment",Zu="declaration",Ju=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function a(x){var g=x.match($u);g&&(n+=g.length);var v=x.lastIndexOf(Ku);r=~v?x.length-v:r+x.length}function s(){var x={line:n,column:r};return function(g){return g.position=new c(x),u(),g}}function c(x){this.start=x,this.end={line:n,column:r},this.source=t.source}c.prototype.content=e;function o(x){var g=new Error(t.source+":"+n+":"+r+": "+x);if(g.reason=x,g.filename=t.source,g.line=n,g.column=r,g.source=e,!t.silent)throw g}function l(x){var g=x.exec(e);if(g){var v=g[0];return a(v),e=e.slice(v.length),g}}function u(){l(Hu)}function d(x){var g;for(x=x||[];g=f();)g!==!1&&x.push(g);return x}function f(){var x=s();if(!(Us!=e.charAt(0)||Bs!=e.charAt(1))){for(var g=2;Kt!=e.charAt(g)&&(Bs!=e.charAt(g)||Us!=e.charAt(g+1));)++g;if(g+=2,Kt===e.charAt(g-1))return o("End of comment missing");var v=e.slice(2,g-2);return r+=2,a(v),e=e.slice(g),r+=2,x({type:Qu,comment:v})}}function m(){var x=s(),g=l(Wu);if(g){if(f(),!l(qu))return o("property missing ':'");var v=l(Xu),p=x({type:Zu,property:zs(g[0].replace(Vs,Kt)),value:v?zs(v[0].replace(Vs,Kt)):Kt});return l(Gu),p}}function C(){var x=[];d(x);for(var g;g=m();)g!==!1&&(x.push(g),d(x));return x}return u(),C()};function zs(e){return e?e.replace(Yu,Kt):Kt}var ed=ce&&ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(is,"__esModule",{value:!0});var td=ed(Ju);function nd(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,td.default)(e),a=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var c=s.property,o=s.value;a?t(c,o,s):o&&(n=n||{},n[c]=o)}}),n}is.default=nd;var qr={};Object.defineProperty(qr,"__esModule",{value:!0});qr.camelCase=void 0;var rd=/^--[a-zA-Z0-9-]+$/,ad=/-([a-z])/g,sd=/^[^-]+$/,id=/^-(webkit|moz|ms|o|khtml)-/,od=/^-(ms)-/,ld=function(e){return!e||sd.test(e)||rd.test(e)},cd=function(e,t){return t.toUpperCase()},$s=function(e,t){return"".concat(t,"-")},ud=function(e,t){return t===void 0&&(t={}),ld(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(od,$s):e=e.replace(id,$s),e.replace(ad,cd))};qr.camelCase=ud;var dd=ce&&ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},fd=dd(is),hd=qr;function ba(e,t){var n={};return!e||typeof e!="string"||(0,fd.default)(e,function(r,a){r&&a&&(n[(0,hd.camelCase)(r,t)]=a)}),n}ba.default=ba;var md=ba;(function(e){var t=ce&&ce.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=b,r=t(md),a=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function s(d,f){return d.includes("-")?!a.has(d):!!(f&&typeof f.is=="string")}e.isCustomComponent=s;var c={reactCompat:!0};function o(d,f){if(typeof d=="string"){if(!d.trim()){f.style={};return}try{f.style=(0,r.default)(d,c)}catch{f.style={}}}}e.setStyleProp=o,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var l=function(d){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(d.name)};e.canTextBeChildOfNode=l;var u=function(d){return d};e.returnFirstArg=u})(ss);Object.defineProperty(zr,"__esModule",{value:!0});var Rn=lt,Hs=ss,pd=["checked","value"],gd=["input","select","textarea"],vd={reset:!0,submit:!0};function yd(e,t){e===void 0&&(e={});var n={},r=!!(e.type&&vd[e.type]);for(var a in e){var s=e[a];if((0,Rn.isCustomAttribute)(a)){n[a]=s;continue}var c=a.toLowerCase(),o=Ws(c);if(o){var l=(0,Rn.getPropertyInfo)(o);switch(pd.includes(o)&&gd.includes(t)&&!r&&(o=Ws("default"+c)),n[o]=s,l&&l.type){case Rn.BOOLEAN:n[o]=!0;break;case Rn.OVERLOADED_BOOLEAN:s===""&&(n[o]=!0);break}continue}Hs.PRESERVE_CUSTOM_ATTRIBUTES&&(n[a]=s)}return(0,Hs.setStyleProp)(e.style,n),n}zr.default=yd;function Ws(e){return Rn.possibleStandardNames[e]}var os={},bd=ce&&ce.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(os,"__esModule",{value:!0});var ia=b,xd=bd(zr),Dn=ss,wd={cloneElement:ia.cloneElement,createElement:ia.createElement,isValidElement:ia.isValidElement};function Mo(e,t){t===void 0&&(t={});for(var n=[],r=typeof t.replace=="function",a=t.transform||Dn.returnFirstArg,s=t.library||wd,c=s.cloneElement,o=s.createElement,l=s.isValidElement,u=e.length,d=0;d<u;d++){var f=e[d];if(r){var m=t.replace(f,d);if(l(m)){u>1&&(m=c(m,{key:m.key||d})),n.push(a(m,f,d));continue}}if(f.type==="text"){var C=!f.data.trim().length;if(C&&f.parent&&!(0,Dn.canTextBeChildOfNode)(f.parent)||t.trim&&C)continue;n.push(a(f.data,f,d));continue}var x=f,g={};Sd(x)?((0,Dn.setStyleProp)(x.attribs.style,x.attribs),g=x.attribs):x.attribs&&(g=(0,xd.default)(x.attribs,x.name));var v=void 0;switch(f.type){case"script":case"style":f.children[0]&&(g.dangerouslySetInnerHTML={__html:f.children[0].data});break;case"tag":f.name==="textarea"&&f.children[0]?g.defaultValue=f.children[0].data:f.children&&f.children.length&&(v=Mo(f.children,t));break;default:continue}u>1&&(g.key=d),n.push(a(o(f.name,g,v),f,d))}return n.length===1?n[0]:n}os.default=Mo;function Sd(e){return Dn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,Dn.isCustomComponent)(e.name,e.attribs)}var Po={},Y={},zt=ce&&ce.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,a){r.__proto__=a}||function(r,a){for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(r[s]=a[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ln=ce&&ce.__assign||function(){return Ln=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a])}return e},Ln.apply(this,arguments)};Object.defineProperty(Y,"__esModule",{value:!0});Y.cloneNode=Y.hasChildren=Y.isDocument=Y.isDirective=Y.isComment=Y.isText=Y.isCDATA=Y.isTag=Y.Element=Y.Document=Y.CDATA=Y.NodeWithChildren=Y.ProcessingInstruction=Y.Comment=Y.Text=Y.DataNode=Y.Node=void 0;var Be=ar,ls=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),cs(this,t)},e}();Y.Node=ls;var Xr=function(e){zt(t,e);function t(n){var r=e.call(this)||this;return r.data=n,r}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(ls);Y.DataNode=Xr;var Oo=function(e){zt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Be.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Xr);Y.Text=Oo;var Ro=function(e){zt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Be.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Xr);Y.Comment=Ro;var No=function(e){zt(t,e);function t(n,r){var a=e.call(this,r)||this;return a.name=n,a.type=Be.ElementType.Directive,a}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Xr);Y.ProcessingInstruction=No;var Gr=function(e){zt(t,e);function t(n){var r=e.call(this)||this;return r.children=n,r}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(ls);Y.NodeWithChildren=Gr;var Fo=function(e){zt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Be.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Gr);Y.CDATA=Fo;var Do=function(e){zt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Be.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Gr);Y.Document=Do;var Lo=function(e){zt(t,e);function t(n,r,a,s){a===void 0&&(a=[]),s===void 0&&(s=n==="script"?Be.ElementType.Script:n==="style"?Be.ElementType.Style:Be.ElementType.Tag);var c=e.call(this,a)||this;return c.name=n,c.attribs=r,c.type=s,c}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(r){var a,s;return{name:r,value:n.attribs[r],namespace:(a=n["x-attribsNamespace"])===null||a===void 0?void 0:a[r],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[r]}})},enumerable:!1,configurable:!0}),t}(Gr);Y.Element=Lo;function Vo(e){return(0,Be.isTag)(e)}Y.isTag=Vo;function Uo(e){return e.type===Be.ElementType.CDATA}Y.isCDATA=Uo;function Bo(e){return e.type===Be.ElementType.Text}Y.isText=Bo;function zo(e){return e.type===Be.ElementType.Comment}Y.isComment=zo;function $o(e){return e.type===Be.ElementType.Directive}Y.isDirective=$o;function Ho(e){return e.type===Be.ElementType.Root}Y.isDocument=Ho;function Cd(e){return Object.prototype.hasOwnProperty.call(e,"children")}Y.hasChildren=Cd;function cs(e,t){t===void 0&&(t=!1);var n;if(Bo(e))n=new Oo(e.data);else if(zo(e))n=new Ro(e.data);else if(Vo(e)){var r=t?oa(e.children):[],a=new Lo(e.name,Ln({},e.attribs),r);r.forEach(function(l){return l.parent=a}),e.namespace!=null&&(a.namespace=e.namespace),e["x-attribsNamespace"]&&(a["x-attribsNamespace"]=Ln({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(a["x-attribsPrefix"]=Ln({},e["x-attribsPrefix"])),n=a}else if(Uo(e)){var r=t?oa(e.children):[],s=new Fo(r);r.forEach(function(u){return u.parent=s}),n=s}else if(Ho(e)){var r=t?oa(e.children):[],c=new Do(r);r.forEach(function(u){return u.parent=c}),e["x-mode"]&&(c["x-mode"]=e["x-mode"]),n=c}else if($o(e)){var o=new No(e.name,e.data);e["x-name"]!=null&&(o["x-name"]=e["x-name"],o["x-publicId"]=e["x-publicId"],o["x-systemId"]=e["x-systemId"]),n=o}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Y.cloneNode=cs;function oa(e){for(var t=e.map(function(r){return cs(r,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ce&&ce.__createBinding||(Object.create?function(o,l,u,d){d===void 0&&(d=u);var f=Object.getOwnPropertyDescriptor(l,u);(!f||("get"in f?!l.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return l[u]}}),Object.defineProperty(o,d,f)}:function(o,l,u,d){d===void 0&&(d=u),o[d]=l[u]}),n=ce&&ce.__exportStar||function(o,l){for(var u in o)u!=="default"&&!Object.prototype.hasOwnProperty.call(l,u)&&t(l,o,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var r=ar,a=Y;n(Y,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},c=function(){function o(l,u,d){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(d=u,u=s),typeof l=="object"&&(u=l,l=void 0),this.callback=l??null,this.options=u??s,this.elementCB=d??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new a.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,u){var d=this.options.xmlMode?r.ElementType.Tag:void 0,f=new a.Element(l,u,void 0,d);this.addNode(f),this.tagStack.push(f)},o.prototype.ontext=function(l){var u=this.lastNode;if(u&&u.type===r.ElementType.Text)u.data+=l,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var d=new a.Text(l);this.addNode(d),this.lastNode=d}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===r.ElementType.Comment){this.lastNode.data+=l;return}var u=new a.Comment(l);this.addNode(u),this.lastNode=u},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new a.Text(""),u=new a.CDATA([l]);this.addNode(u),l.parent=u,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,u){var d=new a.ProcessingInstruction(l,u);this.addNode(d)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var u=this.tagStack[this.tagStack.length-1],d=u.children[u.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),u.children.push(l),d&&(l.prev=d,d.next=l),l.parent=u,this.lastNode=null},o}();e.DomHandler=c,e.default=c})(Po);(function(e){var t=ce&&ce.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(Za);e.htmlToDOM=n.default;var r=t(zr);e.attributesToProps=r.default;var a=t(os);e.domToReact=a.default;var s=Po;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return s.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return s.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return s.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return s.Text}});var c={lowerCaseAttributeNames:!1};function o(l,u){if(typeof l!="string")throw new TypeError("First argument must be a string");return l?(0,a.default)((0,n.default)(l,(u==null?void 0:u.htmlparser2)||c),u):[]}e.default=o})(uo);const qs=Fa(uo),jd=qs.default||qs;function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}function us(e,t){if(e==null)return{};var n,r,a={},s=Object.keys(e);for(r=0;r<s.length;r++)t.indexOf(n=s[r])>=0||(a[n]=e[n]);return a}function Cr(e){var t=b.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(r){n[r]=function(){var a;return(a=t.fn[r]).call.apply(a,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function xa(e){return b.useReducer(function(t,n){return Oe({},t,typeof n=="function"?n(t):n)},e)}b.createContext(void 0);var Tt=typeof window<"u"&&"ontouchstart"in window,wa=function(e,t,n){return Math.max(Math.min(e,n),t)},pr=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),wa(e,1*(1-n),Math.max(6,t)*(1+n))},Sa=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?b.useEffect:b.useLayoutEffect;function mn(e,t,n){var r=b.useRef(t);r.current=t,b.useEffect(function(){function a(s){r.current(s)}return e&&window.addEventListener(e,a,n),function(){e&&window.removeEventListener(e,a)}},[e])}var Ed=["container"];function Td(e){var t=e.container,n=t===void 0?document.body:t,r=us(e,Ed);return Ri.createPortal(J.createElement("div",Oe({},r)),n)}function _d(e){return J.createElement("svg",Oe({width:"44",height:"44",viewBox:"0 0 768 768"},e),J.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function kd(e){return J.createElement("svg",Oe({width:"44",height:"44",viewBox:"0 0 768 768"},e),J.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function Ad(e){return J.createElement("svg",Oe({width:"44",height:"44",viewBox:"0 0 768 768"},e),J.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function Id(){return b.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function Xs(e){var t=e.touches[0],n=t.clientX,r=t.clientY;if(e.touches.length>=2){var a=e.touches[1],s=a.clientX,c=a.clientY;return[(n+s)/2,(r+c)/2,Math.sqrt(Math.pow(s-n,2)+Math.pow(c-r,2))]}return[n,r,0]}var Nt=function(e,t,n,r){var a=n*t,s=(a-r)/2,c=void 0,o=e;return a<=r?(c=1,o=0):e>0&&s-e<=0?(c=2,o=s):e<0&&s+e<=0&&(c=3,o=-s),[c,o]};function la(e,t,n,r,a,s,c,o,l,u){c===void 0&&(c=innerWidth/2),o===void 0&&(o=innerHeight/2),l===void 0&&(l=0),u===void 0&&(u=0);var d=Nt(e,s,n,innerWidth)[0],f=Nt(t,s,r,innerHeight),m=innerWidth/2,C=innerHeight/2;return{x:c-s/a*(c-(m+e))-m+(r/n>=3&&n*s===innerWidth?0:d?l/2:l),y:o-s/a*(o-(C+t))-C+(f[0]?u/2:u),lastCX:c,lastCY:o}}function Ca(e,t,n){var r=e%180!=0;return r?[n,t,r]:[t,n,r]}function ca(e,t,n){var r=Ca(n,innerWidth,innerHeight),a=r[0],s=r[1],c=0,o=a,l=s,u=e/t*s,d=t/e*a;return e<a&&t<s?(o=e,l=t):e<a&&t>=s?o=u:e>=a&&t<s||e/t>a/s?l=d:t/e>=3&&!r[2]?c=((l=d)-s)/2:o=u,{width:o,height:l,x:0,y:c,pause:!0}}function gr(e,t){var n=t.leading,r=n!==void 0&&n,a=t.maxWait,s=t.wait,c=s===void 0?a||0:s,o=b.useRef(e);o.current=e;var l=b.useRef(0),u=b.useRef(),d=function(){return u.current&&clearTimeout(u.current)},f=b.useCallback(function(){var m=[].slice.call(arguments),C=Date.now();function x(){l.current=C,d(),o.current.apply(null,m)}var g=l.current,v=C-g;if(g===0&&(r&&x(),l.current=C),a!==void 0){if(v>a)return void x()}else v<c&&(l.current=C);d(),u.current=setTimeout(function(){x(),l.current=0},c)},[c,a,r]);return f.cancel=d,f}var Gs=function(e,t,n){return Qt(e,t,n,100,function(r){return r},function(){return Qt(t,e,n)})},Md=function(e){return 1-Math.pow(1-e,4)};function Qt(e,t,n,r,a,s){r===void 0&&(r=400),a===void 0&&(a=Md);var c=t-e;if(c!==0){var o=Date.now(),l=0,u=function(){var f=Math.min(1,(Date.now()-o)/r);n(e+a(f)*c)&&f<1?d():(cancelAnimationFrame(l),f>=1&&s&&s())};d()}function d(){l=requestAnimationFrame(u)}}var Pd={T:0,L:0,W:0,H:0,FIT:void 0},Wo=function(){var e=b.useRef(!1);return b.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},Od=["className"];function Rd(e){var t=e.className,n=us(e,Od);return J.createElement("div",Oe({className:"PhotoView__Spinner "+t},n),J.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},J.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),J.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var Nd=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function Fd(e){var t=e.src,n=e.loaded,r=e.broken,a=e.className,s=e.onPhotoLoad,c=e.loadingElement,o=e.brokenElement,l=us(e,Nd),u=Wo();return t&&!r?J.createElement(J.Fragment,null,J.createElement("img",Oe({className:"PhotoView__Photo"+(a?" "+a:""),src:t,onLoad:function(d){var f=d.target;u.current&&s({loaded:!0,naturalWidth:f.naturalWidth,naturalHeight:f.naturalHeight})},onError:function(){u.current&&s({broken:!0})},alt:""},l)),!n&&(J.createElement("span",{className:"PhotoView__icon"},c)||J.createElement(Rd,{className:"PhotoView__icon"}))):o?J.createElement("span",{className:"PhotoView__icon"},typeof o=="function"?o({src:t}):o):null}var Dd={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function Ld(e){var t=e.item,n=t.src,r=t.render,a=t.width,s=a===void 0?0:a,c=t.height,o=c===void 0?0:c,l=t.originRef,u=e.visible,d=e.speed,f=e.easing,m=e.wrapClassName,C=e.className,x=e.style,g=e.loadingElement,v=e.brokenElement,p=e.onPhotoTap,S=e.onMaskTap,w=e.onReachMove,_=e.onReachUp,E=e.onPhotoResize,P=e.isActive,k=e.expose,K=xa(Dd),A=K[0],L=K[1],U=b.useRef(0),ie=Wo(),le=A.naturalWidth,Z=le===void 0?s:le,ue=A.naturalHeight,be=ue===void 0?o:ue,Qe=A.width,Re=Qe===void 0?s:Qe,vt=A.height,y=vt===void 0?o:vt,h=A.loaded,I=h===void 0?!n:h,O=A.broken,M=A.x,D=A.y,N=A.touched,R=A.stopRaf,B=A.maskTouched,z=A.rotate,$=A.scale,te=A.CX,re=A.CY,de=A.lastX,W=A.lastY,q=A.lastCX,_e=A.lastCY,pe=A.lastScale,Ce=A.touchTime,Ie=A.touchLength,ge=A.pause,He=A.reach,Ze=Cr({onScale:function(j){return Q(pr(j))},onRotate:function(j){z!==j&&(k({rotate:j}),L(Oe({rotate:j},ca(Z,be,j))))}});function Q(j,V,oe){$!==j&&(k({scale:j}),L(Oe({scale:j},la(M,D,Re,y,$,j,V,oe),j<=1&&{x:0,y:0})))}var ae=gr(function(j,V,oe){if(oe===void 0&&(oe=0),(N||B)&&P){var Ht=Ca(z,Re,y),yt=Ht[0],Je=Ht[1];if(oe===0&&U.current===0){var Me=Math.abs(j-te)<=20,ze=Math.abs(V-re)<=20;if(Me&&ze)return void L({lastCX:j,lastCY:V});U.current=Me?V>re?3:2:1}var Wt=j-q,qt=V-_e,et=void 0;if(oe===0){var Xt=Nt(Wt+de,$,yt,innerWidth)[0],on=Nt(qt+W,$,Je,innerHeight);et=function(It,xt,wt,ut){return xt&&It===1||ut==="x"?"x":wt&&It>1||ut==="y"?"y":void 0}(U.current,Xt,on[0],He),et!==void 0&&w(et,j,V,$)}if(et==="x"||B)return void L({reach:"x"});var bt=pr($+(oe-Ie)/100/2*$,Z/Re,.2);k({scale:bt}),L(Oe({touchLength:oe,reach:et,scale:bt},la(M,D,Re,y,$,bt,j,V,Wt,qt)))}},{maxWait:8});function ye(j){return!R&&!N&&(ie.current&&L(Oe({},j,{pause:u})),ie.current)}var fe,je,We,kt,$t,At,rn,Ne,lr=($t=function(j){return ye({x:j})},At=function(j){return ye({y:j})},rn=function(j){return ie.current&&(k({scale:j}),L({scale:j})),!N&&ie.current},Ne=Cr({X:function(j){return $t(j)},Y:function(j){return At(j)},S:function(j){return rn(j)}}),function(j,V,oe,Ht,yt,Je,Me,ze,Wt,qt,et){var Xt=Ca(qt,yt,Je),on=Xt[0],bt=Xt[1],It=Nt(j,ze,on,innerWidth),xt=It[0],wt=It[1],ut=Nt(V,ze,bt,innerHeight),ln=ut[0],ur=ut[1],cn=Date.now()-et;if(cn>=200||ze!=Me||Math.abs(Wt-Me)>1){var Mt=la(j,V,yt,Je,Me,ze),St=Mt.x,Gt=Mt.y,qe=xt?wt:St!==j?St:null,un=ln?ur:Gt!==V?Gt:null;return qe!==null&&Qt(j,qe,Ne.X),un!==null&&Qt(V,un,Ne.Y),void(ze!=Me&&Qt(Me,ze,Ne.S))}var Yt=(j-oe)/cn,Pt=(V-Ht)/cn,Ot=Math.sqrt(Math.pow(Yt,2)+Math.pow(Pt,2)),Ct=!1,jt=!1;(function(tt,Fe){var De=tt,Et=0,nt=void 0,Xe=0,dn=function(kn){nt||(nt=kn);var An=kn-nt,Es=Math.sign(tt),Ts=-.001*Es,_s=Math.sign(-De)*Math.pow(De,2)*2e-4,Al=De*An+(Ts+_s)*Math.pow(An,2)/2;Et+=Al,nt=kn,Es*(De+=(Ts+_s)*An)<=0?Ge():Fe(Et)?dt():Ge()};function dt(){Xe=requestAnimationFrame(dn)}function Ge(){cancelAnimationFrame(Xe)}dt()})(Ot,function(tt){var Fe=j+tt*(Yt/Ot),De=V+tt*(Pt/Ot),Et=Nt(Fe,Me,on,innerWidth),nt=Et[0],Xe=Et[1],dn=Nt(De,Me,bt,innerHeight),dt=dn[0],Ge=dn[1];if(nt&&!Ct&&(Ct=!0,xt?Qt(Fe,Xe,Ne.X):Gs(Xe,Fe+(Fe-Xe),Ne.X)),dt&&!jt&&(jt=!0,ln?Qt(De,Ge,Ne.Y):Gs(Ge,De+(De-Ge),Ne.Y)),Ct&&jt)return!1;var kn=Ct||Ne.X(Xe),An=jt||Ne.Y(Ge);return kn&&An})}),an=(fe=p,je=function(j,V){He||Q($!==1?1:Math.max(2,Z/Re),j,V)},We=b.useRef(0),kt=gr(function(){We.current=0,fe.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var j=[].slice.call(arguments);We.current+=1,kt.apply(void 0,j),We.current>=2&&(kt.cancel(),We.current=0,je.apply(void 0,j))});function sn(j,V){if(U.current=0,(N||B)&&P){L({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var oe=pr($,Z/Re);if(lr(M,D,de,W,Re,y,$,oe,pe,z,Ce),_(j,V),te===j&&re===V){if(N)return void an(j,V);B&&S(j,V)}}}function _n(j,V,oe){oe===void 0&&(oe=0),L({touched:!0,CX:j,CY:V,lastCX:j,lastCY:V,lastX:M,lastY:D,lastScale:$,touchLength:oe,touchTime:Date.now()})}function cr(j){L({maskTouched:!0,CX:j.clientX,CY:j.clientY,lastX:M,lastY:D})}mn(Tt?void 0:"mousemove",function(j){j.preventDefault(),ae(j.clientX,j.clientY)}),mn(Tt?void 0:"mouseup",function(j){sn(j.clientX,j.clientY)}),mn(Tt?"touchmove":void 0,function(j){j.preventDefault();var V=Xs(j);ae.apply(void 0,V)},{passive:!1}),mn(Tt?"touchend":void 0,function(j){var V=j.changedTouches[0];sn(V.clientX,V.clientY)},{passive:!1}),mn("resize",gr(function(){I&&!N&&(L(ca(Z,be,z)),E())},{maxWait:8})),Sa(function(){P&&k(Oe({scale:$,rotate:z},Ze))},[P]);var ct=function(j,V,oe,Ht,yt,Je,Me,ze,Wt,qt){var et=function(St,Gt,qe,un,Yt){var Pt=b.useRef(!1),Ot=xa({lead:!0,scale:qe}),Ct=Ot[0],jt=Ct.lead,tt=Ct.scale,Fe=Ot[1],De=gr(function(Et){try{return Yt(!0),Fe({lead:!1,scale:Et}),Promise.resolve()}catch(nt){return Promise.reject(nt)}},{wait:un});return Sa(function(){Pt.current?(Yt(!1),Fe({lead:!0}),De(qe)):Pt.current=!0},[qe]),jt?[St*tt,Gt*tt,qe/tt]:[St*qe,Gt*qe,1]}(Je,Me,ze,Wt,qt),Xt=et[0],on=et[1],bt=et[2],It=function(St,Gt,qe,un,Yt){var Pt=b.useState(Pd),Ot=Pt[0],Ct=Pt[1],jt=b.useState(0),tt=jt[0],Fe=jt[1],De=b.useRef(),Et=Cr({OK:function(){return St&&Fe(4)}});function nt(Xe){Yt(!1),Fe(Xe)}return b.useEffect(function(){if(De.current||(De.current=Date.now()),qe){if(function(Xe,dn){var dt=Xe&&Xe.current;if(dt&&dt.nodeType===1){var Ge=dt.getBoundingClientRect();dn({T:Ge.top,L:Ge.left,W:Ge.width,H:Ge.height,FIT:dt.tagName==="IMG"?getComputedStyle(dt).objectFit:void 0})}}(Gt,Ct),St)return Date.now()-De.current<250?(Fe(1),requestAnimationFrame(function(){Fe(2),requestAnimationFrame(function(){return nt(3)})}),void setTimeout(Et.OK,un)):void Fe(4);nt(5)}},[St,qe]),[tt,Ot]}(j,V,oe,Wt,qt),xt=It[0],wt=It[1],ut=wt.W,ln=wt.FIT,ur=innerWidth/2,cn=innerHeight/2,Mt=xt<3||xt>4;return[Mt?ut?wt.L:ur:Ht+(ur-Je*ze/2),Mt?ut?wt.T:cn:yt+(cn-Me*ze/2),Xt,Mt&&ln?Xt*(wt.H/ut):on,xt===0?bt:Mt?ut/(Je*ze)||.01:bt,Mt?ln?1:0:1,xt,ln]}(u,l,I,M,D,Re,y,$,d,function(j){return L({pause:j})}),X=ct[4],me=ct[6],Ee="transform "+d+"ms "+f,we={className:C,onMouseDown:Tt?void 0:function(j){j.stopPropagation(),j.button===0&&_n(j.clientX,j.clientY,0)},onTouchStart:Tt?function(j){j.stopPropagation(),_n.apply(void 0,Xs(j))}:void 0,onWheel:function(j){if(!He){var V=pr($-j.deltaY/100/2,Z/Re);L({stopRaf:!0}),Q(V,j.clientX,j.clientY)}},style:{width:ct[2],height:ct[3],opacity:ct[5],objectFit:me===4?void 0:ct[7],transform:z?"rotate("+z+"deg)":void 0,transition:me>2?Ee+", opacity "+d+"ms ease, height "+(me<4?d/2:me>4?d:0)+"ms "+f:void 0}};return J.createElement("div",{className:"PhotoView__PhotoWrap"+(m?" "+m:""),style:x,onMouseDown:!Tt&&P?cr:void 0,onTouchStart:Tt&&P?function(j){return cr(j.touches[0])}:void 0},J.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+X+", 0, 0, "+X+", "+ct[0]+", "+ct[1]+")",transition:N||ge?void 0:Ee,willChange:P?"transform":void 0}},n?J.createElement(Fd,Oe({src:n,loaded:I,broken:O},we,{onPhotoLoad:function(j){L(Oe({},j,j.loaded&&ca(j.naturalWidth||0,j.naturalHeight||0,z)))},loadingElement:g,brokenElement:v})):r&&r({attrs:we,scale:X,rotate:z})))}var Ys={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function Vd(e){var t=e.loop,n=t===void 0?3:t,r=e.speed,a=e.easing,s=e.photoClosable,c=e.maskClosable,o=c===void 0||c,l=e.maskOpacity,u=l===void 0?1:l,d=e.pullClosable,f=d===void 0||d,m=e.bannerVisible,C=m===void 0||m,x=e.overlayRender,g=e.toolbarRender,v=e.className,p=e.maskClassName,S=e.photoClassName,w=e.photoWrapClassName,_=e.loadingElement,E=e.brokenElement,P=e.images,k=e.index,K=k===void 0?0:k,A=e.onIndexChange,L=e.visible,U=e.onClose,ie=e.afterClose,le=e.portalContainer,Z=xa(Ys),ue=Z[0],be=Z[1],Qe=b.useState(0),Re=Qe[0],vt=Qe[1],y=ue.x,h=ue.touched,I=ue.pause,O=ue.lastCX,M=ue.lastCY,D=ue.bg,N=D===void 0?u:D,R=ue.lastBg,B=ue.overlay,z=ue.minimal,$=ue.scale,te=ue.rotate,re=ue.onScale,de=ue.onRotate,W=e.hasOwnProperty("index"),q=W?K:Re,_e=W?A:vt,pe=b.useRef(q),Ce=P.length,Ie=P[q],ge=typeof n=="boolean"?n:Ce>n,He=function(X,me){var Ee=b.useReducer(function(oe){return!oe},!1)[1],we=b.useRef(0),j=function(oe,Ht){var yt=b.useRef(oe);function Je(Me){yt.current=Me}return b.useMemo(function(){(function(Me){X?(Me(X),we.current=1):we.current=2})(Je)},[oe]),[yt.current,Je]}(X),V=j[1];return[j[0],we.current,function(){Ee(),we.current===2&&(V(!1),me&&me()),we.current=0}]}(L,ie),Ze=He[0],Q=He[1],ae=He[2];Sa(function(){if(Ze)return be({pause:!0,x:q*-(innerWidth+20)}),void(pe.current=q);be(Ys)},[Ze]);var ye=Cr({close:function(X){de&&de(0),be({overlay:!0,lastBg:N}),U(X)},changeIndex:function(X,me){me===void 0&&(me=!1);var Ee=ge?pe.current+(X-q):X,we=Ce-1,j=wa(Ee,0,we),V=ge?Ee:j,oe=innerWidth+20;be({touched:!1,lastCX:void 0,lastCY:void 0,x:-oe*V,pause:me}),pe.current=V,_e&&_e(ge?X<0?we:X>we?0:X:j)}}),fe=ye.close,je=ye.changeIndex;function We(X){return X?fe():be({overlay:!B})}function kt(){be({x:-(innerWidth+20)*q,lastCX:void 0,lastCY:void 0,pause:!0}),pe.current=q}function $t(X,me,Ee,we){X==="x"?function(j){if(O!==void 0){var V=j-O,oe=V;!ge&&(q===0&&V>0||q===Ce-1&&V<0)&&(oe=V/2),be({touched:!0,lastCX:O,x:-(innerWidth+20)*pe.current+oe,pause:!1})}else be({touched:!0,lastCX:j,x:y,pause:!1})}(me):X==="y"&&function(j,V){if(M!==void 0){var oe=u===null?null:wa(u,.01,u-Math.abs(j-M)/100/4);be({touched:!0,lastCY:M,bg:V===1?oe:u,minimal:V===1})}else be({touched:!0,lastCY:j,bg:N,minimal:!0})}(Ee,we)}function At(X,me){var Ee=X-(O??X),we=me-(M??me),j=!1;if(Ee<-40)je(q+1);else if(Ee>40)je(q-1);else{var V=-(innerWidth+20)*pe.current;Math.abs(we)>100&&z&&f&&(j=!0,fe()),be({touched:!1,x:V,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!j||B})}}mn("keydown",function(X){if(L)switch(X.key){case"ArrowLeft":je(q-1,!0);break;case"ArrowRight":je(q+1,!0);break;case"Escape":fe()}});var rn=function(X,me,Ee){return b.useMemo(function(){var we=X.length;return Ee?X.concat(X).concat(X).slice(we+me-1,we+me+2):X.slice(Math.max(me-1,0),Math.min(me+2,we+1))},[X,me,Ee])}(P,q,ge);if(!Ze)return null;var Ne=B&&!Q,lr=L?N:R,an=re&&de&&{images:P,index:q,visible:L,onClose:fe,onIndexChange:je,overlayVisible:Ne,overlay:Ie&&Ie.overlay,scale:$,rotate:te,onScale:re,onRotate:de},sn=r?r(Q):400,_n=a?a(Q):"cubic-bezier(0.25, 0.8, 0.25, 1)",cr=r?r(3):600,ct=a?a(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return J.createElement(Td,{className:"PhotoView-Portal"+(Ne?"":" PhotoView-Slider__clean")+(L?"":" PhotoView-Slider__willClose")+(v?" "+v:""),role:"dialog",onClick:function(X){return X.stopPropagation()},container:le},L&&J.createElement(Id,null),J.createElement("div",{className:"PhotoView-Slider__Backdrop"+(p?" "+p:"")+(Q===1?" PhotoView-Slider__fadeIn":Q===2?" PhotoView-Slider__fadeOut":""),style:{background:lr?"rgba(0, 0, 0, "+lr+")":void 0,transitionTimingFunction:_n,transitionDuration:(h?0:sn)+"ms",animationDuration:sn+"ms"},onAnimationEnd:ae}),C&&J.createElement("div",{className:"PhotoView-Slider__BannerWrap"},J.createElement("div",{className:"PhotoView-Slider__Counter"},q+1," / ",Ce),J.createElement("div",{className:"PhotoView-Slider__BannerRight"},g&&an&&g(an),J.createElement(_d,{className:"PhotoView-Slider__toolbarIcon",onClick:fe}))),rn.map(function(X,me){var Ee=ge||q!==0?pe.current-1+me:q+me;return J.createElement(Ld,{key:ge?X.key+"/"+X.src+"/"+Ee:X.key,item:X,speed:sn,easing:_n,visible:L,onReachMove:$t,onReachUp:At,onPhotoTap:function(){return We(s)},onMaskTap:function(){return We(o)},wrapClassName:w,className:S,style:{left:(innerWidth+20)*Ee+"px",transform:"translate3d("+y+"px, 0px, 0)",transition:h||I?void 0:"transform "+cr+"ms "+ct},loadingElement:_,brokenElement:E,onPhotoResize:kt,isActive:pe.current===Ee,expose:be})}),!Tt&&C&&J.createElement(J.Fragment,null,(ge||q!==0)&&J.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return je(q-1,!0)}},J.createElement(kd,null)),(ge||q+1<Ce)&&J.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return je(q+1,!0)}},J.createElement(Ad,null))),x&&an&&J.createElement("div",{className:"PhotoView-Slider__Overlay"},x(an)))}const Ud=e=>{const n=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(n).map(r=>r.getAttribute("src"))},Bd=({info:e,handleEntryClick:t,getEntries:n})=>{const r=Te(m=>m.activeContent),{handleFetchContent:a,handleToggleStarred:s,handleToggleStatus:c}=Ka(),{handleLeftKey:o,handleRightKey:l,handleEscapeKey:u}=co(e,t,n);if(!r)return null;const d=r.status==="unread",f=r.starred;return i.jsxs(Se.Group,{className:"action-buttons",children:[i.jsx(Se,{icon:i.jsx(sc,{}),onClick:u,shape:"round",type:"primary"}),i.jsx(Se,{icon:d?i.jsx(Ni,{}):i.jsx(Fi,{}),onClick:()=>c(r),type:"primary"}),i.jsx(Se,{onClick:()=>s(r),type:"primary",icon:f?i.jsx(La,{style:{color:"#ffcd00"}}):i.jsx(Da,{})}),i.jsx(Se,{icon:i.jsx(ic,{}),onClick:o,type:"primary"}),i.jsx(Se,{icon:i.jsx(oc,{}),onClick:l,type:"primary"}),i.jsx(Se,{icon:i.jsx(lc,{}),onClick:a,shape:"round",type:"primary"})]})},zd=({url:e,text:t})=>{const[n,r]=b.useState(!1),a=()=>r(!0),s=()=>r(!1);return i.jsx(uc,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:a,onMouseLeave:s,children:t})},$d=({node:e,index:t,togglePhotoSlider:n})=>{const[r,a]=b.useState(!1),{isMobileView:s}=Vr();return i.jsx("div",{style:{textAlign:"center",position:"relative"},children:i.jsxs("div",{style:{display:"inline-block",position:"relative"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[i.jsx("img",{...e.attribs,alt:e.attribs.alt}),i.jsx(Se,{icon:i.jsx(dc,{}),style:{position:"absolute",top:30,right:10,backgroundColor:"rgba(0, 0, 0, 0.5)",opacity:s||r?1:0,transition:"opacity 0.3s"},onClick:c=>{c.preventDefault(),n(t)}})]})})},Hd=(e,t)=>({replace:n=>{if(n.type==="tag"&&n.name==="img"){const r=e.findIndex(a=>a===n.attribs.src);return i.jsx($d,{node:n,index:r,togglePhotoSlider:t})}return n}}),Wd=b.forwardRef(({info:e,handleEntryClick:t,getEntries:n,isFilteredEntriesUpdated:r,setIsFilteredEntriesUpdated:a},s)=>{const c=tr(),o=Te(P=>P.activeContent),l=ne(Ae),{articleWidth:u,fontSize:d}=l,{setIsArticleFocused:f}=b.useContext(gt),[m,C]=b.useState(!1),[x,g]=b.useState(0),v=P=>{g(P),C(k=>!k)};if(!o)return i.jsxs("div",{ref:s,className:"content-empty",children:[i.jsx(cc,{style:{fontSize:"64px"}}),i.jsx(F.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const p=Ud(o.content),S=Hd(p,v),w=jd(o.content,S),_=o.feed.category.id,E=o.feed.category.title;return i.jsxs("div",{className:"article-content",onBlur:()=>f(!1),onFocus:()=>f(!0),ref:s,children:[i.jsxs("div",{className:"scroll-container",children:[i.jsxs("div",{className:"article-header",style:{width:`${u}%`},children:[i.jsx(F.Title,{className:"article-title",heading:5,children:i.jsx("a",{href:o.url,target:"_blank",rel:"noopener noreferrer",children:o.title})}),i.jsxs("div",{className:"article-meta",children:[i.jsx(F.Text,{children:i.jsx(zd,{url:`/feed/${o.feed.id}`,text:o.feed.title})}),i.jsx(F.Text,{children:` - ${o.author}`}),i.jsx(F.Text,{children:i.jsx(Hn,{size:"small",onClick:()=>{c(`/category/${_}`)},style:{marginLeft:"10px",cursor:"pointer"},children:E})})]}),i.jsx(F.Text,{className:"article-date",children:yn(o.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),i.jsx(at,{})]}),i.jsxs("div",{className:"article-body",style:{fontSize:`${d}rem`,width:`${u}%`},children:[w,i.jsx(Vd,{images:p.map(P=>({src:P,key:P})),visible:m,onClose:()=>{C(!1),f(!0)},index:x,onIndexChange:g})]},o.id)]}),i.jsx(Bd,{info:e,handleEntryClick:t,getEntries:n,isFilteredEntriesUpdated:r,setIsFilteredEntriesUpdated:a})]})});var qd=Object.defineProperty,Xd=(e,t)=>{for(var n in t)qd(e,n,{get:t[n],enumerable:!0})},ot={};Xd(ot,{assign:()=>Kd,colors:()=>Vt,createStringInterpolator:()=>vs,skipAnimation:()=>Zo,to:()=>Qo,willAdvance:()=>ys});var ds=ir(),H=e=>sr(e,ds),fs=ir();H.write=e=>sr(e,fs);var Yr=ir();H.onStart=e=>sr(e,Yr);var hs=ir();H.onFrame=e=>sr(e,hs);var ms=ir();H.onFinish=e=>sr(e,ms);var gn=[];H.setTimeout=(e,t)=>{const n=H.now()+t,r=()=>{const s=gn.findIndex(c=>c.cancel==r);~s&&gn.splice(s,1),Lt-=~s?1:0},a={time:n,handler:e,cancel:r};return gn.splice(qo(n),0,a),Lt+=1,Xo(),a};var qo=e=>~(~gn.findIndex(t=>t.time>e)||~gn.length);H.cancel=e=>{Yr.delete(e),hs.delete(e),ms.delete(e),ds.delete(e),fs.delete(e)};H.sync=e=>{ja=!0,H.batchedUpdates(e),ja=!1};H.throttle=e=>{let t;function n(){try{e(...t)}finally{t=null}}function r(...a){t=a,H.onStart(n)}return r.handler=e,r.cancel=()=>{Yr.delete(n),t=null},r};var ps=typeof window<"u"?window.requestAnimationFrame:()=>{};H.use=e=>ps=e;H.now=typeof performance<"u"?()=>performance.now():Date.now;H.batchedUpdates=e=>e();H.catch=console.error;H.frameLoop="always";H.advance=()=>{H.frameLoop!=="demand"?console.warn("Cannot call the manual advancement of rafz whilst frameLoop is not set as demand"):Yo()};var Dt=-1,Lt=0,ja=!1;function sr(e,t){ja?(t.delete(e),e(0)):(t.add(e),Xo())}function Xo(){Dt<0&&(Dt=0,H.frameLoop!=="demand"&&ps(Go))}function Gd(){Dt=-1}function Go(){~Dt&&(ps(Go),H.batchedUpdates(Yo))}function Yo(){const e=Dt;Dt=H.now();const t=qo(Dt);if(t&&(Ko(gn.splice(0,t),n=>n.handler()),Lt-=t),!Lt){Gd();return}Yr.flush(),ds.flush(e?Math.min(64,Dt-e):16.667),hs.flush(),fs.flush(),ms.flush()}function ir(){let e=new Set,t=e;return{add(n){Lt+=t==e&&!e.has(n)?1:0,e.add(n)},delete(n){return Lt-=t==e&&e.has(n)?1:0,e.delete(n)},flush(n){t.size&&(e=new Set,Lt-=t.size,Ko(t,r=>r(n)&&e.add(r)),Lt+=e.size,t=e)}}}function Ko(e,t){e.forEach(n=>{try{t(n)}catch(r){H.catch(r)}})}function Ea(){}var Yd=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),T={arr:Array.isArray,obj:e=>!!e&&e.constructor.name==="Object",fun:e=>typeof e=="function",str:e=>typeof e=="string",num:e=>typeof e=="number",und:e=>e===void 0};function _t(e,t){if(T.arr(e)){if(!T.arr(t)||e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}return e===t}var ee=(e,t)=>e.forEach(t);function pt(e,t,n){if(T.arr(e)){for(let r=0;r<e.length;r++)t.call(n,e[r],`${r}`);return}for(const r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r)}var $e=e=>T.und(e)?[]:T.arr(e)?e:[e];function Vn(e,t){if(e.size){const n=Array.from(e);e.clear(),ee(n,t)}}var Nn=(e,...t)=>Vn(e,n=>n(...t)),gs=()=>typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),vs,Qo,Vt=null,Zo=!1,ys=Ea,Kd=e=>{e.to&&(Qo=e.to),e.now&&(H.now=e.now),e.colors!==void 0&&(Vt=e.colors),e.skipAnimation!=null&&(Zo=e.skipAnimation),e.createStringInterpolator&&(vs=e.createStringInterpolator),e.requestAnimationFrame&&H.use(e.requestAnimationFrame),e.batchedUpdates&&(H.batchedUpdates=e.batchedUpdates),e.willAdvance&&(ys=e.willAdvance),e.frameLoop&&(H.frameLoop=e.frameLoop)},Un=new Set,Ke=[],ua=[],Ir=0,Kr={get idle(){return!Un.size&&!Ke.length},start(e){Ir>e.priority?(Un.add(e),H.onStart(Qd)):(Jo(e),H(Ta))},advance:Ta,sort(e){if(Ir)H.onFrame(()=>Kr.sort(e));else{const t=Ke.indexOf(e);~t&&(Ke.splice(t,1),el(e))}},clear(){Ke=[],Un.clear()}};function Qd(){Un.forEach(Jo),Un.clear(),H(Ta)}function Jo(e){Ke.includes(e)||el(e)}function el(e){Ke.splice(Zd(Ke,t=>t.priority>e.priority),0,e)}function Ta(e){const t=ua;for(let n=0;n<Ke.length;n++){const r=Ke[n];Ir=r.priority,r.idle||(ys(r),r.advance(e),r.idle||t.push(r))}return Ir=0,ua=Ke,ua.length=0,Ke=t,Ke.length>0}function Zd(e,t){const n=e.findIndex(t);return n<0?e.length:n}var Jd=(e,t,n)=>Math.min(Math.max(n,e),t),ef={transparent:0,aliceblue:4042850303,antiquewhite:4209760255,aqua:16777215,aquamarine:2147472639,azure:4043309055,beige:4126530815,bisque:4293182719,black:255,blanchedalmond:4293643775,blue:65535,blueviolet:2318131967,brown:2771004159,burlywood:3736635391,burntsienna:3934150143,cadetblue:1604231423,chartreuse:2147418367,chocolate:3530104575,coral:4286533887,cornflowerblue:1687547391,cornsilk:4294499583,crimson:3692313855,cyan:16777215,darkblue:35839,darkcyan:9145343,darkgoldenrod:3095792639,darkgray:2846468607,darkgreen:6553855,darkgrey:2846468607,darkkhaki:3182914559,darkmagenta:2332068863,darkolivegreen:1433087999,darkorange:4287365375,darkorchid:2570243327,darkred:2332033279,darksalmon:3918953215,darkseagreen:2411499519,darkslateblue:1211993087,darkslategray:793726975,darkslategrey:793726975,darkturquoise:13554175,darkviolet:2483082239,deeppink:4279538687,deepskyblue:12582911,dimgray:1768516095,dimgrey:1768516095,dodgerblue:512819199,firebrick:2988581631,floralwhite:4294635775,forestgreen:579543807,fuchsia:4278255615,gainsboro:3705462015,ghostwhite:4177068031,gold:4292280575,goldenrod:3668254975,gray:2155905279,green:8388863,greenyellow:2919182335,grey:2155905279,honeydew:4043305215,hotpink:4285117695,indianred:3445382399,indigo:1258324735,ivory:4294963455,khaki:4041641215,lavender:3873897215,lavenderblush:4293981695,lawngreen:2096890111,lemonchiffon:4294626815,lightblue:2916673279,lightcoral:4034953471,lightcyan:3774873599,lightgoldenrodyellow:4210742015,lightgray:3553874943,lightgreen:2431553791,lightgrey:3553874943,lightpink:4290167295,lightsalmon:4288707327,lightseagreen:548580095,lightskyblue:2278488831,lightslategray:2005441023,lightslategrey:2005441023,lightsteelblue:2965692159,lightyellow:4294959359,lime:16711935,limegreen:852308735,linen:4210091775,magenta:4278255615,maroon:2147483903,mediumaquamarine:1724754687,mediumblue:52735,mediumorchid:3126187007,mediumpurple:2473647103,mediumseagreen:1018393087,mediumslateblue:2070474495,mediumspringgreen:16423679,mediumturquoise:1221709055,mediumvioletred:3340076543,midnightblue:421097727,mintcream:4127193855,mistyrose:4293190143,moccasin:4293178879,navajowhite:4292783615,navy:33023,oldlace:4260751103,olive:2155872511,olivedrab:1804477439,orange:4289003775,orangered:4282712319,orchid:3664828159,palegoldenrod:4008225535,palegreen:2566625535,paleturquoise:2951671551,palevioletred:3681588223,papayawhip:4293907967,peachpuff:4292524543,peru:3448061951,pink:4290825215,plum:3718307327,powderblue:2967529215,purple:2147516671,rebeccapurple:1714657791,red:4278190335,rosybrown:3163525119,royalblue:1097458175,saddlebrown:2336560127,salmon:4202722047,sandybrown:4104413439,seagreen:780883967,seashell:4294307583,sienna:2689740287,silver:3233857791,skyblue:2278484991,slateblue:1784335871,slategray:1887473919,slategrey:1887473919,snow:4294638335,springgreen:16744447,steelblue:1182971135,tan:3535047935,teal:8421631,thistle:3636451583,tomato:4284696575,turquoise:1088475391,violet:4001558271,wheat:4125012991,white:4294967295,whitesmoke:4126537215,yellow:4294902015,yellowgreen:2597139199},it="[-+]?\\d*\\.?\\d+",Mr=it+"%";function Qr(...e){return"\\(\\s*("+e.join(")\\s*,\\s*(")+")\\s*\\)"}var tf=new RegExp("rgb"+Qr(it,it,it)),nf=new RegExp("rgba"+Qr(it,it,it,it)),rf=new RegExp("hsl"+Qr(it,Mr,Mr)),af=new RegExp("hsla"+Qr(it,Mr,Mr,it)),sf=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,of=/^#([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,lf=/^#([0-9a-fA-F]{6})$/,cf=/^#([0-9a-fA-F]{8})$/;function uf(e){let t;return typeof e=="number"?e>>>0===e&&e>=0&&e<=4294967295?e:null:(t=lf.exec(e))?parseInt(t[1]+"ff",16)>>>0:Vt&&Vt[e]!==void 0?Vt[e]:(t=tf.exec(e))?(hn(t[1])<<24|hn(t[2])<<16|hn(t[3])<<8|255)>>>0:(t=nf.exec(e))?(hn(t[1])<<24|hn(t[2])<<16|hn(t[3])<<8|Zs(t[4]))>>>0:(t=sf.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+"ff",16)>>>0:(t=cf.exec(e))?parseInt(t[1],16)>>>0:(t=of.exec(e))?parseInt(t[1]+t[1]+t[2]+t[2]+t[3]+t[3]+t[4]+t[4],16)>>>0:(t=rf.exec(e))?(Ks(Qs(t[1]),vr(t[2]),vr(t[3]))|255)>>>0:(t=af.exec(e))?(Ks(Qs(t[1]),vr(t[2]),vr(t[3]))|Zs(t[4]))>>>0:null}function da(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function Ks(e,t,n){const r=n<.5?n*(1+t):n+t-n*t,a=2*n-r,s=da(a,r,e+1/3),c=da(a,r,e),o=da(a,r,e-1/3);return Math.round(s*255)<<24|Math.round(c*255)<<16|Math.round(o*255)<<8}function hn(e){const t=parseInt(e,10);return t<0?0:t>255?255:t}function Qs(e){return(parseFloat(e)%360+360)%360/360}function Zs(e){const t=parseFloat(e);return t<0?0:t>1?255:Math.round(t*255)}function vr(e){const t=parseFloat(e);return t<0?0:t>100?1:t/100}function Js(e){let t=uf(e);if(t===null)return e;t=t||0;const n=(t&4278190080)>>>24,r=(t&16711680)>>>16,a=(t&65280)>>>8,s=(t&255)/255;return`rgba(${n}, ${r}, ${a}, ${s})`}var qn=(e,t,n)=>{if(T.fun(e))return e;if(T.arr(e))return qn({range:e,output:t,extrapolate:n});if(T.str(e.output[0]))return vs(e);const r=e,a=r.output,s=r.range||[0,1],c=r.extrapolateLeft||r.extrapolate||"extend",o=r.extrapolateRight||r.extrapolate||"extend",l=r.easing||(u=>u);return u=>{const d=ff(u,s);return df(u,s[d],s[d+1],a[d],a[d+1],l,c,o,r.map)}};function df(e,t,n,r,a,s,c,o,l){let u=l?l(e):e;if(u<t){if(c==="identity")return u;c==="clamp"&&(u=t)}if(u>n){if(o==="identity")return u;o==="clamp"&&(u=n)}return r===a?r:t===n?e<=t?r:a:(t===-1/0?u=-u:n===1/0?u=u-t:u=(u-t)/(n-t),u=s(u),r===-1/0?u=-u:a===1/0?u=u+r:u=u*(a-r)+r,u)}function ff(e,t){for(var n=1;n<t.length-1&&!(t[n]>=e);++n);return n-1}var hf=(e,t="end")=>n=>{n=t==="end"?Math.min(n,.999):Math.max(n,.001);const r=n*e,a=t==="end"?Math.floor(r):Math.ceil(r);return Jd(0,1,a/e)},Pr=1.70158,yr=Pr*1.525,ei=Pr+1,ti=2*Math.PI/3,ni=2*Math.PI/4.5,br=e=>e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375,mf={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>1-(1-e)*(1-e),easeInOutQuad:e=>e<.5?2*e*e:1-Math.pow(-2*e+2,2)/2,easeInCubic:e=>e*e*e,easeOutCubic:e=>1-Math.pow(1-e,3),easeInOutCubic:e=>e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2,easeInQuart:e=>e*e*e*e,easeOutQuart:e=>1-Math.pow(1-e,4),easeInOutQuart:e=>e<.5?8*e*e*e*e:1-Math.pow(-2*e+2,4)/2,easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>1-Math.pow(1-e,5),easeInOutQuint:e=>e<.5?16*e*e*e*e*e:1-Math.pow(-2*e+2,5)/2,easeInSine:e=>1-Math.cos(e*Math.PI/2),easeOutSine:e=>Math.sin(e*Math.PI/2),easeInOutSine:e=>-(Math.cos(Math.PI*e)-1)/2,easeInExpo:e=>e===0?0:Math.pow(2,10*e-10),easeOutExpo:e=>e===1?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>e===0?0:e===1?1:e<.5?Math.pow(2,20*e-10)/2:(2-Math.pow(2,-20*e+10))/2,easeInCirc:e=>1-Math.sqrt(1-Math.pow(e,2)),easeOutCirc:e=>Math.sqrt(1-Math.pow(e-1,2)),easeInOutCirc:e=>e<.5?(1-Math.sqrt(1-Math.pow(2*e,2)))/2:(Math.sqrt(1-Math.pow(-2*e+2,2))+1)/2,easeInBack:e=>ei*e*e*e-Pr*e*e,easeOutBack:e=>1+ei*Math.pow(e-1,3)+Pr*Math.pow(e-1,2),easeInOutBack:e=>e<.5?Math.pow(2*e,2)*((yr+1)*2*e-yr)/2:(Math.pow(2*e-2,2)*((yr+1)*(e*2-2)+yr)+2)/2,easeInElastic:e=>e===0?0:e===1?1:-Math.pow(2,10*e-10)*Math.sin((e*10-10.75)*ti),easeOutElastic:e=>e===0?0:e===1?1:Math.pow(2,-10*e)*Math.sin((e*10-.75)*ti)+1,easeInOutElastic:e=>e===0?0:e===1?1:e<.5?-(Math.pow(2,20*e-10)*Math.sin((20*e-11.125)*ni))/2:Math.pow(2,-20*e+10)*Math.sin((20*e-11.125)*ni)/2+1,easeInBounce:e=>1-br(1-e),easeOutBounce:br,easeInOutBounce:e=>e<.5?(1-br(1-2*e))/2:(1+br(2*e-1))/2,steps:hf},Xn=Symbol.for("FluidValue.get"),xn=Symbol.for("FluidValue.observers"),Ye=e=>!!(e&&e[Xn]),Ve=e=>e&&e[Xn]?e[Xn]():e,ri=e=>e[xn]||null;function pf(e,t){e.eventObserved?e.eventObserved(t):e(t)}function Gn(e,t){const n=e[xn];n&&n.forEach(r=>{pf(r,t)})}var tl=class{constructor(e){if(!e&&!(e=this.get))throw Error("Unknown getter");gf(this,e)}},gf=(e,t)=>nl(e,Xn,t);function En(e,t){if(e[Xn]){let n=e[xn];n||nl(e,xn,n=new Set),n.has(t)||(n.add(t),e.observerAdded&&e.observerAdded(n.size,t))}return t}function Yn(e,t){const n=e[xn];if(n&&n.has(t)){const r=n.size-1;r?n.delete(t):e[xn]=null,e.observerRemoved&&e.observerRemoved(r,t)}}var nl=(e,t,n)=>Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0}),jr=/[+\-]?(?:0|[1-9]\d*)(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,vf=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d\.]+%?\))/gi,ai=new RegExp(`(${jr.source})(%|[a-z]+)`,"i"),yf=/rgba\(([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+), ([0-9\.-]+)\)/gi,Zr=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/,rl=e=>{const[t,n]=bf(e);if(!t||gs())return e;const r=window.getComputedStyle(document.documentElement).getPropertyValue(t);if(r)return r.trim();if(n&&n.startsWith("--")){const a=window.getComputedStyle(document.documentElement).getPropertyValue(n);return a||e}else{if(n&&Zr.test(n))return rl(n);if(n)return n}return e},bf=e=>{const t=Zr.exec(e);if(!t)return[,];const[,n,r]=t;return[n,r]},fa,xf=(e,t,n,r,a)=>`rgba(${Math.round(t)}, ${Math.round(n)}, ${Math.round(r)}, ${a})`,al=e=>{fa||(fa=Vt?new RegExp(`(${Object.keys(Vt).join("|")})(?!\\w)`,"g"):/^\b$/);const t=e.output.map(s=>Ve(s).replace(Zr,rl).replace(vf,Js).replace(fa,Js)),n=t.map(s=>s.match(jr).map(Number)),a=n[0].map((s,c)=>n.map(o=>{if(!(c in o))throw Error('The arity of each "output" value must be equal');return o[c]})).map(s=>qn({...e,output:s}));return s=>{var l;const c=!ai.test(t[0])&&((l=t.find(u=>ai.test(u)))==null?void 0:l.replace(jr,""));let o=0;return t[0].replace(jr,()=>`${a[o++](s)}${c||""}`).replace(yf,xf)}},bs="react-spring: ",sl=e=>{const t=e;let n=!1;if(typeof t!="function")throw new TypeError(`${bs}once requires a function parameter`);return(...r)=>{n||(t(...r),n=!0)}},wf=sl(console.warn);function Sf(){wf(`${bs}The "interpolate" function is deprecated in v9 (use "to" instead)`)}var Cf=sl(console.warn);function jf(){Cf(`${bs}Directly calling start instead of using the api object is deprecated in v9 (use ".start" instead), this will be removed in later 0.X.0 versions`)}function Jr(e){return T.str(e)&&(e[0]=="#"||/\d/.test(e)||!gs()&&Zr.test(e)||e in(Vt||{}))}var xs=gs()?b.useEffect:b.useLayoutEffect,Ef=()=>{const e=b.useRef(!1);return xs(()=>(e.current=!0,()=>{e.current=!1}),[]),e};function il(){const e=b.useState()[1],t=Ef();return()=>{t.current&&e(Math.random())}}function Tf(e,t){const[n]=b.useState(()=>({inputs:t,result:e()})),r=b.useRef(),a=r.current;let s=a;return s?t&&s.inputs&&_f(t,s.inputs)||(s={inputs:t,result:e()}):s=n,b.useEffect(()=>{r.current=s,a==n&&(n.inputs=n.result=void 0)},[s]),s.result}function _f(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}var ol=e=>b.useEffect(e,kf),kf=[];function si(e){const t=b.useRef();return b.useEffect(()=>{t.current=e}),t.current}var Kn=Symbol.for("Animated:node"),Af=e=>!!e&&e[Kn]===e,ft=e=>e&&e[Kn],ws=(e,t)=>Yd(e,Kn,t),ea=e=>e&&e[Kn]&&e[Kn].getPayload(),ll=class{constructor(){ws(this,this)}getPayload(){return this.payload||[]}},or=class extends ll{constructor(e){super(),this._value=e,this.done=!0,this.durationProgress=0,T.num(this._value)&&(this.lastPosition=this._value)}static create(e){return new or(e)}getPayload(){return[this]}getValue(){return this._value}setValue(e,t){return T.num(e)&&(this.lastPosition=e,t&&(e=Math.round(e/t)*t,this.done&&(this.lastPosition=e))),this._value===e?!1:(this._value=e,!0)}reset(){const{done:e}=this;this.done=!1,T.num(this._value)&&(this.elapsedTime=0,this.durationProgress=0,this.lastPosition=this._value,e&&(this.lastVelocity=null),this.v0=null)}},Qn=class extends or{constructor(e){super(0),this._string=null,this._toString=qn({output:[e,e]})}static create(e){return new Qn(e)}getValue(){const e=this._string;return e??(this._string=this._toString(this._value))}setValue(e){if(T.str(e)){if(e==this._string)return!1;this._string=e,this._value=1}else if(super.setValue(e))this._string=null;else return!1;return!0}reset(e){e&&(this._toString=qn({output:[this.getValue(),e]})),this._value=0,super.reset()}},Or={dependencies:null},ta=class extends ll{constructor(e){super(),this.source=e,this.setValue(e)}getValue(e){const t={};return pt(this.source,(n,r)=>{Af(n)?t[r]=n.getValue(e):Ye(n)?t[r]=Ve(n):e||(t[r]=n)}),t}setValue(e){this.source=e,this.payload=this._makePayload(e)}reset(){this.payload&&ee(this.payload,e=>e.reset())}_makePayload(e){if(e){const t=new Set;return pt(e,this._addToPayload,t),Array.from(t)}}_addToPayload(e){Or.dependencies&&Ye(e)&&Or.dependencies.add(e);const t=ea(e);t&&ee(t,n=>this.add(n))}},cl=class extends ta{constructor(e){super(e)}static create(e){return new cl(e)}getValue(){return this.source.map(e=>e.getValue())}setValue(e){const t=this.getPayload();return e.length==t.length?t.map((n,r)=>n.setValue(e[r])).some(Boolean):(super.setValue(e.map(If)),!0)}};function If(e){return(Jr(e)?Qn:or).create(e)}function _a(e){const t=ft(e);return t?t.constructor:T.arr(e)?cl:Jr(e)?Qn:or}var ii=(e,t)=>{const n=!T.fun(e)||e.prototype&&e.prototype.isReactComponent;return b.forwardRef((r,a)=>{const s=b.useRef(null),c=n&&b.useCallback(x=>{s.current=Of(a,x)},[a]),[o,l]=Pf(r,t),u=il(),d=()=>{const x=s.current;if(n&&!x)return;(x?t.applyAnimatedValues(x,o.getValue(!0)):!1)===!1&&u()},f=new Mf(d,l),m=b.useRef();xs(()=>(m.current=f,ee(l,x=>En(x,f)),()=>{m.current&&(ee(m.current.deps,x=>Yn(x,m.current)),H.cancel(m.current.update))})),b.useEffect(d,[]),ol(()=>()=>{const x=m.current;ee(x.deps,g=>Yn(g,x))});const C=t.getComponentProps(o.getValue());return b.createElement(e,{...C,ref:c})})},Mf=class{constructor(e,t){this.update=e,this.deps=t}eventObserved(e){e.type=="change"&&H.write(this.update)}};function Pf(e,t){const n=new Set;return Or.dependencies=n,e.style&&(e={...e,style:t.createAnimatedStyle(e.style)}),e=new ta(e),Or.dependencies=null,[e,n]}function Of(e,t){return e&&(T.fun(e)?e(t):e.current=t),t}var oi=Symbol.for("AnimatedComponent"),Rf=(e,{applyAnimatedValues:t=()=>!1,createAnimatedStyle:n=a=>new ta(a),getComponentProps:r=a=>a}={})=>{const a={applyAnimatedValues:t,createAnimatedStyle:n,getComponentProps:r},s=c=>{const o=li(c)||"Anonymous";return T.str(c)?c=s[c]||(s[c]=ii(c,a)):c=c[oi]||(c[oi]=ii(c,a)),c.displayName=`Animated(${o})`,c};return pt(e,(c,o)=>{T.arr(e)&&(o=li(c)),s[o]=s(c)}),{animated:s}},li=e=>T.str(e)?e:e&&T.str(e.displayName)?e.displayName:T.fun(e)&&e.name||null;function Zt(e,...t){return T.fun(e)?e(...t):e}var Bn=(e,t)=>e===!0||!!(t&&e&&(T.fun(e)?e(t):$e(e).includes(t))),ul=(e,t)=>T.obj(e)?t&&e[t]:e,dl=(e,t)=>e.default===!0?e[t]:e.default?e.default[t]:void 0,Nf=e=>e,Ss=(e,t=Nf)=>{let n=Ff;e.default&&e.default!==!0&&(e=e.default,n=Object.keys(e));const r={};for(const a of n){const s=t(e[a],a);T.und(s)||(r[a]=s)}return r},Ff=["config","onProps","onStart","onChange","onPause","onResume","onRest"],Df={config:1,from:1,to:1,ref:1,loop:1,reset:1,pause:1,cancel:1,reverse:1,immediate:1,default:1,delay:1,onProps:1,onStart:1,onChange:1,onPause:1,onResume:1,onRest:1,onResolve:1,items:1,trail:1,sort:1,expires:1,initial:1,enter:1,update:1,leave:1,children:1,onDestroyed:1,keys:1,callId:1,parentId:1};function Lf(e){const t={};let n=0;if(pt(e,(r,a)=>{Df[a]||(t[a]=r,n++)}),n)return t}function fl(e){const t=Lf(e);if(t){const n={to:t};return pt(e,(r,a)=>a in t||(n[a]=r)),n}return{...e}}function Zn(e){return e=Ve(e),T.arr(e)?e.map(Zn):Jr(e)?ot.createStringInterpolator({range:[0,1],output:[e,e]})(1):e}function Vf(e){for(const t in e)return!0;return!1}function ka(e){return T.fun(e)||T.arr(e)&&T.obj(e[0])}function Uf(e,t){var n;(n=e.ref)==null||n.delete(e),t==null||t.delete(e)}function Bf(e,t){var n;t&&e.ref!==t&&((n=e.ref)==null||n.delete(e),t.add(e),e.ref=t)}var zf={default:{tension:170,friction:26},gentle:{tension:120,friction:14},wobbly:{tension:180,friction:12},stiff:{tension:210,friction:20},slow:{tension:280,friction:60},molasses:{tension:280,friction:120}},Aa={...zf.default,mass:1,damping:1,easing:mf.linear,clamp:!1},$f=class{constructor(){this.velocity=0,Object.assign(this,Aa)}};function Hf(e,t,n){n&&(n={...n},ci(n,t),t={...n,...t}),ci(e,t),Object.assign(e,t);for(const c in Aa)e[c]==null&&(e[c]=Aa[c]);let{frequency:r,damping:a}=e;const{mass:s}=e;return T.und(r)||(r<.01&&(r=.01),a<0&&(a=0),e.tension=Math.pow(2*Math.PI/r,2)*s,e.friction=4*Math.PI*a*s/r),e}function ci(e,t){if(!T.und(t.decay))e.duration=void 0;else{const n=!T.und(t.tension)||!T.und(t.friction);(n||!T.und(t.frequency)||!T.und(t.damping)||!T.und(t.mass))&&(e.duration=void 0,e.decay=void 0),n&&(e.frequency=void 0)}}var ui=[],Wf=class{constructor(){this.changed=!1,this.values=ui,this.toValues=null,this.fromValues=ui,this.config=new $f,this.immediate=!1}};function hl(e,{key:t,props:n,defaultProps:r,state:a,actions:s}){return new Promise((c,o)=>{let l,u,d=Bn(n.cancel??(r==null?void 0:r.cancel),t);if(d)C();else{T.und(n.pause)||(a.paused=Bn(n.pause,t));let x=r==null?void 0:r.pause;x!==!0&&(x=a.paused||Bn(x,t)),l=Zt(n.delay||0,t),x?(a.resumeQueue.add(m),s.pause()):(s.resume(),m())}function f(){a.resumeQueue.add(m),a.timeouts.delete(u),u.cancel(),l=u.time-H.now()}function m(){l>0&&!ot.skipAnimation?(a.delayed=!0,u=H.setTimeout(C,l),a.pauseQueue.add(f),a.timeouts.add(u)):C()}function C(){a.delayed&&(a.delayed=!1),a.pauseQueue.delete(f),a.timeouts.delete(u),e<=(a.cancelId||0)&&(d=!0);try{s.start({...n,callId:e,cancel:d},c)}catch(x){o(x)}}})}var Cs=(e,t)=>t.length==1?t[0]:t.some(n=>n.cancelled)?vn(e.get()):t.every(n=>n.noop)?ml(e.get()):rt(e.get(),t.every(n=>n.finished)),ml=e=>({value:e,noop:!0,finished:!0,cancelled:!1}),rt=(e,t,n=!1)=>({value:e,finished:t,cancelled:n}),vn=e=>({value:e,cancelled:!0,finished:!1});function pl(e,t,n,r){const{callId:a,parentId:s,onRest:c}=t,{asyncTo:o,promise:l}=n;return!s&&e===o&&!t.reset?l:n.promise=(async()=>{n.asyncId=a,n.asyncTo=e;const u=Ss(t,(v,p)=>p==="onRest"?void 0:v);let d,f;const m=new Promise((v,p)=>(d=v,f=p)),C=v=>{const p=a<=(n.cancelId||0)&&vn(r)||a!==n.asyncId&&rt(r,!1);if(p)throw v.result=p,f(v),v},x=(v,p)=>{const S=new di,w=new fi;return(async()=>{if(ot.skipAnimation)throw Jn(n),w.result=rt(r,!1),f(w),w;C(S);const _=T.obj(v)?{...v}:{...p,to:v};_.parentId=a,pt(u,(P,k)=>{T.und(_[k])&&(_[k]=P)});const E=await r.start(_);return C(S),n.paused&&await new Promise(P=>{n.resumeQueue.add(P)}),E})()};let g;if(ot.skipAnimation)return Jn(n),rt(r,!1);try{let v;T.arr(e)?v=(async p=>{for(const S of p)await x(S)})(e):v=Promise.resolve(e(x,r.stop.bind(r))),await Promise.all([v.then(d),m]),g=rt(r.get(),!0,!1)}catch(v){if(v instanceof di)g=v.result;else if(v instanceof fi)g=v.result;else throw v}finally{a==n.asyncId&&(n.asyncId=s,n.asyncTo=s?o:void 0,n.promise=s?l:void 0)}return T.fun(c)&&H.batchedUpdates(()=>{c(g,r,r.item)}),g})()}function Jn(e,t){Vn(e.timeouts,n=>n.cancel()),e.pauseQueue.clear(),e.resumeQueue.clear(),e.asyncId=e.asyncTo=e.promise=void 0,t&&(e.cancelId=t)}var di=class extends Error{constructor(){super("An async animation has been interrupted. You see this error because you forgot to use `await` or `.catch(...)` on its returned promise.")}},fi=class extends Error{constructor(){super("SkipAnimationSignal")}},Ia=e=>e instanceof js,qf=1,js=class extends tl{constructor(){super(...arguments),this.id=qf++,this._priority=0}get priority(){return this._priority}set priority(e){this._priority!=e&&(this._priority=e,this._onPriorityChange(e))}get(){const e=ft(this);return e&&e.getValue()}to(...e){return ot.to(this,e)}interpolate(...e){return Sf(),ot.to(this,e)}toJSON(){return this.get()}observerAdded(e){e==1&&this._attach()}observerRemoved(e){e==0&&this._detach()}_attach(){}_detach(){}_onChange(e,t=!1){Gn(this,{type:"change",parent:this,value:e,idle:t})}_onPriorityChange(e){this.idle||Kr.sort(this),Gn(this,{type:"priority",parent:this,priority:e})}},nn=Symbol.for("SpringPhase"),gl=1,Ma=2,Pa=4,ha=e=>(e[nn]&gl)>0,Rt=e=>(e[nn]&Ma)>0,Mn=e=>(e[nn]&Pa)>0,hi=(e,t)=>t?e[nn]|=Ma|gl:e[nn]&=~Ma,mi=(e,t)=>t?e[nn]|=Pa:e[nn]&=~Pa,Xf=class extends js{constructor(e,t){if(super(),this.animation=new Wf,this.defaultProps={},this._state={paused:!1,delayed:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._pendingCalls=new Set,this._lastCallId=0,this._lastToId=0,this._memoizedDuration=0,!T.und(e)||!T.und(t)){const n=T.obj(e)?{...e}:{...t,from:e};T.und(n.default)&&(n.default=!0),this.start(n)}}get idle(){return!(Rt(this)||this._state.asyncTo)||Mn(this)}get goal(){return Ve(this.animation.to)}get velocity(){const e=ft(this);return e instanceof or?e.lastVelocity||0:e.getPayload().map(t=>t.lastVelocity||0)}get hasAnimated(){return ha(this)}get isAnimating(){return Rt(this)}get isPaused(){return Mn(this)}get isDelayed(){return this._state.delayed}advance(e){let t=!0,n=!1;const r=this.animation;let{toValues:a}=r;const{config:s}=r,c=ea(r.to);!c&&Ye(r.to)&&(a=$e(Ve(r.to))),r.values.forEach((u,d)=>{if(u.done)return;const f=u.constructor==Qn?1:c?c[d].lastPosition:a[d];let m=r.immediate,C=f;if(!m){if(C=u.lastPosition,s.tension<=0){u.done=!0;return}let x=u.elapsedTime+=e;const g=r.fromValues[d],v=u.v0!=null?u.v0:u.v0=T.arr(s.velocity)?s.velocity[d]:s.velocity;let p;const S=s.precision||(g==f?.005:Math.min(1,Math.abs(f-g)*.001));if(T.und(s.duration))if(s.decay){const w=s.decay===!0?.998:s.decay,_=Math.exp(-(1-w)*x);C=g+v/(1-w)*(1-_),m=Math.abs(u.lastPosition-C)<=S,p=v*_}else{p=u.lastVelocity==null?v:u.lastVelocity;const w=s.restVelocity||S/10,_=s.clamp?0:s.bounce,E=!T.und(_),P=g==f?u.v0>0:g<f;let k,K=!1;const A=1,L=Math.ceil(e/A);for(let U=0;U<L&&(k=Math.abs(p)>w,!(!k&&(m=Math.abs(f-C)<=S,m)));++U){E&&(K=C==f||C>f==P,K&&(p=-p*_,C=f));const ie=-s.tension*1e-6*(C-f),le=-s.friction*.001*p,Z=(ie+le)/s.mass;p=p+Z*A,C=C+p*A}}else{let w=1;s.duration>0&&(this._memoizedDuration!==s.duration&&(this._memoizedDuration=s.duration,u.durationProgress>0&&(u.elapsedTime=s.duration*u.durationProgress,x=u.elapsedTime+=e)),w=(s.progress||0)+x/this._memoizedDuration,w=w>1?1:w<0?0:w,u.durationProgress=w),C=g+s.easing(w)*(f-g),p=(C-u.lastPosition)/e,m=w==1}u.lastVelocity=p,Number.isNaN(C)&&(console.warn("Got NaN while animating:",this),m=!0)}c&&!c[d].done&&(m=!1),m?u.done=!0:t=!1,u.setValue(C,s.round)&&(n=!0)});const o=ft(this),l=o.getValue();if(t){const u=Ve(r.to);(l!==u||n)&&!s.decay?(o.setValue(u),this._onChange(u)):n&&s.decay&&this._onChange(l),this._stop()}else n&&this._onChange(l)}set(e){return H.batchedUpdates(()=>{this._stop(),this._focus(e),this._set(e)}),this}pause(){this._update({pause:!0})}resume(){this._update({pause:!1})}finish(){if(Rt(this)){const{to:e,config:t}=this.animation;H.batchedUpdates(()=>{this._onStart(),t.decay||this._set(e,!1),this._stop()})}return this}update(e){return(this.queue||(this.queue=[])).push(e),this}start(e,t){let n;return T.und(e)?(n=this.queue||[],this.queue=[]):n=[T.obj(e)?e:{...t,to:e}],Promise.all(n.map(r=>this._update(r))).then(r=>Cs(this,r))}stop(e){const{to:t}=this.animation;return this._focus(this.get()),Jn(this._state,e&&this._lastCallId),H.batchedUpdates(()=>this._stop(t,e)),this}reset(){this._update({reset:!0})}eventObserved(e){e.type=="change"?this._start():e.type=="priority"&&(this.priority=e.priority+1)}_prepareNode(e){const t=this.key||"";let{to:n,from:r}=e;n=T.obj(n)?n[t]:n,(n==null||ka(n))&&(n=void 0),r=T.obj(r)?r[t]:r,r==null&&(r=void 0);const a={to:n,from:r};return ha(this)||(e.reverse&&([n,r]=[r,n]),r=Ve(r),T.und(r)?ft(this)||this._set(n):this._set(r)),a}_update({...e},t){const{key:n,defaultProps:r}=this;e.default&&Object.assign(r,Ss(e,(c,o)=>/^on/.test(o)?ul(c,n):c)),gi(this,e,"onProps"),On(this,"onProps",e,this);const a=this._prepareNode(e);if(Object.isFrozen(this))throw Error("Cannot animate a `SpringValue` object that is frozen. Did you forget to pass your component to `animated(...)` before animating its props?");const s=this._state;return hl(++this._lastCallId,{key:n,props:e,defaultProps:r,state:s,actions:{pause:()=>{Mn(this)||(mi(this,!0),Nn(s.pauseQueue),On(this,"onPause",rt(this,Pn(this,this.animation.to)),this))},resume:()=>{Mn(this)&&(mi(this,!1),Rt(this)&&this._resume(),Nn(s.resumeQueue),On(this,"onResume",rt(this,Pn(this,this.animation.to)),this))},start:this._merge.bind(this,a)}}).then(c=>{if(e.loop&&c.finished&&!(t&&c.noop)){const o=vl(e);if(o)return this._update(o,!0)}return c})}_merge(e,t,n){if(t.cancel)return this.stop(!0),n(vn(this));const r=!T.und(e.to),a=!T.und(e.from);if(r||a)if(t.callId>this._lastToId)this._lastToId=t.callId;else return n(vn(this));const{key:s,defaultProps:c,animation:o}=this,{to:l,from:u}=o;let{to:d=l,from:f=u}=e;a&&!r&&(!t.default||T.und(d))&&(d=f),t.reverse&&([d,f]=[f,d]);const m=!_t(f,u);m&&(o.from=f),f=Ve(f);const C=!_t(d,l);C&&this._focus(d);const x=ka(t.to),{config:g}=o,{decay:v,velocity:p}=g;(r||a)&&(g.velocity=0),t.config&&!x&&Hf(g,Zt(t.config,s),t.config!==c.config?Zt(c.config,s):void 0);let S=ft(this);if(!S||T.und(d))return n(rt(this,!0));const w=T.und(t.reset)?a&&!t.default:!T.und(f)&&Bn(t.reset,s),_=w?f:this.get(),E=Zn(d),P=T.num(E)||T.arr(E)||Jr(E),k=!x&&(!P||Bn(c.immediate||t.immediate,s));if(C){const U=_a(d);if(U!==S.constructor)if(k)S=this._set(E);else throw Error(`Cannot animate between ${S.constructor.name} and ${U.name}, as the "to" prop suggests`)}const K=S.constructor;let A=Ye(d),L=!1;if(!A){const U=w||!ha(this)&&m;(C||U)&&(L=_t(Zn(_),E),A=!L),(!_t(o.immediate,k)&&!k||!_t(g.decay,v)||!_t(g.velocity,p))&&(A=!0)}if(L&&Rt(this)&&(o.changed&&!w?A=!0:A||this._stop(l)),!x&&((A||Ye(l))&&(o.values=S.getPayload(),o.toValues=Ye(d)?null:K==Qn?[1]:$e(E)),o.immediate!=k&&(o.immediate=k,!k&&!w&&this._set(l)),A)){const{onRest:U}=o;ee(Yf,le=>gi(this,t,le));const ie=rt(this,Pn(this,l));Nn(this._pendingCalls,ie),this._pendingCalls.add(n),o.changed&&H.batchedUpdates(()=>{var le;o.changed=!w,U==null||U(ie,this),w?Zt(c.onRest,ie):(le=o.onStart)==null||le.call(o,ie,this)})}w&&this._set(_),x?n(pl(t.to,t,this._state,this)):A?this._start():Rt(this)&&!C?this._pendingCalls.add(n):n(ml(_))}_focus(e){const t=this.animation;e!==t.to&&(ri(this)&&this._detach(),t.to=e,ri(this)&&this._attach())}_attach(){let e=0;const{to:t}=this.animation;Ye(t)&&(En(t,this),Ia(t)&&(e=t.priority+1)),this.priority=e}_detach(){const{to:e}=this.animation;Ye(e)&&Yn(e,this)}_set(e,t=!0){const n=Ve(e);if(!T.und(n)){const r=ft(this);if(!r||!_t(n,r.getValue())){const a=_a(n);!r||r.constructor!=a?ws(this,a.create(n)):r.setValue(n),r&&H.batchedUpdates(()=>{this._onChange(n,t)})}}return ft(this)}_onStart(){const e=this.animation;e.changed||(e.changed=!0,On(this,"onStart",rt(this,Pn(this,e.to)),this))}_onChange(e,t){t||(this._onStart(),Zt(this.animation.onChange,e,this)),Zt(this.defaultProps.onChange,e,this),super._onChange(e,t)}_start(){const e=this.animation;ft(this).reset(Ve(e.to)),e.immediate||(e.fromValues=e.values.map(t=>t.lastPosition)),Rt(this)||(hi(this,!0),Mn(this)||this._resume())}_resume(){ot.skipAnimation?this.finish():Kr.start(this)}_stop(e,t){if(Rt(this)){hi(this,!1);const n=this.animation;ee(n.values,a=>{a.done=!0}),n.toValues&&(n.onChange=n.onPause=n.onResume=void 0),Gn(this,{type:"idle",parent:this});const r=t?vn(this.get()):rt(this.get(),Pn(this,e??n.to));Nn(this._pendingCalls,r),n.changed&&(n.changed=!1,On(this,"onRest",r,this))}}};function Pn(e,t){const n=Zn(t),r=Zn(e.get());return _t(r,n)}function vl(e,t=e.loop,n=e.to){const r=Zt(t);if(r){const a=r!==!0&&fl(r),s=(a||e).reverse,c=!a||a.reset;return er({...e,loop:t,default:!1,pause:void 0,to:!s||ka(n)?n:void 0,from:c?e.from:void 0,reset:c,...a})}}function er(e){const{to:t,from:n}=e=fl(e),r=new Set;return T.obj(t)&&pi(t,r),T.obj(n)&&pi(n,r),e.keys=r.size?Array.from(r):null,e}function Gf(e){const t=er(e);return T.und(t.default)&&(t.default=Ss(t)),t}function pi(e,t){pt(e,(n,r)=>n!=null&&t.add(r))}var Yf=["onStart","onRest","onChange","onPause","onResume"];function gi(e,t,n){e.animation[n]=t[n]!==dl(t,n)?ul(t[n],e.key):void 0}function On(e,t,...n){var r,a,s,c;(a=(r=e.animation)[t])==null||a.call(r,...n),(c=(s=e.defaultProps)[t])==null||c.call(s,...n)}var Kf=["onStart","onChange","onRest"],Qf=1,Zf=class{constructor(e,t){this.id=Qf++,this.springs={},this.queue=[],this._lastAsyncId=0,this._active=new Set,this._changed=new Set,this._started=!1,this._state={paused:!1,pauseQueue:new Set,resumeQueue:new Set,timeouts:new Set},this._events={onStart:new Map,onChange:new Map,onRest:new Map},this._onFrame=this._onFrame.bind(this),t&&(this._flush=t),e&&this.start({default:!0,...e})}get idle(){return!this._state.asyncTo&&Object.values(this.springs).every(e=>e.idle&&!e.isDelayed&&!e.isPaused)}get item(){return this._item}set item(e){this._item=e}get(){const e={};return this.each((t,n)=>e[n]=t.get()),e}set(e){for(const t in e){const n=e[t];T.und(n)||this.springs[t].set(n)}}update(e){return e&&this.queue.push(er(e)),this}start(e){let{queue:t}=this;return e?t=$e(e).map(er):this.queue=[],this._flush?this._flush(this,t):(Sl(this,t),Oa(this,t))}stop(e,t){if(e!==!!e&&(t=e),t){const n=this.springs;ee($e(t),r=>n[r].stop(!!e))}else Jn(this._state,this._lastAsyncId),this.each(n=>n.stop(!!e));return this}pause(e){if(T.und(e))this.start({pause:!0});else{const t=this.springs;ee($e(e),n=>t[n].pause())}return this}resume(e){if(T.und(e))this.start({pause:!1});else{const t=this.springs;ee($e(e),n=>t[n].resume())}return this}each(e){pt(this.springs,e)}_onFrame(){const{onStart:e,onChange:t,onRest:n}=this._events,r=this._active.size>0,a=this._changed.size>0;(r&&!this._started||a&&!this._started)&&(this._started=!0,Vn(e,([o,l])=>{l.value=this.get(),o(l,this,this._item)}));const s=!r&&this._started,c=a||s&&n.size?this.get():null;a&&t.size&&Vn(t,([o,l])=>{l.value=c,o(l,this,this._item)}),s&&(this._started=!1,Vn(n,([o,l])=>{l.value=c,o(l,this,this._item)}))}eventObserved(e){if(e.type=="change")this._changed.add(e.parent),e.idle||this._active.add(e.parent);else if(e.type=="idle")this._active.delete(e.parent);else return;H.onFrame(this._onFrame)}};function Oa(e,t){return Promise.all(t.map(n=>yl(e,n))).then(n=>Cs(e,n))}async function yl(e,t,n){const{keys:r,to:a,from:s,loop:c,onRest:o,onResolve:l}=t,u=T.obj(t.default)&&t.default;c&&(t.loop=!1),a===!1&&(t.to=null),s===!1&&(t.from=null);const d=T.arr(a)||T.fun(a)?a:void 0;d?(t.to=void 0,t.onRest=void 0,u&&(u.onRest=void 0)):ee(Kf,g=>{const v=t[g];if(T.fun(v)){const p=e._events[g];t[g]=({finished:S,cancelled:w})=>{const _=p.get(v);_?(S||(_.finished=!1),w&&(_.cancelled=!0)):p.set(v,{value:null,finished:S||!1,cancelled:w||!1})},u&&(u[g]=t[g])}});const f=e._state;t.pause===!f.paused?(f.paused=t.pause,Nn(t.pause?f.pauseQueue:f.resumeQueue)):f.paused&&(t.pause=!0);const m=(r||Object.keys(e.springs)).map(g=>e.springs[g].start(t)),C=t.cancel===!0||dl(t,"cancel")===!0;(d||C&&f.asyncId)&&m.push(hl(++e._lastAsyncId,{props:t,state:f,actions:{pause:Ea,resume:Ea,start(g,v){C?(Jn(f,e._lastAsyncId),v(vn(e))):(g.onRest=o,v(pl(d,g,f,e)))}}})),f.paused&&await new Promise(g=>{f.resumeQueue.add(g)});const x=Cs(e,await Promise.all(m));if(c&&x.finished&&!(n&&x.noop)){const g=vl(t,c,a);if(g)return Sl(e,[g]),yl(e,g,!0)}return l&&H.batchedUpdates(()=>l(x,e,e.item)),x}function vi(e,t){const n={...e.springs};return t&&ee($e(t),r=>{T.und(r.keys)&&(r=er(r)),T.obj(r.to)||(r={...r,to:void 0}),wl(n,r,a=>xl(a))}),bl(e,n),n}function bl(e,t){pt(t,(n,r)=>{e.springs[r]||(e.springs[r]=n,En(n,e))})}function xl(e,t){const n=new Xf;return n.key=e,t&&En(n,t),n}function wl(e,t,n){t.keys&&ee(t.keys,r=>{(e[r]||(e[r]=n(r)))._prepareNode(t)})}function Sl(e,t){ee(t,n=>{wl(e.springs,n,r=>xl(r,e))})}var na=({children:e,...t})=>{const n=b.useContext(Rr),r=t.pause||!!n.pause,a=t.immediate||!!n.immediate;t=Tf(()=>({pause:r,immediate:a}),[r,a]);const{Provider:s}=Rr;return b.createElement(s,{value:t},e)},Rr=Jf(na,{});na.Provider=Rr.Provider;na.Consumer=Rr.Consumer;function Jf(e,t){return Object.assign(e,b.createContext(t)),e.Provider._context=e,e.Consumer._context=e,e}var eh=()=>{const e=[],t=function(r){jf();const a=[];return ee(e,(s,c)=>{if(T.und(r))a.push(s.start());else{const o=n(r,s,c);o&&a.push(s.start(o))}}),a};t.current=e,t.add=function(r){e.includes(r)||e.push(r)},t.delete=function(r){const a=e.indexOf(r);~a&&e.splice(a,1)},t.pause=function(){return ee(e,r=>r.pause(...arguments)),this},t.resume=function(){return ee(e,r=>r.resume(...arguments)),this},t.set=function(r){ee(e,(a,s)=>{const c=T.fun(r)?r(s,a):r;c&&a.set(c)})},t.start=function(r){const a=[];return ee(e,(s,c)=>{if(T.und(r))a.push(s.start());else{const o=this._getProps(r,s,c);o&&a.push(s.start(o))}}),a},t.stop=function(){return ee(e,r=>r.stop(...arguments)),this},t.update=function(r){return ee(e,(a,s)=>a.update(this._getProps(r,a,s))),this};const n=function(r,a,s){return T.fun(r)?r(s,a):r};return t._getProps=n,t};function th(e,t,n){const r=T.fun(t)&&t;r&&!n&&(n=[]);const a=b.useMemo(()=>r||arguments.length==3?eh():void 0,[]),s=b.useRef(0),c=il(),o=b.useMemo(()=>({ctrls:[],queue:[],flush(p,S){const w=vi(p,S);return s.current>0&&!o.queue.length&&!Object.keys(w).some(E=>!p.springs[E])?Oa(p,S):new Promise(E=>{bl(p,w),o.queue.push(()=>{E(Oa(p,S))}),c()})}}),[]),l=b.useRef([...o.ctrls]),u=[],d=si(e)||0;b.useMemo(()=>{ee(l.current.slice(e,d),p=>{Uf(p,a),p.stop(!0)}),l.current.length=e,f(d,e)},[e]),b.useMemo(()=>{f(0,Math.min(d,e))},n);function f(p,S){for(let w=p;w<S;w++){const _=l.current[w]||(l.current[w]=new Zf(null,o.flush)),E=r?r(w,_):t[w];E&&(u[w]=Gf(E))}}const m=l.current.map((p,S)=>vi(p,u[S])),C=b.useContext(na),x=si(C),g=C!==x&&Vf(C);xs(()=>{s.current++,o.ctrls=l.current;const{queue:p}=o;p.length&&(o.queue=[],ee(p,S=>S())),ee(l.current,(S,w)=>{a==null||a.add(S),g&&S.start({default:C});const _=u[w];_&&(Bf(S,_.ref),S.ref?S.queue.push(_):S.start(_))})}),ol(()=>()=>{ee(o.ctrls,p=>p.stop(!0))});const v=m.map(p=>({...p}));return a?[v,a]:v}function nh(e,t){const n=T.fun(e),[[r],a]=th(1,n?e:[e],n?t||[]:t);return n||arguments.length==2?[r,a]:r}var rh=class extends js{constructor(e,t){super(),this.source=e,this.idle=!0,this._active=new Set,this.calc=qn(...t);const n=this._get(),r=_a(n);ws(this,r.create(n))}advance(e){const t=this._get(),n=this.get();_t(t,n)||(ft(this).setValue(t),this._onChange(t,this.idle)),!this.idle&&yi(this._active)&&ma(this)}_get(){const e=T.arr(this.source)?this.source.map(Ve):$e(Ve(this.source));return this.calc(...e)}_start(){this.idle&&!yi(this._active)&&(this.idle=!1,ee(ea(this),e=>{e.done=!1}),ot.skipAnimation?(H.batchedUpdates(()=>this.advance()),ma(this)):Kr.start(this))}_attach(){let e=1;ee($e(this.source),t=>{Ye(t)&&En(t,this),Ia(t)&&(t.idle||this._active.add(t),e=Math.max(e,t.priority+1))}),this.priority=e,this._start()}_detach(){ee($e(this.source),e=>{Ye(e)&&Yn(e,this)}),this._active.clear(),ma(this)}eventObserved(e){e.type=="change"?e.idle?this.advance():(this._active.add(e.parent),this._start()):e.type=="idle"?this._active.delete(e.parent):e.type=="priority"&&(this.priority=$e(this.source).reduce((t,n)=>Math.max(t,(Ia(n)?n.priority:0)+1),0))}};function ah(e){return e.idle!==!1}function yi(e){return!e.size||Array.from(e).every(ah)}function ma(e){e.idle||(e.idle=!0,ee(ea(e),t=>{t.done=!0}),Gn(e,{type:"idle",parent:e}))}ot.assign({createStringInterpolator:al,to:(e,t)=>new rh(e,t)});var Cl=/^--/;function sh(e,t){return t==null||typeof t=="boolean"||t===""?"":typeof t=="number"&&t!==0&&!Cl.test(e)&&!(zn.hasOwnProperty(e)&&zn[e])?t+"px":(""+t).trim()}var bi={};function ih(e,t){if(!e.nodeType||!e.setAttribute)return!1;const n=e.nodeName==="filter"||e.parentNode&&e.parentNode.nodeName==="filter",{style:r,children:a,scrollTop:s,scrollLeft:c,viewBox:o,...l}=t,u=Object.values(l),d=Object.keys(l).map(f=>n||e.hasAttribute(f)?f:bi[f]||(bi[f]=f.replace(/([A-Z])/g,m=>"-"+m.toLowerCase())));a!==void 0&&(e.textContent=a);for(const f in r)if(r.hasOwnProperty(f)){const m=sh(f,r[f]);Cl.test(f)?e.style.setProperty(f,m):e.style[f]=m}d.forEach((f,m)=>{e.setAttribute(f,u[m])}),s!==void 0&&(e.scrollTop=s),c!==void 0&&(e.scrollLeft=c),o!==void 0&&e.setAttribute("viewBox",o)}var zn={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},oh=(e,t)=>e+t.charAt(0).toUpperCase()+t.substring(1),lh=["Webkit","Ms","Moz","O"];zn=Object.keys(zn).reduce((e,t)=>(lh.forEach(n=>e[oh(n,t)]=e[t]),e),zn);var ch=/^(matrix|translate|scale|rotate|skew)/,uh=/^(translate)/,dh=/^(rotate|skew)/,pa=(e,t)=>T.num(e)&&e!==0?e+t:e,Er=(e,t)=>T.arr(e)?e.every(n=>Er(n,t)):T.num(e)?e===t:parseFloat(e)===t,fh=class extends ta{constructor({x:e,y:t,z:n,...r}){const a=[],s=[];(e||t||n)&&(a.push([e||0,t||0,n||0]),s.push(c=>[`translate3d(${c.map(o=>pa(o,"px")).join(",")})`,Er(c,0)])),pt(r,(c,o)=>{if(o==="transform")a.push([c||""]),s.push(l=>[l,l===""]);else if(ch.test(o)){if(delete r[o],T.und(c))return;const l=uh.test(o)?"px":dh.test(o)?"deg":"";a.push($e(c)),s.push(o==="rotate3d"?([u,d,f,m])=>[`rotate3d(${u},${d},${f},${pa(m,l)})`,Er(m,0)]:u=>[`${o}(${u.map(d=>pa(d,l)).join(",")})`,Er(u,o.startsWith("scale")?1:0)])}}),a.length&&(r.transform=new hh(a,s)),super(r)}},hh=class extends tl{constructor(e,t){super(),this.inputs=e,this.transforms=t,this._value=null}get(){return this._value||(this._value=this._get())}_get(){let e="",t=!0;return ee(this.inputs,(n,r)=>{const a=Ve(n[0]),[s,c]=this.transforms[r](T.arr(a)?a:n.map(Ve));e+=" "+s,t=t&&c}),t?"none":e}observerAdded(e){e==1&&ee(this.inputs,t=>ee(t,n=>Ye(n)&&En(n,this)))}observerRemoved(e){e==0&&ee(this.inputs,t=>ee(t,n=>Ye(n)&&Yn(n,this)))}eventObserved(e){e.type=="change"&&(this._value=null),Gn(this,e)}},mh=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"];ot.assign({batchedUpdates:Ri.unstable_batchedUpdates,createStringInterpolator:al,colors:ef});var ph=Rf(mh,{applyAnimatedValues:ih,createAnimatedStyle:e=>new fh(e),getComponentProps:({scrollTop:e,scrollLeft:t,...n})=>n}),gh=ph.animated,jl={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",c=0;c<arguments.length;c++){var o=arguments[c];o&&(s=a(s,r(o)))}return s}function r(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var c="";for(var o in s)t.call(s,o)&&s[o]&&(c=a(c,o));return c}function a(s,c){return c?s?s+" "+c:s+c:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(jl);var vh=jl.exports;const El=Fa(vh);var Ra=new Map,xr=new WeakMap,xi=0,yh=void 0;function bh(e){return e?(xr.has(e)||(xi+=1,xr.set(e,xi.toString())),xr.get(e)):"0"}function xh(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?bh(e.root):e[t]}`).toString()}function wh(e){const t=xh(e);let n=Ra.get(t);if(!n){const r=new Map;let a;const s=new IntersectionObserver(c=>{c.forEach(o=>{var l;const u=o.isIntersecting&&a.some(d=>o.intersectionRatio>=d);e.trackVisibility&&typeof o.isVisible>"u"&&(o.isVisible=u),(l=r.get(o.target))==null||l.forEach(d=>{d(u,o)})})},e);a=s.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:s,elements:r},Ra.set(t,n)}return n}function Sh(e,t,n={},r=yh){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const l=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:l,intersectionRect:l,rootBounds:l}),()=>{}}const{id:a,observer:s,elements:c}=wh(n),o=c.get(e)||[];return c.has(e)||c.set(e,o),o.push(t),s.observe(e),function(){o.splice(o.indexOf(t),1),o.length===0&&(c.delete(e),s.unobserve(e)),c.size===0&&(s.disconnect(),Ra.delete(a))}}function Tl({threshold:e,delay:t,trackVisibility:n,rootMargin:r,root:a,triggerOnce:s,skip:c,initialInView:o,fallbackInView:l,onChange:u}={}){var d;const[f,m]=b.useState(null),C=b.useRef(),[x,g]=b.useState({inView:!!o,entry:void 0});C.current=u,b.useEffect(()=>{if(c||!f)return;let w;return w=Sh(f,(_,E)=>{g({inView:_,entry:E}),C.current&&C.current(_,E),E.isIntersecting&&s&&w&&(w(),w=void 0)},{root:a,rootMargin:r,threshold:e,trackVisibility:n,delay:t},l),()=>{w&&w()}},[Array.isArray(e)?e.toString():e,f,a,r,s,c,n,l,t]);const v=(d=x.entry)==null?void 0:d.target,p=b.useRef();!f&&v&&!s&&!c&&p.current!==v&&(p.current=v,g({inView:!!o,entry:void 0}));const S=[m,x.inView,x.entry];return S.ref=S[0],S.inView=S[1],S.entry=S[2],S}const Ch="Left",jh="Right",Eh="Up",Th="Down",pn={delta:10,preventScrollOnSwipe:!1,rotationAngle:0,trackMouse:!1,trackTouch:!0,swipeDuration:1/0,touchEventOptions:{passive:!0}},Na={first:!0,initial:[0,0],start:0,swiping:!1,xy:[0,0]},wi="mousemove",Si="mouseup",_h="touchend",kh="touchmove",Ah="touchstart";function Ih(e,t,n,r){return e>t?n>0?jh:Ch:r>0?Th:Eh}function Ci(e,t){if(t===0)return e;const n=Math.PI/180*t,r=e[0]*Math.cos(n)+e[1]*Math.sin(n),a=e[1]*Math.cos(n)-e[0]*Math.sin(n);return[r,a]}function Mh(e,t){const n=d=>{const f="touches"in d;f&&d.touches.length>1||e((m,C)=>{C.trackMouse&&!f&&(document.addEventListener(wi,r),document.addEventListener(Si,c));const{clientX:x,clientY:g}=f?d.touches[0]:d,v=Ci([x,g],C.rotationAngle);return C.onTouchStartOrOnMouseDown&&C.onTouchStartOrOnMouseDown({event:d}),Object.assign(Object.assign(Object.assign({},m),Na),{initial:v.slice(),xy:v,start:d.timeStamp||0})})},r=d=>{e((f,m)=>{const C="touches"in d;if(C&&d.touches.length>1)return f;if(d.timeStamp-f.start>m.swipeDuration)return f.swiping?Object.assign(Object.assign({},f),{swiping:!1}):f;const{clientX:x,clientY:g}=C?d.touches[0]:d,[v,p]=Ci([x,g],m.rotationAngle),S=v-f.xy[0],w=p-f.xy[1],_=Math.abs(S),E=Math.abs(w),P=(d.timeStamp||0)-f.start,k=Math.sqrt(_*_+E*E)/(P||1),K=[S/(P||1),w/(P||1)],A=Ih(_,E,S,w),L=typeof m.delta=="number"?m.delta:m.delta[A.toLowerCase()]||pn.delta;if(_<L&&E<L&&!f.swiping)return f;const U={absX:_,absY:E,deltaX:S,deltaY:w,dir:A,event:d,first:f.first,initial:f.initial,velocity:k,vxvy:K};U.first&&m.onSwipeStart&&m.onSwipeStart(U),m.onSwiping&&m.onSwiping(U);let ie=!1;return(m.onSwiping||m.onSwiped||m[`onSwiped${A}`])&&(ie=!0),ie&&m.preventScrollOnSwipe&&m.trackTouch&&d.cancelable&&d.preventDefault(),Object.assign(Object.assign({},f),{first:!1,eventData:U,swiping:!0})})},a=d=>{e((f,m)=>{let C;if(f.swiping&&f.eventData){if(d.timeStamp-f.start<m.swipeDuration){C=Object.assign(Object.assign({},f.eventData),{event:d}),m.onSwiped&&m.onSwiped(C);const x=m[`onSwiped${C.dir}`];x&&x(C)}}else m.onTap&&m.onTap({event:d});return m.onTouchEndOrOnMouseUp&&m.onTouchEndOrOnMouseUp({event:d}),Object.assign(Object.assign(Object.assign({},f),Na),{eventData:C})})},s=()=>{document.removeEventListener(wi,r),document.removeEventListener(Si,c)},c=d=>{s(),a(d)},o=(d,f)=>{let m=()=>{};if(d&&d.addEventListener){const C=Object.assign(Object.assign({},pn.touchEventOptions),f.touchEventOptions),x=[[Ah,n,C],[kh,r,Object.assign(Object.assign({},C),f.preventScrollOnSwipe?{passive:!1}:{})],[_h,a,C]];x.forEach(([g,v,p])=>d.addEventListener(g,v,p)),m=()=>x.forEach(([g,v])=>d.removeEventListener(g,v))}return m},u={ref:d=>{d!==null&&e((f,m)=>{if(f.el===d)return f;const C={};return f.el&&f.el!==d&&f.cleanUpTouch&&(f.cleanUpTouch(),C.cleanUpTouch=void 0),m.trackTouch&&d&&(C.cleanUpTouch=o(d,m)),Object.assign(Object.assign(Object.assign({},f),{el:d}),C)})}};return t.trackMouse&&(u.onMouseDown=n),[u,o]}function Ph(e,t,n,r){return!t.trackTouch||!e.el?(e.cleanUpTouch&&e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:void 0})):e.cleanUpTouch?t.preventScrollOnSwipe!==n.preventScrollOnSwipe||t.touchEventOptions.passive!==n.touchEventOptions.passive?(e.cleanUpTouch(),Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})):e:Object.assign(Object.assign({},e),{cleanUpTouch:r(e.el,t)})}function Oh(e){const{trackMouse:t}=e,n=b.useRef(Object.assign({},Na)),r=b.useRef(Object.assign({},pn)),a=b.useRef(Object.assign({},r.current));a.current=Object.assign({},r.current),r.current=Object.assign(Object.assign({},pn),e);let s;for(s in pn)r.current[s]===void 0&&(r.current[s]=pn[s]);const[c,o]=b.useMemo(()=>Mh(l=>n.current=l(n.current,r.current),{trackMouse:t}),[t]);return n.current=Ph(n.current,r.current,a.current,o),c}const Rh=({alt:e,borderRadius:t,height:n,src:r,status:a,width:s})=>{const[c,o]=b.useState(!1),{ref:l,inView:u}=Tl();return b.useEffect(()=>{if(u&&!c){const d=new Image;d.onload=()=>o(!0),d.onerror=()=>{var m;const f=(m=l.current)==null?void 0:m.parentElement;f&&(f.style.display="none")},d.src=r}},[u,c,r]),i.jsx("div",{className:"image-container",ref:l,children:c?i.jsx("img",{className:a==="unread"?"":"read",src:r,alt:e,style:{width:s,height:n,objectFit:"cover",borderRadius:t}}):i.jsx("div",{className:"skeleton-container",children:i.jsx(_r,{text:{rows:0},image:{style:{width:s,height:n,margin:"0",borderRadius:t}},animation:!0})})})},Nh=({url:e,mini:t})=>i.jsx("img",{className:t?"feed-icon-mini":"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Feed icon"}),Fh=({entry:e,isThumbnail:t})=>{const n=t?{width:"100px",height:"100px"}:{width:"100%",height:"160px"};return e.imgSrc?i.jsx("div",{className:t?"thumbnail":"cover-image",children:i.jsx(Rh,{alt:e.id,borderRadius:t?"4px":void 0,src:e.imgSrc,status:e.status,width:n.width,height:n.height})}):null},Dh=({entry:e,showFeedIcon:t,mini:n})=>{const r=El({"article-card-mini-content":n,"article-card-mini-content-padding":n&&t});return i.jsxs("div",{className:r,style:{width:"calc(100% - 32px)"},children:[i.jsx("div",{style:{padding:n?"0 8px 0 0":"0 0 8px 0"},children:i.jsx(Fh,{entry:e,isThumbnail:n})}),i.jsxs("div",{className:n?"article-card-mini-content-text":"",children:[i.jsx(F.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),i.jsxs(F.Text,{className:"article-info",children:[i.jsx("br",{}),t&&i.jsx(Nh,{url:e.feed.site_url,mini:n}),e.feed.title,i.jsx("br",{}),$i(e.published_at)]}),e.starred&&i.jsx(La,{className:"icon-starred"})]})]})},Lh=({entry:e,handleEntryClick:t,mini:n})=>{const r=Te(A=>A.activeContent),a=ne(Ae),{markReadOnScroll:s,showFeedIcon:c}=a,o=r&&e.id===r.id,{handleToggleStarred:l,handleToggleStatus:u}=Ka(),[d,f]=b.useState(0),m=100,C=.5,x=e.starred,g=e.status==="unread",v=Oh({preventScrollOnSwipe:!0,delta:m/2,onSwiping:A=>{const L=Math.min(Math.abs(A.deltaX*C),m)*Math.sign(A.deltaX);f(L)},onSwiped:A=>{A.deltaX>m?l(e).then(()=>se.success(x?"Unmarked as starred":"Marked as starred")):A.deltaX<-m&&u(e).then(()=>se.success(g?"Marked as read":"Marked as unread")),f(0)}}),[p,S]=b.useState(!1),[w,_]=b.useState(!1),E=()=>u(e),P=20,{ref:k}=Tl({skip:w,onChange:(A,L)=>{if(!(!s||!g)){if(A)S(!0);else if(p){const{top:U}=L.boundingClientRect;U<P&&(E(),_(!0))}}}}),K=nh({x:d});return b.createElement("div",{...v,className:"article-card",key:e.id},i.jsxs("div",{ref:k,children:[i.jsx(gh.div,{className:"swipe-card",style:K,children:i.jsx(Wn,{className:El("swipe-content","card-custom-style","card-custom-hover-style",{"card-custom-selected-style":o}),"data-entry-id":e.id,hoverable:!0,onClick:()=>t(e),bordered:!1,children:i.jsx(Wn.Meta,{description:i.jsx(Dh,{entry:e,showFeedIcon:c,mini:n})})})}),i.jsxs("div",{className:"swipe-actions",children:[i.jsx("div",{className:"swipe-action left",children:x?i.jsx(La,{style:{color:"#ffcd00"}}):i.jsx(Da,{})}),i.jsx("div",{className:"swipe-action right",children:g?i.jsx(Ni,{}):i.jsx(Fi,{})})]})]}))},Vh=({loading:e})=>{const t=ne(Ae),{layout:n}=t,r=n==="large"?2:4,a=s=>i.jsx(Wn,{className:"card-style",cover:n==="large"&&i.jsx("div",{className:"card-cover-style"}),children:i.jsx(Wn.Meta,{description:i.jsx(_r,{loading:e,animation:!0,text:{rows:3,width:150}})})},s);return e?Array.from({length:r},(s,c)=>a(c)):null},_l=e=>{const t=ne(Ae),{showAllFeeds:n}=t,r=ne(Lr),{entries:a,filterStatus:s,filterString:c,filterType:o,setFilteredEntries:l,setFilterStatus:u,setFilterString:d,setFilterType:f}=b.useContext(gt);return b.useEffect(()=>{l([]);const m=lo(a,o,s,c);l(Ya(m,e,n,r))},[s,c,o]),{setFilterStatus:u,setFilterString:d,setFilterType:f}},Uh=e=>{const{filterString:t,filterType:n}=b.useContext(gt),{isMobileView:r}=Vr(),{setFilterString:a,setFilterType:s}=_l(e),c=ne(Ae),{updateConfig:o}=Fr(),{orderDirection:l}=c,u=()=>{o({orderDirection:l==="desc"?"asc":"desc"})};return i.jsxs("div",{className:"search-and-sort-bar",children:[i.jsx(st.Search,{allowClear:!0,placeholder:"Search...",value:t,addBefore:i.jsxs(ke,{placeholder:"Select type",onChange:s,style:{width:100},value:n,children:[i.jsx(ke.Option,{value:"0",children:"Title"}),i.jsx(ke.Option,{value:"1",children:"Content"})]}),onChange:a,style:{width:r?"100%":278,marginLeft:8}}),i.jsx($n,{mini:!0,position:"left",content:l==="desc"?"Newest first":"Oldest first",children:i.jsx(Se,{shape:"circle",size:"small",style:{margin:"0 8px",flexShrink:0},icon:l==="desc"?i.jsx(fc,{}):i.jsx(hc,{}),onClick:u})})]})},Bh=b.forwardRef(({info:e,loading:t,getEntries:n,handleEntryClick:r,cardsRef:a},s)=>{const{filteredEntries:c,filterStatus:o,loadMoreUnreadVisible:l,loadMoreVisible:u}=b.useContext(gt),{loadingMore:d,handleLoadMore:f}=Qa(),m=ne(Ae),{layout:C}=m,x=C==="small";return i.jsxs(i.Fragment,{children:[i.jsx(Uh,{info:e}),i.jsxs("div",{className:"entry-list",ref:s,children:[i.jsx(Vh,{loading:t}),t?null:i.jsx("div",{ref:a,children:c.map(g=>(Ai(g.feed.site_url)||(g.feed.site_url=qi(g.feed.feed_url)),i.jsx(Lh,{entry:g,handleEntryClick:r,mini:x},g.id)))}),!t&&(o==="all"?u:l)&&i.jsxs(Se,{className:"load-more-button",loading:d,long:!0,onClick:()=>f(e,n),children:[!d&&i.jsx(mc,{}),"Load more"]})]})]})}),zh=b.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},r)=>{const{entries:a,filteredEntries:s,filterStatus:c,loading:o,setEntries:l,setFilteredEntries:u,setUnreadCount:d,setUnreadEntries:f,unreadEntries:m}=b.useContext(gt),{setFilterStatus:C}=_l(e),x=ne(Ae),{loadData:g}=Ga(),{showStatus:v}=x,p=async()=>{n().then(()=>{se.success("Marked all as read successfully"),g(),l(a.map(w=>({...w,status:"read"}))),f([]),u(c==="all"?s.map(w=>({...w,status:"read"})):[]),d(0)}).catch(()=>{se.error("Failed to mark all as read")})};b.useEffect(()=>{e.from==="history"&&C("all")},[]),b.useEffect(()=>{e.from!=="history"&&C(v)},[v]);const S=w=>{r.current&&r.current.scrollTo(0,0),C(w),u(w==="all"?a:m)};return i.jsxs("div",{className:"entry-panel",children:[!["starred","history"].includes(e.from)&&i.jsx(Pi,{focusLock:!0,title:"Mark All As Read?",onOk:p,children:i.jsx(Se,{icon:i.jsx(Ei,{}),shape:"circle"})}),i.jsxs(ra.Group,{disabled:e.from==="history",name:"lang",onChange:w=>S(w),type:"button",value:e.from==="history"?"all":c,children:[i.jsx(ra,{value:"all",children:"ALL"}),i.jsx(ra,{value:"unread",children:"UNREAD"})]}),i.jsx(Se,{icon:i.jsx(Mi,{}),loading:o,shape:"circle",onClick:t})]})}),Tn=({info:e,getEntries:t,markAllAsRead:n})=>{const r=Te(Q=>Q.activeContent),a=Te(Q=>Q.setActiveContent),s=ne(Lr),c=ne(za),[o,l]=en(Ha),[u,d]=en(Wa),[f,m]=en(qa),{loadData:C}=Ga(),x=ne(Ae),{orderBy:g,orderDirection:v,showAllFeeds:p}=x,{entries:S,entryDetailRef:w,filteredEntries:_,filterStatus:E,isArticleFocused:P,loading:k,setEntries:K,setFilteredEntries:A,setIsArticleFocused:L,setLoading:U,setLoadMoreUnreadVisible:ie,setLoadMoreVisible:le,setOffset:Z,setTotal:ue,setUnreadCount:be,setUnreadEntries:Qe,setUnreadOffset:Re,unreadEntries:vt}=b.useContext(gt),{handleFetchContent:y,handleToggleStarred:h,handleToggleStatus:I,handleEntryStatusUpdate:O}=Ka(),{parseFirstImage:M}=Qa(),[D,N]=b.useState(!1),[R,B]=b.useState(!1),z=b.useRef(null),$=b.useRef(null);b.useEffect(()=>{!R||e.from==="history"||Ze()},[g]),b.useEffect(()=>{Ze()},[e,v]),b.useEffect(()=>{A(()=>["all","today","category"].includes(e.from)&&!p?(E==="all"?S:vt).filter(ae=>!s.includes(ae.feed.id)):E==="all"?S:vt),N(!0)},[E,s,p]);const te=async Q=>{a(null),setTimeout(()=>{a({...Q,status:"read"})},200),Q.status==="unread"&&(setTimeout(()=>{O(Q,"read")},200),Ba([Q.id],"read").catch(()=>{se.error("Failed to mark entry as read, please try again later"),O(Q,"unread")})),w.current&&(w.current.setAttribute("tabIndex","-1"),w.current.focus(),w.current.scrollTo(0,0))},{handleBKey:re,handleDKey:de,handleEscapeKey:W,handleLeftKey:q,handleMKey:_e,handleRightKey:pe,handleSKey:Ce}=co(e,te,t);b.useEffect(()=>{const Q={27:()=>W(z),37:()=>q(),39:()=>pe(e),66:()=>re(),68:()=>de(y),77:()=>_e(()=>I(r)),83:()=>Ce(()=>h(r))},ae=ye=>{const fe=Q[ye.keyCode];fe&&fe()};return P?document.addEventListener("keydown",ae):document.removeEventListener("keydown",ae),()=>{document.removeEventListener("keydown",ae)}},[r,_,P]);const Ie=(Q,ae,ye,fe)=>{K(Q),Qe(ae),A(Ya(E==="all"?Q:ae,e,p,s)),ue(ye),le(Q.length<ye),be(fe),ie(ae.length<fe)},ge=(Q,ae)=>{const ye=Q.data.entries.map(M),fe=ae.data.entries.map(M),{total:je}=Q.data,{total:We}=ae.data;Ie(ye,fe,je,We)},He=async(Q=!1)=>{U(!0);try{let ae,ye;switch(Q?(ae=await t(),e.from==="starred"?d(ae.data):e.from==="history"&&m(ae.data),ye=e.from==="history"?ae:await t(0,"unread"),ge(ae,ye)):ye=await t(0,"unread"),e.from){case"today":{Q&&(l(ye.data),ae=await t());const fe=(Q?ae.data:o).entries.map(M),je=ye.data.entries.map(M);Ie(fe,je,(Q?ae.data:o).total,ye.data.total);break}case"starred":{const fe=u.entries.map(M),je=ye.data.entries.map(M);Ie(fe,je,u.total,ye.data.total);break}case"history":{const fe=f.entries.map(M);Ie(fe,fe,f.total,f.total);break}}}catch(ae){console.error("Error fetching articles:",ae)}finally{U(!1)}},Ze=async()=>{if(z.current&&z.current.scrollTo(0,0),Z(0),Re(0),!c){C();return}await He(!0)};return b.useEffect(()=>{r&&a(null)},[]),b.useEffect(()=>{c&&(He().then(()=>B(!0)),L(!0))},[c]),i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"entry-col",children:[i.jsx(Is,{in:!k,timeout:200,nodeRef:$,classNames:"fade",children:i.jsx(Bh,{info:e,cardsRef:$,loading:k,getEntries:t,handleEntryClick:te,ref:z})}),i.jsx(zh,{info:e,refreshArticleList:Ze,markAllAsRead:n,ref:z})]}),i.jsx(Is,{in:r!=null,timeout:200,nodeRef:w,classNames:"fade",unmountOnExit:!0,children:i.jsx(Wd,{info:e,handleEntryClick:te,getEntries:t,isFilteredEntriesUpdated:D,setIsFilteredEntriesUpdated:N,ref:w})})]})},$h=()=>{const e=async()=>{const t=await Rc();return he.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return i.jsx(jn,{children:i.jsx(Tn,{info:{from:"all",id:""},getEntries:Wc,markAllAsRead:e})})},Hh=()=>{const{id:e}=Di(),t=ne(Ae),{orderBy:n,pageSize:r}=t,a=async(c=0,o=null)=>{const l={baseUrl:`/v1/categories/${e}/entries`,orderField:n,offset:c,limit:r,status:o},u=Sn(l);return he.get(u)},s=async()=>he.put(`/v1/categories/${e}/mark-all-as-read`);return i.jsx(jn,{children:i.jsx(Tn,{info:{from:"category",id:e},getEntries:a,markAllAsRead:s})})},Wh=()=>{const e=tr();return i.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:i.jsx("div",{children:i.jsx(pc,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[i.jsx(Se,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},qh=()=>{const{id:e}=Di(),t=ne(Ae),{orderBy:n,pageSize:r}=t,a=async(c=0,o=null)=>{const l={baseUrl:`/v1/feeds/${e}/entries`,orderField:n,offset:c,limit:r,status:o},u=Sn(l);return he.get(u)},s=async()=>he.put(`/v1/feeds/${e}/mark-all-as-read`);return i.jsx(jn,{children:i.jsx(Tn,{info:{from:"feed",id:e},getEntries:a,markAllAsRead:s})})},Xh=()=>i.jsx(jn,{children:i.jsx(Tn,{info:{from:"history",id:""},getEntries:Hi})}),Gh=e=>{var r;const t=e.getFieldsValue();let n=!0;for(const a of Object.keys(t))if(a!=="password"){const s=(r=t[a])==null?void 0:r.trim();e.setFieldValue(a,s),s||(n=!1)}else t[a]||(n=!1);return n},wr=(e,t)=>{e.key==="Enter"&&t.submit()},Yh=()=>{const[e]=gc(),[t,n]=b.useState(!1),[r,a]=en(Va),[s,c]=b.useState("token"),o=tr();b.useEffect(()=>{Ua(r)&&o("/")},[r,o]);const l=async()=>{n(!0);try{(await ki({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(se.success("Success"),a(e.getFieldsValue()),o("/"))}catch(d){console.error(d),se.error(d.message)}n(!1)},u=()=>{l()};return i.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:i.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:i.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[i.jsx(Oi,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),i.jsx(F.Title,{heading:3,children:"Connect to your server"}),i.jsxs(Wn,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[i.jsxs(xe,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Gh(e)?u():se.error("Please fill in all required fields")},children:[i.jsx(xe.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:d=>{wr(d,e)},children:i.jsx(st,{disabled:t,placeholder:"Please input server address",prefix:i.jsx(vc,{})})}),s==="token"&&i.jsx(xe.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:d=>{wr(d,e)},children:i.jsx(st,{disabled:t,placeholder:"Please input api token",prefix:i.jsx(Ms,{})})}),s==="user"&&i.jsxs(i.Fragment,{children:[i.jsx(xe.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:d=>{wr(d,e)},children:i.jsx(st,{disabled:t,prefix:i.jsx(_i,{}),placeholder:"Please input username"})}),i.jsx(xe.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:d=>{wr(d,e)},children:i.jsx(st.Password,{disabled:t,prefix:i.jsx(Ms,{}),placeholder:"Please input password"})})]})]}),i.jsx(Se,{loading:t,type:"primary",long:!0,onClick:u,style:{marginTop:"20px"},children:"Connect"}),i.jsx(at,{orientation:"center",children:"Or connect with"}),i.jsx(Se,{type:"secondary",long:!0,onClick:()=>c(s==="token"?"user":"token"),style:{marginTop:"20px"},children:s==="token"?"Username and password":"API Token"})]}),i.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[i.jsx(F.Text,{disabled:!0,children:"Need more information?"}),i.jsx(yc,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Kh=({children:e})=>{const t=ne(Va);return Ua(t)?i.jsx(i.Fragment,{children:e}):i.jsx(Li,{to:"/login"})},Qh=()=>i.jsx(jn,{children:i.jsx(Tn,{info:{from:"starred",id:""},getEntries:Wi})}),Zh=()=>{const e=async()=>{const t=await Sr(0,"unread"),n=t.data.entries.map(r=>r.id);if(t.data.total>n.length){const r=t.data.total-n.length,a=Math.ceil(r/100)*100,s=await Sr(n.length,"unread",a);n.push(...s.data.entries.map(c=>c.id))}return Ba(n,"read")};return i.jsx(jn,{children:i.jsx(Tn,{info:{from:"today",id:""},getEntries:Sr,markAllAsRead:e})})},Jh=mt("homePage"),em=[{path:"/all",element:i.jsx($h,{})},{path:"/today",element:i.jsx(Zh,{})},{path:"/starred",element:i.jsx(Qh,{})},{path:"/history",element:i.jsx(Xh,{})},{path:"/category/:id",element:i.jsx(Hh,{})},{path:"/feed/:id",element:i.jsx(qh,{})}],kl=bc([{path:"/",element:i.jsx(Kh,{children:i.jsx(vu,{})}),errorElement:i.jsx(Wh,{}),children:[...em,{index:!0,element:i.jsx(Li,{to:`/${Jh}`,replace:!0})}]},{path:"/login",element:i.jsx(Yh,{})}]);xc.createRoot(document.getElementById("root")).render(i.jsx(wc,{locale:Sc,children:i.jsx(Cc,{router:kl})}))});export default tm();

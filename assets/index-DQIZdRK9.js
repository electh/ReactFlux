var _i=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);import{r as m,g as An,e as K,c as ne,d as Xt,a as sa,M as te,b as ki,f as Ii,u as dn,j as r,B as re,I as Mi,S as Pn,T as Ne,h as lr,i as Ai,k as Pi,l as Fi,D as Pr,m as Ct,n as la,o as Oi,p as Ni,A as ca,q as da,s as Ri,t as Di,v as Li,w as z,R as an,x as rt,y as Tn,z as zi,F as xe,C as Ye,E as ua,G as Fn,H as we,J as cn,K as Bi,L as fa,P as ha,N as Ui,O as Vi,Q as Wt,U as Hi,V as $i,W as Wi,X as Gi,Y as Xi,Z as qi,_ as Yi,$ as pa,a0 as _n,a1 as Ki,a2 as Zi,a3 as cr,a4 as Ji,a5 as Qi,a6 as eo,a7 as to,a8 as ma,a9 as ga,aa as On,ab as va,ac as ya,ad as xa,ae as no,af as ro,ag as ao,ah as io,ai as oo,aj as so,ak as Rt,al as lo,am as co,an as uo,ao as Fr,ap as fo,aq as ho,ar as ba,as as po,at as mo,au as Or,av as go,aw as wa,ax as vo,ay as yo,az as xo,aA as bo,aB as wo}from"./vendor-BS_7nat7.js";var Hc=_i((Gc,un)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))a(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&a(d)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Co={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const Nr=e=>{let t;const n=new Set,a=(l,p)=>{const x=typeof l=="function"?l(t):l;if(!Object.is(x,t)){const j=t;t=p??(typeof x!="object"||x===null)?x:Object.assign({},t,x),n.forEach(g=>g(t,j))}},i=()=>t,o={setState:a,getState:i,getInitialState:()=>u,subscribe:l=>(n.add(l),()=>n.delete(l)),destroy:()=>{(Co?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},u=t=e(a,i,o);return o},jo=e=>e?Nr(e):Nr;var Ca={exports:{}},ja={},Ea={exports:{}},Sa={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qt=m;function Eo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var So=typeof Object.is=="function"?Object.is:Eo,To=qt.useState,_o=qt.useEffect,ko=qt.useLayoutEffect,Io=qt.useDebugValue;function Mo(e,t){var n=t(),a=To({inst:{value:n,getSnapshot:t}}),i=a[0].inst,s=a[1];return ko(function(){i.value=n,i.getSnapshot=t,Wn(i)&&s({inst:i})},[e,n,t]),_o(function(){return Wn(i)&&s({inst:i}),e(function(){Wn(i)&&s({inst:i})})},[e]),Io(n),n}function Wn(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!So(e,n)}catch{return!0}}function Ao(e,t){return t()}var Po=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?Ao:Mo;Sa.useSyncExternalStore=qt.useSyncExternalStore!==void 0?qt.useSyncExternalStore:Po;Ea.exports=Sa;var Fo=Ea.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nn=m,Oo=Fo;function No(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ro=typeof Object.is=="function"?Object.is:No,Do=Oo.useSyncExternalStore,Lo=Nn.useRef,zo=Nn.useEffect,Bo=Nn.useMemo,Uo=Nn.useDebugValue;ja.useSyncExternalStoreWithSelector=function(e,t,n,a,i){var s=Lo(null);if(s.current===null){var d={hasValue:!1,value:null};s.current=d}else d=s.current;s=Bo(function(){function o(j){if(!u){if(u=!0,l=j,j=a(j),i!==void 0&&d.hasValue){var g=d.value;if(i(g,j))return p=g}return p=j}if(g=p,Ro(l,j))return g;var E=a(j);return i!==void 0&&i(g,E)?g:(l=j,p=E)}var u=!1,l,p,x=n===void 0?null:n;return[function(){return o(t())},x===null?void 0:function(){return o(x())}]},[t,n,a,i]);var c=Do(e,s[0],s[1]);return zo(function(){d.hasValue=!0,d.value=c},[c]),Uo(c),c};Ca.exports=ja;var Vo=Ca.exports;const Ho=An(Vo);var Ta={BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};const{useDebugValue:$o}=K,{useSyncExternalStoreWithSelector:Wo}=Ho;let Rr=!1;const Go=e=>e;function Xo(e,t=Go,n){(Ta?"production":void 0)!=="production"&&n&&!Rr&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Rr=!0);const a=Wo(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return $o(a),a}const Dr=e=>{(Ta?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?jo(e):e,n=(a,i)=>Xo(t,a,i);return Object.assign(n,t),n},qo=e=>e?Dr(e):Dr,Lr={fontSize:1.05,homePage:"all",layout:"large",orderBy:"created_at",orderDirection:"desc",pageSize:100,showAllFeeds:!1,showFeedIcon:!0,showStatus:"all",theme:"light",themeColor:"Blue"},ce=e=>{const t=JSON.parse(localStorage.getItem("config"))||{};return Object.hasOwn(t,e)?t[e]:Object.hasOwn(Lr,e)?Lr[e]:null},$e=(e,t)=>{const n=JSON.parse(localStorage.getItem("config"))||{};n[e]=t,localStorage.setItem("config",JSON.stringify(n))};var _a={exports:{}};(function(e,t){(function(n,a){e.exports=a()})(ne,function(){return function(n,a,i){n=n||{};var s=a.prototype,d={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function c(u,l,p,x){return s.fromToBase(u,l,p,x)}i.en.relativeTime=d,s.fromToBase=function(u,l,p,x,j){for(var g,E,C,V=p.$locale().relativeTime||d,S=n.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],v=S.length,I=0;I<v;I+=1){var U=S[I];U.d&&(g=x?i(u).diff(p,U.d,!0):p.diff(u,U.d,!0));var w=(n.rounding||Math.round)(Math.abs(g));if(C=g>0,w<=U.r||!U.r){w<=1&&I>0&&(U=S[I-1]);var _=V[U.l];j&&(w=j(""+w)),E=typeof _=="string"?_.replace("%d",w):_(w,l,U.l,C);break}}if(l)return E;var M=C?V.future:V.past;return typeof M=="function"?M(E):M.replace("%s",E)},s.to=function(u,l){return c(u,l,this,!0)},s.from=function(u,l){return c(u,l,this)};var o=function(u){return u.$u?i.utc():i()};s.toNow=function(u){return this.to(o(this),u)},s.fromNow=function(u){return this.from(o(this),u)}}})})(_a);var Yo=_a.exports;const Ko=An(Yo);Xt.extend(Ko);const Zo=e=>{const t=Xt(e),n=Xt();return t.isAfter(n.subtract(24,"hour"))},Jo=()=>Xt().subtract(24,"hour").unix(),dr=e=>Xt(e).fromNow(),kn=()=>{const e=JSON.parse(localStorage.getItem("auth"));return e||(console.log("No auth info found in localStorage"),null)},Qo=(e,t)=>{const n={method:e,secret:t};localStorage.setItem("auth",JSON.stringify(n))},oe=sa.create({timeout:5e3});oe.interceptors.request.use(e=>{const t=kn(),{server:n,token:a,username:i,password:s}=(t==null?void 0:t.secret)||{};return e.baseURL=n,a&&(e.headers["X-Auth-Token"]=a),i&&s&&(e.auth={username:i,password:s}),e},e=>Promise.reject(e));oe.interceptors.response.use(e=>e,e=>{var n,a,i;console.error(e);const t=((a=(n=e.response)==null?void 0:n.data)==null?void 0:a.error_message)||e.message;return te.error(t),((i=e.response)==null?void 0:i.status)===401&&(localStorage.removeItem("auth"),Si.navigate("/login")),Promise.reject(e)});const ka=async(e,t)=>oe.put("/v1/entries",{entry_ids:e,status:t}),Ia=async(e,t)=>ka([e],t),es=async e=>oe.put(`/v1/entries/${e}/bookmark`),ts=async e=>oe.get(`/v1/entries/${e}/fetch-content`),ns=async()=>oe.get("/v1/me"),rs=async()=>oe.get("/v1/feeds/counters"),as=async()=>oe.get("/v1/feeds"),is=async()=>oe.get("/v1/categories"),os=async e=>oe.delete(`/v1/categories/${e}`),ss=async e=>oe.post("/v1/categories",{title:e}),ls=async(e,t)=>oe.put(`/v1/categories/${e}`,{title:t}),cs=async(e,t,n,a,i)=>oe.put(`/v1/feeds/${e}`,{feed_url:t,title:n,category_id:a,crawler:i}),ds=async e=>oe.put(`/v1/feeds/${e}/refresh`),us=async e=>oe.delete(`/v1/feeds/${e}`),fs=async(e,t,n)=>oe.post("/v1/feeds",{feed_url:e,category_id:t,crawler:n}),Kt=(e,t={})=>{const{baseUrl:n,orderField:a,direction:i,offset:s,limit:d,status:c}=e,o=new URLSearchParams({...t,order:a,direction:i,offset:s,limit:d});return c&&o.append("status",c),`${n}?${o.toString()}`},hs=async(e=0,t=null)=>{const n=ce("orderBy"),a=ce("orderDirection"),i=ce("pageSize"),d=Kt({baseUrl:"/v1/entries",orderField:n,direction:a,offset:e,limit:i,status:t});return oe.get(d)},Ma=async(e=0)=>{const t=ce("orderDirection"),n=ce("pageSize"),i=Kt({baseUrl:"/v1/entries",orderField:"changed_at",direction:t,offset:e,limit:n,status:"read"});return oe.get(i)},Aa=async(e=0,t=null)=>{const n=ce("orderDirection"),a=ce("pageSize"),d=Kt({baseUrl:"/v1/entries",orderField:"changed_at",direction:n,offset:e,limit:a,status:t},{starred:"true"});return oe.get(d)},jn=async(e=0,t=null,n=null)=>{const a=ce("orderBy"),i=ce("orderDirection"),s=n||ce("pageSize"),d=Jo(),u=Kt({baseUrl:"/v1/entries",orderField:a,direction:i,offset:e,limit:s,status:t},{published_after:d});return oe.get(u)},ps=(e,t)=>t==="read"?Math.max(0,e-1):e+1,zr=(e,t,n)=>e.map(a=>{if(a.id===t){let i;return typeof n=="string"?i=ps(a.unreadCount,n):i=n,{...a,unreadCount:i}}return a}),y=qo((e,t)=>({feeds:[],groups:[],unreadTotal:0,unreadToday:0,starredCount:0,readCount:0,hiddenFeedIds:[],hiddenGroupIds:[],showStatus:ce("showStatus"),homePage:ce("homePage"),orderBy:ce("orderBy"),orderDirection:ce("orderDirection"),pageSize:ce("pageSize"),showAllFeeds:ce("showAllFeeds"),loading:!0,visible:{settings:!1,addFeed:!1},theme:ce("theme"),layout:ce("layout"),fontSize:ce("fontSize"),showFeedIcon:ce("showFeedIcon"),collapsed:window.innerWidth<=992,activeContent:null,isSysDarkMode:window.matchMedia("(prefers-color-scheme: dark)").matches,themeColor:ce("themeColor"),isInitCompleted:!1,setFeeds:n=>e({feeds:n}),setGroups:n=>e({groups:n}),setUnreadTotal:n=>e(a=>({unreadTotal:n(a.unreadTotal)})),setUnreadToday:n=>e(a=>({unreadToday:n(a.unreadToday)})),setStarredCount:n=>e(a=>({starredCount:n(a.starredCount)})),setReadCount:n=>e(a=>({readCount:n(a.readCount)})),setShowStatus:n=>e({showStatus:n}),setHomePage:n=>e({homePage:n}),setOrderBy:n=>e({orderBy:n}),toggleOrderDirection:()=>e(n=>({orderDirection:n.orderDirection==="desc"?"asc":"desc"})),setPageSize:n=>e({pageSize:n}),toggleShowAllFeeds:()=>e(n=>({showAllFeeds:!n.showAllFeeds})),setActiveContent:n=>{e({activeContent:n})},setIsSysDarkMode:n=>e({isSysDarkMode:n}),setThemeColor:n=>{e({themeColor:n})},setTheme:n=>{e({theme:n})},initData:async()=>{e({loading:!0});const[n,a,i,s,d,c]=await Promise.all([as(),is(),Ma(),Aa(),jn(0,"unread"),rs()]);if(n&&a&&i&&s&&d&&c){const o=n.data.filter(g=>g.hide_globally||g.category.hide_globally).map(g=>g.id),u=a.data.filter(g=>g.hide_globally).map(g=>g.id);e({hiddenFeedIds:o}),e({hiddenGroupIds:u});const l=c.data.unreads,p=Object.keys(l).reduce((g,E)=>t().showAllFeeds||!o.includes(Number.parseInt(E))?g+l[E]:g,0);e({unreadTotal:p});const x=n.data.map(g=>({...g,unreadCount:l[g.id]||0}));e({feeds:x.sort((g,E)=>g.title.localeCompare(E.title,"en"))});const j=a.data.map(g=>{let E=0,C=0;for(const V of x)V.category.id===g.id&&(E+=V.unreadCount,C+=1);return{...g,unreadCount:E,feedCount:C}});e({groups:j.sort((g,E)=>g.title.localeCompare(E.title,"en"))}),e({readCount:i.data.total}),e({starredCount:s.data.total}),e({unreadToday:d.data.total}),e({isInitCompleted:!0}),e({loading:!1})}},updateFeedUnreadCount:(n,a)=>{e(i=>({feeds:zr(i.feeds,n,a)}))},updateGroupUnreadCount:(n,a)=>{e(i=>({groups:zr(i.groups,n,a)}))},toggleLayout:()=>{const n=t().layout==="large"?"small":"large";e({layout:n})},setFontSize:n=>e({fontSize:n}),toggleShowFeedIcon:()=>e(n=>({showFeedIcon:!n.showFeedIcon})),setVisible:(n,a)=>{e(i=>({visible:{...i.visible,[n]:a}}))},toggleCollapsed:()=>e(n=>({collapsed:!n.collapsed}))})),Pa=[{name:"Red",valueLight:"#F53F3F",valueDark:"#F76965"},{name:"Orange",valueLight:"#F77234",valueDark:"#F9925A"},{name:"Green",valueLight:"#00B42A",valueDark:"#27C346"},{name:"Blue",valueLight:"#165DFF",valueDark:"#3C7EFF"},{name:"Purple",valueLight:"#722ED1",valueDark:"#8E51DA"}],Jn=e=>{const t=Pa.find(s=>s.name===e),n=window.matchMedia("(prefers-color-scheme: dark)").matches,a=ce("theme"),i=a==="system"?n:a==="dark";return t?i?t.valueDark:t.valueLight:"#165DFF"},ur=e=>{ki(Jn(e),{list:!0}).map(n=>Ii(n)).forEach((n,a)=>{document.body.style.setProperty(`--primary-${a+1}`,n)})},ms=()=>{const e=dn(),t=y(x=>x.setVisible),n=y(x=>x.theme),a=y(x=>x.setTheme),i=y(x=>x.toggleCollapsed),s=y(x=>x.showAllFeeds),d=y(x=>x.toggleShowAllFeeds),c=y(x=>x.feeds),o=y(x=>x.hiddenFeedIds),u=y(x=>x.setUnreadTotal),l=()=>{localStorage.clear(),document.body.removeAttribute("arco-theme"),ur("Blue"),e("/login"),te.success("logout")};let p;switch(n){case"dark":p=r.jsx(Li,{});break;case"system":p=r.jsx(Di,{});break;default:p=r.jsx(Ri,{})}return m.useEffect(()=>{$e("theme",n)},[n]),m.useEffect(()=>{if($e("showAllFeeds",s),!s&&o){const x=c.filter(j=>!o.includes(j.id)).reduce((j,g)=>j+g.unreadCount,0);u(()=>x)}else u(()=>c.reduce((x,j)=>x+j.unreadCount,0))},[s]),r.jsxs("div",{className:"header",children:[r.jsx("div",{className:"brand",style:{marginLeft:"10px",display:"flex",alignItems:"center"},children:r.jsx(re,{shape:"circle",size:"small",className:"trigger",style:{marginRight:"5px",display:"none"},onClick:i,children:r.jsx(Mi,{})})}),r.jsx("div",{className:"button-group",style:{marginRight:"10px"},children:r.jsxs(Pn,{size:16,children:[r.jsx(Ne,{content:"Add a feed",mini:!0,children:r.jsx(re,{shape:"circle",size:"small",type:"primary",icon:r.jsx(lr,{}),onClick:()=>t("addFeed",!0)})}),r.jsx(Ne,{content:s?"Hide some feeds":"Show all feeds",mini:!0,children:r.jsx(re,{shape:"circle",size:"small",icon:s?r.jsx(Ai,{}):r.jsx(Pi,{}),onClick:d})}),r.jsx(re,{shape:"circle",size:"small",icon:r.jsx(Fi,{}),onClick:()=>window.open("https://github.com/electh/ReactFlux","_blank")}),r.jsx(Pr,{droplist:r.jsx(Ct,{defaultSelectedKeys:[n],className:"theme-menu",children:["light","dark","system"].map(x=>r.jsxs(Ct.Item,{className:n===x?"selected-menu":"",onClick:()=>a(x),style:{display:"flex",width:100,justifyContent:"space-between",alignItems:"center"},children:[x.charAt(0).toUpperCase()+x.slice(1),n===x&&r.jsx(la,{style:{marginLeft:8}})]},x))}),trigger:"hover",position:"bottom",children:r.jsx(re,{icon:p,shape:"circle",size:"small",onClick:()=>{switch(n){case"light":a("dark");break;case"dark":a("light");break}}})}),r.jsx(Pr,{droplist:r.jsxs(Ct,{children:[r.jsxs(Ct.Item,{onClick:()=>t("settings",!0),children:[r.jsx(Oi,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Settings"]},"0"),r.jsxs(Ct.Item,{onClick:l,children:[r.jsx(Ni,{style:{marginRight:8,fontSize:16,transform:"translateY(1px)"}}),"Logout"]},"1")]}),trigger:"click",position:"br",children:r.jsx(ca,{size:28,style:{cursor:"pointer"},children:r.jsx(da,{})})})]})})]})},Nt=(e,t)=>e.toLowerCase().includes(t.toLowerCase()),Fa=(e,t,n,a)=>t==="0"?n==="all"?e.filter(i=>Nt(i.title,a)):e.filter(i=>Nt(i.title,a)&&i.status===n):n==="all"?e.filter(i=>Nt(i.content,a)):e.filter(i=>Nt(i.content,a)&&i.status===n),Qn=(e,t,n,a)=>{const i=s=>n||!a.includes(s.feed.id);return["all","today"].includes(t.from)?e.filter(i):e},er=(e=768)=>window.innerWidth<=e,Oa="/assets/dark-E0XitTFg.png",Na="/assets/light-CsqESGYr.png",Ra="/assets/system-BwMbv8Ny.png",gs=()=>{const e=y(l=>l.theme),t=y(l=>l.setTheme),n=y(l=>l.toggleLayout),a=y(l=>l.layout),i=y(l=>l.fontSize),s=y(l=>l.setFontSize),d=y(l=>l.showFeedIcon),c=y(l=>l.toggleShowFeedIcon),o=y(l=>l.themeColor),u=y(l=>l.setThemeColor);return m.useEffect(()=>{$e("fontSize",i)},[i]),m.useEffect(()=>{$e("layout",a)},[a]),m.useEffect(()=>{$e("showFeedIcon",d)},[d]),m.useEffect(()=>{$e("theme",e)},[e]),m.useEffect(()=>{$e("themeColor",o),ur(o)},[o]),r.jsxs(r.Fragment,{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Theme"}),r.jsx(z.Text,{type:"secondary",children:"Customize your UI theme"}),r.jsx("div",{children:r.jsx(an.Group,{name:"card-radio-group",style:{marginTop:"16px"},defaultValue:e,onChange:t,children:["light","dark","system"].map(l=>r.jsx(Ne,{content:l.charAt(0).toUpperCase()+l.slice(1),children:r.jsx(an,{value:l,children:({checked:p})=>{const x={light:Na,dark:Oa,system:Ra}[l];return r.jsx("div",{className:`custom-radio-card ${p?"custom-radio-card-checked":""}`,children:r.jsx("img",{className:"theme-preview",src:x,alt:l})})}})},l))})}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Accent color"}),r.jsx(z.Text,{type:"secondary",children:"Choose your accent color"})]}),r.jsx("div",{style:{display:"flex"},children:Pa.map(l=>r.jsx(Ne,{content:l.name,children:r.jsx("button",{type:"button",style:{width:"18px",height:"18px",borderRadius:"50%",margin:"2px",backgroundColor:Jn(l.name),cursor:"pointer",border:"3px solid var(--color-bg-3)",outline:l.name===o?`1px solid ${Jn(l.name)}`:"none"},onClick:()=>u(l.name),onKeyDown:p=>{(p.key==="Enter"||p.key===" ")&&u(l.name)}})},l.name))})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Compact article list"}),r.jsx(z.Text,{type:"secondary",children:"Use small thumbnail in article list"})]}),r.jsx("div",{children:r.jsx(Tn,{checked:a==="small",onChange:n})})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Show feed icon"}),r.jsx(z.Text,{type:"secondary",children:"Show feed icon in feed list and article list"})]}),r.jsx("div",{children:r.jsx(Tn,{checked:d,onChange:c})})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Font size"}),r.jsx(z.Text,{type:"secondary",children:"Adjust article text size"})]}),r.jsx("div",{children:r.jsxs(Pn,{children:[r.jsx(z.Text,{style:{fontSize:"0.75rem"},children:"A"}),r.jsx(zi,{value:i,showTicks:!0,min:.75,max:1.25,step:.05,formatTooltip:l=>`${l}rem`,onChange:s,style:{width:200}}),r.jsx(z.Text,{style:{fontSize:"1.25rem"},children:"A"})]})})]})]})},Gn=e=>e.slice().sort((t,n)=>t.parsing_error_count>0&&n.parsing_error_count===0?-1:t.parsing_error_count===0&&n.parsing_error_count>0?1:0),vs=()=>{const[e,t]=m.useState(!1),[n]=xe.useForm(),[a,i]=m.useState(null),[s,d]=m.useState(window.innerWidth),c=y(v=>v.feeds),o=y(v=>v.setFeeds),[u,l]=m.useState(Gn(c)),p=y(v=>v.groups),x=u.map(v=>({category:v.category,checked_at:v.checked_at,crawler:v.crawler,feed_url:v.feed_url,key:v.id,parsing_error_count:v.parsing_error_count,title:v.title}));m.useEffect(()=>{const v=()=>d(window.innerWidth);return window.addEventListener("resize",v),()=>window.removeEventListener("resize",v)},[]),m.useEffect(()=>{l(Gn(c))},[c]);const j=v=>{i(v.key),t(!0),n.setFieldsValue({crawler:v.crawler,group:v.category.id,title:v.title,url:v.feed_url})},g=async v=>{ds(v.key).then(()=>{te.success("Refreshed"),v.parsing_error_count=0}).catch(()=>{te.error("Failed to refresh"),v.parsing_error_count++}).finally(()=>{o(c.map(I=>I.id===v.key?{...I,parsing_error_count:v.parsing_error_count}:I))})},E=async v=>{us(v.key).then(()=>{te.success("Unfollowed"),o(c.filter(I=>I.id!==v.key))}).catch(()=>{te.error("Failed to unfollow")})},C=s<=768,V=[{title:"Title",dataIndex:"title",sorter:(v,I)=>v.title.localeCompare(I.title,"en"),render:(v,I)=>{const U=I.parsing_error_count,w=U?`âš ï¸ ${v}`:v,_=r.jsxs("div",{children:[v,U>0&&r.jsxs(r.Fragment,{children:[r.jsx("br",{}),"âš ï¸ Parsing error count: ",U]})]});return r.jsx(z.Ellipsis,{expandable:!1,children:r.jsx(Ne,{mini:!0,content:_,children:w})})}},!C&&{title:"Url",dataIndex:"feed_url",sorter:(v,I)=>v.feed_url.localeCompare(I.feed_url,"en"),render:v=>r.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:v})},{title:"Group",dataIndex:"category.title",sorter:(v,I)=>v.category.title.localeCompare(I.category.title,"en"),render:v=>r.jsx(z.Ellipsis,{expandable:!1,showTooltip:!0,children:r.jsx(cn,{children:v})})},!C&&{title:"Checked at",dataIndex:"checked_at",sorter:(v,I)=>v.checked_at.localeCompare(I.checked_at,"en"),render:v=>r.jsx(z.Ellipsis,{expandable:!1,children:dr(v)})},{title:"Actions",dataIndex:"op",fixed:"right",width:100,render:(v,I)=>r.jsxs(Pn,{children:[r.jsx("button",{"aria-label":"Edit this feed",className:"list-item-action",onClick:()=>j(I),type:"button",children:r.jsx(Bi,{})}),r.jsx("button",{"aria-label":"Refresh this feed",className:"list-item-action",onClick:()=>g(I),type:"button",children:r.jsx(fa,{})}),r.jsx(ha,{position:"left",focusLock:!0,title:"Unfollowï¼Ÿ",onOk:async()=>{await E(I)},children:r.jsx("span",{className:"list-item-action",children:r.jsx(Ui,{})})})]})}].filter(Boolean),S=async(v,I,U,w,_)=>{cs(v,I,U,w,_).then(M=>{o(c.map(R=>R.id===v?{...R,...M.data}:R)),te.success("Feed updated successfully"),t(!1),n.resetFields()}).catch(()=>{te.error("Failed to update feed")})};return r.jsxs(r.Fragment,{children:[r.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:r.jsx(Ye.Search,{searchButton:!0,placeholder:"Search feed title or url",onChange:v=>l(Gn(c).filter(I=>Nt(I.title,v)||Nt(I.feed_url,v))),style:{width:300,marginBottom:"16px"}})}),r.jsx(ua,{columns:V,data:x,scroll:{x:!0},size:"small",style:{width:"100%"},borderCell:!0}),a&&r.jsx(Fn,{title:"Edit Feed",visible:e,unmountOnExit:!0,onOk:n.submit,style:{width:"400px"},onCancel:()=>{t(!1),n.resetFields()},children:r.jsxs(xe,{form:n,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:v=>{v.url.trim()?S(a,v.url,v.title,v.group,v.crawler):te.error("Feed URL cannot be empty")},children:[r.jsx(xe.Item,{label:"Feed URL",field:"url",rules:[{required:!0}],children:r.jsx(Ye,{placeholder:"Please input feed URL"})}),r.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Ye,{placeholder:"Please input feed title"})}),r.jsx(xe.Item,{label:"Group",required:!0,field:"group",rules:[{required:!0}],children:r.jsx(we,{placeholder:"Please select",children:p.map(v=>r.jsx(we.Option,{value:v.id,children:v.title},v.id))})}),r.jsx(xe.Item,{label:"Fetch original content",field:"crawler",tooltip:r.jsx("div",{children:"Only affects newly retrieved articles"}),style:{marginBottom:0},triggerPropName:"checked",rules:[{type:"boolean"}],children:r.jsx(Tn,{})})]})})]})},ys=()=>{const e=y(o=>o.showStatus),t=y(o=>o.setShowStatus),n=y(o=>o.homePage),a=y(o=>o.setHomePage),i=y(o=>o.orderBy),s=y(o=>o.pageSize),d=y(o=>o.setOrderBy),c=y(o=>o.setPageSize);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default show status"}),r.jsx(z.Text,{type:"secondary",children:"Which status to show by default:"})]}),r.jsx("div",{children:r.jsxs(we,{onChange:o=>{t(o),$e("showStatus",o)},placeholder:"Select status",style:{width:128,marginLeft:16},value:e,children:[r.jsx(we.Option,{value:"all",children:"All"}),r.jsx(we.Option,{value:"unread",children:"Unread"})]})})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Default home page"}),r.jsx(z.Text,{type:"secondary",children:"Which page to show by default:"})]}),r.jsx("div",{children:r.jsxs(we,{onChange:o=>{a(o),$e("homePage",o)},placeholder:"Select page",style:{width:128,marginLeft:16},value:n,children:[r.jsx(we.Option,{value:"all",children:"All"}),r.jsx(we.Option,{value:"today",children:"Today"}),r.jsx(we.Option,{value:"starred",children:"Starred"}),r.jsx(we.Option,{value:"history",children:"History"})]})})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries order"}),r.jsx(z.Text,{type:"secondary",children:"What order to show entries:"})]}),r.jsx("div",{children:r.jsxs(we,{onChange:o=>{d(o),$e("orderBy",o)},placeholder:"Select order",style:{width:128,marginLeft:16},value:i,children:[r.jsx(we.Option,{value:"published_at",children:"Published at"}),r.jsx(we.Option,{value:"created_at",children:"Created at"})]})})]}),r.jsx(rt,{}),r.jsxs("div",{className:"setting-row",children:[r.jsxs("div",{children:[r.jsx(z.Title,{heading:6,style:{marginTop:0},children:"Entries per page"}),r.jsx(z.Text,{type:"secondary",children:"Show how many entries per page:"})]}),r.jsx("div",{children:r.jsx(Vi,{defaultValue:s,min:1,mode:"button",onChange:o=>{c(o),$e("pageSize",o)},size:"small",style:{width:128,marginLeft:16}})})]})]})},xs=()=>{const e=y(C=>C.feeds),t=y(C=>C.setFeeds),n=y(C=>C.groups),a=y(C=>C.setGroups),[i,s]=m.useState(!1),[d,c]=m.useState(""),[o,u]=m.useState(!1),[l]=xe.useForm(),[p,x]=m.useState({}),j=async()=>{d&&ss(d).then(C=>{a(V=>[...V,{...C.data,feedCount:0}]),c(""),te.success("Group added successfully")}).catch(()=>{te.error("Failed to add group")}),c(""),s(!1)},g=async(C,V)=>{ls(C,V).then(S=>{t(e.map(v=>v.category.id===C?{...v,category:{...v.category,title:V}}:v)),a(n.map(v=>v.id===C?S.data:v)),te.success("Group updated successfully"),u(!1),l.resetFields()}).catch(()=>{te.error("Failed to update group")})},E=async C=>{os(C).then(V=>{V.status===204?(a(n.filter(S=>S.id!==C)),te.success("Group deleted successfully")):te.error("Failed to delete group")}).catch(()=>{te.error("Failed to delete group")})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{children:[n.map(C=>r.jsx(cn,{size:"medium",closable:C.feedCount===0,onClick:()=>{x(C),u(!0),l.setFieldsValue({title:C.title})},onClose:async V=>{V.stopPropagation(),await E(C.id)},style:{marginRight:"10px",marginBottom:"10px",cursor:"pointer"},children:C.title},C.id)),i?r.jsx(Ye,{autoFocus:!0,size:"small",value:d,style:{width:84},onPressEnter:j,onBlur:j,onChange:c}):r.jsx(cn,{icon:r.jsx(lr,{}),style:{width:84,backgroundColor:"var(--color-fill-2)",border:"1px dashed var(--color-fill-3)",cursor:"pointer"},size:"medium",className:"add-group",tabIndex:0,onClick:()=>s(!0),children:"Add"})]}),p&&r.jsx(Fn,{title:"Edit Group",visible:o,unmountOnExit:!0,style:{width:"400px"},onOk:l.submit,onCancel:()=>{u(!1),l.resetFields()},children:r.jsx(xe,{form:l,layout:"vertical",onSubmit:C=>g(p.id,C.title),labelCol:{style:{flexBasis:90}},wrapperCol:{style:{flexBasis:"calc(100% - 90px)"}},children:r.jsx(xe.Item,{label:"Title",field:"title",rules:[{required:!0}],children:r.jsx(Ye,{placeholder:"Please input group title"})})})})]})},bs=[{title:"Key",dataIndex:"keyName",render:e=>r.jsx(cn,{children:e})},{title:"Function",dataIndex:"description"}],ws=[{key:"1",keyName:"Esc",description:"Dismiss article"},{key:"2",keyName:"â†",description:"Previous article"},{key:"3",keyName:"â†’",description:"Next article"},{key:"4",keyName:"B",description:"Open link externally"},{key:"5",keyName:"D",description:"Fetch original article"},{key:"6",keyName:"M",description:"Mark as read / unread"},{key:"7",keyName:"S",description:"Star / Unstar"}],Cs=()=>r.jsx(ua,{columns:bs,data:ws,pagination:!1,size:"small"}),js=()=>{const e=()=>{const t=[Oa,Na,Ra];for(const n of t){const a=new Image;a.src=n}};return m.useEffect(()=>{e()},[]),r.jsxs(Wt,{defaultActiveTab:"1",tabPosition:"top",children:[r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Hi,{style:{marginRight:6}}),"Feeds"]}),children:r.jsx(vs,{})},"1"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx($i,{style:{marginRight:6}}),"Groups"]}),children:r.jsx(xs,{})},"2"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Wi,{style:{marginRight:6}}),"General"]}),children:r.jsx(ys,{})},"3"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Gi,{style:{marginRight:6}}),"Appearance"]}),children:r.jsx(gs,{})},"4"),r.jsx(Wt.TabPane,{title:r.jsxs("span",{children:[r.jsx(Xi,{style:{marginRight:6}}),"Hotkeys"]}),children:r.jsx(Cs,{})},"5")]})},Es=[{required:!0}],Ss=[{required:!0}],Ts=[{type:"boolean"}],_s=()=>{const e=y(o=>o.activeContent),t=y(o=>o.setActiveContent),n=y(o=>o.setVisible),a=y(o=>o.visible),[i,s]=m.useState("720px"),[d,c]=m.useState("10%");return m.useEffect(()=>{const o=()=>{const u=er()?"100%":"720px",l=er()?"5%":"10%";s(u),c(l)};return window.addEventListener("resize",o),o(),()=>{window.removeEventListener("resize",o)}},[]),r.jsx(Fn,{visible:a.settings,alignCenter:!1,title:"Settings",footer:null,unmountOnExit:!0,style:{width:i,top:d},onFocus:()=>{e&&t(null)},onCancel:()=>n("settings",!1),autoFocus:!1,focusLock:!0,children:r.jsx(js,{})})},ks=()=>{const e=y(l=>l.activeContent),t=y(l=>l.groups),n=y(l=>l.initData),a=y(l=>l.setActiveContent),i=y(l=>l.setVisible),s=y(l=>l.visible),[d,c]=m.useState(!1),[o]=xe.useForm(),u=async(l,p,x)=>{c(!0),fs(l,p,x).then(()=>{n(),te.success("Added a feed successfully"),i("addFeed",!1),o.resetFields()}).catch(()=>{te.error("Failed to add a feed")}),c(!1)};return r.jsx(Fn,{title:"Add Feed",visible:s.addFeed,unmountOnExit:!0,style:{width:"400px"},onFocus:()=>{e&&a(null)},onOk:o.submit,confirmLoading:d,onCancel:()=>{i("addFeed",!1),o.resetFields()},children:r.jsxs(xe,{form:o,labelCol:{span:7},layout:"vertical",wrapperCol:{span:17},onSubmit:l=>{l.url.trim()?u(l.url.trim(),l.group,l.crawler):te.error("Feed URL cannot be empty")},children:[r.jsx(xe.Item,{label:"Feed URL",field:"url",rules:Es,children:r.jsx(Ye,{placeholder:"Please input a feed URL"})}),r.jsx(xe.Item,{label:"Group",required:!0,field:"group",rules:Ss,children:r.jsx(we,{placeholder:"Please select a category",showSearch:!0,filterOption:(l,p)=>Nt(p.props.children,l),children:t.map(l=>r.jsx(we.Option,{value:l.id,children:l.title},l.id))})}),r.jsx(xe.Item,{label:"Fetch original content",initialValue:!1,field:"crawler",style:{marginBottom:0},triggerPropName:"checked",rules:Ts,children:r.jsx(Tn,{})})]})})},Is=()=>{const[e,t]=m.useState(0);return m.useEffect(()=>{const n=()=>{const a=document.querySelector(".entry-panel"),i=a?a.offsetHeight:49,s=window.innerHeight;t(s-i)};return window.addEventListener("resize",n),n(),()=>window.removeEventListener("resize",n)},[]),r.jsxs("div",{className:"main",style:{height:`${e}px`},children:[r.jsx(qi,{}),r.jsx(_s,{}),r.jsx(ks,{})]})};function En(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?En=function(n){return typeof n}:En=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},En(e)}function fr(e){var t=typeof e=="string"||e instanceof String;if(!t){var n=En(e);throw e===null?n="null":n==="object"&&(n=e.constructor.name),new TypeError("Expected a string but received a ".concat(n))}}function Da(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;for(var n in t)typeof e[n]>"u"&&(e[n]=t[n]);return e}var Ms={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_numeric_tld:!1,allow_wildcard:!1,ignore_max_length:!1};function As(e,t){fr(e),t=Da(t,Ms),t.allow_trailing_dot&&e[e.length-1]==="."&&(e=e.substring(0,e.length-1)),t.allow_wildcard===!0&&e.indexOf("*.")===0&&(e=e.substring(2));var n=e.split("."),a=n[n.length-1];return t.require_tld&&(n.length<2||!t.allow_numeric_tld&&!/^([a-z\u00A1-\u00A8\u00AA-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}|xn[a-z0-9-]{2,})$/i.test(a)||/\s/.test(a))||!t.allow_numeric_tld&&/^\d+$/.test(a)?!1:n.every(function(i){return!(i.length>63&&!t.ignore_max_length||!/^[a-z_\u00a1-\uffff0-9-]+$/i.test(i)||/[\uff01-\uff5e]/.test(i)||/^-|-$/.test(i)||!t.allow_underscores&&/_/.test(i))})}var Br="(?:[0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",bt="(".concat(Br,"[.]){3}").concat(Br),Ps=new RegExp("^".concat(bt,"$")),pe="(?:[0-9a-fA-F]{1,4})",Fs=new RegExp("^("+"(?:".concat(pe,":){7}(?:").concat(pe,"|:)|")+"(?:".concat(pe,":){6}(?:").concat(bt,"|:").concat(pe,"|:)|")+"(?:".concat(pe,":){5}(?::").concat(bt,"|(:").concat(pe,"){1,2}|:)|")+"(?:".concat(pe,":){4}(?:(:").concat(pe,"){0,1}:").concat(bt,"|(:").concat(pe,"){1,3}|:)|")+"(?:".concat(pe,":){3}(?:(:").concat(pe,"){0,2}:").concat(bt,"|(:").concat(pe,"){1,4}|:)|")+"(?:".concat(pe,":){2}(?:(:").concat(pe,"){0,3}:").concat(bt,"|(:").concat(pe,"){1,5}|:)|")+"(?:".concat(pe,":){1}(?:(:").concat(pe,"){0,4}:").concat(bt,"|(:").concat(pe,"){1,6}|:)|")+"(?::((?::".concat(pe,"){0,5}:").concat(bt,"|(?::").concat(pe,"){1,7}|:))")+")(%[0-9a-zA-Z-.:]{1,})?$");function In(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return fr(e),t=String(t),t?t==="4"?Ps.test(e):t==="6"?Fs.test(e):!1:In(e,4)||In(e,6)}function Os(e,t){return Ls(e)||Ds(e,t)||Rs(e,t)||Ns()}function Ns(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Rs(e,t){if(e){if(typeof e=="string")return Ur(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ur(e,t)}}function Ur(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function Ds(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],a=!0,i=!1,s=void 0;try{for(var d=e[Symbol.iterator](),c;!(a=(c=d.next()).done)&&(n.push(c.value),!(t&&n.length===t));a=!0);}catch(o){i=!0,s=o}finally{try{!a&&d.return!=null&&d.return()}finally{if(i)throw s}}return n}}function Ls(e){if(Array.isArray(e))return e}var zs={protocols:["http","https","ftp"],require_tld:!0,require_protocol:!1,require_host:!0,require_port:!1,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1,allow_fragments:!0,allow_query_components:!0,validate_length:!0},Bs=/^\[([^\]]+)\](?::([0-9]+))?$/;function Us(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Vr(e,t){for(var n=0;n<t.length;n++){var a=t[n];if(e===a||Us(a)&&a.test(e))return!0}return!1}function La(e,t){if(fr(e),!e||/[\s<>]/.test(e)||e.indexOf("mailto:")===0||(t=Da(t,zs),t.validate_length&&e.length>=2083)||!t.allow_fragments&&e.includes("#")||!t.allow_query_components&&(e.includes("?")||e.includes("&")))return!1;var n,a,i,s,d,c,o,u;if(o=e.split("#"),e=o.shift(),o=e.split("?"),e=o.shift(),o=e.split("://"),o.length>1){if(n=o.shift().toLowerCase(),t.require_valid_protocol&&t.protocols.indexOf(n)===-1)return!1}else{if(t.require_protocol)return!1;if(e.slice(0,2)==="//"){if(!t.allow_protocol_relative_urls)return!1;o[0]=e.slice(2)}}if(e=o.join("://"),e==="")return!1;if(o=e.split("/"),e=o.shift(),e===""&&!t.require_host)return!0;if(o=e.split("@"),o.length>1){if(t.disallow_auth||o[0]===""||(a=o.shift(),a.indexOf(":")>=0&&a.split(":").length>2))return!1;var l=a.split(":"),p=Os(l,2),x=p[0],j=p[1];if(x===""&&j==="")return!1}s=o.join("@"),c=null,u=null;var g=s.match(Bs);if(g?(i="",u=g[1],c=g[2]||null):(o=s.split(":"),i=o.shift(),o.length&&(c=o.join(":"))),c!==null&&c.length>0){if(d=parseInt(c,10),!/^[0-9]+$/.test(c)||d<=0||d>65535)return!1}else if(t.require_port)return!1;return t.host_whitelist?Vr(i,t.host_whitelist):i===""&&!t.require_host?!0:!(!In(i)&&!As(i,t)&&(!u||!In(u,6))||(i=i||u,t.host_blacklist&&Vr(i,t.host_blacklist)))}const za=e=>{const t=new URL(e);return`${t.protocol}//${t.hostname}`},nn=Ct.Item,{Sider:Vs}=Qi,Hs=({group:e,isOpen:t})=>r.jsxs("div",{className:"group-title",children:[r.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:e.unreadCount?"80%":"100%"},children:[t?r.jsx(eo,{}):r.jsx(to,{}),e.title]}),e.unreadCount>0&&r.jsx(z.Ellipsis,{className:"unread-count",expandable:!1,children:e.unreadCount})]}),$s=()=>{const e=Yi(),t=dn(),n=y(w=>w.collapsed),a=y(w=>w.feeds),i=y(w=>w.groups),s=y(w=>w.loading),d=y(w=>w.unreadTotal),c=y(w=>w.unreadToday),o=y(w=>w.starredCount),u=y(w=>w.readCount),l=y(w=>w.showFeedIcon),p=y(w=>w.toggleCollapsed),x=y(w=>w.hiddenFeedIds),j=y(w=>w.hiddenGroupIds),g=y(w=>w.showAllFeeds),[E,C]=m.useState([]),[V,S]=m.useState([]),v=e.pathname,I=(w,_)=>{S(_)},U=a.reduce((w,_)=>{if(!g&&x.includes(_.id))return w;La(_.site_url)||(_.site_url=za(_.feed_url));const{id:M}=_.category;return w[M]=w[M]||[],w[M].push(_),w},{});return m.useEffect(()=>{C([v]),n||window.innerWidth<=992&&p(!0)},[v]),m.useEffect(()=>{s||S([])},[s]),r.jsx(Vs,{className:"sidebar",trigger:null,width:240,collapsedWidth:0,breakpoint:"lg",onCollapse:p,collapsed:n,collapsible:!0,style:{height:"100%",borderRight:n?"none":"1px solid var(--color-border-2)",position:"fixed",top:0,zIndex:999},children:r.jsxs(Ct,{autoScrollIntoView:!0,collapse:n,defaultSelectedKeys:[v],hasCollapseButton:!0,onClickSubMenu:I,onCollapseChange:p,selectedKeys:E,style:{width:"240px",height:"100%"},children:[r.jsxs("div",{style:{display:"flex",alignItems:"center",padding:"0 28px 0 10px",height:"48px",marginTop:"-4px",visibility:n?"hidden":"visible"},children:[r.jsx(ca,{size:32,style:{marginRight:"10px",backgroundColor:"var(--color-text-1)"},children:r.jsx(pa,{style:{color:"var(--color-bg-1)"}})}),r.jsx(z.Title,{heading:6,style:{margin:"0"},children:"ReactFlux"})]}),r.jsx(rt,{style:{marginTop:0,marginBottom:"4px"}}),r.jsx(z.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Articles"}),r.jsx(_n,{loading:s,animation:!0,text:{rows:3}}),s?null:r.jsxs("div",{children:[r.jsx(nn,{onClick:()=>t("/all"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Ki,{}),"All"]}),r.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:d||""})]})},"/all"),r.jsx(nn,{onClick:()=>t("/today"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Zi,{}),"Today"]}),r.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:c||""})]})},"/today"),r.jsx(nn,{onClick:()=>t("/starred"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(cr,{}),"Starred"]}),r.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:o||""})]})},"/starred"),r.jsx(nn,{onClick:()=>t("/history"),children:r.jsxs("div",{className:"custom-menu-item",children:[r.jsxs("span",{children:[r.jsx(Ji,{}),"History"]}),r.jsx(z.Ellipsis,{className:"item-count",expandable:!1,children:u||""})]})},"/history")]}),r.jsx(z.Title,{heading:6,style:{fontStyle:"italic",color:"var(--color-text-3)"},children:"Feeds"}),r.jsx(_n,{loading:s,animation:!0,text:{rows:6}}),s?null:i.filter(w=>g||!j.includes(w.id)).map(w=>{var _;return r.jsx(Ct.SubMenu,{selectable:!0,title:r.jsx(Hs,{group:w,isOpen:V.includes(`/group/${w.id}`)}),onClick:M=>{C([`/group/${w.id}`]),!(M.target.tagName==="svg"||M.target.tagName==="path")&&v!==`/group/${w.id}`&&t(`/group/${w.id}`)},children:(_=U[w.id])==null?void 0:_.map(M=>r.jsx(nn,{onClick:R=>{R.stopPropagation(),C([`/group/${w.id}`]),t(`/feed/${M.id}`)},children:r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsxs(z.Ellipsis,{expandable:!1,showTooltip:!0,style:{width:M.unreadCount!==0?"80%":"100%"},children:[l&&r.jsx("img",{src:`https://icons.duckduckgo.com/ip3/${new URL(M.site_url).hostname}.ico`,alt:"Icon",style:{marginRight:"8px",width:"16px",height:"16px",verticalAlign:"-2px"}}),M.title]}),M.unreadCount!==0&&r.jsx(z.Ellipsis,{expandable:!1,style:{color:"var(--color-text-4)",display:"flex",justifyContent:"flex-end"},children:M.unreadCount})]})},`/feed/${M.id}`))},`/group/${w.id}`)})]})})},Ws=()=>{const e=y(s=>s.initData),t=y(s=>s.theme),n=y(s=>s.isSysDarkMode),a=y(s=>s.setIsSysDarkMode),i=y(s=>s.themeColor);return m.useEffect(()=>{e();const s=c=>{a(c.matches)},d=window.matchMedia("(prefers-color-scheme: dark)");return d.addEventListener("change",s),()=>{d.removeEventListener("change",s)}},[]),m.useEffect(()=>{(d=>{document.body.setAttribute("arco-theme",d?"dark":"light"),document.body.style.colorScheme=d?"dark":"light"})(t==="system"?n:t==="dark")},[n,t]),m.useEffect(()=>{ur(i)},[i]),r.jsxs("div",{className:"app",style:{display:"flex",backgroundColor:"var(--color-bg-1)"},children:[r.jsx(ms,{}),r.jsx($s,{}),r.jsx(Is,{})]})};var un={};(function e(t,n,a,i){var s=!!(t.Worker&&t.Blob&&t.Promise&&t.OffscreenCanvas&&t.OffscreenCanvasRenderingContext2D&&t.HTMLCanvasElement&&t.HTMLCanvasElement.prototype.transferControlToOffscreen&&t.URL&&t.URL.createObjectURL),d=typeof Path2D=="function"&&typeof DOMMatrix=="function",c=function(){if(!t.OffscreenCanvas)return!1;var h=new OffscreenCanvas(1,1),f=h.getContext("2d");f.fillRect(0,0,1,1);var k=h.transferToImageBitmap();try{f.createPattern(k,"no-repeat")}catch{return!1}return!0}();function o(){}function u(h){var f=n.exports.Promise,k=f!==void 0?f:t.Promise;return typeof k=="function"?new k(h):(h(o,o),null)}var l=function(h,f){return{transform:function(k){if(h)return k;if(f.has(k))return f.get(k);var A=new OffscreenCanvas(k.width,k.height),P=A.getContext("2d");return P.drawImage(k,0,0),f.set(k,A),A},clear:function(){f.clear()}}}(c,new Map),p=function(){var h=Math.floor(16.666666666666668),f,k,A={},P=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(f=function(O){var N=Math.random();return A[N]=requestAnimationFrame(function F(L){P===L||P+h-1<L?(P=L,delete A[N],O()):A[N]=requestAnimationFrame(F)}),N},k=function(O){A[O]&&cancelAnimationFrame(A[O])}):(f=function(O){return setTimeout(O,h)},k=function(O){return clearTimeout(O)}),{frame:f,cancel:k}}(),x=function(){var h,f,k={};function A(P){function O(N,F){P.postMessage({options:N||{},callback:F})}P.init=function(F){var L=F.transferControlToOffscreen();P.postMessage({canvas:L},[L])},P.fire=function(F,L,G){if(f)return O(F,null),f;var B=Math.random().toString(36).slice(2);return f=u(function(J){function Z(ae){ae.data.callback===B&&(delete k[B],P.removeEventListener("message",Z),f=null,l.clear(),G(),J())}P.addEventListener("message",Z),O(F,B),k[B]=Z.bind(null,{data:{callback:B}})}),f},P.reset=function(){P.postMessage({reset:!0});for(var F in k)k[F](),delete k[F]}}return function(){if(h)return h;if(!a&&s){var P=["var CONFETTI, SIZE = {}, module = {};","("+e.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{h=new Worker(URL.createObjectURL(new Blob([P])))}catch(O){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("ðŸŽŠ Could not load worker",O),null}A(h)}return h}}(),j={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function g(h,f){return f?f(h):h}function E(h){return h!=null}function C(h,f,k){return g(h&&E(h[f])?h[f]:j[f],k)}function V(h){return h<0?0:Math.floor(h)}function S(h,f){return Math.floor(Math.random()*(f-h))+h}function v(h){return parseInt(h,16)}function I(h){return h.map(U)}function U(h){var f=String(h).replace(/[^0-9a-f]/gi,"");return f.length<6&&(f=f[0]+f[0]+f[1]+f[1]+f[2]+f[2]),{r:v(f.substring(0,2)),g:v(f.substring(2,4)),b:v(f.substring(4,6))}}function w(h){var f=C(h,"origin",Object);return f.x=C(f,"x",Number),f.y=C(f,"y",Number),f}function _(h){h.width=document.documentElement.clientWidth,h.height=document.documentElement.clientHeight}function M(h){var f=h.getBoundingClientRect();h.width=f.width,h.height=f.height}function R(h){var f=document.createElement("canvas");return f.style.position="fixed",f.style.top="0px",f.style.left="0px",f.style.pointerEvents="none",f.style.zIndex=h,f}function W(h,f,k,A,P,O,N,F,L){h.save(),h.translate(f,k),h.rotate(O),h.scale(A,P),h.arc(0,0,1,N,F,L),h.restore()}function Pe(h){var f=h.angle*(Math.PI/180),k=h.spread*(Math.PI/180);return{x:h.x,y:h.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:h.startVelocity*.5+Math.random()*h.startVelocity,angle2D:-f+(.5*k-Math.random()*k),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:h.color,shape:h.shape,tick:0,totalTicks:h.ticks,decay:h.decay,drift:h.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:h.gravity*3,ovalScalar:.6,scalar:h.scalar,flat:h.flat}}function me(h,f){f.x+=Math.cos(f.angle2D)*f.velocity+f.drift,f.y+=Math.sin(f.angle2D)*f.velocity+f.gravity,f.velocity*=f.decay,f.flat?(f.wobble=0,f.wobbleX=f.x+10*f.scalar,f.wobbleY=f.y+10*f.scalar,f.tiltSin=0,f.tiltCos=0,f.random=1):(f.wobble+=f.wobbleSpeed,f.wobbleX=f.x+10*f.scalar*Math.cos(f.wobble),f.wobbleY=f.y+10*f.scalar*Math.sin(f.wobble),f.tiltAngle+=.1,f.tiltSin=Math.sin(f.tiltAngle),f.tiltCos=Math.cos(f.tiltAngle),f.random=Math.random()+2);var k=f.tick++/f.totalTicks,A=f.x+f.random*f.tiltCos,P=f.y+f.random*f.tiltSin,O=f.wobbleX+f.random*f.tiltCos,N=f.wobbleY+f.random*f.tiltSin;if(h.fillStyle="rgba("+f.color.r+", "+f.color.g+", "+f.color.b+", "+(1-k)+")",h.beginPath(),d&&f.shape.type==="path"&&typeof f.shape.path=="string"&&Array.isArray(f.shape.matrix))h.fill(Fe(f.shape.path,f.shape.matrix,f.x,f.y,Math.abs(O-A)*.1,Math.abs(N-P)*.1,Math.PI/10*f.wobble));else if(f.shape.type==="bitmap"){var F=Math.PI/10*f.wobble,L=Math.abs(O-A)*.1,G=Math.abs(N-P)*.1,B=f.shape.bitmap.width*f.scalar,J=f.shape.bitmap.height*f.scalar,Z=new DOMMatrix([Math.cos(F)*L,Math.sin(F)*L,-Math.sin(F)*G,Math.cos(F)*G,f.x,f.y]);Z.multiplySelf(new DOMMatrix(f.shape.matrix));var ae=h.createPattern(l.transform(f.shape.bitmap),"no-repeat");ae.setTransform(Z),h.globalAlpha=1-k,h.fillStyle=ae,h.fillRect(f.x-B/2,f.y-J/2,B,J),h.globalAlpha=1}else if(f.shape==="circle")h.ellipse?h.ellipse(f.x,f.y,Math.abs(O-A)*f.ovalScalar,Math.abs(N-P)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI):W(h,f.x,f.y,Math.abs(O-A)*f.ovalScalar,Math.abs(N-P)*f.ovalScalar,Math.PI/10*f.wobble,0,2*Math.PI);else if(f.shape==="star")for(var H=Math.PI/2*3,$=4*f.scalar,be=8*f.scalar,se=f.x,ge=f.y,Oe=5,le=Math.PI/Oe;Oe--;)se=f.x+Math.cos(H)*be,ge=f.y+Math.sin(H)*be,h.lineTo(se,ge),H+=le,se=f.x+Math.cos(H)*$,ge=f.y+Math.sin(H)*$,h.lineTo(se,ge),H+=le;else h.moveTo(Math.floor(f.x),Math.floor(f.y)),h.lineTo(Math.floor(f.wobbleX),Math.floor(P)),h.lineTo(Math.floor(O),Math.floor(N)),h.lineTo(Math.floor(A),Math.floor(f.wobbleY));return h.closePath(),h.fill(),f.tick<f.totalTicks}function Ze(h,f,k,A,P){var O=f.slice(),N=h.getContext("2d"),F,L,G=u(function(B){function J(){F=L=null,N.clearRect(0,0,A.width,A.height),l.clear(),P(),B()}function Z(){a&&!(A.width===i.width&&A.height===i.height)&&(A.width=h.width=i.width,A.height=h.height=i.height),!A.width&&!A.height&&(k(h),A.width=h.width,A.height=h.height),N.clearRect(0,0,A.width,A.height),O=O.filter(function(ae){return me(N,ae)}),O.length?F=p.frame(Z):J()}F=p.frame(Z),L=J});return{addFettis:function(B){return O=O.concat(B),G},canvas:h,promise:G,reset:function(){F&&p.cancel(F),L&&L()}}}function Ee(h,f){var k=!h,A=!!C(f||{},"resize"),P=!1,O=C(f,"disableForReducedMotion",Boolean),N=s&&!!C(f||{},"useWorker"),F=N?x():null,L=k?_:M,G=h&&F?!!h.__confetti_initialized:!1,B=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,J;function Z(H,$,be){for(var se=C(H,"particleCount",V),ge=C(H,"angle",Number),Oe=C(H,"spread",Number),le=C(H,"startVelocity",Number),ze=C(H,"decay",Number),Je=C(H,"gravity",Number),_e=C(H,"drift",Number),T=C(H,"colors",I),ue=C(H,"ticks",Number),ve=C(H,"shapes"),fe=C(H,"scalar"),Be=!!C(H,"flat"),Qe=w(H),Tt=se,mt=[],Dt=h.width*Qe.x,ke=h.height*Qe.y;Tt--;)mt.push(Pe({x:Dt,y:ke,angle:ge,spread:Oe,startVelocity:le,color:T[Tt%T.length],shape:ve[S(0,ve.length)],ticks:ue,decay:ze,gravity:Je,drift:_e,scalar:fe,flat:Be}));return J?J.addFettis(mt):(J=Ze(h,mt,L,$,be),J.promise)}function ae(H){var $=O||C(H,"disableForReducedMotion",Boolean),be=C(H,"zIndex",Number);if($&&B)return u(function(le){le()});k&&J?h=J.canvas:k&&!h&&(h=R(be),document.body.appendChild(h)),A&&!G&&L(h);var se={width:h.width,height:h.height};F&&!G&&F.init(h),G=!0,F&&(h.__confetti_initialized=!0);function ge(){if(F){var le={getBoundingClientRect:function(){if(!k)return h.getBoundingClientRect()}};L(le),F.postMessage({resize:{width:le.width,height:le.height}});return}se.width=se.height=null}function Oe(){J=null,A&&(P=!1,t.removeEventListener("resize",ge)),k&&h&&(document.body.removeChild(h),h=null,G=!1)}return A&&!P&&(P=!0,t.addEventListener("resize",ge,!1)),F?F.fire(H,se,Oe):Z(H,se,Oe)}return ae.reset=function(){F&&F.reset(),J&&J.reset()},ae}var ee;function de(){return ee||(ee=Ee(null,{useWorker:!0,resize:!0})),ee}function Fe(h,f,k,A,P,O,N){var F=new Path2D(h),L=new Path2D;L.addPath(F,new DOMMatrix(f));var G=new Path2D;return G.addPath(L,new DOMMatrix([Math.cos(N)*P,Math.sin(N)*P,-Math.sin(N)*O,Math.cos(N)*O,k,A])),G}function Se(h){if(!d)throw new Error("path confetti are not supported in this browser");var f,k;typeof h=="string"?f=h:(f=h.path,k=h.matrix);var A=new Path2D(f),P=document.createElement("canvas"),O=P.getContext("2d");if(!k){for(var N=1e3,F=N,L=N,G=0,B=0,J,Z,ae=0;ae<N;ae+=2)for(var H=0;H<N;H+=2)O.isPointInPath(A,ae,H,"nonzero")&&(F=Math.min(F,ae),L=Math.min(L,H),G=Math.max(G,ae),B=Math.max(B,H));J=G-F,Z=B-L;var $=10,be=Math.min($/J,$/Z);k=[be,0,0,be,-Math.round(J/2+F)*be,-Math.round(Z/2+L)*be]}return{type:"path",path:f,matrix:k}}function pt(h){var f,k=1,A="#000000",P='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof h=="string"?f=h:(f=h.text,k="scalar"in h?h.scalar:k,P="fontFamily"in h?h.fontFamily:P,A="color"in h?h.color:A);var O=10*k,N=""+O+"px "+P,F=new OffscreenCanvas(O,O),L=F.getContext("2d");L.font=N;var G=L.measureText(f),B=Math.ceil(G.actualBoundingBoxRight+G.actualBoundingBoxLeft),J=Math.ceil(G.actualBoundingBoxAscent+G.actualBoundingBoxDescent),Z=2,ae=G.actualBoundingBoxLeft+Z,H=G.actualBoundingBoxAscent+Z;B+=Z+Z,J+=Z+Z,F=new OffscreenCanvas(B,J),L=F.getContext("2d"),L.font=N,L.fillStyle=A,L.fillText(f,ae,H);var $=1/k;return{type:"bitmap",bitmap:F.transferToImageBitmap(),matrix:[$,0,0,$,-B*$/2,-J*$/2]}}n.exports=function(){return de().apply(this,arguments)},n.exports.reset=function(){de().reset()},n.exports.create=Ee,n.exports.shapeFromPath=Se,n.exports.shapeFromText=pt})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),un,!1);const Gs=un.exports;un.exports.create;const ht=m.createContext(null),Zt=({children:e})=>{const[t,n]=m.useState(0),[a,i]=m.useState(0),[s,d]=m.useState(0),[c,o]=m.useState(0),[u,l]=m.useState(!1),[p,x]=m.useState(!1),[j,g]=m.useState([]),[E,C]=m.useState([]),[V,S]=m.useState([]),[v,I]=m.useState(ce("showStatus")),[U,w]=m.useState("0"),[_,M]=m.useState(""),[R,W]=m.useState(!0),Pe=m.useRef(null),me={entries:j,entryDetailRef:Pe,filteredEntries:V,filterStatus:v,filterString:_,filterType:U,loading:R,loadMoreUnreadVisible:p,loadMoreVisible:u,offset:s,setEntries:g,setFilteredEntries:S,setFilterStatus:I,setFilterString:M,setFilterType:w,setLoading:W,setLoadMoreUnreadVisible:x,setLoadMoreVisible:l,setOffset:d,setTotal:n,setUnreadCount:i,setUnreadEntries:C,setUnreadOffset:o,total:t,unreadCount:a,unreadEntries:E,unreadOffset:c};return r.jsx(ht.Provider,{value:me,children:e})},hr=()=>{const e=y(S=>S.setUnreadTotal),t=y(S=>S.setUnreadToday),n=y(S=>S.setReadCount),a=y(S=>S.setStarredCount),i=y(S=>S.activeContent),s=y(S=>S.setActiveContent),d=y(S=>S.updateFeedUnreadCount),c=y(S=>S.updateGroupUnreadCount),{setEntries:o,setFilteredEntries:u,setUnreadCount:l,setUnreadEntries:p}=m.useContext(ht),x=(S,v)=>S.map(I=>I.id===v.id?v:I),j=(S,v)=>{const{id:I,category:{id:U}}=S.feed,w=Zo(S.published_at);d(I,v),c(U,v),v==="read"?(e(M=>Math.max(0,M-1)),l(M=>Math.max(0,M-1)),n(M=>M+1),w&&t(M=>Math.max(0,M-1))):(e(M=>M+1),l(M=>M+1),n(M=>Math.max(0,M-1)),w&&t(M=>M+1));const _={...S,status:v};s(_),o(M=>x(M,_)),p(M=>x(M,_)),u(M=>x(M,_))},g=(S,v)=>{v?(a(U=>U+1),Gs({particleCount:100,angle:120,spread:70,origin:{x:1,y:1}})):a(U=>Math.max(0,U-1));const I={...S,starred:v};s(I),o(U=>x(U,I)),p(U=>x(U,I)),u(U=>x(U,I))};return{handleEntryStatusUpdate:j,handleFetchContent:async()=>{ts(i.id).then(S=>{te.success("Fetched content successfully"),s({...i,content:S.data.content})}).catch(()=>{te.error("Failed to fetch content, please try again later")})},handleToggleStarred:async()=>{const S=!i.starred;g(i,S),es(i.id).catch(()=>{te.error(`Failed to ${S?"star":"unstar"} entry, please try again later`),g(i,!S)})},handleToggleStatus:async()=>{const S=i.status,v=S==="read"?"unread":"read";j(i,v),Ia(i.id,v).catch(()=>{te.error(`Failed to mark entry as ${v}, please try again later`),j(i,S)})}}},Hr=(e,t="start")=>{const n=document.querySelector(e);n&&n.scrollIntoView({behavior:"smooth",block:t})},pr=()=>{const e=y(_=>_.pageSize),t=y(_=>_.showAllFeeds),n=y(_=>_.hiddenFeedIds),{entries:a,filterStatus:i,filterString:s,filterType:d,offset:c,setEntries:o,setFilteredEntries:u,setLoadMoreUnreadVisible:l,setLoadMoreVisible:p,setOffset:x,setUnreadEntries:j,setUnreadOffset:g,total:E,unreadCount:C,unreadEntries:V,unreadOffset:S}=m.useContext(ht),[v,I]=m.useState(!1),U=_=>{const W=new DOMParser().parseFromString(_.content,"text/html").querySelector("img");return W&&(_.imgSrc=W.getAttribute("src")),_};return{getFirstImage:U,handleLoadMore:async(_,M)=>{var R;I(!0);try{let W;if(i==="all"?W=await M(c+e):W=await M(S+e,i),(R=W==null?void 0:W.data)!=null&&R.entries){i==="all"?x(ee=>ee+e):g(ee=>ee+e);const Pe=W.data.entries.map(U),me=[...new Map([...i==="all"?a:V,...Pe].map(ee=>[ee.id,ee])).values()];i==="all"?o(me):j(me);const Ze=s?Fa(me,d,i,s):me,Ee=Qn(Ze,_,t,n);u(Ee),i==="all"?p(me.length<E):l(me.length<C)}}catch(W){console.error("Error fetching more articles:",W)}I(!1)},loadingMore:v}},mr=(e,t,n)=>{const{entryDetailRef:a,filteredEntries:i,filterStatus:s,loadMoreUnreadVisible:d,loadMoreVisible:c}=m.useContext(ht),o=y(w=>w.activeContent),u=y(w=>w.setActiveContent),{handleLoadMore:l}=pr(),[p,x]=m.useState(!1),[j,g]=m.useState(!1);m.useEffect(()=>{const w=document.querySelector(".entry-list");!w||!er()||(o?w.style.visibility="hidden":w.style.visibility="visible")},[o]),m.useEffect(()=>{j&&!p&&(V(e),g(!1))},[p,j]);const E=w=>{o&&(u(null),w.current&&(w.current.setAttribute("tabIndex","-1"),w.current.focus()),a.current&&a.current.scrollTo(0,0))},C=()=>{const w=i.findIndex(_=>_.id===(o==null?void 0:o.id));if(w>0){const _=i[w-1];t(_),Hr(".card-custom-selected-style","end")}},V=w=>{if(p)return;const _=i.findIndex(R=>R.id===(o==null?void 0:o.id));if(_===i.length-1&&(s==="all"&&c||d)){x(!0),l(w,n).then(()=>g(!0)).finally(()=>x(!1));return}if(_===-1){const R=document.querySelector(".entry-list");R&&R.scrollTo(0,0)}if(_<i.length-1){const R=i[_+1];t(R),g(!1),Hr(".card-custom-selected-style")}};return{handleEscapeKey:E,handleLeftKey:C,handleRightKey:V,handleBKey:()=>{o&&window.open(o.url,"_blank")},handleDKey:w=>{o&&w()},handleMKey:w=>{o&&w()},handleSKey:w=>{o&&w()}}},Xs=({info:e,handleEntryClick:t,getEntries:n})=>{const a=y(p=>p.activeContent),{handleFetchContent:i,handleToggleStarred:s,handleToggleStatus:d}=hr(),{handleLeftKey:c,handleRightKey:o}=mr(e,t,n);if(!a)return null;const u=a.status==="unread",l=a.starred;return r.jsx("div",{className:"action-buttons",style:{position:"fixed",bottom:"20px",right:"10px",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:r.jsxs(Pn,{size:0,direction:"vertical",children:[r.jsx(Ne,{mini:!0,position:"left",content:u?"Mark as read":"Mark as unread",children:r.jsx(re,{type:"primary",size:"mini",style:{borderBottom:"1px solid rgb(var(--primary-5))",borderRadius:"50% 50% 0 0"},onClick:d,icon:u?r.jsx(ma,{}):r.jsx(ga,{})})}),r.jsx(Ne,{mini:!0,position:"left",content:l?"Unstar":"Star",children:r.jsx(re,{type:"primary",size:"mini",style:{borderRadius:"0"},onClick:s,icon:l?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(cr,{})})}),r.jsx(Ne,{mini:!0,position:"left",content:"Fetch original article",children:r.jsx(re,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:i,icon:r.jsx(va,{})})}),r.jsx(Ne,{mini:!0,position:"left",content:"Previous article",children:r.jsx(re,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0"},onClick:c,icon:r.jsx(ya,{})})}),r.jsx(Ne,{mini:!0,position:"left",content:"Next article",children:r.jsx(re,{type:"primary",size:"mini",style:{borderTop:"1px solid rgb(var(--primary-5))",borderRadius:"0 0 50% 50%"},onClick:o,icon:r.jsx(xa,{})})})]})})},qs=({info:e,handleEntryClick:t,getEntries:n})=>{const a=y(x=>x.activeContent),{handleFetchContent:i,handleToggleStarred:s,handleToggleStatus:d}=hr(),{handleLeftKey:c,handleRightKey:o,handleEscapeKey:u}=mr(e,t,n);if(!a)return null;const l=a.status==="unread",p=a.starred;return r.jsxs(re.Group,{className:"action-buttons-mobile",style:{display:"none",justifyContent:"center",position:"fixed",bottom:"40px",left:"50%",transform:"translateX(-50%)",borderRadius:"50%",boxShadow:"0 4px 10px rgba(var(--primary-6), 0.4)"},children:[r.jsx(re,{type:"primary",shape:"round",onClick:u,icon:r.jsx(no,{})}),r.jsx(re,{type:"primary",onClick:d,icon:l?r.jsx(ma,{}):r.jsx(ga,{})}),r.jsx(re,{type:"primary",onClick:s,icon:p?r.jsx(On,{style:{color:"#ffcd00"}}):r.jsx(cr,{})}),r.jsx(re,{type:"primary",onClick:i,icon:r.jsx(va,{})}),r.jsx(re,{type:"primary",onClick:c,icon:r.jsx(ya,{})}),r.jsx(re,{type:"primary",shape:"round",onClick:o,icon:r.jsx(xa,{})})]})};var Ba={},gr={},vr={};Object.defineProperty(vr,"__esModule",{value:!0});var $r="html",Wr="head",gn="body",Ys=/<([a-zA-Z]+[0-9]?)/,Gr=/<head[^]*>/i,Xr=/<body[^]*>/i,Mn=function(e,t){throw new Error("This browser does not support `document.implementation.createHTMLDocument`")},tr=function(e,t){throw new Error("This browser does not support `DOMParser.prototype.parseFromString`")},qr=typeof window=="object"&&window.DOMParser;if(typeof qr=="function"){var Ks=new qr,Zs="text/html";tr=function(e,t){return t&&(e="<".concat(t,">").concat(e,"</").concat(t,">")),Ks.parseFromString(e,Zs)},Mn=tr}if(typeof document=="object"&&document.implementation){var vn=document.implementation.createHTMLDocument();Mn=function(e,t){if(t){var n=vn.documentElement.querySelector(t);return n&&(n.innerHTML=e),vn}return vn.documentElement.innerHTML=e,vn}}var yn=typeof document=="object"&&document.createElement("template"),nr;yn&&yn.content&&(nr=function(e){return yn.innerHTML=e,yn.content.childNodes});function Js(e){var t,n,a=e.match(Ys),i=a&&a[1]?a[1].toLowerCase():"";switch(i){case $r:{var s=tr(e);if(!Gr.test(e)){var d=s.querySelector(Wr);(t=d==null?void 0:d.parentNode)===null||t===void 0||t.removeChild(d)}if(!Xr.test(e)){var d=s.querySelector(gn);(n=d==null?void 0:d.parentNode)===null||n===void 0||n.removeChild(d)}return s.querySelectorAll($r)}case Wr:case gn:{var c=Mn(e).querySelectorAll(i);return Xr.test(e)&&Gr.test(e)?c[0].parentNode.childNodes:c}default:{if(nr)return nr(e);var d=Mn(e,gn).querySelector(gn);return d.childNodes}}}vr.default=Js;var Yt={},Ua={},fn={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Doctype=e.CDATA=e.Tag=e.Style=e.Script=e.Comment=e.Directive=e.Text=e.Root=e.isTag=e.ElementType=void 0;var t;(function(a){a.Root="root",a.Text="text",a.Directive="directive",a.Comment="comment",a.Script="script",a.Style="style",a.Tag="tag",a.CDATA="cdata",a.Doctype="doctype"})(t=e.ElementType||(e.ElementType={}));function n(a){return a.type===t.Tag||a.type===t.Script||a.type===t.Style}e.isTag=n,e.Root=t.Root,e.Text=t.Text,e.Directive=t.Directive,e.Comment=t.Comment,e.Script=t.Script,e.Style=t.Style,e.Tag=t.Tag,e.CDATA=t.CDATA,e.Doctype=t.Doctype})(fn);var q={},jt=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),on=ne&&ne.__assign||function(){return on=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},on.apply(this,arguments)};Object.defineProperty(q,"__esModule",{value:!0});q.cloneNode=q.hasChildren=q.isDocument=q.isDirective=q.isComment=q.isText=q.isCDATA=q.isTag=q.Element=q.Document=q.CDATA=q.NodeWithChildren=q.ProcessingInstruction=q.Comment=q.Text=q.DataNode=q.Node=void 0;var Re=fn,yr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),xr(this,t)},e}();q.Node=yr;var Rn=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(yr);q.DataNode=Rn;var Va=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Re.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Rn);q.Text=Va;var Ha=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Re.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Rn);q.Comment=Ha;var $a=function(e){jt(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=Re.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Rn);q.ProcessingInstruction=$a;var Dn=function(e){jt(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(yr);q.NodeWithChildren=Dn;var Wa=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Re.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}(Dn);q.CDATA=Wa;var Ga=function(e){jt(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=Re.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}(Dn);q.Document=Ga;var Xa=function(e){jt(t,e);function t(n,a,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?Re.ElementType.Script:n==="style"?Re.ElementType.Style:Re.ElementType.Tag);var d=e.call(this,i)||this;return d.name=n,d.attribs=a,d.type=s,d}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,s;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[a]}})},enumerable:!1,configurable:!0}),t}(Dn);q.Element=Xa;function qa(e){return(0,Re.isTag)(e)}q.isTag=qa;function Ya(e){return e.type===Re.ElementType.CDATA}q.isCDATA=Ya;function Ka(e){return e.type===Re.ElementType.Text}q.isText=Ka;function Za(e){return e.type===Re.ElementType.Comment}q.isComment=Za;function Ja(e){return e.type===Re.ElementType.Directive}q.isDirective=Ja;function Qa(e){return e.type===Re.ElementType.Root}q.isDocument=Qa;function Qs(e){return Object.prototype.hasOwnProperty.call(e,"children")}q.hasChildren=Qs;function xr(e,t){t===void 0&&(t=!1);var n;if(Ka(e))n=new Va(e.data);else if(Za(e))n=new Ha(e.data);else if(qa(e)){var a=t?Xn(e.children):[],i=new Xa(e.name,on({},e.attribs),a);a.forEach(function(o){return o.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=on({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=on({},e["x-attribsPrefix"])),n=i}else if(Ya(e)){var a=t?Xn(e.children):[],s=new Wa(a);a.forEach(function(u){return u.parent=s}),n=s}else if(Qa(e)){var a=t?Xn(e.children):[],d=new Ga(a);a.forEach(function(u){return u.parent=d}),e["x-mode"]&&(d["x-mode"]=e["x-mode"]),n=d}else if(Ja(e)){var c=new $a(e.name,e.data);e["x-name"]!=null&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}q.cloneNode=xr;function Xn(e){for(var t=e.map(function(a){return xr(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(c,o,u,l){l===void 0&&(l=u);var p=Object.getOwnPropertyDescriptor(o,u);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(c,l,p)}:function(c,o,u,l){l===void 0&&(l=u),c[l]=o[u]}),n=ne&&ne.__exportStar||function(c,o){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,c,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=fn,i=q;n(q,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},d=function(){function c(o,u,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(l=u,u=s),typeof o=="object"&&(u=o,o=void 0),this.callback=o??null,this.options=u??s,this.elementCB=l??null}return c.prototype.onparserinit=function(o){this.parser=o},c.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},c.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},c.prototype.onerror=function(o){this.handleCallback(o)},c.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},c.prototype.onopentag=function(o,u){var l=this.options.xmlMode?a.ElementType.Tag:void 0,p=new i.Element(o,u,void 0,l);this.addNode(p),this.tagStack.push(p)},c.prototype.ontext=function(o){var u=this.lastNode;if(u&&u.type===a.ElementType.Text)u.data+=o,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var l=new i.Text(o);this.addNode(l),this.lastNode=l}},c.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=o;return}var u=new i.Comment(o);this.addNode(u),this.lastNode=u},c.prototype.oncommentend=function(){this.lastNode=null},c.prototype.oncdatastart=function(){var o=new i.Text(""),u=new i.CDATA([o]);this.addNode(u),o.parent=u,this.lastNode=o},c.prototype.oncdataend=function(){this.lastNode=null},c.prototype.onprocessinginstruction=function(o,u){var l=new i.ProcessingInstruction(o,u);this.addNode(l)},c.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},c.prototype.addNode=function(o){var u=this.tagStack[this.tagStack.length-1],l=u.children[u.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),u.children.push(o),l&&(o.prev=l,l.next=o),o.parent=u,this.lastNode=null},c}();e.DomHandler=d,e.default=d})(Ua);var ei={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES=void 0,e.CASE_SENSITIVE_TAG_NAMES=["animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","linearGradient","radialGradient","textPath"],e.CASE_SENSITIVE_TAG_NAMES_MAP=e.CASE_SENSITIVE_TAG_NAMES.reduce(function(t,n){return t[n.toLowerCase()]=n,t},{})})(ei);Object.defineProperty(Yt,"__esModule",{value:!0});Yt.formatDOM=Yt.formatAttributes=void 0;var xn=Ua,el=ei;function tl(e){return el.CASE_SENSITIVE_TAG_NAMES_MAP[e]}function ti(e){for(var t={},n=0,a=e.length;n<a;n++){var i=e[n];t[i.name]=i.value}return t}Yt.formatAttributes=ti;function nl(e){e=e.toLowerCase();var t=tl(e);return t||e}function ni(e,t,n){t===void 0&&(t=null);for(var a=[],i,s=0,d=e.length;s<d;s++){var c=e[s];switch(c.nodeType){case 1:{var o=nl(c.nodeName);i=new xn.Element(o,ti(c.attributes)),i.children=ni(o==="template"?c.content.childNodes:c.childNodes,i);break}case 3:i=new xn.Text(c.nodeValue);break;case 8:i=new xn.Comment(c.nodeValue);break;default:continue}var u=a[s-1]||null;u&&(u.next=i),i.parent=t,i.prev=u,i.next=null,a.push(i)}return n&&(i=new xn.ProcessingInstruction(n.substring(0,n.indexOf(" ")).toLowerCase(),n),i.next=a[0]||null,i.parent=t,a.unshift(i),a[1]&&(a[1].prev=a[0])),a}Yt.formatDOM=ni;var rl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(gr,"__esModule",{value:!0});var al=rl(vr),il=Yt,ol=/<(![a-zA-Z\s]+)>/;function sl(e){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];var t=e.match(ol),n=t?t[1]:void 0;return(0,il.formatDOM)((0,al.default)(e),null,n)}gr.default=sl;var Ln={},Ke={},zn={},ll=0;zn.SAME=ll;var cl=1;zn.CAMELCASE=cl;zn.possibleStandardNames={accept:0,acceptCharset:1,"accept-charset":"acceptCharset",accessKey:1,action:0,allowFullScreen:1,alt:0,as:0,async:0,autoCapitalize:1,autoComplete:1,autoCorrect:1,autoFocus:1,autoPlay:1,autoSave:1,capture:0,cellPadding:1,cellSpacing:1,challenge:0,charSet:1,checked:0,children:0,cite:0,class:"className",classID:1,className:1,cols:0,colSpan:1,content:0,contentEditable:1,contextMenu:1,controls:0,controlsList:1,coords:0,crossOrigin:1,dangerouslySetInnerHTML:1,data:0,dateTime:1,default:0,defaultChecked:1,defaultValue:1,defer:0,dir:0,disabled:0,disablePictureInPicture:1,disableRemotePlayback:1,download:0,draggable:0,encType:1,enterKeyHint:1,for:"htmlFor",form:0,formMethod:1,formAction:1,formEncType:1,formNoValidate:1,formTarget:1,frameBorder:1,headers:0,height:0,hidden:0,high:0,href:0,hrefLang:1,htmlFor:1,httpEquiv:1,"http-equiv":"httpEquiv",icon:0,id:0,innerHTML:1,inputMode:1,integrity:0,is:0,itemID:1,itemProp:1,itemRef:1,itemScope:1,itemType:1,keyParams:1,keyType:1,kind:0,label:0,lang:0,list:0,loop:0,low:0,manifest:0,marginWidth:1,marginHeight:1,max:0,maxLength:1,media:0,mediaGroup:1,method:0,min:0,minLength:1,multiple:0,muted:0,name:0,noModule:1,nonce:0,noValidate:1,open:0,optimum:0,pattern:0,placeholder:0,playsInline:1,poster:0,preload:0,profile:0,radioGroup:1,readOnly:1,referrerPolicy:1,rel:0,required:0,reversed:0,role:0,rows:0,rowSpan:1,sandbox:0,scope:0,scoped:0,scrolling:0,seamless:0,selected:0,shape:0,size:0,sizes:0,span:0,spellCheck:1,src:0,srcDoc:1,srcLang:1,srcSet:1,start:0,step:0,style:0,summary:0,tabIndex:1,target:0,title:0,type:0,useMap:1,value:0,width:0,wmode:0,wrap:0,about:0,accentHeight:1,"accent-height":"accentHeight",accumulate:0,additive:0,alignmentBaseline:1,"alignment-baseline":"alignmentBaseline",allowReorder:1,alphabetic:0,amplitude:0,arabicForm:1,"arabic-form":"arabicForm",ascent:0,attributeName:1,attributeType:1,autoReverse:1,azimuth:0,baseFrequency:1,baselineShift:1,"baseline-shift":"baselineShift",baseProfile:1,bbox:0,begin:0,bias:0,by:0,calcMode:1,capHeight:1,"cap-height":"capHeight",clip:0,clipPath:1,"clip-path":"clipPath",clipPathUnits:1,clipRule:1,"clip-rule":"clipRule",color:0,colorInterpolation:1,"color-interpolation":"colorInterpolation",colorInterpolationFilters:1,"color-interpolation-filters":"colorInterpolationFilters",colorProfile:1,"color-profile":"colorProfile",colorRendering:1,"color-rendering":"colorRendering",contentScriptType:1,contentStyleType:1,cursor:0,cx:0,cy:0,d:0,datatype:0,decelerate:0,descent:0,diffuseConstant:1,direction:0,display:0,divisor:0,dominantBaseline:1,"dominant-baseline":"dominantBaseline",dur:0,dx:0,dy:0,edgeMode:1,elevation:0,enableBackground:1,"enable-background":"enableBackground",end:0,exponent:0,externalResourcesRequired:1,fill:0,fillOpacity:1,"fill-opacity":"fillOpacity",fillRule:1,"fill-rule":"fillRule",filter:0,filterRes:1,filterUnits:1,floodOpacity:1,"flood-opacity":"floodOpacity",floodColor:1,"flood-color":"floodColor",focusable:0,fontFamily:1,"font-family":"fontFamily",fontSize:1,"font-size":"fontSize",fontSizeAdjust:1,"font-size-adjust":"fontSizeAdjust",fontStretch:1,"font-stretch":"fontStretch",fontStyle:1,"font-style":"fontStyle",fontVariant:1,"font-variant":"fontVariant",fontWeight:1,"font-weight":"fontWeight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:1,"glyph-name":"glyphName",glyphOrientationHorizontal:1,"glyph-orientation-horizontal":"glyphOrientationHorizontal",glyphOrientationVertical:1,"glyph-orientation-vertical":"glyphOrientationVertical",glyphRef:1,gradientTransform:1,gradientUnits:1,hanging:0,horizAdvX:1,"horiz-adv-x":"horizAdvX",horizOriginX:1,"horiz-origin-x":"horizOriginX",ideographic:0,imageRendering:1,"image-rendering":"imageRendering",in2:0,in:0,inlist:0,intercept:0,k1:0,k2:0,k3:0,k4:0,k:0,kernelMatrix:1,kernelUnitLength:1,kerning:0,keyPoints:1,keySplines:1,keyTimes:1,lengthAdjust:1,letterSpacing:1,"letter-spacing":"letterSpacing",lightingColor:1,"lighting-color":"lightingColor",limitingConeAngle:1,local:0,markerEnd:1,"marker-end":"markerEnd",markerHeight:1,markerMid:1,"marker-mid":"markerMid",markerStart:1,"marker-start":"markerStart",markerUnits:1,markerWidth:1,mask:0,maskContentUnits:1,maskUnits:1,mathematical:0,mode:0,numOctaves:1,offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:1,"overline-position":"overlinePosition",overlineThickness:1,"overline-thickness":"overlineThickness",paintOrder:1,"paint-order":"paintOrder",panose1:0,"panose-1":"panose1",pathLength:1,patternContentUnits:1,patternTransform:1,patternUnits:1,pointerEvents:1,"pointer-events":"pointerEvents",points:0,pointsAtX:1,pointsAtY:1,pointsAtZ:1,prefix:0,preserveAlpha:1,preserveAspectRatio:1,primitiveUnits:1,property:0,r:0,radius:0,refX:1,refY:1,renderingIntent:1,"rendering-intent":"renderingIntent",repeatCount:1,repeatDur:1,requiredExtensions:1,requiredFeatures:1,resource:0,restart:0,result:0,results:0,rotate:0,rx:0,ry:0,scale:0,security:0,seed:0,shapeRendering:1,"shape-rendering":"shapeRendering",slope:0,spacing:0,specularConstant:1,specularExponent:1,speed:0,spreadMethod:1,startOffset:1,stdDeviation:1,stemh:0,stemv:0,stitchTiles:1,stopColor:1,"stop-color":"stopColor",stopOpacity:1,"stop-opacity":"stopOpacity",strikethroughPosition:1,"strikethrough-position":"strikethroughPosition",strikethroughThickness:1,"strikethrough-thickness":"strikethroughThickness",string:0,stroke:0,strokeDasharray:1,"stroke-dasharray":"strokeDasharray",strokeDashoffset:1,"stroke-dashoffset":"strokeDashoffset",strokeLinecap:1,"stroke-linecap":"strokeLinecap",strokeLinejoin:1,"stroke-linejoin":"strokeLinejoin",strokeMiterlimit:1,"stroke-miterlimit":"strokeMiterlimit",strokeWidth:1,"stroke-width":"strokeWidth",strokeOpacity:1,"stroke-opacity":"strokeOpacity",suppressContentEditableWarning:1,suppressHydrationWarning:1,surfaceScale:1,systemLanguage:1,tableValues:1,targetX:1,targetY:1,textAnchor:1,"text-anchor":"textAnchor",textDecoration:1,"text-decoration":"textDecoration",textLength:1,textRendering:1,"text-rendering":"textRendering",to:0,transform:0,typeof:0,u1:0,u2:0,underlinePosition:1,"underline-position":"underlinePosition",underlineThickness:1,"underline-thickness":"underlineThickness",unicode:0,unicodeBidi:1,"unicode-bidi":"unicodeBidi",unicodeRange:1,"unicode-range":"unicodeRange",unitsPerEm:1,"units-per-em":"unitsPerEm",unselectable:0,vAlphabetic:1,"v-alphabetic":"vAlphabetic",values:0,vectorEffect:1,"vector-effect":"vectorEffect",version:0,vertAdvY:1,"vert-adv-y":"vertAdvY",vertOriginX:1,"vert-origin-x":"vertOriginX",vertOriginY:1,"vert-origin-y":"vertOriginY",vHanging:1,"v-hanging":"vHanging",vIdeographic:1,"v-ideographic":"vIdeographic",viewBox:1,viewTarget:1,visibility:0,vMathematical:1,"v-mathematical":"vMathematical",vocab:0,widths:0,wordSpacing:1,"word-spacing":"wordSpacing",writingMode:1,"writing-mode":"writingMode",x1:0,x2:0,x:0,xChannelSelector:1,xHeight:1,"x-height":"xHeight",xlinkActuate:1,"xlink:actuate":"xlinkActuate",xlinkArcrole:1,"xlink:arcrole":"xlinkArcrole",xlinkHref:1,"xlink:href":"xlinkHref",xlinkRole:1,"xlink:role":"xlinkRole",xlinkShow:1,"xlink:show":"xlinkShow",xlinkTitle:1,"xlink:title":"xlinkTitle",xlinkType:1,"xlink:type":"xlinkType",xmlBase:1,"xml:base":"xmlBase",xmlLang:1,"xml:lang":"xmlLang",xmlns:0,"xml:space":"xmlSpace",xmlnsXlink:1,"xmlns:xlink":"xmlnsXlink",xmlSpace:1,y1:0,y2:0,y:0,yChannelSelector:1,z:0,zoomAndPan:1};const ri=0,Et=1,Bn=2,Un=3,br=4,ai=5,ii=6;function dl(e){return je.hasOwnProperty(e)?je[e]:null}function Ae(e,t,n,a,i,s,d){this.acceptsBooleans=t===Bn||t===Un||t===br,this.attributeName=a,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=d}const je={},ul=["children","dangerouslySetInnerHTML","defaultValue","defaultChecked","innerHTML","suppressContentEditableWarning","suppressHydrationWarning","style"];ul.forEach(e=>{je[e]=new Ae(e,ri,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(([e,t])=>{je[e]=new Ae(e,Et,!1,t,null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(e=>{je[e]=new Ae(e,Bn,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(e=>{je[e]=new Ae(e,Bn,!1,e,null,!1,!1)});["allowFullScreen","async","autoFocus","autoPlay","controls","default","defer","disabled","disablePictureInPicture","disableRemotePlayback","formNoValidate","hidden","loop","noModule","noValidate","open","playsInline","readOnly","required","reversed","scoped","seamless","itemScope"].forEach(e=>{je[e]=new Ae(e,Un,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(e=>{je[e]=new Ae(e,Un,!0,e,null,!1,!1)});["capture","download"].forEach(e=>{je[e]=new Ae(e,br,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(e=>{je[e]=new Ae(e,ii,!1,e,null,!1,!1)});["rowSpan","start"].forEach(e=>{je[e]=new Ae(e,ai,!1,e.toLowerCase(),null,!1,!1)});const wr=/[\-\:]([a-z])/g,Cr=e=>e[1].toUpperCase();["accent-height","alignment-baseline","arabic-form","baseline-shift","cap-height","clip-path","clip-rule","color-interpolation","color-interpolation-filters","color-profile","color-rendering","dominant-baseline","enable-background","fill-opacity","fill-rule","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","glyph-name","glyph-orientation-horizontal","glyph-orientation-vertical","horiz-adv-x","horiz-origin-x","image-rendering","letter-spacing","lighting-color","marker-end","marker-mid","marker-start","overline-position","overline-thickness","paint-order","panose-1","pointer-events","rendering-intent","shape-rendering","stop-color","stop-opacity","strikethrough-position","strikethrough-thickness","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width","text-anchor","text-decoration","text-rendering","underline-position","underline-thickness","unicode-bidi","unicode-range","units-per-em","v-alphabetic","v-hanging","v-ideographic","v-mathematical","vector-effect","vert-adv-y","vert-origin-x","vert-origin-y","word-spacing","writing-mode","xmlns:xlink","x-height"].forEach(e=>{const t=e.replace(wr,Cr);je[t]=new Ae(t,Et,!1,e,null,!1,!1)});["xlink:actuate","xlink:arcrole","xlink:role","xlink:show","xlink:title","xlink:type"].forEach(e=>{const t=e.replace(wr,Cr);je[t]=new Ae(t,Et,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(e=>{const t=e.replace(wr,Cr);je[t]=new Ae(t,Et,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(e=>{je[e]=new Ae(e,Et,!1,e.toLowerCase(),null,!1,!1)});const fl="xlinkHref";je[fl]=new Ae("xlinkHref",Et,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(e=>{je[e]=new Ae(e,Et,!1,e.toLowerCase(),null,!0,!0)});const{CAMELCASE:hl,SAME:pl,possibleStandardNames:Yr}=zn,ml=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",gl=ml+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",vl=RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+gl+"]*$")),yl=Object.keys(Yr).reduce((e,t)=>{const n=Yr[t];return n===pl?e[t]=t:n===hl?e[t.toLowerCase()]=t:e[t]=n,e},{});Ke.BOOLEAN=Un;Ke.BOOLEANISH_STRING=Bn;Ke.NUMERIC=ai;Ke.OVERLOADED_BOOLEAN=br;Ke.POSITIVE_NUMERIC=ii;Ke.RESERVED=ri;Ke.STRING=Et;Ke.getPropertyInfo=dl;Ke.isCustomAttribute=vl;Ke.possibleStandardNames=yl;var jr={},Er={},Kr=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,xl=/\n/g,bl=/^\s*/,wl=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Cl=/^:\s*/,jl=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,El=/^[;\s]*/,Sl=/^\s+|\s+$/g,Tl=`
`,Zr="/",Jr="*",Ft="",_l="comment",kl="declaration",Il=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,a=1;function i(g){var E=g.match(xl);E&&(n+=E.length);var C=g.lastIndexOf(Tl);a=~C?g.length-C:a+g.length}function s(){var g={line:n,column:a};return function(E){return E.position=new d(g),u(),E}}function d(g){this.start=g,this.end={line:n,column:a},this.source=t.source}d.prototype.content=e;function c(g){var E=new Error(t.source+":"+n+":"+a+": "+g);if(E.reason=g,E.filename=t.source,E.line=n,E.column=a,E.source=e,!t.silent)throw E}function o(g){var E=g.exec(e);if(E){var C=E[0];return i(C),e=e.slice(C.length),E}}function u(){o(bl)}function l(g){var E;for(g=g||[];E=p();)E!==!1&&g.push(E);return g}function p(){var g=s();if(!(Zr!=e.charAt(0)||Jr!=e.charAt(1))){for(var E=2;Ft!=e.charAt(E)&&(Jr!=e.charAt(E)||Zr!=e.charAt(E+1));)++E;if(E+=2,Ft===e.charAt(E-1))return c("End of comment missing");var C=e.slice(2,E-2);return a+=2,i(C),e=e.slice(E),a+=2,g({type:_l,comment:C})}}function x(){var g=s(),E=o(wl);if(E){if(p(),!o(Cl))return c("property missing ':'");var C=o(jl),V=g({type:kl,property:Qr(E[0].replace(Kr,Ft)),value:C?Qr(C[0].replace(Kr,Ft)):Ft});return o(El),V}}function j(){var g=[];l(g);for(var E;E=x();)E!==!1&&(g.push(E),l(g));return g}return u(),j()};function Qr(e){return e?e.replace(Sl,Ft):Ft}var Ml=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Er,"__esModule",{value:!0});var Al=Ml(Il);function Pl(e,t){var n=null;if(!e||typeof e!="string")return n;var a=(0,Al.default)(e),i=typeof t=="function";return a.forEach(function(s){if(s.type==="declaration"){var d=s.property,c=s.value;i?t(d,c,s):c&&(n=n||{},n[d]=c)}}),n}Er.default=Pl;var Vn={};Object.defineProperty(Vn,"__esModule",{value:!0});Vn.camelCase=void 0;var Fl=/^--[a-zA-Z0-9-]+$/,Ol=/-([a-z])/g,Nl=/^[^-]+$/,Rl=/^-(webkit|moz|ms|o|khtml)-/,Dl=/^-(ms)-/,Ll=function(e){return!e||Nl.test(e)||Fl.test(e)},zl=function(e,t){return t.toUpperCase()},ea=function(e,t){return"".concat(t,"-")},Bl=function(e,t){return t===void 0&&(t={}),Ll(e)?e:(e=e.toLowerCase(),t.reactCompat?e=e.replace(Dl,ea):e=e.replace(Rl,ea),e.replace(Ol,zl))};Vn.camelCase=Bl;var Ul=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}},Vl=Ul(Er),Hl=Vn;function rr(e,t){var n={};return!e||typeof e!="string"||(0,Vl.default)(e,function(a,i){a&&i&&(n[(0,Hl.camelCase)(a,t)]=i)}),n}rr.default=rr;var $l=rr;(function(e){var t=ne&&ne.__importDefault||function(l){return l&&l.__esModule?l:{default:l}};Object.defineProperty(e,"__esModule",{value:!0}),e.returnFirstArg=e.canTextBeChildOfNode=e.ELEMENTS_WITH_NO_TEXT_CHILDREN=e.PRESERVE_CUSTOM_ATTRIBUTES=e.setStyleProp=e.isCustomComponent=void 0;var n=m,a=t($l),i=new Set(["annotation-xml","color-profile","font-face","font-face-src","font-face-uri","font-face-format","font-face-name","missing-glyph"]);function s(l,p){return l.includes("-")?!i.has(l):!!(p&&typeof p.is=="string")}e.isCustomComponent=s;var d={reactCompat:!0};function c(l,p){if(typeof l=="string"){if(!l.trim()){p.style={};return}try{p.style=(0,a.default)(l,d)}catch{p.style={}}}}e.setStyleProp=c,e.PRESERVE_CUSTOM_ATTRIBUTES=Number(n.version.split(".")[0])>=16,e.ELEMENTS_WITH_NO_TEXT_CHILDREN=new Set(["tr","tbody","thead","tfoot","colgroup","table","head","html","frameset"]);var o=function(l){return!e.ELEMENTS_WITH_NO_TEXT_CHILDREN.has(l.name)};e.canTextBeChildOfNode=o;var u=function(l){return l};e.returnFirstArg=u})(jr);Object.defineProperty(Ln,"__esModule",{value:!0});var rn=Ke,ta=jr,Wl=["checked","value"],Gl=["input","select","textarea"],Xl={reset:!0,submit:!0};function ql(e,t){e===void 0&&(e={});var n={},a=!!(e.type&&Xl[e.type]);for(var i in e){var s=e[i];if((0,rn.isCustomAttribute)(i)){n[i]=s;continue}var d=i.toLowerCase(),c=na(d);if(c){var o=(0,rn.getPropertyInfo)(c);switch(Wl.includes(c)&&Gl.includes(t)&&!a&&(c=na("default"+d)),n[c]=s,o&&o.type){case rn.BOOLEAN:n[c]=!0;break;case rn.OVERLOADED_BOOLEAN:s===""&&(n[c]=!0);break}continue}ta.PRESERVE_CUSTOM_ATTRIBUTES&&(n[i]=s)}return(0,ta.setStyleProp)(e.style,n),n}Ln.default=ql;function na(e){return rn.possibleStandardNames[e]}var Sr={},Yl=ne&&ne.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Sr,"__esModule",{value:!0});var qn=m,Kl=Yl(Ln),sn=jr,Zl={cloneElement:qn.cloneElement,createElement:qn.createElement,isValidElement:qn.isValidElement};function oi(e,t){t===void 0&&(t={});for(var n=[],a=typeof t.replace=="function",i=t.transform||sn.returnFirstArg,s=t.library||Zl,d=s.cloneElement,c=s.createElement,o=s.isValidElement,u=e.length,l=0;l<u;l++){var p=e[l];if(a){var x=t.replace(p,l);if(o(x)){u>1&&(x=d(x,{key:x.key||l})),n.push(i(x,p,l));continue}}if(p.type==="text"){var j=!p.data.trim().length;if(j&&p.parent&&!(0,sn.canTextBeChildOfNode)(p.parent)||t.trim&&j)continue;n.push(i(p.data,p,l));continue}var g=p,E={};Jl(g)?((0,sn.setStyleProp)(g.attribs.style,g.attribs),E=g.attribs):g.attribs&&(E=(0,Kl.default)(g.attribs,g.name));var C=void 0;switch(p.type){case"script":case"style":p.children[0]&&(E.dangerouslySetInnerHTML={__html:p.children[0].data});break;case"tag":p.name==="textarea"&&p.children[0]?E.defaultValue=p.children[0].data:p.children&&p.children.length&&(C=oi(p.children,t));break;default:continue}u>1&&(E.key=l),n.push(i(c(p.name,E,C),p,l))}return n.length===1?n[0]:n}Sr.default=oi;function Jl(e){return sn.PRESERVE_CUSTOM_ATTRIBUTES&&e.type==="tag"&&(0,sn.isCustomComponent)(e.name,e.attribs)}var si={},Y={},St=ne&&ne.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(a,i){a.__proto__=i}||function(a,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(a[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function a(){this.constructor=t}t.prototype=n===null?Object.create(n):(a.prototype=n.prototype,new a)}}(),ln=ne&&ne.__assign||function(){return ln=Object.assign||function(e){for(var t,n=1,a=arguments.length;n<a;n++){t=arguments[n];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])}return e},ln.apply(this,arguments)};Object.defineProperty(Y,"__esModule",{value:!0});Y.cloneNode=Y.hasChildren=Y.isDocument=Y.isDirective=Y.isComment=Y.isText=Y.isCDATA=Y.isTag=Y.Element=Y.Document=Y.CDATA=Y.NodeWithChildren=Y.ProcessingInstruction=Y.Comment=Y.Text=Y.DataNode=Y.Node=void 0;var De=fn,Tr=function(){function e(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(e.prototype,"parentNode",{get:function(){return this.parent},set:function(t){this.parent=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousSibling",{get:function(){return this.prev},set:function(t){this.prev=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextSibling",{get:function(){return this.next},set:function(t){this.next=t},enumerable:!1,configurable:!0}),e.prototype.cloneNode=function(t){return t===void 0&&(t=!1),_r(this,t)},e}();Y.Node=Tr;var Hn=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.data=n,a}return Object.defineProperty(t.prototype,"nodeValue",{get:function(){return this.data},set:function(n){this.data=n},enumerable:!1,configurable:!0}),t}(Tr);Y.DataNode=Hn;var li=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=De.ElementType.Text,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),t}(Hn);Y.Text=li;var ci=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=De.ElementType.Comment,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),t}(Hn);Y.Comment=ci;var di=function(e){St(t,e);function t(n,a){var i=e.call(this,a)||this;return i.name=n,i.type=De.ElementType.Directive,i}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),t}(Hn);Y.ProcessingInstruction=di;var $n=function(e){St(t,e);function t(n){var a=e.call(this)||this;return a.children=n,a}return Object.defineProperty(t.prototype,"firstChild",{get:function(){var n;return(n=this.children[0])!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"childNodes",{get:function(){return this.children},set:function(n){this.children=n},enumerable:!1,configurable:!0}),t}(Tr);Y.NodeWithChildren=$n;var ui=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=De.ElementType.CDATA,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),t}($n);Y.CDATA=ui;var fi=function(e){St(t,e);function t(){var n=e!==null&&e.apply(this,arguments)||this;return n.type=De.ElementType.Root,n}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),t}($n);Y.Document=fi;var hi=function(e){St(t,e);function t(n,a,i,s){i===void 0&&(i=[]),s===void 0&&(s=n==="script"?De.ElementType.Script:n==="style"?De.ElementType.Style:De.ElementType.Tag);var d=e.call(this,i)||this;return d.name=n,d.attribs=a,d.type=s,d}return Object.defineProperty(t.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tagName",{get:function(){return this.name},set:function(n){this.name=n},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"attributes",{get:function(){var n=this;return Object.keys(this.attribs).map(function(a){var i,s;return{name:a,value:n.attribs[a],namespace:(i=n["x-attribsNamespace"])===null||i===void 0?void 0:i[a],prefix:(s=n["x-attribsPrefix"])===null||s===void 0?void 0:s[a]}})},enumerable:!1,configurable:!0}),t}($n);Y.Element=hi;function pi(e){return(0,De.isTag)(e)}Y.isTag=pi;function mi(e){return e.type===De.ElementType.CDATA}Y.isCDATA=mi;function gi(e){return e.type===De.ElementType.Text}Y.isText=gi;function vi(e){return e.type===De.ElementType.Comment}Y.isComment=vi;function yi(e){return e.type===De.ElementType.Directive}Y.isDirective=yi;function xi(e){return e.type===De.ElementType.Root}Y.isDocument=xi;function Ql(e){return Object.prototype.hasOwnProperty.call(e,"children")}Y.hasChildren=Ql;function _r(e,t){t===void 0&&(t=!1);var n;if(gi(e))n=new li(e.data);else if(vi(e))n=new ci(e.data);else if(pi(e)){var a=t?Yn(e.children):[],i=new hi(e.name,ln({},e.attribs),a);a.forEach(function(o){return o.parent=i}),e.namespace!=null&&(i.namespace=e.namespace),e["x-attribsNamespace"]&&(i["x-attribsNamespace"]=ln({},e["x-attribsNamespace"])),e["x-attribsPrefix"]&&(i["x-attribsPrefix"]=ln({},e["x-attribsPrefix"])),n=i}else if(mi(e)){var a=t?Yn(e.children):[],s=new ui(a);a.forEach(function(u){return u.parent=s}),n=s}else if(xi(e)){var a=t?Yn(e.children):[],d=new fi(a);a.forEach(function(u){return u.parent=d}),e["x-mode"]&&(d["x-mode"]=e["x-mode"]),n=d}else if(yi(e)){var c=new di(e.name,e.data);e["x-name"]!=null&&(c["x-name"]=e["x-name"],c["x-publicId"]=e["x-publicId"],c["x-systemId"]=e["x-systemId"]),n=c}else throw new Error("Not implemented yet: ".concat(e.type));return n.startIndex=e.startIndex,n.endIndex=e.endIndex,e.sourceCodeLocation!=null&&(n.sourceCodeLocation=e.sourceCodeLocation),n}Y.cloneNode=_r;function Yn(e){for(var t=e.map(function(a){return _r(a,!0)}),n=1;n<t.length;n++)t[n].prev=t[n-1],t[n-1].next=t[n];return t}(function(e){var t=ne&&ne.__createBinding||(Object.create?function(c,o,u,l){l===void 0&&(l=u);var p=Object.getOwnPropertyDescriptor(o,u);(!p||("get"in p?!o.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return o[u]}}),Object.defineProperty(c,l,p)}:function(c,o,u,l){l===void 0&&(l=u),c[l]=o[u]}),n=ne&&ne.__exportStar||function(c,o){for(var u in c)u!=="default"&&!Object.prototype.hasOwnProperty.call(o,u)&&t(o,c,u)};Object.defineProperty(e,"__esModule",{value:!0}),e.DomHandler=void 0;var a=fn,i=Y;n(Y,e);var s={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},d=function(){function c(o,u,l){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof u=="function"&&(l=u,u=s),typeof o=="object"&&(u=o,o=void 0),this.callback=o??null,this.options=u??s,this.elementCB=l??null}return c.prototype.onparserinit=function(o){this.parser=o},c.prototype.onreset=function(){this.dom=[],this.root=new i.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},c.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},c.prototype.onerror=function(o){this.handleCallback(o)},c.prototype.onclosetag=function(){this.lastNode=null;var o=this.tagStack.pop();this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(o)},c.prototype.onopentag=function(o,u){var l=this.options.xmlMode?a.ElementType.Tag:void 0,p=new i.Element(o,u,void 0,l);this.addNode(p),this.tagStack.push(p)},c.prototype.ontext=function(o){var u=this.lastNode;if(u&&u.type===a.ElementType.Text)u.data+=o,this.options.withEndIndices&&(u.endIndex=this.parser.endIndex);else{var l=new i.Text(o);this.addNode(l),this.lastNode=l}},c.prototype.oncomment=function(o){if(this.lastNode&&this.lastNode.type===a.ElementType.Comment){this.lastNode.data+=o;return}var u=new i.Comment(o);this.addNode(u),this.lastNode=u},c.prototype.oncommentend=function(){this.lastNode=null},c.prototype.oncdatastart=function(){var o=new i.Text(""),u=new i.CDATA([o]);this.addNode(u),o.parent=u,this.lastNode=o},c.prototype.oncdataend=function(){this.lastNode=null},c.prototype.onprocessinginstruction=function(o,u){var l=new i.ProcessingInstruction(o,u);this.addNode(l)},c.prototype.handleCallback=function(o){if(typeof this.callback=="function")this.callback(o,this.dom);else if(o)throw o},c.prototype.addNode=function(o){var u=this.tagStack[this.tagStack.length-1],l=u.children[u.children.length-1];this.options.withStartIndices&&(o.startIndex=this.parser.startIndex),this.options.withEndIndices&&(o.endIndex=this.parser.endIndex),u.children.push(o),l&&(o.prev=l,l.next=o),o.parent=u,this.lastNode=null},c}();e.DomHandler=d,e.default=d})(si);(function(e){var t=ne&&ne.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToDOM=e.domToReact=e.attributesToProps=e.Text=e.ProcessingInstruction=e.Element=e.Comment=void 0;var n=t(gr);e.htmlToDOM=n.default;var a=t(Ln);e.attributesToProps=a.default;var i=t(Sr);e.domToReact=i.default;var s=si;Object.defineProperty(e,"Comment",{enumerable:!0,get:function(){return s.Comment}}),Object.defineProperty(e,"Element",{enumerable:!0,get:function(){return s.Element}}),Object.defineProperty(e,"ProcessingInstruction",{enumerable:!0,get:function(){return s.ProcessingInstruction}}),Object.defineProperty(e,"Text",{enumerable:!0,get:function(){return s.Text}});var d={lowerCaseAttributeNames:!1};function c(o,u){if(typeof o!="string")throw new TypeError("First argument must be a string");return o?(0,i.default)((0,n.default)(o,(u==null?void 0:u.htmlparser2)||d),u):[]}e.default=c})(Ba);const ra=An(Ba),ec=ra.default||ra;function Te(){return Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Te.apply(this,arguments)}function kr(e,t){if(e==null)return{};var n,a,i={},s=Object.keys(e);for(a=0;a<s.length;a++)t.indexOf(n=s[a])>=0||(i[n]=e[n]);return i}function Sn(e){var t=m.useRef({fn:e,curr:void 0}).current;if(t.fn=e,!t.curr){var n=Object.create(null);Object.keys(e).forEach(function(a){n[a]=function(){var i;return(i=t.fn[a]).call.apply(i,[t.fn].concat([].slice.call(arguments)))}}),t.curr=n}return t.curr}function ar(e){return m.useReducer(function(t,n){return Te({},t,typeof n=="function"?n(t):n)},e)}m.createContext(void 0);var ft=typeof window<"u"&&"ontouchstart"in window,ir=function(e,t,n){return Math.max(Math.min(e,n),t)},bn=function(e,t,n){return t===void 0&&(t=0),n===void 0&&(n=0),ir(e,1*(1-n),Math.max(6,t)*(1+n))},or=typeof window>"u"||/ServerSideRendering/.test(navigator&&navigator.userAgent)?m.useEffect:m.useLayoutEffect;function Gt(e,t,n){var a=m.useRef(t);a.current=t,m.useEffect(function(){function i(s){a.current(s)}return e&&window.addEventListener(e,i,n),function(){e&&window.removeEventListener(e,i)}},[e])}var tc=["container"];function nc(e){var t=e.container,n=t===void 0?document.body:t,a=kr(e,tc);return ro.createPortal(K.createElement("div",Te({},a)),n)}function rc(e){return K.createElement("svg",Te({width:"44",height:"44",viewBox:"0 0 768 768"},e),K.createElement("path",{d:"M607.5 205.5l-178.5 178.5 178.5 178.5-45 45-178.5-178.5-178.5 178.5-45-45 178.5-178.5-178.5-178.5 45-45 178.5 178.5 178.5-178.5z"}))}function ac(e){return K.createElement("svg",Te({width:"44",height:"44",viewBox:"0 0 768 768"},e),K.createElement("path",{d:"M640.5 352.5v63h-390l178.5 180-45 45-256.5-256.5 256.5-256.5 45 45-178.5 180h390z"}))}function ic(e){return K.createElement("svg",Te({width:"44",height:"44",viewBox:"0 0 768 768"},e),K.createElement("path",{d:"M384 127.5l256.5 256.5-256.5 256.5-45-45 178.5-180h-390v-63h390l-178.5-180z"}))}function oc(){return m.useEffect(function(){var e=document.body.style,t=e.overflow;return e.overflow="hidden",function(){e.overflow=t}},[]),null}function aa(e){var t=e.touches[0],n=t.clientX,a=t.clientY;if(e.touches.length>=2){var i=e.touches[1],s=i.clientX,d=i.clientY;return[(n+s)/2,(a+d)/2,Math.sqrt(Math.pow(s-n,2)+Math.pow(d-a,2))]}return[n,a,0]}var wt=function(e,t,n,a){var i=n*t,s=(i-a)/2,d=void 0,c=e;return i<=a?(d=1,c=0):e>0&&s-e<=0?(d=2,c=s):e<0&&s+e<=0&&(d=3,c=-s),[d,c]};function Kn(e,t,n,a,i,s,d,c,o,u){d===void 0&&(d=innerWidth/2),c===void 0&&(c=innerHeight/2),o===void 0&&(o=0),u===void 0&&(u=0);var l=wt(e,s,n,innerWidth)[0],p=wt(t,s,a,innerHeight),x=innerWidth/2,j=innerHeight/2;return{x:d-s/i*(d-(x+e))-x+(a/n>=3&&n*s===innerWidth?0:l?o/2:o),y:c-s/i*(c-(j+t))-j+(p[0]?u/2:u),lastCX:d,lastCY:c}}function sr(e,t,n){var a=e%180!=0;return a?[n,t,a]:[t,n,a]}function Zn(e,t,n){var a=sr(n,innerWidth,innerHeight),i=a[0],s=a[1],d=0,c=i,o=s,u=e/t*s,l=t/e*i;return e<i&&t<s?(c=e,o=t):e<i&&t>=s?c=u:e>=i&&t<s||e/t>i/s?o=l:t/e>=3&&!a[2]?d=((o=l)-s)/2:c=u,{width:c,height:o,x:0,y:d,pause:!0}}function wn(e,t){var n=t.leading,a=n!==void 0&&n,i=t.maxWait,s=t.wait,d=s===void 0?i||0:s,c=m.useRef(e);c.current=e;var o=m.useRef(0),u=m.useRef(),l=function(){return u.current&&clearTimeout(u.current)},p=m.useCallback(function(){var x=[].slice.call(arguments),j=Date.now();function g(){o.current=j,l(),c.current.apply(null,x)}var E=o.current,C=j-E;if(E===0&&(a&&g(),o.current=j),i!==void 0){if(C>i)return void g()}else C<d&&(o.current=j);l(),u.current=setTimeout(function(){g(),o.current=0},d)},[d,i,a]);return p.cancel=l,p}var ia=function(e,t,n){return Ot(e,t,n,100,function(a){return a},function(){return Ot(t,e,n)})},sc=function(e){return 1-Math.pow(1-e,4)};function Ot(e,t,n,a,i,s){a===void 0&&(a=400),i===void 0&&(i=sc);var d=t-e;if(d!==0){var c=Date.now(),o=0,u=function(){var p=Math.min(1,(Date.now()-c)/a);n(e+i(p)*d)&&p<1?l():(cancelAnimationFrame(o),p>=1&&s&&s())};l()}function l(){o=requestAnimationFrame(u)}}var lc={T:0,L:0,W:0,H:0,FIT:void 0},bi=function(){var e=m.useRef(!1);return m.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),e},cc=["className"];function dc(e){var t=e.className,n=kr(e,cc);return K.createElement("div",Te({className:"PhotoView__Spinner "+t},n),K.createElement("svg",{viewBox:"0 0 32 32",width:"36",height:"36",fill:"white"},K.createElement("path",{opacity:".25",d:"M16 0 A16 16 0 0 0 16 32 A16 16 0 0 0 16 0 M16 4 A12 12 0 0 1 16 28 A12 12 0 0 1 16 4"}),K.createElement("path",{d:"M16 0 A16 16 0 0 1 32 16 L28 16 A12 12 0 0 0 16 4z"})))}var uc=["src","loaded","broken","className","onPhotoLoad","loadingElement","brokenElement"];function fc(e){var t=e.src,n=e.loaded,a=e.broken,i=e.className,s=e.onPhotoLoad,d=e.loadingElement,c=e.brokenElement,o=kr(e,uc),u=bi();return t&&!a?K.createElement(K.Fragment,null,K.createElement("img",Te({className:"PhotoView__Photo"+(i?" "+i:""),src:t,onLoad:function(l){var p=l.target;u.current&&s({loaded:!0,naturalWidth:p.naturalWidth,naturalHeight:p.naturalHeight})},onError:function(){u.current&&s({broken:!0})},alt:""},o)),!n&&(K.createElement("span",{className:"PhotoView__icon"},d)||K.createElement(dc,{className:"PhotoView__icon"}))):c?K.createElement("span",{className:"PhotoView__icon"},typeof c=="function"?c({src:t}):c):null}var hc={naturalWidth:void 0,naturalHeight:void 0,width:void 0,height:void 0,loaded:void 0,broken:!1,x:0,y:0,touched:!1,maskTouched:!1,rotate:0,scale:1,CX:0,CY:0,lastX:0,lastY:0,lastCX:0,lastCY:0,lastScale:1,touchTime:0,touchLength:0,pause:!0,stopRaf:!0,reach:void 0};function pc(e){var t=e.item,n=t.src,a=t.render,i=t.width,s=i===void 0?0:i,d=t.height,c=d===void 0?0:d,o=t.originRef,u=e.visible,l=e.speed,p=e.easing,x=e.wrapClassName,j=e.className,g=e.style,E=e.loadingElement,C=e.brokenElement,V=e.onPhotoTap,S=e.onMaskTap,v=e.onReachMove,I=e.onReachUp,U=e.onPhotoResize,w=e.isActive,_=e.expose,M=ar(hc),R=M[0],W=M[1],Pe=m.useRef(0),me=bi(),Ze=R.naturalWidth,Ee=Ze===void 0?s:Ze,ee=R.naturalHeight,de=ee===void 0?c:ee,Fe=R.width,Se=Fe===void 0?s:Fe,pt=R.height,h=pt===void 0?c:pt,f=R.loaded,k=f===void 0?!n:f,A=R.broken,P=R.x,O=R.y,N=R.touched,F=R.stopRaf,L=R.maskTouched,G=R.rotate,B=R.scale,J=R.CX,Z=R.CY,ae=R.lastX,H=R.lastY,$=R.lastCX,be=R.lastCY,se=R.lastScale,ge=R.touchTime,Oe=R.touchLength,le=R.pause,ze=R.reach,Je=Sn({onScale:function(b){return _e(bn(b))},onRotate:function(b){G!==b&&(_({rotate:b}),W(Te({rotate:b},Zn(Ee,de,b))))}});function _e(b,D,Q){B!==b&&(_({scale:b}),W(Te({scale:b},Kn(P,O,Se,h,B,b,D,Q),b<=1&&{x:0,y:0})))}var T=wn(function(b,D,Q){if(Q===void 0&&(Q=0),(N||L)&&w){var _t=sr(G,Se,h),at=_t[0],We=_t[1];if(Q===0&&Pe.current===0){var Ce=Math.abs(b-J)<=20,Le=Math.abs(D-Z)<=20;if(Ce&&Le)return void W({lastCX:b,lastCY:D});Pe.current=Ce?D>Z?3:2:1}var kt=b-$,It=D-be,Ge=void 0;if(Q===0){var Mt=wt(kt+ae,B,at,innerWidth)[0],Bt=wt(It+H,B,We,innerHeight);Ge=function(gt,ot,st,tt){return ot&&gt===1||tt==="x"?"x":st&&gt>1||tt==="y"?"y":void 0}(Pe.current,Mt,Bt[0],ze),Ge!==void 0&&v(Ge,b,D,B)}if(Ge==="x"||L)return void W({reach:"x"});var it=bn(B+(Q-Oe)/100/2*B,Ee/Se,.2);_({scale:it}),W(Te({touchLength:Q,reach:Ge,scale:it},Kn(P,O,Se,h,B,it,b,D,kt,It)))}},{maxWait:8});function ue(b){return!F&&!N&&(me.current&&W(Te({},b,{pause:u})),me.current)}var ve,fe,Be,Qe,Tt,mt,Dt,ke,hn=(Tt=function(b){return ue({x:b})},mt=function(b){return ue({y:b})},Dt=function(b){return me.current&&(_({scale:b}),W({scale:b})),!N&&me.current},ke=Sn({X:function(b){return Tt(b)},Y:function(b){return mt(b)},S:function(b){return Dt(b)}}),function(b,D,Q,_t,at,We,Ce,Le,kt,It,Ge){var Mt=sr(It,at,We),Bt=Mt[0],it=Mt[1],gt=wt(b,Le,Bt,innerWidth),ot=gt[0],st=gt[1],tt=wt(D,Le,it,innerHeight),Ut=tt[0],mn=tt[1],Vt=Date.now()-Ge;if(Vt>=200||Le!=Ce||Math.abs(kt-Ce)>1){var vt=Kn(b,D,at,We,Ce,Le),lt=vt.x,At=vt.y,Ue=ot?st:lt!==b?lt:null,Ht=Ut?mn:At!==D?At:null;return Ue!==null&&Ot(b,Ue,ke.X),Ht!==null&&Ot(D,Ht,ke.Y),void(Le!=Ce&&Ot(Ce,Le,ke.S))}var Pt=(b-Q)/Vt,yt=(D-_t)/Vt,xt=Math.sqrt(Math.pow(Pt,2)+Math.pow(yt,2)),ct=!1,dt=!1;(function(Xe,Ie){var Me=Xe,ut=0,qe=void 0,Ve=0,$t=function(en){qe||(qe=en);var tn=en-qe,Ir=Math.sign(Xe),Mr=-.001*Ir,Ar=Math.sign(-Me)*Math.pow(Me,2)*2e-4,Ti=Me*tn+(Mr+Ar)*Math.pow(tn,2)/2;ut+=Ti,qe=en,Ir*(Me+=(Mr+Ar)*tn)<=0?He():Ie(ut)?nt():He()};function nt(){Ve=requestAnimationFrame($t)}function He(){cancelAnimationFrame(Ve)}nt()})(xt,function(Xe){var Ie=b+Xe*(Pt/xt),Me=D+Xe*(yt/xt),ut=wt(Ie,Ce,Bt,innerWidth),qe=ut[0],Ve=ut[1],$t=wt(Me,Ce,it,innerHeight),nt=$t[0],He=$t[1];if(qe&&!ct&&(ct=!0,ot?Ot(Ie,Ve,ke.X):ia(Ve,Ie+(Ie-Ve),ke.X)),nt&&!dt&&(dt=!0,Ut?Ot(Me,He,ke.Y):ia(He,Me+(Me-He),ke.Y)),ct&&dt)return!1;var en=ct||ke.X(Ve),tn=dt||ke.Y(He);return en&&tn})}),Lt=(ve=V,fe=function(b,D){ze||_e(B!==1?1:Math.max(2,Ee/Se),b,D)},Be=m.useRef(0),Qe=wn(function(){Be.current=0,ve.apply(void 0,[].slice.call(arguments))},{wait:300}),function(){var b=[].slice.call(arguments);Be.current+=1,Qe.apply(void 0,b),Be.current>=2&&(Qe.cancel(),Be.current=0,fe.apply(void 0,b))});function zt(b,D){if(Pe.current=0,(N||L)&&w){W({touched:!1,maskTouched:!1,pause:!1,stopRaf:!1,reach:void 0});var Q=bn(B,Ee/Se);if(hn(P,O,ae,H,Se,h,B,Q,se,G,ge),I(b,D),J===b&&Z===D){if(N)return void Lt(b,D);L&&S(b,D)}}}function Qt(b,D,Q){Q===void 0&&(Q=0),W({touched:!0,CX:b,CY:D,lastCX:b,lastCY:D,lastX:P,lastY:O,lastScale:B,touchLength:Q,touchTime:Date.now()})}function pn(b){W({maskTouched:!0,CX:b.clientX,CY:b.clientY,lastX:P,lastY:O})}Gt(ft?void 0:"mousemove",function(b){b.preventDefault(),T(b.clientX,b.clientY)}),Gt(ft?void 0:"mouseup",function(b){zt(b.clientX,b.clientY)}),Gt(ft?"touchmove":void 0,function(b){b.preventDefault();var D=aa(b);T.apply(void 0,D)},{passive:!1}),Gt(ft?"touchend":void 0,function(b){var D=b.changedTouches[0];zt(D.clientX,D.clientY)},{passive:!1}),Gt("resize",wn(function(){k&&!N&&(W(Zn(Ee,de,G)),U())},{maxWait:8})),or(function(){w&&_(Te({scale:B,rotate:G},Je))},[w]);var et=function(b,D,Q,_t,at,We,Ce,Le,kt,It){var Ge=function(lt,At,Ue,Ht,Pt){var yt=m.useRef(!1),xt=ar({lead:!0,scale:Ue}),ct=xt[0],dt=ct.lead,Xe=ct.scale,Ie=xt[1],Me=wn(function(ut){try{return Pt(!0),Ie({lead:!1,scale:ut}),Promise.resolve()}catch(qe){return Promise.reject(qe)}},{wait:Ht});return or(function(){yt.current?(Pt(!1),Ie({lead:!0}),Me(Ue)):yt.current=!0},[Ue]),dt?[lt*Xe,At*Xe,Ue/Xe]:[lt*Ue,At*Ue,1]}(We,Ce,Le,kt,It),Mt=Ge[0],Bt=Ge[1],it=Ge[2],gt=function(lt,At,Ue,Ht,Pt){var yt=m.useState(lc),xt=yt[0],ct=yt[1],dt=m.useState(0),Xe=dt[0],Ie=dt[1],Me=m.useRef(),ut=Sn({OK:function(){return lt&&Ie(4)}});function qe(Ve){Pt(!1),Ie(Ve)}return m.useEffect(function(){if(Me.current||(Me.current=Date.now()),Ue){if(function(Ve,$t){var nt=Ve&&Ve.current;if(nt&&nt.nodeType===1){var He=nt.getBoundingClientRect();$t({T:He.top,L:He.left,W:He.width,H:He.height,FIT:nt.tagName==="IMG"?getComputedStyle(nt).objectFit:void 0})}}(At,ct),lt)return Date.now()-Me.current<250?(Ie(1),requestAnimationFrame(function(){Ie(2),requestAnimationFrame(function(){return qe(3)})}),void setTimeout(ut.OK,Ht)):void Ie(4);qe(5)}},[lt,Ue]),[Xe,xt]}(b,D,Q,kt,It),ot=gt[0],st=gt[1],tt=st.W,Ut=st.FIT,mn=innerWidth/2,Vt=innerHeight/2,vt=ot<3||ot>4;return[vt?tt?st.L:mn:_t+(mn-We*Le/2),vt?tt?st.T:Vt:at+(Vt-Ce*Le/2),Mt,vt&&Ut?Mt*(st.H/tt):Bt,ot===0?it:vt?tt/(We*Le)||.01:it,vt?Ut?1:0:1,ot,Ut]}(u,o,k,P,O,Se,h,B,l,function(b){return W({pause:b})}),X=et[4],ie=et[6],ye="transform "+l+"ms "+p,he={className:j,onMouseDown:ft?void 0:function(b){b.stopPropagation(),b.button===0&&Qt(b.clientX,b.clientY,0)},onTouchStart:ft?function(b){b.stopPropagation(),Qt.apply(void 0,aa(b))}:void 0,onWheel:function(b){if(!ze){var D=bn(B-b.deltaY/100/2,Ee/Se);W({stopRaf:!0}),_e(D,b.clientX,b.clientY)}},style:{width:et[2],height:et[3],opacity:et[5],objectFit:ie===4?void 0:et[7],transform:G?"rotate("+G+"deg)":void 0,transition:ie>2?ye+", opacity "+l+"ms ease, height "+(ie<4?l/2:ie>4?l:0)+"ms "+p:void 0}};return K.createElement("div",{className:"PhotoView__PhotoWrap"+(x?" "+x:""),style:g,onMouseDown:!ft&&w?pn:void 0,onTouchStart:ft&&w?function(b){return pn(b.touches[0])}:void 0},K.createElement("div",{className:"PhotoView__PhotoBox",style:{transform:"matrix("+X+", 0, 0, "+X+", "+et[0]+", "+et[1]+")",transition:N||le?void 0:ye,willChange:w?"transform":void 0}},n?K.createElement(fc,Te({src:n,loaded:k,broken:A},he,{onPhotoLoad:function(b){W(Te({},b,b.loaded&&Zn(b.naturalWidth||0,b.naturalHeight||0,G)))},loadingElement:E,brokenElement:C})):a&&a({attrs:he,scale:X,rotate:G})))}var oa={x:0,touched:!1,pause:!1,lastCX:void 0,lastCY:void 0,bg:void 0,lastBg:void 0,overlay:!0,minimal:!0,scale:1,rotate:0};function mc(e){var t=e.loop,n=t===void 0?3:t,a=e.speed,i=e.easing,s=e.photoClosable,d=e.maskClosable,c=d===void 0||d,o=e.maskOpacity,u=o===void 0?1:o,l=e.pullClosable,p=l===void 0||l,x=e.bannerVisible,j=x===void 0||x,g=e.overlayRender,E=e.toolbarRender,C=e.className,V=e.maskClassName,S=e.photoClassName,v=e.photoWrapClassName,I=e.loadingElement,U=e.brokenElement,w=e.images,_=e.index,M=_===void 0?0:_,R=e.onIndexChange,W=e.visible,Pe=e.onClose,me=e.afterClose,Ze=e.portalContainer,Ee=ar(oa),ee=Ee[0],de=Ee[1],Fe=m.useState(0),Se=Fe[0],pt=Fe[1],h=ee.x,f=ee.touched,k=ee.pause,A=ee.lastCX,P=ee.lastCY,O=ee.bg,N=O===void 0?u:O,F=ee.lastBg,L=ee.overlay,G=ee.minimal,B=ee.scale,J=ee.rotate,Z=ee.onScale,ae=ee.onRotate,H=e.hasOwnProperty("index"),$=H?M:Se,be=H?R:pt,se=m.useRef($),ge=w.length,Oe=w[$],le=typeof n=="boolean"?n:ge>n,ze=function(X,ie){var ye=m.useReducer(function(Q){return!Q},!1)[1],he=m.useRef(0),b=function(Q,_t){var at=m.useRef(Q);function We(Ce){at.current=Ce}return m.useMemo(function(){(function(Ce){X?(Ce(X),he.current=1):he.current=2})(We)},[Q]),[at.current,We]}(X),D=b[1];return[b[0],he.current,function(){ye(),he.current===2&&(D(!1),ie&&ie()),he.current=0}]}(W,me),Je=ze[0],_e=ze[1],T=ze[2];or(function(){if(Je)return de({pause:!0,x:$*-(innerWidth+20)}),void(se.current=$);de(oa)},[Je]);var ue=Sn({close:function(X){ae&&ae(0),de({overlay:!0,lastBg:N}),Pe(X)},changeIndex:function(X,ie){ie===void 0&&(ie=!1);var ye=le?se.current+(X-$):X,he=ge-1,b=ir(ye,0,he),D=le?ye:b,Q=innerWidth+20;de({touched:!1,lastCX:void 0,lastCY:void 0,x:-Q*D,pause:ie}),se.current=D,be&&be(le?X<0?he:X>he?0:X:b)}}),ve=ue.close,fe=ue.changeIndex;function Be(X){return X?ve():de({overlay:!L})}function Qe(){de({x:-(innerWidth+20)*$,lastCX:void 0,lastCY:void 0,pause:!0}),se.current=$}function Tt(X,ie,ye,he){X==="x"?function(b){if(A!==void 0){var D=b-A,Q=D;!le&&($===0&&D>0||$===ge-1&&D<0)&&(Q=D/2),de({touched:!0,lastCX:A,x:-(innerWidth+20)*se.current+Q,pause:!1})}else de({touched:!0,lastCX:b,x:h,pause:!1})}(ie):X==="y"&&function(b,D){if(P!==void 0){var Q=u===null?null:ir(u,.01,u-Math.abs(b-P)/100/4);de({touched:!0,lastCY:P,bg:D===1?Q:u,minimal:D===1})}else de({touched:!0,lastCY:b,bg:N,minimal:!0})}(ye,he)}function mt(X,ie){var ye=X-(A??X),he=ie-(P??ie),b=!1;if(ye<-40)fe($+1);else if(ye>40)fe($-1);else{var D=-(innerWidth+20)*se.current;Math.abs(he)>100&&G&&p&&(b=!0,ve()),de({touched:!1,x:D,lastCX:void 0,lastCY:void 0,bg:u,overlay:!!b||L})}}Gt("keydown",function(X){if(W)switch(X.key){case"ArrowLeft":fe($-1,!0);break;case"ArrowRight":fe($+1,!0);break;case"Escape":ve()}});var Dt=function(X,ie,ye){return m.useMemo(function(){var he=X.length;return ye?X.concat(X).concat(X).slice(he+ie-1,he+ie+2):X.slice(Math.max(ie-1,0),Math.min(ie+2,he+1))},[X,ie,ye])}(w,$,le);if(!Je)return null;var ke=L&&!_e,hn=W?N:F,Lt=Z&&ae&&{images:w,index:$,visible:W,onClose:ve,onIndexChange:fe,overlayVisible:ke,overlay:Oe&&Oe.overlay,scale:B,rotate:J,onScale:Z,onRotate:ae},zt=a?a(_e):400,Qt=i?i(_e):"cubic-bezier(0.25, 0.8, 0.25, 1)",pn=a?a(3):600,et=i?i(3):"cubic-bezier(0.25, 0.8, 0.25, 1)";return K.createElement(nc,{className:"PhotoView-Portal"+(ke?"":" PhotoView-Slider__clean")+(W?"":" PhotoView-Slider__willClose")+(C?" "+C:""),role:"dialog",onClick:function(X){return X.stopPropagation()},container:Ze},W&&K.createElement(oc,null),K.createElement("div",{className:"PhotoView-Slider__Backdrop"+(V?" "+V:"")+(_e===1?" PhotoView-Slider__fadeIn":_e===2?" PhotoView-Slider__fadeOut":""),style:{background:hn?"rgba(0, 0, 0, "+hn+")":void 0,transitionTimingFunction:Qt,transitionDuration:(f?0:zt)+"ms",animationDuration:zt+"ms"},onAnimationEnd:T}),j&&K.createElement("div",{className:"PhotoView-Slider__BannerWrap"},K.createElement("div",{className:"PhotoView-Slider__Counter"},$+1," / ",ge),K.createElement("div",{className:"PhotoView-Slider__BannerRight"},E&&Lt&&E(Lt),K.createElement(rc,{className:"PhotoView-Slider__toolbarIcon",onClick:ve}))),Dt.map(function(X,ie){var ye=le||$!==0?se.current-1+ie:$+ie;return K.createElement(pc,{key:le?X.key+"/"+X.src+"/"+ye:X.key,item:X,speed:zt,easing:Qt,visible:W,onReachMove:Tt,onReachUp:mt,onPhotoTap:function(){return Be(s)},onMaskTap:function(){return Be(c)},wrapClassName:v,className:S,style:{left:(innerWidth+20)*ye+"px",transform:"translate3d("+h+"px, 0px, 0)",transition:f||k?void 0:"transform "+pn+"ms "+et},loadingElement:I,brokenElement:U,onPhotoResize:Qe,isActive:se.current===ye,expose:de})}),!ft&&j&&K.createElement(K.Fragment,null,(le||$!==0)&&K.createElement("div",{className:"PhotoView-Slider__ArrowLeft",onClick:function(){return fe($-1,!0)}},K.createElement(ac,null)),(le||$+1<ge)&&K.createElement("div",{className:"PhotoView-Slider__ArrowRight",onClick:function(){return fe($+1,!0)}},K.createElement(ic,null))),g&&Lt&&K.createElement("div",{className:"PhotoView-Slider__Overlay"},g(Lt)))}const gc=e=>{const n=new DOMParser().parseFromString(e,"text/html").querySelectorAll("img");return Array.from(n).map(a=>a.getAttribute("src"))},vc=({url:e,text:t})=>{const[n,a]=m.useState(!1);return r.jsx(so,{to:e,style:{color:"inherit",textDecoration:n?"underline":"none"},onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:t})},yc=m.forwardRef((e,t)=>{const n=dn(),a=y(j=>j.activeContent),i=y(j=>j.fontSize),[s,d]=m.useState(80),[c,o]=m.useState(!1);if(!a)return r.jsxs("div",{ref:t,className:"content-empty",children:[r.jsx(ao,{style:{fontSize:"64px"}}),r.jsx(z.Title,{heading:6,style:{color:"var(--color-text-3)",marginTop:"10px"},children:"ReactFlux"})]});const u=ec(a.content),l=a.feed.category.id,p=a.feed.category.title,x=gc(a.content);return r.jsxs("div",{ref:t,className:"article-content",children:[r.jsxs("div",{className:"article-title",children:[r.jsx(z.Title,{heading:3,children:r.jsx("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",children:a.title})}),r.jsx(z.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:r.jsx(vc,{url:`/feed/${a.feed.id}`,text:a.feed.title})}),r.jsx(z.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:` - ${a.author}`}),r.jsx(z.Text,{children:r.jsx(cn,{size:"small",onClick:()=>{n(`/group/${l}`)},style:{marginLeft:"10px",cursor:"pointer"},children:p})}),r.jsx("br",{}),r.jsx(z.Text,{style:{color:"var(--color-text-3)",fontSize:"0.75 rem"},children:Xt(a.published_at).format("dddd, MMMM D, YYYY [at] h:mm A")}),r.jsx(rt,{})]}),r.jsx("div",{className:"article-top-bar",children:r.jsxs(re.Group,{children:[r.jsx(Ne,{content:"Expand article body",mini:!0,children:r.jsx(re,{disabled:s===100,icon:r.jsx(lr,{}),size:"mini",type:"primary",onClick:()=>d(j=>j+10)})}),r.jsx(Ne,{content:"Reduce article body",mini:!0,children:r.jsx(re,{disabled:s===60,icon:r.jsx(io,{}),size:"mini",type:"primary",onClick:()=>d(j=>j-10)})}),r.jsx(Ne,{content:"Open photo slider",mini:!0,children:r.jsx(re,{disabled:x.length===0,icon:r.jsx(oo,{}),size:"mini",type:"primary",onClick:()=>o(!0)})})]})}),r.jsxs("div",{className:"article-body",style:{fontSize:`${i}rem`,width:`${s}%`},children:[u,x.length>0&&r.jsx(mc,{images:x.map(j=>({src:j,key:j})),visible:c,onClose:()=>o(!1)})]},a.id)]})});var wi={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var s="",d=0;d<arguments.length;d++){var c=arguments[d];c&&(s=i(s,a(c)))}return s}function a(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return n.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var d="";for(var c in s)t.call(s,c)&&s[c]&&(d=i(d,c));return d}function i(s,d){return d?s?s+" "+d:s+d:s}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(wi);var xc=wi.exports;const Ci=An(xc),ji=({src:e,alt:t,width:n,height:a,status:i,borderRadius:s})=>{const[d,c]=m.useState(!1),o=m.useRef(null);return m.useEffect(()=>{const u=new IntersectionObserver(p=>{for(const x of p)if(x.isIntersecting){const j=new Image;j.onload=()=>c(!0),j.onerror=()=>{o.current&&(u.unobserve(o.current),o.current.parentElement.style.display="none")},j.src=e,o.current&&u.unobserve(o.current)}}),l=o.current;return l&&u.observe(l),()=>u.disconnect()},[e]),r.jsxs("div",{className:"image-container",ref:o,children:[!d&&r.jsx("div",{style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"},children:r.jsx(_n,{text:{rows:0},image:{style:{width:n,height:a,margin:"0",borderRadius:s}},animation:!0})}),d&&r.jsx("img",{className:i!=="unread"?"read":"",src:e,alt:t,style:{width:n,height:a,objectFit:"cover",borderRadius:s}})]})},bc=({url:e})=>r.jsx("img",{className:"feed-icon",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),wc=({entry:e,showFeedIcon:t})=>r.jsxs("div",{children:[r.jsx(z.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(z.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(bc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),dr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),Cc=({entry:e,handleEntryClick:t})=>{const n=y(c=>c.activeContent),a=y(c=>c.showFeedIcon),i=n&&e.id===n.id,s=()=>t(e),d=e.imgSrc?r.jsx("div",{className:"cover-image",children:r.jsx(ji,{width:"100%",height:"160px",alt:e.id,src:e.imgSrc,status:e.status})}):null;return r.jsx("div",{className:"article-card",children:r.jsx(Rt,{className:Ci("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:s,cover:d,children:r.jsx(Rt.Meta,{description:r.jsx(wc,{entry:e,showFeedIcon:a})})})},e.id)},jc=({url:e})=>r.jsx("img",{className:"feed-icon-mini",src:`https://icons.duckduckgo.com/ip3/${new URL(e).hostname}.ico`,alt:"Icon"}),Ec=({entry:e,showFeedIcon:t})=>r.jsxs("div",{style:{display:"flex",paddingLeft:t?"22px":"0"},children:[r.jsxs("div",{style:{marginRight:"10px",flex:1},children:[r.jsx(z.Text,{className:e.status==="unread"?"title-unread":"title-read",children:e.title}),r.jsxs(z.Text,{className:"article-info",children:[r.jsx("br",{}),t&&r.jsx(jc,{url:e.feed.site_url}),e.feed.title,r.jsx("br",{}),dr(e.published_at)]}),e.starred&&r.jsx(On,{className:"icon-starred"})]}),e.imgSrc&&r.jsx("div",{className:"thumbnail",children:r.jsx(ji,{width:"100px",height:"100px",alt:e.id,src:e.imgSrc,status:e.status,borderRadius:"4px"})})]}),Sc=({entry:e,handleEntryClick:t})=>{const n=y(d=>d.activeContent),a=y(d=>d.showFeedIcon),i=n&&e.id===n.id,s=()=>t(e);return r.jsx("div",{className:"article-card",children:r.jsx(Rt,{className:Ci("card-custom-hover-style",{"card-custom-selected-style":i}),hoverable:!0,"data-entry-id":e.id,style:{width:"100%",cursor:"pointer"},onClick:s,children:r.jsx(Rt.Meta,{description:r.jsx(Ec,{entry:e,showFeedIcon:a})})})},e.id)},Tc=({loading:e})=>{const t=y(i=>i.layout),n=t==="large"?2:4,a=i=>r.jsx(Rt,{style:{width:"100%",marginBottom:"10px"},cover:t==="large"&&r.jsx("div",{style:{width:"100%",aspectRatio:16/9}}),children:r.jsx(Rt.Meta,{description:r.jsx(_n,{loading:e,animation:!0,text:{rows:3,width:150}})})},i);return e?Array.from({length:n},(i,s)=>a(s)):null},Ei=()=>{const{entries:e,filterStatus:t,filterString:n,filterType:a,setFilteredEntries:i,setFilterStatus:s,setFilterString:d,setFilterType:c}=m.useContext(ht);return m.useEffect(()=>{i([]);const o=Fa(e,a,t,n);i(o)},[t,n,a]),{setFilterStatus:s,setFilterString:d,setFilterType:c}},_c=()=>{const{filterString:e,filterType:t}=m.useContext(ht),n=y(o=>o.activeContent),a=y(o=>o.setActiveContent),i=y(o=>o.orderDirection),s=y(o=>o.toggleOrderDirection),{setFilterString:d,setFilterType:c}=Ei();return r.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px",width:"100%"},children:[r.jsx(Ye.Search,{allowClear:!0,placeholder:"Search...",value:e,addBefore:r.jsxs(we,{placeholder:"Select type",onChange:c,style:{width:100},value:t,children:[r.jsx(we.Option,{value:"0",children:"Title"}),r.jsx(we.Option,{value:"1",children:"Content"})]}),onFocus:()=>n&&a(null),onChange:d}),r.jsx(Ne,{mini:!0,position:"left",content:i==="desc"?"Newest first":"Oldest first",children:r.jsx(re,{shape:"circle",size:"small",style:{flexShrink:0},icon:i==="desc"?r.jsx(lo,{}):r.jsx(co,{}),onClick:()=>{const o=i==="desc"?"asc":"desc";s(),$e("orderDirection",o)}})})]})},kc=m.forwardRef(({info:e,loading:t,getEntries:n,handleEntryClick:a,cardsRef:i},s)=>{const{filteredEntries:d,filterStatus:c,loadMoreUnreadVisible:o,loadMoreVisible:u}=m.useContext(ht),{loadingMore:l,handleLoadMore:p}=pr(),x=y(j=>j.layout);return r.jsxs("div",{className:"entry-list",ref:s,style:{overflowY:"auto",padding:"10px 10px 0 10px",width:"302px",backgroundColor:"var(--color-fill-1)",flex:"1"},children:[r.jsx(_c,{}),r.jsx(Tc,{loading:t}),t?null:r.jsx("div",{ref:i,children:d.map(j=>{La(j.feed.site_url)||(j.feed.site_url=za(j.feed.feed_url));const g=x==="small"?Sc:Cc;return r.jsx(g,{entry:j,handleEntryClick:a},j.id)})}),!t&&(c==="all"?u:o)&&r.jsxs(re,{onClick:()=>p(e,n),loading:l,long:!0,style:{margin:"10px auto",display:"block"},children:[!l&&r.jsx(uo,{}),"Load more"]})]})}),Ic=m.forwardRef(({info:e,refreshArticleList:t,markAllAsRead:n},a)=>{const{entries:i,filteredEntries:s,filterStatus:d,loading:c,setEntries:o,setFilteredEntries:u,setUnreadCount:l,setUnreadEntries:p,unreadEntries:x}=m.useContext(ht),{setFilterStatus:j}=Ei(),g=y(S=>S.initData),E=y(S=>S.showStatus),C=async()=>{n().then(()=>{te.success("Marked all as read successfully"),g(),o(i.map(S=>({...S,status:"read"}))),p([]),u(d==="all"?s.map(S=>({...S,status:"read"})):[]),l(0)}).catch(()=>{te.error("Failed to mark all as read")})};m.useEffect(()=>{u(d==="all"?i:x)},[d]),m.useEffect(()=>{e.from!=="history"&&j(E)},[E]);const V=S=>{a.current&&a.current.scrollTo(0,0),j(S)};return r.jsxs("div",{className:"entry-panel",style:{backgroundColor:"var(--color-bg-2)",bottom:"0",display:"flex",flexDirection:"row",padding:"8px 10px",zIndex:"2",justifyContent:"space-between",borderTop:"1px solid var(--color-border-2)"},children:[!["starred","history"].includes(e.from)&&r.jsx(ha,{focusLock:!0,title:"Mark All As Read?",onOk:C,children:r.jsx(re,{icon:r.jsx(la,{}),shape:"circle"})}),r.jsxs(an.Group,{disabled:e.from==="history",name:"lang",onChange:S=>V(S),type:"button",value:e.from==="history"?"all":d,children:[r.jsx(an,{value:"all",children:"ALL"}),r.jsx(an,{value:"unread",children:"UNREAD"})]}),r.jsx(re,{icon:r.jsx(fa,{}),loading:c,shape:"circle",onClick:t})]})}),Jt=({info:e,getEntries:t,markAllAsRead:n})=>{const a=y(T=>T.activeContent),i=y(T=>T.setActiveContent),s=y(T=>T.setReadCount),d=y(T=>T.setStarredCount),c=y(T=>T.setUnreadToday),o=y(T=>T.setUnreadTotal),u=y(T=>T.updateFeedUnreadCount),l=y(T=>T.updateGroupUnreadCount),p=y(T=>T.showAllFeeds),x=y(T=>T.hiddenFeedIds),j=y(T=>T.orderBy),g=y(T=>T.orderDirection),E=y(T=>T.initData),C=y(T=>T.isInitCompleted),{entries:V,entryDetailRef:S,filteredEntries:v,filterStatus:I,loading:U,setEntries:w,setFilteredEntries:_,setLoading:M,setLoadMoreUnreadVisible:R,setLoadMoreVisible:W,setOffset:Pe,setTotal:me,setUnreadCount:Ze,setUnreadEntries:Ee,setUnreadOffset:ee,total:de,unreadCount:Fe,unreadEntries:Se}=m.useContext(ht),{handleFetchContent:pt,handleToggleStarred:h,handleToggleStatus:f,handleEntryStatusUpdate:k}=hr(),{getFirstImage:A}=pr(),[P,O]=m.useState(!1),[N,F]=m.useState(!1),[L,G]=m.useState(!1),B=m.useRef(null),J=m.useRef(null);m.useEffect(()=>{O(a!==null)},[a]),m.useEffect(()=>{!L||e.from==="history"||setTimeout(()=>{_e()},200)},[j]),m.useEffect(()=>{L&&setTimeout(()=>{_e()},200)},[g]),m.useEffect(()=>{["all","today"].includes(e.from)?_(()=>p?I==="all"?V:Se:V.filter(T=>!x.includes(T.feed.id))):_(()=>I==="all"?V:Se),F(!0)},[I,x,p]),m.useEffect(()=>{if(!(Fe===0||de===0))switch(e.from){case"all":p&&o(()=>Fe);break;case"today":c(()=>Fe);break;case"starred":d(()=>de);break;case"history":s(()=>de);break;case"feed":{const T=Number.parseInt(e.id);u(T,Fe);break}case"group":{const T=Number.parseInt(e.id);l(T,Fe);break}}},[de,Fe]);const Z=async T=>{O(!1),setTimeout(()=>{i({...T,status:"read"})},200),T.status==="unread"&&(setTimeout(()=>{k(T,"read")},200),Ia(T.id,"read").catch(()=>{te.error("Failed to mark entry as read, please try again later"),k(T,"unread")})),S.current&&(S.current.setAttribute("tabIndex","-1"),S.current.focus(),S.current.scrollTo(0,0))},{handleBKey:ae,handleDKey:H,handleEscapeKey:$,handleLeftKey:be,handleMKey:se,handleRightKey:ge,handleSKey:Oe}=mr(e,Z,t);m.useEffect(()=>{const T={27:()=>$(B),37:()=>be(),39:()=>ge(e),66:()=>ae(),68:()=>H(pt),77:()=>se(f),83:()=>Oe(h)},ue=ve=>{const fe=T[ve.keyCode];fe&&fe()};return P?document.addEventListener("keydown",ue):document.removeEventListener("keydown",ue),()=>{document.removeEventListener("keydown",ue)}},[a,v,P]);const le=(T,ue,ve,fe)=>{w(T),Ee(ue),_(Qn(I==="all"?T:ue,e,p,x)),me(ve.data.total),W(T.length<ve.data.total),Ze(fe.data.total),R(ue.length<fe.data.total)},ze=(T,ue)=>{var ve,fe;if((ve=T==null?void 0:T.data)!=null&&ve.entries&&((fe=ue==null?void 0:ue.data)==null?void 0:fe.total)>=0){const Be=T.data.entries.map(A),Qe=ue.data.entries.map(A);le(Be,Qe,T,ue)}},Je=async()=>{M(!0);try{const T=await t();if(e.from==="history")ze(T,T);else{const ue=await t(0,"unread");ze(T,ue)}}catch(T){console.error("Error fetching articles:",T)}finally{M(!1)}},_e=async()=>{if(B.current&&B.current.scrollTo(0,0),Pe(0),ee(0),!C){E();return}await Je()};return m.useEffect(()=>{a&&i(null)},[]),m.useEffect(()=>{C&&Je().then(()=>G(!0))},[C]),r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:{display:"flex",flexDirection:"column",borderRight:"1px solid var(--color-border-2)"},className:"entry-col",children:[r.jsx(Fr,{in:!U,timeout:200,nodeRef:J,classNames:"fade",children:r.jsx(kc,{info:e,cardsRef:J,loading:U,getEntries:t,handleEntryClick:Z,ref:B})}),r.jsx(Ic,{info:e,refreshArticleList:_e,markAllAsRead:n,ref:B})]}),r.jsx(Fr,{in:P,timeout:200,nodeRef:S,classNames:"fade",unmountOnExit:!0,children:r.jsx(yc,{ref:S})}),r.jsx(Xs,{info:e,handleEntryClick:Z,getEntries:t,isFilteredEntriesUpdated:N,setIsFilteredEntriesUpdated:F}),r.jsx(qs,{info:e,handleEntryClick:Z,getEntries:t,isFilteredEntriesUpdated:N,setIsFilteredEntriesUpdated:F})]})},Mc=()=>{const e=async()=>{const t=await ns();return oe.put(`/v1/users/${t.data.id}/mark-all-as-read`)};return r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"all",id:""},getEntries:hs,markAllAsRead:e})})},Ac=()=>{const e=dn(),t=fo();return console.error(t),r.jsx("div",{id:"error-page",style:{top:"30%",position:"relative"},children:r.jsx("div",{children:r.jsx(ho,{status:"404",subTitle:"Whoops, that page is gone. ",extra:[r.jsx(re,{type:"primary",onClick:()=>e("/"),children:"Back to Home"},"back")]})})})},Pc=()=>{const{id:e}=ba(),t=y(d=>d.orderBy),n=y(d=>d.orderDirection),a=y(d=>d.pageSize),i=async(d=0,c=null)=>{const o={baseUrl:`/v1/feeds/${e}/entries`,orderField:t,direction:n,offset:d,limit:a,status:c},u=Kt(o);return oe.get(u)},s=async()=>oe.put(`/v1/feeds/${id}/mark-all-as-read`);return r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"feed",id:e},getEntries:i,markAllAsRead:s})})},Fc=()=>{const{id:e}=ba(),t=y(d=>d.orderBy),n=y(d=>d.orderDirection),a=y(d=>d.pageSize),i=async(d=0,c=null)=>{const o={baseUrl:`/v1/categories/${e}/entries`,orderField:t,direction:n,offset:d,limit:a,status:c},u=Kt(o);return oe.get(u)},s=async()=>oe.put(`/v1/categories/${e}/mark-all-as-read`);return r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"group",id:e},getEntries:i,markAllAsRead:s})})},Oc=()=>r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"history",id:""},getEntries:Ma})}),Nc=e=>{var a;const t=e.getFieldsValue();let n=!0;for(const i of Object.keys(t))if(i!=="password"){const s=(a=t[i])==null?void 0:a.trim();e.setFieldValue(i,s),s||(n=!1)}else t[i]||(n=!1);return n},Cn=(e,t)=>{e.key==="Enter"&&t.submit()},Rc=()=>{const[e]=po(),[t,n]=m.useState(!1),[a,i]=m.useState(kn()||"token"),s=dn();m.useEffect(()=>{kn()&&s("/")},[s]);const d=async()=>{n(!0);try{(await sa({url:"/v1/me",method:"get",baseURL:e.getFieldsValue().server,headers:{"X-Auth-Token":e.getFieldsValue().token},auth:{username:e.getFieldsValue().username,password:e.getFieldsValue().password},timeout:5e3})).status===200&&(te.success("Success"),Qo(a,e.getFieldsValue()),s("/"))}catch(o){console.error(o),te.error(o.message)}n(!1)},c=()=>{d()};return r.jsx("div",{style:{backgroundColor:"var(--color-bg-1)",height:"100%"},children:r.jsx("div",{style:{backgroundColor:"var(--color-fill-1)",height:"100%"},children:r.jsxs("div",{style:{display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"100%",overflowY:"auto"},children:[r.jsx(pa,{style:{fontSize:48,color:"rgb(var(--primary-6))",marginTop:"20px"}}),r.jsx(z.Title,{heading:3,children:"Connect to your server"}),r.jsxs(Rt,{style:{boxShadow:"0 4px 10px rgb(var(--color-bg-3))",padding:"20px",width:"380px",marginTop:"20px"},children:[r.jsxs(xe,{autoComplete:"off",form:e,layout:"vertical",onSubmit:()=>{Nc(e)?c():te.error("Please fill in all required fields")},children:[r.jsx(xe.Item,{field:"server",label:"Server address",rules:[{required:!0}],onKeyDown:o=>{Cn(o,e)},children:r.jsx(Ye,{disabled:t,placeholder:"Please input server address",prefix:r.jsx(mo,{})})}),a==="token"&&r.jsx(xe.Item,{field:"token",label:"API Token",rules:[{required:!0}],onKeyDown:o=>{Cn(o,e)},children:r.jsx(Ye,{disabled:t,placeholder:"Please input api token",prefix:r.jsx(Or,{})})}),a==="user"&&r.jsxs(r.Fragment,{children:[r.jsx(xe.Item,{field:"username",label:"Username",rules:[{required:!0}],onKeyDown:o=>{Cn(o,e)},children:r.jsx(Ye,{disabled:t,prefix:r.jsx(da,{}),placeholder:"Please input username"})}),r.jsx(xe.Item,{field:"password",label:"Password",rules:[{required:!0}],onKeyDown:o=>{Cn(o,e)},children:r.jsx(Ye.Password,{disabled:t,prefix:r.jsx(Or,{}),placeholder:"Please input password"})})]})]}),r.jsx(re,{loading:t,type:"primary",long:!0,onClick:c,style:{marginTop:"20px"},children:"Connect"}),r.jsx(rt,{orientation:"center",children:"Or connect with"}),r.jsx(re,{type:"secondary",long:!0,onClick:()=>i(a==="token"?"user":"token"),style:{marginTop:"20px"},children:a==="token"?"Username and password":"API Token"})]}),r.jsxs("div",{style:{display:"flex",marginTop:"40px"},children:[r.jsx(z.Text,{disabled:!0,children:"Need more information?"}),r.jsx(go,{href:"https://miniflux.app/docs/api.html#authentication",style:{fontWeight:"500"},children:"Go to Miniflux official website"})]})]})})})},Dc=({children:e})=>kn()?r.jsx(r.Fragment,{children:e}):r.jsx(wa,{to:"/login"}),Lc=()=>r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"starred",id:""},getEntries:Aa})}),zc=()=>{const e=async()=>{const t=await jn(0,"unread"),n=t.data.entries.map(a=>a.id);if(t.data.total>n.length){const a=t.data.total-n.length,i=Math.ceil(a/100)*100,s=await jn(n.length,"unread",i);n.push(...s.data.entries.map(d=>d.id))}return ka(n,"read")};return r.jsx(Zt,{children:r.jsx(Jt,{info:{from:"today",id:""},getEntries:jn,markAllAsRead:e})})},Bc=ce("homePage"),Uc=[{path:"/all",element:r.jsx(Mc,{})},{path:"/today",element:r.jsx(zc,{})},{path:"/starred",element:r.jsx(Lc,{})},{path:"/history",element:r.jsx(Oc,{})},{path:"/group/:id",element:r.jsx(Fc,{})},{path:"/feed/:id",element:r.jsx(Pc,{})}],Vc=vo([{path:"/",element:r.jsx(Dc,{children:r.jsx(Ws,{})}),errorElement:r.jsx(Ac,{}),children:[...Uc,{index:!0,element:r.jsx(wa,{to:`/${Bc}`,replace:!0})}]},{path:"/login",element:r.jsx(Rc,{})}]),Si=Vc;yo.createRoot(document.getElementById("root")).render(r.jsx(xo,{locale:bo,children:r.jsx(wo,{router:Si})}))});export default Hc();
